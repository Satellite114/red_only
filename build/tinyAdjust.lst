ARM GAS  C:\usertemp\cctDi7SJ.s 			page 1


   1              		.cpu cortex-m33
   2              		.arch armv8-m.main
   3              		.fpu fpv4-sp-d16
   4              		.arch_extension dsp
   5              		.eabi_attribute 27, 1
   6              		.eabi_attribute 28, 1
   7              		.eabi_attribute 20, 1
   8              		.eabi_attribute 21, 1
   9              		.eabi_attribute 23, 3
  10              		.eabi_attribute 24, 1
  11              		.eabi_attribute 25, 1
  12              		.eabi_attribute 26, 1
  13              		.eabi_attribute 30, 1
  14              		.eabi_attribute 34, 1
  15              		.eabi_attribute 18, 4
  16              		.file	"tinyAdjust.c"
  17              		.text
  18              	.Ltext0:
  19              		.cfi_sections	.debug_frame
  20              		.file 1 "TINYC256_192/tinyAdjust.c"
  21              		.section	.text.read_nuc_parameter,"ax",%progbits
  22              		.align	1
  23              		.global	read_nuc_parameter
  24              		.syntax unified
  25              		.thumb
  26              		.thumb_func
  28              	read_nuc_parameter:
  29              	.LFB3:
   1:TINYC256_192/tinyAdjust.c **** #include "tinyAdjust.h"
   2:TINYC256_192/tinyAdjust.c **** #include "all_config.h"
   3:TINYC256_192/tinyAdjust.c **** #include "stdio.h"
   4:TINYC256_192/tinyAdjust.c **** #include "falcon_cmd.h"
   5:TINYC256_192/tinyAdjust.c **** 
   6:TINYC256_192/tinyAdjust.c **** 
   7:TINYC256_192/tinyAdjust.c **** uint16_t correct_table[TAU_TABLE_SIZE] = {0};
   8:TINYC256_192/tinyAdjust.c **** EnvParam_t org_env_param = {0, 0, 0, 0}; // origin environment parameter
   9:TINYC256_192/tinyAdjust.c **** EnvParam_t new_env_param = {0, 0, 0, 0}; // new environment parameter
  10:TINYC256_192/tinyAdjust.c **** uint8_t gain_flag = 1;
  11:TINYC256_192/tinyAdjust.c **** EnvFactor_t org_env_factor = {0};   // origin environment correction factor
  12:TINYC256_192/tinyAdjust.c **** EnvFactor_t new_env_factor = {0};   // new environment correction factor
  13:TINYC256_192/tinyAdjust.c **** uint16_t nuc_table[NUCT_LEN] = {0}; // nuc-t table
  14:TINYC256_192/tinyAdjust.c **** 
  15:TINYC256_192/tinyAdjust.c **** char read_nuc_parameter(void)
  16:TINYC256_192/tinyAdjust.c **** {
  30              		.loc 1 16 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 256
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34 0000 30B5     		push	{r4, r5, lr}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 12
  37              		.cfi_offset 4, -12
  38              		.cfi_offset 5, -8
  39              		.cfi_offset 14, -4
  40 0002 C1B0     		sub	sp, sp, #260
  41              	.LCFI1:
  42              		.cfi_def_cfa_offset 272
ARM GAS  C:\usertemp\cctDi7SJ.s 			page 2


  17:TINYC256_192/tinyAdjust.c ****     int i = 0;
  43              		.loc 1 17 5 view .LVU1
  44              	.LVL0:
  18:TINYC256_192/tinyAdjust.c ****     int j = 0;
  45              		.loc 1 18 5 view .LVU2
  19:TINYC256_192/tinyAdjust.c ****     uint8_t temp = 0;
  46              		.loc 1 19 5 view .LVU3
  20:TINYC256_192/tinyAdjust.c ****     uint8_t data[0x100] = {0};
  47              		.loc 1 20 5 view .LVU4
  48              		.loc 1 20 13 is_stmt 0 view .LVU5
  49 0004 4FF48072 		mov	r2, #256
  50 0008 0021     		movs	r1, #0
  51 000a 6846     		mov	r0, sp
  52 000c FFF7FEFF 		bl	memset
  53              	.LVL1:
  21:TINYC256_192/tinyAdjust.c ****     for (i = 0; i < sizeof(nuc_table) / sizeof(data); i++)
  54              		.loc 1 21 5 is_stmt 1 view .LVU6
  55              		.loc 1 21 12 is_stmt 0 view .LVU7
  56 0010 0025     		movs	r5, #0
  57              		.loc 1 21 5 view .LVU8
  58 0012 10E0     		b	.L2
  59              	.LVL2:
  60              	.L5:
  22:TINYC256_192/tinyAdjust.c ****     {
  23:TINYC256_192/tinyAdjust.c ****         if (spi_read(0xda000 + i * sizeof(data), sizeof(data), data) != IR_SUCCESS) // high gain is
  24:TINYC256_192/tinyAdjust.c ****         {
  25:TINYC256_192/tinyAdjust.c ****             // printf("get nuc-t table failed\n");
  26:TINYC256_192/tinyAdjust.c ****             return FAIL;
  27:TINYC256_192/tinyAdjust.c ****         }
  28:TINYC256_192/tinyAdjust.c ****         // memcpy(nuc_table+i*sizeof(data),data,sizeof(data));
  29:TINYC256_192/tinyAdjust.c ****         for (j = 0; j < sizeof(data);)
  30:TINYC256_192/tinyAdjust.c ****         {
  31:TINYC256_192/tinyAdjust.c ****             nuc_table[(i * sizeof(data) + j) / 2] = ((uint16_t)data[j] << 8) + data[j + 1];
  61              		.loc 1 31 13 is_stmt 1 view .LVU9
  62              		.loc 1 31 68 is_stmt 0 view .LVU10
  63 0014 1DF80300 		ldrb	r0, [sp, r3]	@ zero_extendqisi2
  64              		.loc 1 31 87 view .LVU11
  65 0018 5A1C     		adds	r2, r3, #1
  66              		.loc 1 31 84 view .LVU12
  67 001a 1DF80210 		ldrb	r1, [sp, r2]	@ zero_extendqisi2
  68              		.loc 1 31 41 view .LVU13
  69 001e 03EB0422 		add	r2, r3, r4, lsl #8
  70              		.loc 1 31 46 view .LVU14
  71 0022 5208     		lsrs	r2, r2, #1
  72              		.loc 1 31 78 view .LVU15
  73 0024 01EB0021 		add	r1, r1, r0, lsl #8
  74              		.loc 1 31 51 view .LVU16
  75 0028 0C48     		ldr	r0, .L10
  76 002a 20F81210 		strh	r1, [r0, r2, lsl #1]	@ movhi
  32:TINYC256_192/tinyAdjust.c ****             j = j + 2;
  77              		.loc 1 32 13 is_stmt 1 view .LVU17
  78              		.loc 1 32 15 is_stmt 0 view .LVU18
  79 002e 0233     		adds	r3, r3, #2
  80              	.LVL3:
  81              	.L4:
  29:TINYC256_192/tinyAdjust.c ****         {
  82              		.loc 1 29 23 is_stmt 1 discriminator 1 view .LVU19
ARM GAS  C:\usertemp\cctDi7SJ.s 			page 3


  83 0030 FF2B     		cmp	r3, #255
  84 0032 EFD9     		bls	.L5
  21:TINYC256_192/tinyAdjust.c ****     {
  85              		.loc 1 21 56 discriminator 2 view .LVU20
  86 0034 0135     		adds	r5, r5, #1
  87              	.LVL4:
  88              	.L2:
  21:TINYC256_192/tinyAdjust.c ****     {
  89              		.loc 1 21 19 discriminator 1 view .LVU21
  90 0036 2C46     		mov	r4, r5
  91 0038 3F2D     		cmp	r5, #63
  92 003a 0AD8     		bhi	.L9
  23:TINYC256_192/tinyAdjust.c ****         {
  93              		.loc 1 23 9 view .LVU22
  23:TINYC256_192/tinyAdjust.c ****         {
  94              		.loc 1 23 30 is_stmt 0 view .LVU23
  95 003c 05F55A60 		add	r0, r5, #3488
  23:TINYC256_192/tinyAdjust.c ****         {
  96              		.loc 1 23 13 view .LVU24
  97 0040 6A46     		mov	r2, sp
  98 0042 4FF48071 		mov	r1, #256
  99 0046 0002     		lsls	r0, r0, #8
 100 0048 FFF7FEFF 		bl	spi_read
 101              	.LVL5:
  23:TINYC256_192/tinyAdjust.c ****         {
 102              		.loc 1 23 12 discriminator 1 view .LVU25
 103 004c 18B9     		cbnz	r0, .L7
  29:TINYC256_192/tinyAdjust.c ****         {
 104              		.loc 1 29 16 view .LVU26
 105 004e 0023     		movs	r3, #0
 106 0050 EEE7     		b	.L4
 107              	.L9:
  33:TINYC256_192/tinyAdjust.c ****         }
  34:TINYC256_192/tinyAdjust.c ****     }
  35:TINYC256_192/tinyAdjust.c ****     // printf("get nuc-t table successed\n");
  36:TINYC256_192/tinyAdjust.c ****     return SUCCESS;
 108              		.loc 1 36 12 view .LVU27
 109 0052 0020     		movs	r0, #0
 110 0054 00E0     		b	.L3
 111              	.L7:
  26:TINYC256_192/tinyAdjust.c ****         }
 112              		.loc 1 26 20 view .LVU28
 113 0056 FF20     		movs	r0, #255
 114              	.L3:
  37:TINYC256_192/tinyAdjust.c **** }
 115              		.loc 1 37 1 view .LVU29
 116 0058 41B0     		add	sp, sp, #260
 117              	.LCFI2:
 118              		.cfi_def_cfa_offset 12
 119              		@ sp needed
 120 005a 30BD     		pop	{r4, r5, pc}
 121              	.LVL6:
 122              	.L11:
 123              		.loc 1 37 1 view .LVU30
 124              		.align	2
 125              	.L10:
 126 005c 00000000 		.word	nuc_table
ARM GAS  C:\usertemp\cctDi7SJ.s 			page 4


 127              		.cfi_endproc
 128              	.LFE3:
 130              		.section	.text.calculate_org_env_cali_parameter,"ax",%progbits
 131              		.align	1
 132              		.global	calculate_org_env_cali_parameter
 133              		.syntax unified
 134              		.thumb
 135              		.thumb_func
 137              	calculate_org_env_cali_parameter:
 138              	.LFB4:
  38:TINYC256_192/tinyAdjust.c **** 
  39:TINYC256_192/tinyAdjust.c **** char calculate_org_env_cali_parameter(void)
  40:TINYC256_192/tinyAdjust.c **** {
 139              		.loc 1 40 1 is_stmt 1 view -0
 140              		.cfi_startproc
 141              		@ args = 0, pretend = 0, frame = 0
 142              		@ frame_needed = 0, uses_anonymous_args = 0
 143 0000 08B5     		push	{r3, lr}
 144              	.LCFI3:
 145              		.cfi_def_cfa_offset 8
 146              		.cfi_offset 3, -8
 147              		.cfi_offset 14, -4
  41:TINYC256_192/tinyAdjust.c ****     uint8_t gain_flag = HIGH_GAIN;
 148              		.loc 1 41 5 view .LVU32
 149              	.LVL7:
  42:TINYC256_192/tinyAdjust.c ****     if (get_prop_tpd_params(TPD_PROP_EMS, (uint16_t *)&org_env_param.EMS) != IR_SUCCESS)
 150              		.loc 1 42 5 view .LVU33
 151              		.loc 1 42 9 is_stmt 0 view .LVU34
 152 0002 1249     		ldr	r1, .L20
 153 0004 0320     		movs	r0, #3
 154 0006 FFF7FEFF 		bl	get_prop_tpd_params
 155              	.LVL8:
 156              		.loc 1 42 8 discriminator 1 view .LVU35
 157 000a B8B9     		cbnz	r0, .L14
  43:TINYC256_192/tinyAdjust.c ****     {
  44:TINYC256_192/tinyAdjust.c ****         // printf("get EMS failed\n");
  45:TINYC256_192/tinyAdjust.c ****         return FAIL;
  46:TINYC256_192/tinyAdjust.c ****     }
  47:TINYC256_192/tinyAdjust.c ****     if (get_prop_tpd_params(TPD_PROP_TAU, (uint16_t *)&org_env_param.TAU) != IR_SUCCESS)
 158              		.loc 1 47 5 is_stmt 1 view .LVU36
 159              		.loc 1 47 9 is_stmt 0 view .LVU37
 160 000c 1049     		ldr	r1, .L20+4
 161 000e 0420     		movs	r0, #4
 162 0010 FFF7FEFF 		bl	get_prop_tpd_params
 163              	.LVL9:
 164              		.loc 1 47 8 discriminator 1 view .LVU38
 165 0014 A0B9     		cbnz	r0, .L15
  48:TINYC256_192/tinyAdjust.c ****     {
  49:TINYC256_192/tinyAdjust.c ****         // printf("get TAU failed\n");
  50:TINYC256_192/tinyAdjust.c ****         return FAIL;
  51:TINYC256_192/tinyAdjust.c ****     }
  52:TINYC256_192/tinyAdjust.c ****     if (get_prop_tpd_params(TPD_PROP_TA, (uint16_t *)&org_env_param.Ta) != IR_SUCCESS)
 166              		.loc 1 52 5 is_stmt 1 view .LVU39
 167              		.loc 1 52 9 is_stmt 0 view .LVU40
 168 0016 0F49     		ldr	r1, .L20+8
 169 0018 0220     		movs	r0, #2
 170 001a FFF7FEFF 		bl	get_prop_tpd_params
ARM GAS  C:\usertemp\cctDi7SJ.s 			page 5


 171              	.LVL10:
 172              		.loc 1 52 8 discriminator 1 view .LVU41
 173 001e 88B9     		cbnz	r0, .L16
  53:TINYC256_192/tinyAdjust.c ****     {
  54:TINYC256_192/tinyAdjust.c ****         // printf("get TA failed\n");
  55:TINYC256_192/tinyAdjust.c ****         return FAIL;
  56:TINYC256_192/tinyAdjust.c ****     }
  57:TINYC256_192/tinyAdjust.c ****     if (get_prop_tpd_params(TPD_PROP_TU, (uint16_t *)&org_env_param.Tu) != IR_SUCCESS)
 174              		.loc 1 57 5 is_stmt 1 view .LVU42
 175              		.loc 1 57 9 is_stmt 0 view .LVU43
 176 0020 0D49     		ldr	r1, .L20+12
 177 0022 0120     		movs	r0, #1
 178 0024 FFF7FEFF 		bl	get_prop_tpd_params
 179              	.LVL11:
 180              		.loc 1 57 8 discriminator 1 view .LVU44
 181 0028 70B9     		cbnz	r0, .L17
  58:TINYC256_192/tinyAdjust.c ****     {
  59:TINYC256_192/tinyAdjust.c ****         // printf("get TU failed\n");
  60:TINYC256_192/tinyAdjust.c ****         return FAIL;
  61:TINYC256_192/tinyAdjust.c ****     }
  62:TINYC256_192/tinyAdjust.c ****     if (calculate_org_KE_and_BE_with_nuc_t(&org_env_param, nuc_table, gain_flag, &org_env_factor) !
 182              		.loc 1 62 5 is_stmt 1 view .LVU45
 183              		.loc 1 62 9 is_stmt 0 view .LVU46
 184 002a 0C4B     		ldr	r3, .L20+16
 185 002c 0122     		movs	r2, #1
 186 002e 0C49     		ldr	r1, .L20+20
 187 0030 0648     		ldr	r0, .L20
 188 0032 FFF7FEFF 		bl	calculate_org_KE_and_BE_with_nuc_t
 189              	.LVL12:
 190              		.loc 1 62 8 discriminator 1 view .LVU47
 191 0036 10B1     		cbz	r0, .L13
  63:TINYC256_192/tinyAdjust.c ****     {
  64:TINYC256_192/tinyAdjust.c ****         // printf("calculate_KE_and_BE failed\n");
  65:TINYC256_192/tinyAdjust.c ****         return FAIL;
 192              		.loc 1 65 16 view .LVU48
 193 0038 FF20     		movs	r0, #255
 194 003a 00E0     		b	.L13
 195              	.L14:
  45:TINYC256_192/tinyAdjust.c ****     }
 196              		.loc 1 45 16 view .LVU49
 197 003c FF20     		movs	r0, #255
 198              	.L13:
  66:TINYC256_192/tinyAdjust.c ****     }
  67:TINYC256_192/tinyAdjust.c ****     // printf("origin K_E=%d, origin B_E=%d\n", org_env_factor.K_E, org_env_factor.B_E);
  68:TINYC256_192/tinyAdjust.c ****     return SUCCESS;
  69:TINYC256_192/tinyAdjust.c **** }
 199              		.loc 1 69 1 view .LVU50
 200 003e 08BD     		pop	{r3, pc}
 201              	.L15:
  50:TINYC256_192/tinyAdjust.c ****     }
 202              		.loc 1 50 16 view .LVU51
 203 0040 FF20     		movs	r0, #255
 204 0042 FCE7     		b	.L13
 205              	.L16:
  55:TINYC256_192/tinyAdjust.c ****     }
 206              		.loc 1 55 16 view .LVU52
 207 0044 FF20     		movs	r0, #255
ARM GAS  C:\usertemp\cctDi7SJ.s 			page 6


 208 0046 FAE7     		b	.L13
 209              	.L17:
  60:TINYC256_192/tinyAdjust.c ****     }
 210              		.loc 1 60 16 view .LVU53
 211 0048 FF20     		movs	r0, #255
 212 004a F8E7     		b	.L13
 213              	.L21:
 214              		.align	2
 215              	.L20:
 216 004c 00000000 		.word	org_env_param
 217 0050 04000000 		.word	org_env_param+4
 218 0054 08000000 		.word	org_env_param+8
 219 0058 0C000000 		.word	org_env_param+12
 220 005c 00000000 		.word	org_env_factor
 221 0060 00000000 		.word	nuc_table
 222              		.cfi_endproc
 223              	.LFE4:
 225              		.section	.text.calculate_new_env_cali_parameter,"ax",%progbits
 226              		.align	1
 227              		.global	calculate_new_env_cali_parameter
 228              		.syntax unified
 229              		.thumb
 230              		.thumb_func
 232              	calculate_new_env_cali_parameter:
 233              	.LVL13:
 234              	.LFB5:
  70:TINYC256_192/tinyAdjust.c **** 
  71:TINYC256_192/tinyAdjust.c **** char calculate_new_env_cali_parameter(uint16_t *correct_table, float ems, float ta, float tu, float
  72:TINYC256_192/tinyAdjust.c **** {
 235              		.loc 1 72 1 is_stmt 1 view -0
 236              		.cfi_startproc
 237              		@ args = 0, pretend = 0, frame = 8
 238              		@ frame_needed = 0, uses_anonymous_args = 0
 239              		.loc 1 72 1 is_stmt 0 view .LVU55
 240 0000 00B5     		push	{lr}
 241              	.LCFI4:
 242              		.cfi_def_cfa_offset 4
 243              		.cfi_offset 14, -4
 244 0002 2DED048B 		vpush.64	{d8, d9}
 245              	.LCFI5:
 246              		.cfi_def_cfa_offset 20
 247              		.cfi_offset 80, -20
 248              		.cfi_offset 81, -16
 249              		.cfi_offset 82, -12
 250              		.cfi_offset 83, -8
 251 0006 83B0     		sub	sp, sp, #12
 252              	.LCFI6:
 253              		.cfi_def_cfa_offset 32
 254 0008 B0EE409A 		vmov.f32	s18, s0
 255 000c F0EE608A 		vmov.f32	s17, s1
 256 0010 B0EE418A 		vmov.f32	s16, s2
  73:TINYC256_192/tinyAdjust.c ****     uint16_t tau = 0;
 257              		.loc 1 73 5 is_stmt 1 view .LVU56
 258              		.loc 1 73 14 is_stmt 0 view .LVU57
 259 0014 0023     		movs	r3, #0
 260 0016 ADF80630 		strh	r3, [sp, #6]	@ movhi
  74:TINYC256_192/tinyAdjust.c ****     if (read_tau(correct_table, hum, ta, dist, &tau) != IRTEMP_SUCCESS)
ARM GAS  C:\usertemp\cctDi7SJ.s 			page 7


 261              		.loc 1 74 5 is_stmt 1 view .LVU58
 262              		.loc 1 74 9 is_stmt 0 view .LVU59
 263 001a 0DF10601 		add	r1, sp, #6
 264 001e B0EE611A 		vmov.f32	s2, s3
 265              	.LVL14:
 266              		.loc 1 74 9 view .LVU60
 267 0022 B0EE420A 		vmov.f32	s0, s4
 268              	.LVL15:
 269              		.loc 1 74 9 view .LVU61
 270 0026 FFF7FEFF 		bl	read_tau
 271              	.LVL16:
 272              		.loc 1 74 8 discriminator 1 view .LVU62
 273 002a 08BB     		cbnz	r0, .L24
  75:TINYC256_192/tinyAdjust.c ****     {
  76:TINYC256_192/tinyAdjust.c ****         // printf("read tau failed\n");
  77:TINYC256_192/tinyAdjust.c ****         return FAIL;
  78:TINYC256_192/tinyAdjust.c ****     }
  79:TINYC256_192/tinyAdjust.c ****     new_env_param.EMS = ems * (1 << 14);
 274              		.loc 1 79 5 is_stmt 1 view .LVU63
 275              		.loc 1 79 23 is_stmt 0 view .LVU64
 276 002c 1248     		ldr	r0, .L27
 277 002e BEEEC99A 		vcvt.s32.f32	s18, s18, #14
 278              	.LVL17:
 279              		.loc 1 79 23 view .LVU65
 280 0032 80ED009A 		vstr.32	s18, [r0]	@ int
  80:TINYC256_192/tinyAdjust.c ****     new_env_param.TAU = tau;
 281              		.loc 1 80 5 is_stmt 1 view .LVU66
 282              		.loc 1 80 23 is_stmt 0 view .LVU67
 283 0036 BDF80630 		ldrh	r3, [sp, #6]
 284 003a 4360     		str	r3, [r0, #4]
  81:TINYC256_192/tinyAdjust.c ****     new_env_param.Ta = (ta + 273) * (1 << 4);
 285              		.loc 1 81 5 is_stmt 1 view .LVU68
 286              		.loc 1 81 28 is_stmt 0 view .LVU69
 287 003c DFED0F7A 		vldr.32	s15, .L27+4
 288 0040 78EEA70A 		vadd.f32	s1, s17, s15
 289              		.loc 1 81 22 view .LVU70
 290 0044 FEEECE0A 		vcvt.s32.f32	s1, s1, #4
 291 0048 C0ED020A 		vstr.32	s1, [r0, #8]	@ int
  82:TINYC256_192/tinyAdjust.c ****     new_env_param.Tu = (tu + 273) * (1 << 4);
 292              		.loc 1 82 5 is_stmt 1 view .LVU71
 293              		.loc 1 82 28 is_stmt 0 view .LVU72
 294 004c 38EE271A 		vadd.f32	s2, s16, s15
 295              		.loc 1 82 22 view .LVU73
 296 0050 BEEECE1A 		vcvt.s32.f32	s2, s2, #4
 297 0054 80ED031A 		vstr.32	s2, [r0, #12]	@ int
  83:TINYC256_192/tinyAdjust.c ****     if (calculate_new_KE_and_BE_with_nuc_t(&new_env_param, nuc_table, gain_flag, &new_env_factor) !
 298              		.loc 1 83 5 is_stmt 1 view .LVU74
 299              		.loc 1 83 9 is_stmt 0 view .LVU75
 300 0058 094B     		ldr	r3, .L27+8
 301 005a 0A4A     		ldr	r2, .L27+12
 302 005c 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 303 005e 0A49     		ldr	r1, .L27+16
 304 0060 FFF7FEFF 		bl	calculate_new_KE_and_BE_with_nuc_t
 305              	.LVL18:
 306              		.loc 1 83 8 discriminator 1 view .LVU76
 307 0064 30B9     		cbnz	r0, .L25
 308              	.L23:
ARM GAS  C:\usertemp\cctDi7SJ.s 			page 8


  84:TINYC256_192/tinyAdjust.c ****     {
  85:TINYC256_192/tinyAdjust.c ****         // printf("calculate_KE_and_BE failed\n");
  86:TINYC256_192/tinyAdjust.c ****         return FAIL;
  87:TINYC256_192/tinyAdjust.c ****     }
  88:TINYC256_192/tinyAdjust.c ****     // printf("new K_E=%d, new B_E=%d\n", new_env_factor.K_E, new_env_factor.B_E);
  89:TINYC256_192/tinyAdjust.c ****     return SUCCESS;
  90:TINYC256_192/tinyAdjust.c **** }
 309              		.loc 1 90 1 view .LVU77
 310 0066 03B0     		add	sp, sp, #12
 311              	.LCFI7:
 312              		.cfi_remember_state
 313              		.cfi_def_cfa_offset 20
 314              		@ sp needed
 315 0068 BDEC048B 		vldm	sp!, {d8-d9}
 316              	.LCFI8:
 317              		.cfi_restore 82
 318              		.cfi_restore 83
 319              		.cfi_restore 80
 320              		.cfi_restore 81
 321              		.cfi_def_cfa_offset 4
 322              	.LVL19:
 323              		.loc 1 90 1 view .LVU78
 324 006c 5DF804FB 		ldr	pc, [sp], #4
 325              	.LVL20:
 326              	.L24:
 327              	.LCFI9:
 328              		.cfi_restore_state
  77:TINYC256_192/tinyAdjust.c ****     }
 329              		.loc 1 77 16 view .LVU79
 330 0070 FF20     		movs	r0, #255
 331 0072 F8E7     		b	.L23
 332              	.LVL21:
 333              	.L25:
  86:TINYC256_192/tinyAdjust.c ****     }
 334              		.loc 1 86 16 view .LVU80
 335 0074 FF20     		movs	r0, #255
 336 0076 F6E7     		b	.L23
 337              	.L28:
 338              		.align	2
 339              	.L27:
 340 0078 00000000 		.word	new_env_param
 341 007c 00808843 		.word	1133019136
 342 0080 00000000 		.word	new_env_factor
 343 0084 00000000 		.word	gain_flag
 344 0088 00000000 		.word	nuc_table
 345              		.cfi_endproc
 346              	.LFE5:
 348              		.global	__aeabi_f2d
 349              		.global	__aeabi_dsub
 350              		.global	__aeabi_d2f
 351              		.section	.text.temp_calc_with_new_env_calibration,"ax",%progbits
 352              		.align	1
 353              		.global	temp_calc_with_new_env_calibration
 354              		.syntax unified
 355              		.thumb
 356              		.thumb_func
 358              	temp_calc_with_new_env_calibration:
ARM GAS  C:\usertemp\cctDi7SJ.s 			page 9


 359              	.LVL22:
 360              	.LFB6:
  91:TINYC256_192/tinyAdjust.c **** 
  92:TINYC256_192/tinyAdjust.c **** char temp_calc_with_new_env_calibration(float org_temp, float *new_temp)
  93:TINYC256_192/tinyAdjust.c **** {
 361              		.loc 1 93 1 is_stmt 1 view -0
 362              		.cfi_startproc
 363              		@ args = 0, pretend = 0, frame = 8
 364              		@ frame_needed = 0, uses_anonymous_args = 0
 365              		.loc 1 93 1 is_stmt 0 view .LVU82
 366 0000 10B5     		push	{r4, lr}
 367              	.LCFI10:
 368              		.cfi_def_cfa_offset 8
 369              		.cfi_offset 4, -8
 370              		.cfi_offset 14, -4
 371 0002 82B0     		sub	sp, sp, #8
 372              	.LCFI11:
 373              		.cfi_def_cfa_offset 16
 374 0004 0446     		mov	r4, r0
  94:TINYC256_192/tinyAdjust.c ****     uint16_t nuc_cal = 0;
 375              		.loc 1 94 5 is_stmt 1 view .LVU83
 376              		.loc 1 94 14 is_stmt 0 view .LVU84
 377 0006 0023     		movs	r3, #0
 378 0008 ADF80630 		strh	r3, [sp, #6]	@ movhi
  95:TINYC256_192/tinyAdjust.c ****     uint16_t nuc_org = 0;
 379              		.loc 1 95 5 is_stmt 1 view .LVU85
 380              		.loc 1 95 14 is_stmt 0 view .LVU86
 381 000c ADF80430 		strh	r3, [sp, #4]	@ movhi
  96:TINYC256_192/tinyAdjust.c ****     irtemp_error_t ret;
 382              		.loc 1 96 5 is_stmt 1 view .LVU87
  97:TINYC256_192/tinyAdjust.c ****     uint16_t temp_data = 0;
 383              		.loc 1 97 5 view .LVU88
 384              		.loc 1 97 14 is_stmt 0 view .LVU89
 385 0010 ADF80230 		strh	r3, [sp, #2]	@ movhi
  98:TINYC256_192/tinyAdjust.c **** 
  99:TINYC256_192/tinyAdjust.c ****     ret = reverse_calc_NUC_with_nuc_t(nuc_table, org_temp - 273.15, &nuc_cal);
 386              		.loc 1 99 5 is_stmt 1 view .LVU90
 387              		.loc 1 99 59 is_stmt 0 view .LVU91
 388 0014 10EE100A 		vmov	r0, s0
 389              	.LVL23:
 390              		.loc 1 99 59 view .LVU92
 391 0018 FFF7FEFF 		bl	__aeabi_f2d
 392              	.LVL24:
 393              		.loc 1 99 59 view .LVU93
 394 001c 22A3     		adr	r3, .L36+16
 395 001e D3E90023 		ldrd	r2, [r3]
 396 0022 FFF7FEFF 		bl	__aeabi_dsub
 397              	.LVL25:
 398              		.loc 1 99 11 view .LVU94
 399 0026 FFF7FEFF 		bl	__aeabi_d2f
 400              	.LVL26:
 401 002a 00EE100A 		vmov	s0, r0
 402 002e 0DF10601 		add	r1, sp, #6
 403 0032 1948     		ldr	r0, .L36
 404 0034 FFF7FEFF 		bl	reverse_calc_NUC_with_nuc_t
 405              	.LVL27:
 100:TINYC256_192/tinyAdjust.c ****     if (ret != IRTEMP_SUCCESS)
ARM GAS  C:\usertemp\cctDi7SJ.s 			page 10


 406              		.loc 1 100 5 is_stmt 1 view .LVU95
 407              		.loc 1 100 8 is_stmt 0 view .LVU96
 408 0038 18BB     		cbnz	r0, .L31
 101:TINYC256_192/tinyAdjust.c ****     {
 102:TINYC256_192/tinyAdjust.c ****         // printf("reverse_calc_NUC_with_nuc_t failed\n");
 103:TINYC256_192/tinyAdjust.c ****         return FAIL;
 104:TINYC256_192/tinyAdjust.c ****     };
 409              		.loc 1 104 6 is_stmt 1 view .LVU97
 105:TINYC256_192/tinyAdjust.c ****     // // printf("nuc_cal=%d\n",nuc_cal);
 106:TINYC256_192/tinyAdjust.c ****     ret = reverse_calc_NUC_without_env_correct(&org_env_factor, nuc_cal, &nuc_org);
 410              		.loc 1 106 5 view .LVU98
 411              		.loc 1 106 11 is_stmt 0 view .LVU99
 412 003a 01AA     		add	r2, sp, #4
 413 003c BDF80610 		ldrh	r1, [sp, #6]
 414 0040 1648     		ldr	r0, .L36+4
 415              	.LVL28:
 416              		.loc 1 106 11 view .LVU100
 417 0042 FFF7FEFF 		bl	reverse_calc_NUC_without_env_correct
 418              	.LVL29:
 107:TINYC256_192/tinyAdjust.c ****     if (ret != IRTEMP_SUCCESS)
 419              		.loc 1 107 5 is_stmt 1 view .LVU101
 420              		.loc 1 107 8 is_stmt 0 view .LVU102
 421 0046 F8B9     		cbnz	r0, .L32
 108:TINYC256_192/tinyAdjust.c ****     {
 109:TINYC256_192/tinyAdjust.c ****         // printf("reverse_calc_NUC_without_env_correct failed\n");
 110:TINYC256_192/tinyAdjust.c ****         return FAIL;
 111:TINYC256_192/tinyAdjust.c ****     };
 422              		.loc 1 111 6 is_stmt 1 view .LVU103
 112:TINYC256_192/tinyAdjust.c ****     // // printf("nuc_org=%d\n",nuc_org);
 113:TINYC256_192/tinyAdjust.c ****     ret = recalc_NUC_with_env_correct(&new_env_factor, nuc_org, &nuc_cal);
 423              		.loc 1 113 5 view .LVU104
 424              		.loc 1 113 11 is_stmt 0 view .LVU105
 425 0048 0DF10602 		add	r2, sp, #6
 426 004c BDF80410 		ldrh	r1, [sp, #4]
 427 0050 1348     		ldr	r0, .L36+8
 428              	.LVL30:
 429              		.loc 1 113 11 view .LVU106
 430 0052 FFF7FEFF 		bl	recalc_NUC_with_env_correct
 431              	.LVL31:
 114:TINYC256_192/tinyAdjust.c ****     if (ret != IRTEMP_SUCCESS)
 432              		.loc 1 114 5 is_stmt 1 view .LVU107
 433              		.loc 1 114 8 is_stmt 0 view .LVU108
 434 0056 C8B9     		cbnz	r0, .L33
 115:TINYC256_192/tinyAdjust.c ****     {
 116:TINYC256_192/tinyAdjust.c ****         // printf("recalc_NUC_with_env_correct failed\n");
 117:TINYC256_192/tinyAdjust.c ****         return FAIL;
 118:TINYC256_192/tinyAdjust.c ****     };
 435              		.loc 1 118 6 is_stmt 1 view .LVU109
 119:TINYC256_192/tinyAdjust.c ****     // // printf("nuc_cal=%d\n",nuc_cal);
 120:TINYC256_192/tinyAdjust.c ****     ret = remap_temp(nuc_table, nuc_cal, &temp_data);
 436              		.loc 1 120 5 view .LVU110
 437              		.loc 1 120 11 is_stmt 0 view .LVU111
 438 0058 0DF10202 		add	r2, sp, #2
 439 005c BDF80610 		ldrh	r1, [sp, #6]
 440 0060 0D48     		ldr	r0, .L36
 441              	.LVL32:
 442              		.loc 1 120 11 view .LVU112
ARM GAS  C:\usertemp\cctDi7SJ.s 			page 11


 443 0062 FFF7FEFF 		bl	remap_temp
 444              	.LVL33:
 121:TINYC256_192/tinyAdjust.c ****     if (ret != IRTEMP_SUCCESS)
 445              		.loc 1 121 5 is_stmt 1 view .LVU113
 446              		.loc 1 121 8 is_stmt 0 view .LVU114
 447 0066 98B9     		cbnz	r0, .L34
 122:TINYC256_192/tinyAdjust.c ****     {
 123:TINYC256_192/tinyAdjust.c ****         // printf("remap_temp failed\n");
 124:TINYC256_192/tinyAdjust.c ****         return FAIL;
 125:TINYC256_192/tinyAdjust.c ****     };
 448              		.loc 1 125 6 is_stmt 1 view .LVU115
 126:TINYC256_192/tinyAdjust.c ****     *new_temp = (float)temp_data / 16;
 449              		.loc 1 126 5 view .LVU116
 450              		.loc 1 126 17 is_stmt 0 view .LVU117
 451 0068 BDF80230 		ldrh	r3, [sp, #2]
 452 006c 07EE903A 		vmov	s15, r3	@ int
 453 0070 F8EE677A 		vcvt.f32.u32	s15, s15
 454              		.loc 1 126 34 view .LVU118
 455 0074 9FED0B7A 		vldr.32	s14, .L36+12
 456 0078 67EE877A 		vmul.f32	s15, s15, s14
 457              		.loc 1 126 15 view .LVU119
 458 007c C4ED007A 		vstr.32	s15, [r4]
 127:TINYC256_192/tinyAdjust.c ****     return SUCCESS;
 459              		.loc 1 127 5 is_stmt 1 view .LVU120
 460              		.loc 1 127 12 is_stmt 0 view .LVU121
 461 0080 00E0     		b	.L30
 462              	.L31:
 103:TINYC256_192/tinyAdjust.c ****     };
 463              		.loc 1 103 16 view .LVU122
 464 0082 FF20     		movs	r0, #255
 465              	.LVL34:
 466              	.L30:
 128:TINYC256_192/tinyAdjust.c **** }
 467              		.loc 1 128 1 view .LVU123
 468 0084 02B0     		add	sp, sp, #8
 469              	.LCFI12:
 470              		.cfi_remember_state
 471              		.cfi_def_cfa_offset 8
 472              		@ sp needed
 473 0086 10BD     		pop	{r4, pc}
 474              	.LVL35:
 475              	.L32:
 476              	.LCFI13:
 477              		.cfi_restore_state
 110:TINYC256_192/tinyAdjust.c ****     };
 478              		.loc 1 110 16 view .LVU124
 479 0088 FF20     		movs	r0, #255
 480              	.LVL36:
 110:TINYC256_192/tinyAdjust.c ****     };
 481              		.loc 1 110 16 view .LVU125
 482 008a FBE7     		b	.L30
 483              	.LVL37:
 484              	.L33:
 117:TINYC256_192/tinyAdjust.c ****     };
 485              		.loc 1 117 16 view .LVU126
 486 008c FF20     		movs	r0, #255
 487              	.LVL38:
ARM GAS  C:\usertemp\cctDi7SJ.s 			page 12


 117:TINYC256_192/tinyAdjust.c ****     };
 488              		.loc 1 117 16 view .LVU127
 489 008e F9E7     		b	.L30
 490              	.LVL39:
 491              	.L34:
 124:TINYC256_192/tinyAdjust.c ****     };
 492              		.loc 1 124 16 view .LVU128
 493 0090 FF20     		movs	r0, #255
 494              	.LVL40:
 124:TINYC256_192/tinyAdjust.c ****     };
 495              		.loc 1 124 16 view .LVU129
 496 0092 F7E7     		b	.L30
 497              	.L37:
 498 0094 AFF30080 		.align	3
 499              	.L36:
 500 0098 00000000 		.word	nuc_table
 501 009c 00000000 		.word	org_env_factor
 502 00a0 00000000 		.word	new_env_factor
 503 00a4 0000803D 		.word	1031798784
 504 00a8 66666666 		.word	1717986918
 505 00ac 66127140 		.word	1081152102
 506              		.cfi_endproc
 507              	.LFE6:
 509              		.global	nuc_table
 510              		.section	.bss.nuc_table,"aw",%nobits
 511              		.align	2
 514              	nuc_table:
 515 0000 00000000 		.space	16384
 515      00000000 
 515      00000000 
 515      00000000 
 515      00000000 
 516              		.global	new_env_factor
 517              		.section	.bss.new_env_factor,"aw",%nobits
 518              		.align	2
 521              	new_env_factor:
 522 0000 00000000 		.space	8
 522      00000000 
 523              		.global	org_env_factor
 524              		.section	.bss.org_env_factor,"aw",%nobits
 525              		.align	2
 528              	org_env_factor:
 529 0000 00000000 		.space	8
 529      00000000 
 530              		.global	gain_flag
 531              		.section	.data.gain_flag,"aw"
 534              	gain_flag:
 535 0000 01       		.byte	1
 536              		.global	new_env_param
 537              		.section	.bss.new_env_param,"aw",%nobits
 538              		.align	2
 541              	new_env_param:
 542 0000 00000000 		.space	16
 542      00000000 
 542      00000000 
 542      00000000 
 543              		.global	org_env_param
ARM GAS  C:\usertemp\cctDi7SJ.s 			page 13


 544              		.section	.bss.org_env_param,"aw",%nobits
 545              		.align	2
 548              	org_env_param:
 549 0000 00000000 		.space	16
 549      00000000 
 549      00000000 
 549      00000000 
 550              		.global	correct_table
 551              		.section	.bss.correct_table,"aw",%nobits
 552              		.align	2
 555              	correct_table:
 556 0000 00000000 		.space	7168
 556      00000000 
 556      00000000 
 556      00000000 
 556      00000000 
 557              		.text
 558              	.Letext0:
 559              		.file 2 "D:/armtoolchain/arm-gnu-toolchain-13.3.rel1-mingw-w64-i686-arm-none-eabi/arm-none-eabi/in
 560              		.file 3 "D:/armtoolchain/arm-gnu-toolchain-13.3.rel1-mingw-w64-i686-arm-none-eabi/arm-none-eabi/in
 561              		.file 4 "TINYC256_192/libirtemp.h"
 562              		.file 5 "TINYC256_192/tinyAdjust.h"
 563              		.file 6 "TINYC256_192/all_config.h"
 564              		.file 7 "TINYC256_192/falcon_cmd.h"
 565              		.file 8 "<built-in>"
ARM GAS  C:\usertemp\cctDi7SJ.s 			page 14


DEFINED SYMBOLS
                            *ABS*:00000000 tinyAdjust.c
C:\usertemp\cctDi7SJ.s:22     .text.read_nuc_parameter:00000000 $t
C:\usertemp\cctDi7SJ.s:28     .text.read_nuc_parameter:00000000 read_nuc_parameter
C:\usertemp\cctDi7SJ.s:126    .text.read_nuc_parameter:0000005c $d
C:\usertemp\cctDi7SJ.s:514    .bss.nuc_table:00000000 nuc_table
C:\usertemp\cctDi7SJ.s:131    .text.calculate_org_env_cali_parameter:00000000 $t
C:\usertemp\cctDi7SJ.s:137    .text.calculate_org_env_cali_parameter:00000000 calculate_org_env_cali_parameter
C:\usertemp\cctDi7SJ.s:216    .text.calculate_org_env_cali_parameter:0000004c $d
C:\usertemp\cctDi7SJ.s:548    .bss.org_env_param:00000000 org_env_param
C:\usertemp\cctDi7SJ.s:528    .bss.org_env_factor:00000000 org_env_factor
C:\usertemp\cctDi7SJ.s:226    .text.calculate_new_env_cali_parameter:00000000 $t
C:\usertemp\cctDi7SJ.s:232    .text.calculate_new_env_cali_parameter:00000000 calculate_new_env_cali_parameter
C:\usertemp\cctDi7SJ.s:340    .text.calculate_new_env_cali_parameter:00000078 $d
C:\usertemp\cctDi7SJ.s:541    .bss.new_env_param:00000000 new_env_param
C:\usertemp\cctDi7SJ.s:521    .bss.new_env_factor:00000000 new_env_factor
C:\usertemp\cctDi7SJ.s:534    .data.gain_flag:00000000 gain_flag
C:\usertemp\cctDi7SJ.s:352    .text.temp_calc_with_new_env_calibration:00000000 $t
C:\usertemp\cctDi7SJ.s:358    .text.temp_calc_with_new_env_calibration:00000000 temp_calc_with_new_env_calibration
C:\usertemp\cctDi7SJ.s:500    .text.temp_calc_with_new_env_calibration:00000098 $d
C:\usertemp\cctDi7SJ.s:511    .bss.nuc_table:00000000 $d
C:\usertemp\cctDi7SJ.s:518    .bss.new_env_factor:00000000 $d
C:\usertemp\cctDi7SJ.s:525    .bss.org_env_factor:00000000 $d
C:\usertemp\cctDi7SJ.s:538    .bss.new_env_param:00000000 $d
C:\usertemp\cctDi7SJ.s:545    .bss.org_env_param:00000000 $d
C:\usertemp\cctDi7SJ.s:555    .bss.correct_table:00000000 correct_table
C:\usertemp\cctDi7SJ.s:552    .bss.correct_table:00000000 $d

UNDEFINED SYMBOLS
memset
spi_read
get_prop_tpd_params
calculate_org_KE_and_BE_with_nuc_t
read_tau
calculate_new_KE_and_BE_with_nuc_t
__aeabi_f2d
__aeabi_dsub
__aeabi_d2f
reverse_calc_NUC_with_nuc_t
reverse_calc_NUC_without_env_correct
recalc_NUC_with_env_correct
remap_temp
