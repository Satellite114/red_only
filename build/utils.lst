ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 1


   1              		.cpu cortex-m33
   2              		.arch armv8-m.main
   3              		.fpu fpv4-sp-d16
   4              		.arch_extension dsp
   5              		.eabi_attribute 27, 1
   6              		.eabi_attribute 28, 1
   7              		.eabi_attribute 20, 1
   8              		.eabi_attribute 21, 1
   9              		.eabi_attribute 23, 3
  10              		.eabi_attribute 24, 1
  11              		.eabi_attribute 25, 1
  12              		.eabi_attribute 26, 1
  13              		.eabi_attribute 30, 1
  14              		.eabi_attribute 34, 1
  15              		.eabi_attribute 18, 4
  16              		.file	"utils.c"
  17              		.text
  18              	.Ltext0:
  19              		.cfi_sections	.debug_frame
  20              		.file 1 "lib/utils.c"
  21              		.section	.text.crcInit,"ax",%progbits
  22              		.align	1
  23              		.global	crcInit
  24              		.syntax unified
  25              		.thumb
  26              		.thumb_func
  28              	crcInit:
  29              	.LFB0:
   1:lib/utils.c   **** #include "utils.h"
   2:lib/utils.c   **** uint32_t min_wh = 16000, max_wh = 20900;
   3:lib/utils.c   **** static uint16_t g_min_gray = 18000;
   4:lib/utils.c   **** static uint16_t g_max_gray = 22000;
   5:lib/utils.c   **** static int8_t g_color_tint = 0; // <0 cooler, >0 warmer
   6:lib/utils.c   **** 
   7:lib/utils.c   **** static uint16_t crc16_table[256];
   8:lib/utils.c   **** #define CONTRAST_STRENGTH 20.0f
   9:lib/utils.c   **** #define MID_POINT 0.5f
  10:lib/utils.c   **** // #define ALIGN_32BYTES __attribute__((aligned(32)))
  11:lib/utils.c   **** // #define IN_SDRAM      __attribute__((section(".SDRAM")))
  12:lib/utils.c   **** 
  13:lib/utils.c   **** // ALIGN_32BYTES static uint16_t buf1[256 * 192] IN_SDRAM; // 中值滤波结果
  14:lib/utils.c   **** // ALIGN_32BYTES static uint16_t buf2[256 * 192] IN_SDRAM; // 锐化卷积结果
  15:lib/utils.c   **** 
  16:lib/utils.c   **** float g_gamma = 1.0f; // 默认线性，可在主程序中动态调整
  17:lib/utils.c   **** 
  18:lib/utils.c   **** static const uint16_t colorLUT[256] = {
  19:lib/utils.c   ****     0x000F,
  20:lib/utils.c   ****     0x0010,
  21:lib/utils.c   ****     0x0011,
  22:lib/utils.c   ****     0x0011,
  23:lib/utils.c   ****     0x0012,
  24:lib/utils.c   ****     0x0012,
  25:lib/utils.c   ****     0x0013,
  26:lib/utils.c   ****     0x0013,
  27:lib/utils.c   ****     0x0014,
  28:lib/utils.c   ****     0x0015,
  29:lib/utils.c   ****     0x0015,
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 2


  30:lib/utils.c   ****     0x0016,
  31:lib/utils.c   ****     0x0016,
  32:lib/utils.c   ****     0x0017,
  33:lib/utils.c   ****     0x0017,
  34:lib/utils.c   ****     0x0018,
  35:lib/utils.c   ****     0x0019,
  36:lib/utils.c   ****     0x0019,
  37:lib/utils.c   ****     0x001A,
  38:lib/utils.c   ****     0x001A,
  39:lib/utils.c   ****     0x001B,
  40:lib/utils.c   ****     0x001B,
  41:lib/utils.c   ****     0x001C,
  42:lib/utils.c   ****     0x001D,
  43:lib/utils.c   ****     0x001D,
  44:lib/utils.c   ****     0x001E,
  45:lib/utils.c   ****     0x001E,
  46:lib/utils.c   ****     0x001F,
  47:lib/utils.c   ****     0x001F,
  48:lib/utils.c   ****     0x001F,
  49:lib/utils.c   ****     0x001F,
  50:lib/utils.c   ****     0x001F,
  51:lib/utils.c   ****     0x001F,
  52:lib/utils.c   ****     0x003F,
  53:lib/utils.c   ****     0x005F,
  54:lib/utils.c   ****     0x007F,
  55:lib/utils.c   ****     0x009F,
  56:lib/utils.c   ****     0x00BF,
  57:lib/utils.c   ****     0x00DF,
  58:lib/utils.c   ****     0x00FF,
  59:lib/utils.c   ****     0x011F,
  60:lib/utils.c   ****     0x013F,
  61:lib/utils.c   ****     0x015F,
  62:lib/utils.c   ****     0x017F,
  63:lib/utils.c   ****     0x019F,
  64:lib/utils.c   ****     0x01BF,
  65:lib/utils.c   ****     0x01DF,
  66:lib/utils.c   ****     0x01FF,
  67:lib/utils.c   ****     0x021F,
  68:lib/utils.c   ****     0x023F,
  69:lib/utils.c   ****     0x025F,
  70:lib/utils.c   ****     0x027F,
  71:lib/utils.c   ****     0x029F,
  72:lib/utils.c   ****     0x02BF,
  73:lib/utils.c   ****     0x02DF,
  74:lib/utils.c   ****     0x02FF,
  75:lib/utils.c   ****     0x031F,
  76:lib/utils.c   ****     0x033F,
  77:lib/utils.c   ****     0x035F,
  78:lib/utils.c   ****     0x037F,
  79:lib/utils.c   ****     0x039F,
  80:lib/utils.c   ****     0x03BF,
  81:lib/utils.c   ****     0x03DF,
  82:lib/utils.c   ****     0x03FF,
  83:lib/utils.c   ****     0x041F,
  84:lib/utils.c   ****     0x043F,
  85:lib/utils.c   ****     0x045F,
  86:lib/utils.c   ****     0x047F,
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 3


  87:lib/utils.c   ****     0x049F,
  88:lib/utils.c   ****     0x04BF,
  89:lib/utils.c   ****     0x04DF,
  90:lib/utils.c   ****     0x04FF,
  91:lib/utils.c   ****     0x051F,
  92:lib/utils.c   ****     0x053F,
  93:lib/utils.c   ****     0x055F,
  94:lib/utils.c   ****     0x057F,
  95:lib/utils.c   ****     0x059F,
  96:lib/utils.c   ****     0x05BF,
  97:lib/utils.c   ****     0x05DF,
  98:lib/utils.c   ****     0x05FF,
  99:lib/utils.c   ****     0x061F,
 100:lib/utils.c   ****     0x063F,
 101:lib/utils.c   ****     0x065F,
 102:lib/utils.c   ****     0x067F,
 103:lib/utils.c   ****     0x069F,
 104:lib/utils.c   ****     0x06BF,
 105:lib/utils.c   ****     0x06DF,
 106:lib/utils.c   ****     0x06FF,
 107:lib/utils.c   ****     0x071F,
 108:lib/utils.c   ****     0x073E,
 109:lib/utils.c   ****     0x075E,
 110:lib/utils.c   ****     0x077E,
 111:lib/utils.c   ****     0x0F9D,
 112:lib/utils.c   ****     0x0FBD,
 113:lib/utils.c   ****     0x0FDC,
 114:lib/utils.c   ****     0x17FC,
 115:lib/utils.c   ****     0x17FC,
 116:lib/utils.c   ****     0x1FFB,
 117:lib/utils.c   ****     0x1FFB,
 118:lib/utils.c   ****     0x1FFA,
 119:lib/utils.c   ****     0x27FA,
 120:lib/utils.c   ****     0x27FA,
 121:lib/utils.c   ****     0x2FF9,
 122:lib/utils.c   ****     0x2FF9,
 123:lib/utils.c   ****     0x2FF8,
 124:lib/utils.c   ****     0x37F8,
 125:lib/utils.c   ****     0x37F8,
 126:lib/utils.c   ****     0x3FF7,
 127:lib/utils.c   ****     0x3FF7,
 128:lib/utils.c   ****     0x3FF6,
 129:lib/utils.c   ****     0x47F6,
 130:lib/utils.c   ****     0x47F6,
 131:lib/utils.c   ****     0x4FF5,
 132:lib/utils.c   ****     0x4FF5,
 133:lib/utils.c   ****     0x4FF4,
 134:lib/utils.c   ****     0x57F4,
 135:lib/utils.c   ****     0x57F4,
 136:lib/utils.c   ****     0x5FF3,
 137:lib/utils.c   ****     0x5FF3,
 138:lib/utils.c   ****     0x5FF2,
 139:lib/utils.c   ****     0x67F2,
 140:lib/utils.c   ****     0x67F2,
 141:lib/utils.c   ****     0x6FF1,
 142:lib/utils.c   ****     0x6FF1,
 143:lib/utils.c   ****     0x77F0,
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 4


 144:lib/utils.c   ****     0x77F0,
 145:lib/utils.c   ****     0x77F0,
 146:lib/utils.c   ****     0x7FEF,
 147:lib/utils.c   ****     0x7FEF,
 148:lib/utils.c   ****     0x87EE,
 149:lib/utils.c   ****     0x87EE,
 150:lib/utils.c   ****     0x87EE,
 151:lib/utils.c   ****     0x8FED,
 152:lib/utils.c   ****     0x8FED,
 153:lib/utils.c   ****     0x97EC,
 154:lib/utils.c   ****     0x97EC,
 155:lib/utils.c   ****     0x97EB,
 156:lib/utils.c   ****     0x9FEB,
 157:lib/utils.c   ****     0x9FEB,
 158:lib/utils.c   ****     0xA7EA,
 159:lib/utils.c   ****     0xA7EA,
 160:lib/utils.c   ****     0xA7E9,
 161:lib/utils.c   ****     0xAFE9,
 162:lib/utils.c   ****     0xAFE9,
 163:lib/utils.c   ****     0xB7E8,
 164:lib/utils.c   ****     0xB7E8,
 165:lib/utils.c   ****     0xB7E7,
 166:lib/utils.c   ****     0xBFE7,
 167:lib/utils.c   ****     0xBFE7,
 168:lib/utils.c   ****     0xC7E6,
 169:lib/utils.c   ****     0xC7E6,
 170:lib/utils.c   ****     0xC7E5,
 171:lib/utils.c   ****     0xCFE5,
 172:lib/utils.c   ****     0xCFE5,
 173:lib/utils.c   ****     0xD7E4,
 174:lib/utils.c   ****     0xD7E4,
 175:lib/utils.c   ****     0xD7E3,
 176:lib/utils.c   ****     0xDFE3,
 177:lib/utils.c   ****     0xDFE3,
 178:lib/utils.c   ****     0xE7E2,
 179:lib/utils.c   ****     0xE7E2,
 180:lib/utils.c   ****     0xE7E1,
 181:lib/utils.c   ****     0xEFE1,
 182:lib/utils.c   ****     0xEFE1,
 183:lib/utils.c   ****     0xF7E0,
 184:lib/utils.c   ****     0xF7C0,
 185:lib/utils.c   ****     0xF7A0,
 186:lib/utils.c   ****     0xFF80,
 187:lib/utils.c   ****     0xFF60,
 188:lib/utils.c   ****     0xFF40,
 189:lib/utils.c   ****     0xFF20,
 190:lib/utils.c   ****     0xFF00,
 191:lib/utils.c   ****     0xFEE0,
 192:lib/utils.c   ****     0xFEC0,
 193:lib/utils.c   ****     0xFEA0,
 194:lib/utils.c   ****     0xFE80,
 195:lib/utils.c   ****     0xFE60,
 196:lib/utils.c   ****     0xFE40,
 197:lib/utils.c   ****     0xFE40,
 198:lib/utils.c   ****     0xFE20,
 199:lib/utils.c   ****     0xFE00,
 200:lib/utils.c   ****     0xFDE0,
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 5


 201:lib/utils.c   ****     0xFDC0,
 202:lib/utils.c   ****     0xFDA0,
 203:lib/utils.c   ****     0xFD80,
 204:lib/utils.c   ****     0xFD60,
 205:lib/utils.c   ****     0xFD40,
 206:lib/utils.c   ****     0xFD20,
 207:lib/utils.c   ****     0xFD00,
 208:lib/utils.c   ****     0xFCE0,
 209:lib/utils.c   ****     0xFCC0,
 210:lib/utils.c   ****     0xFCC0,
 211:lib/utils.c   ****     0xFCA0,
 212:lib/utils.c   ****     0xFC80,
 213:lib/utils.c   ****     0xFC60,
 214:lib/utils.c   ****     0xFC40,
 215:lib/utils.c   ****     0xFC20,
 216:lib/utils.c   ****     0xFC00,
 217:lib/utils.c   ****     0xFBE0,
 218:lib/utils.c   ****     0xFBC0,
 219:lib/utils.c   ****     0xFBA0,
 220:lib/utils.c   ****     0xFB80,
 221:lib/utils.c   ****     0xFB60,
 222:lib/utils.c   ****     0xFB40,
 223:lib/utils.c   ****     0xFB20,
 224:lib/utils.c   ****     0xFB20,
 225:lib/utils.c   ****     0xFB00,
 226:lib/utils.c   ****     0xFAE0,
 227:lib/utils.c   ****     0xFAC0,
 228:lib/utils.c   ****     0xFAA0,
 229:lib/utils.c   ****     0xFA80,
 230:lib/utils.c   ****     0xFA60,
 231:lib/utils.c   ****     0xFA40,
 232:lib/utils.c   ****     0xFA20,
 233:lib/utils.c   ****     0xFA00,
 234:lib/utils.c   ****     0xF9E0,
 235:lib/utils.c   ****     0xF9C0,
 236:lib/utils.c   ****     0xF9A0,
 237:lib/utils.c   ****     0xF9A0,
 238:lib/utils.c   ****     0xF980,
 239:lib/utils.c   ****     0xF960,
 240:lib/utils.c   ****     0xF940,
 241:lib/utils.c   ****     0xF920,
 242:lib/utils.c   ****     0xF900,
 243:lib/utils.c   ****     0xF8E0,
 244:lib/utils.c   ****     0xF8C0,
 245:lib/utils.c   ****     0xF8A0,
 246:lib/utils.c   ****     0xF880,
 247:lib/utils.c   ****     0xF860,
 248:lib/utils.c   ****     0xF040,
 249:lib/utils.c   ****     0xF020,
 250:lib/utils.c   ****     0xE800,
 251:lib/utils.c   ****     0xE800,
 252:lib/utils.c   ****     0xE000,
 253:lib/utils.c   ****     0xD800,
 254:lib/utils.c   ****     0xD800,
 255:lib/utils.c   ****     0xD000,
 256:lib/utils.c   ****     0xD000,
 257:lib/utils.c   ****     0xC800,
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 6


 258:lib/utils.c   ****     0xC800,
 259:lib/utils.c   ****     0xC000,
 260:lib/utils.c   ****     0xB800,
 261:lib/utils.c   ****     0xB800,
 262:lib/utils.c   ****     0xB000,
 263:lib/utils.c   ****     0xB000,
 264:lib/utils.c   ****     0xA800,
 265:lib/utils.c   ****     0xA800,
 266:lib/utils.c   ****     0xA000,
 267:lib/utils.c   ****     0x9800,
 268:lib/utils.c   ****     0x9800,
 269:lib/utils.c   ****     0x9000,
 270:lib/utils.c   ****     0x9000,
 271:lib/utils.c   ****     0x8800,
 272:lib/utils.c   ****     0x8800,
 273:lib/utils.c   ****     0x8000,
 274:lib/utils.c   ****     0x7800,
 275:lib/utils.c   **** };
 276:lib/utils.c   **** 
 277:lib/utils.c   **** void crcInit(void)
 278:lib/utils.c   **** {
  30              		.loc 1 278 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
 279:lib/utils.c   ****     for (uint16_t i = 0; i < 256; i++)
  35              		.loc 1 279 5 view .LVU1
  36              	.LBB2:
  37              		.loc 1 279 10 view .LVU2
  38              	.LVL0:
  39              		.loc 1 279 19 is_stmt 0 view .LVU3
  40 0000 0021     		movs	r1, #0
  41              		.loc 1 279 5 view .LVU4
  42 0002 13E0     		b	.L2
  43              	.LVL1:
  44              	.L3:
  45              	.LBB3:
  46              	.LBB4:
 280:lib/utils.c   ****     {
 281:lib/utils.c   ****         uint16_t crc = i;
 282:lib/utils.c   ****         for (int j = 0; j < 8; j++)
 283:lib/utils.c   ****         {
 284:lib/utils.c   ****             if (crc & 0x0001)
 285:lib/utils.c   ****             {
 286:lib/utils.c   ****                 crc >>= 1;
 287:lib/utils.c   ****                 crc ^= CRC16_POLY;
 288:lib/utils.c   ****             }
 289:lib/utils.c   ****             else
 290:lib/utils.c   ****             {
 291:lib/utils.c   ****                 crc >>= 1;
  47              		.loc 1 291 17 is_stmt 1 view .LVU5
  48              		.loc 1 291 21 is_stmt 0 view .LVU6
  49 0004 C3F34F03 		ubfx	r3, r3, #1, #16
  50              	.LVL2:
  51              	.L4:
 282:lib/utils.c   ****         {
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 7


  52              		.loc 1 282 33 is_stmt 1 discriminator 2 view .LVU7
  53 0008 0132     		adds	r2, r2, #1
  54              	.LVL3:
  55              	.L6:
 282:lib/utils.c   ****         {
  56              		.loc 1 282 27 discriminator 1 view .LVU8
  57 000a 072A     		cmp	r2, #7
  58 000c 09DC     		bgt	.L8
 284:lib/utils.c   ****             {
  59              		.loc 1 284 13 view .LVU9
 284:lib/utils.c   ****             {
  60              		.loc 1 284 16 is_stmt 0 view .LVU10
  61 000e 13F0010F 		tst	r3, #1
  62 0012 F7D0     		beq	.L3
 286:lib/utils.c   ****                 crc ^= CRC16_POLY;
  63              		.loc 1 286 17 is_stmt 1 view .LVU11
 286:lib/utils.c   ****                 crc ^= CRC16_POLY;
  64              		.loc 1 286 21 is_stmt 0 view .LVU12
  65 0014 C3F34F03 		ubfx	r3, r3, #1, #16
  66              	.LVL4:
 287:lib/utils.c   ****             }
  67              		.loc 1 287 17 is_stmt 1 view .LVU13
 287:lib/utils.c   ****             }
  68              		.loc 1 287 21 is_stmt 0 view .LVU14
  69 0018 83F42043 		eor	r3, r3, #40960
  70              	.LVL5:
 287:lib/utils.c   ****             }
  71              		.loc 1 287 21 view .LVU15
  72 001c 83F00103 		eor	r3, r3, #1
  73              	.LVL6:
 287:lib/utils.c   ****             }
  74              		.loc 1 287 21 view .LVU16
  75 0020 F2E7     		b	.L4
  76              	.L8:
 287:lib/utils.c   ****             }
  77              		.loc 1 287 21 view .LVU17
  78              	.LBE4:
 292:lib/utils.c   ****             }
 293:lib/utils.c   ****         }
 294:lib/utils.c   ****         crc16_table[i] = crc;
  79              		.loc 1 294 9 is_stmt 1 view .LVU18
  80              		.loc 1 294 24 is_stmt 0 view .LVU19
  81 0022 054A     		ldr	r2, .L10
  82              	.LVL7:
  83              		.loc 1 294 24 view .LVU20
  84 0024 22F81130 		strh	r3, [r2, r1, lsl #1]	@ movhi
  85              	.LBE3:
 279:lib/utils.c   ****     {
  86              		.loc 1 279 36 is_stmt 1 discriminator 2 view .LVU21
  87 0028 0131     		adds	r1, r1, #1
  88              	.LVL8:
 279:lib/utils.c   ****     {
  89              		.loc 1 279 36 is_stmt 0 discriminator 2 view .LVU22
  90 002a 89B2     		uxth	r1, r1
  91              	.LVL9:
  92              	.L2:
 279:lib/utils.c   ****     {
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 8


  93              		.loc 1 279 28 is_stmt 1 discriminator 1 view .LVU23
  94 002c FF29     		cmp	r1, #255
  95 002e 02D8     		bhi	.L9
  96              	.LBB6:
 281:lib/utils.c   ****         for (int j = 0; j < 8; j++)
  97              		.loc 1 281 18 is_stmt 0 view .LVU24
  98 0030 0B46     		mov	r3, r1
  99              	.LBB5:
 282:lib/utils.c   ****         {
 100              		.loc 1 282 18 view .LVU25
 101 0032 0022     		movs	r2, #0
 102 0034 E9E7     		b	.L6
 103              	.L9:
 104              	.LBE5:
 105              	.LBE6:
 106              	.LBE2:
 295:lib/utils.c   ****     }
 296:lib/utils.c   **** }
 107              		.loc 1 296 1 view .LVU26
 108 0036 7047     		bx	lr
 109              	.L11:
 110              		.align	2
 111              	.L10:
 112 0038 00000000 		.word	crc16_table
 113              		.cfi_endproc
 114              	.LFE0:
 116              		.section	.text.crc_caculate,"ax",%progbits
 117              		.align	1
 118              		.global	crc_caculate
 119              		.syntax unified
 120              		.thumb
 121              		.thumb_func
 123              	crc_caculate:
 124              	.LVL10:
 125              	.LFB1:
 297:lib/utils.c   **** 
 298:lib/utils.c   **** uint16_t crc_caculate(uint8_t *buffer, uint16_t size)
 299:lib/utils.c   **** {
 126              		.loc 1 299 1 is_stmt 1 view -0
 127              		.cfi_startproc
 128              		@ args = 0, pretend = 0, frame = 0
 129              		@ frame_needed = 0, uses_anonymous_args = 0
 130              		@ link register save eliminated.
 131              		.loc 1 299 1 is_stmt 0 view .LVU28
 132 0000 8446     		mov	ip, r0
 300:lib/utils.c   ****     uint16_t crc = CRC16_START_VALUE;
 133              		.loc 1 300 5 is_stmt 1 view .LVU29
 134              	.LVL11:
 301:lib/utils.c   ****     for (uint16_t i = 0; i < size; i++)
 135              		.loc 1 301 5 view .LVU30
 136              	.LBB7:
 137              		.loc 1 301 10 view .LVU31
 138              		.loc 1 301 19 is_stmt 0 view .LVU32
 139 0002 0023     		movs	r3, #0
 140              	.LBE7:
 300:lib/utils.c   ****     uint16_t crc = CRC16_START_VALUE;
 141              		.loc 1 300 14 view .LVU33
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 9


 142 0004 4FF6FF70 		movw	r0, #65535
 143              	.LVL12:
 144              	.LBB8:
 145              		.loc 1 301 28 is_stmt 1 discriminator 1 view .LVU34
 146 0008 8B42     		cmp	r3, r1
 147 000a 10D2     		bcs	.L19
 148              	.LBE8:
 299:lib/utils.c   ****     uint16_t crc = CRC16_START_VALUE;
 149              		.loc 1 299 1 is_stmt 0 view .LVU35
 150 000c 10B4     		push	{r4}
 151              	.LCFI0:
 152              		.cfi_def_cfa_offset 4
 153              		.cfi_offset 4, -4
 154              	.L14:
 155              	.LBB9:
 302:lib/utils.c   ****     {
 303:lib/utils.c   ****         crc = (crc >> 8) ^ crc16_table[(crc ^ buffer[i]) & 0xFF];
 156              		.loc 1 303 9 is_stmt 1 view .LVU36
 157              		.loc 1 303 53 is_stmt 0 view .LVU37
 158 000e 1CF80320 		ldrb	r2, [ip, r3]	@ zero_extendqisi2
 159              		.loc 1 303 45 view .LVU38
 160 0012 4240     		eors	r2, r2, r0
 161              		.loc 1 303 58 view .LVU39
 162 0014 D2B2     		uxtb	r2, r2
 163              		.loc 1 303 39 view .LVU40
 164 0016 064C     		ldr	r4, .L20
 165 0018 34F81220 		ldrh	r2, [r4, r2, lsl #1]
 166              		.loc 1 303 13 view .LVU41
 167 001c 82EA1020 		eor	r0, r2, r0, lsr #8
 168              	.LVL13:
 301:lib/utils.c   ****     {
 169              		.loc 1 301 37 is_stmt 1 discriminator 3 view .LVU42
 170 0020 0133     		adds	r3, r3, #1
 171              	.LVL14:
 301:lib/utils.c   ****     {
 172              		.loc 1 301 37 is_stmt 0 discriminator 3 view .LVU43
 173 0022 9BB2     		uxth	r3, r3
 174              	.LVL15:
 301:lib/utils.c   ****     {
 175              		.loc 1 301 28 is_stmt 1 discriminator 1 view .LVU44
 176 0024 8B42     		cmp	r3, r1
 177 0026 F2D3     		bcc	.L14
 178              	.LBE9:
 304:lib/utils.c   ****     }
 305:lib/utils.c   ****     return crc;
 179              		.loc 1 305 5 view .LVU45
 306:lib/utils.c   **** }
 180              		.loc 1 306 1 is_stmt 0 view .LVU46
 181 0028 5DF8044B 		ldr	r4, [sp], #4
 182              	.LCFI1:
 183              		.cfi_restore 4
 184              		.cfi_def_cfa_offset 0
 185 002c 7047     		bx	lr
 186              	.L19:
 187              		.loc 1 306 1 view .LVU47
 188 002e 7047     		bx	lr
 189              	.L21:
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 10


 190              		.align	2
 191              	.L20:
 192 0030 00000000 		.word	crc16_table
 193              		.cfi_endproc
 194              	.LFE1:
 196              		.section	.text.reverseBits,"ax",%progbits
 197              		.align	1
 198              		.global	reverseBits
 199              		.syntax unified
 200              		.thumb
 201              		.thumb_func
 203              	reverseBits:
 204              	.LVL16:
 205              	.LFB2:
 307:lib/utils.c   **** 
 308:lib/utils.c   **** uint8_t reverseBits(uint8_t num, uint8_t bitCnt)
 309:lib/utils.c   **** {
 206              		.loc 1 309 1 is_stmt 1 view -0
 207              		.cfi_startproc
 208              		@ args = 0, pretend = 0, frame = 0
 209              		@ frame_needed = 0, uses_anonymous_args = 0
 210              		.loc 1 309 1 is_stmt 0 view .LVU49
 211 0000 00B5     		push	{lr}
 212              	.LCFI2:
 213              		.cfi_def_cfa_offset 4
 214              		.cfi_offset 14, -4
 215 0002 8646     		mov	lr, r0
 310:lib/utils.c   ****     uint8_t result = 0;
 216              		.loc 1 310 5 is_stmt 1 view .LVU50
 217              	.LVL17:
 311:lib/utils.c   ****     for (uint8_t i = 0; i < bitCnt; ++i)
 218              		.loc 1 311 5 view .LVU51
 219              	.LBB10:
 220              		.loc 1 311 10 view .LVU52
 221              		.loc 1 311 18 is_stmt 0 view .LVU53
 222 0004 0023     		movs	r3, #0
 223              	.LBE10:
 310:lib/utils.c   ****     uint8_t result = 0;
 224              		.loc 1 310 13 view .LVU54
 225 0006 1846     		mov	r0, r3
 226              	.LVL18:
 227              	.LBB12:
 228              		.loc 1 311 5 view .LVU55
 229 0008 0DE0     		b	.L23
 230              	.LVL19:
 231              	.L24:
 232              	.LBB11:
 312:lib/utils.c   ****     {
 313:lib/utils.c   ****         uint8_t bit = (num >> i) & 1;
 233              		.loc 1 313 9 is_stmt 1 view .LVU56
 234              		.loc 1 313 28 is_stmt 0 view .LVU57
 235 000a 4EFA03F2 		asr	r2, lr, r3
 236              		.loc 1 313 17 view .LVU58
 237 000e 02F00102 		and	r2, r2, #1
 238              	.LVL20:
 314:lib/utils.c   **** 
 315:lib/utils.c   ****         result |= (bit << (bitCnt - 1 - i));
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 11


 239              		.loc 1 315 9 is_stmt 1 view .LVU59
 240              		.loc 1 315 35 is_stmt 0 view .LVU60
 241 0012 01F1FF3C 		add	ip, r1, #-1
 242              		.loc 1 315 39 view .LVU61
 243 0016 ACEB030C 		sub	ip, ip, r3
 244              		.loc 1 315 24 view .LVU62
 245 001a 02FA0CF2 		lsl	r2, r2, ip
 246              	.LVL21:
 247              		.loc 1 315 16 view .LVU63
 248 001e 1043     		orrs	r0, r0, r2
 249              	.LVL22:
 250              		.loc 1 315 16 view .LVU64
 251 0020 C0B2     		uxtb	r0, r0
 252              	.LVL23:
 253              		.loc 1 315 16 view .LVU65
 254              	.LBE11:
 311:lib/utils.c   ****     {
 255              		.loc 1 311 37 is_stmt 1 discriminator 3 view .LVU66
 256 0022 0133     		adds	r3, r3, #1
 257              	.LVL24:
 311:lib/utils.c   ****     {
 258              		.loc 1 311 37 is_stmt 0 discriminator 3 view .LVU67
 259 0024 DBB2     		uxtb	r3, r3
 260              	.LVL25:
 261              	.L23:
 311:lib/utils.c   ****     {
 262              		.loc 1 311 27 is_stmt 1 discriminator 1 view .LVU68
 263 0026 8B42     		cmp	r3, r1
 264 0028 EFD3     		bcc	.L24
 265              	.LBE12:
 316:lib/utils.c   ****     }
 317:lib/utils.c   ****     return result;
 266              		.loc 1 317 5 view .LVU69
 318:lib/utils.c   **** }
 267              		.loc 1 318 1 is_stmt 0 view .LVU70
 268 002a 5DF804FB 		ldr	pc, [sp], #4
 269              		.cfi_endproc
 270              	.LFE2:
 272              		.section	.text.yuv422_to_rgb565,"ax",%progbits
 273              		.align	1
 274              		.global	yuv422_to_rgb565
 275              		.syntax unified
 276              		.thumb
 277              		.thumb_func
 279              	yuv422_to_rgb565:
 280              	.LVL26:
 281              	.LFB3:
 319:lib/utils.c   **** 
 320:lib/utils.c   **** // YUV422到RGB565转换函数
 321:lib/utils.c   **** uint16_t yuv422_to_rgb565(uint8_t Y, uint8_t U, uint8_t V)
 322:lib/utils.c   **** {
 282              		.loc 1 322 1 is_stmt 1 view -0
 283              		.cfi_startproc
 284              		@ args = 0, pretend = 0, frame = 0
 285              		@ frame_needed = 0, uses_anonymous_args = 0
 286              		.loc 1 322 1 is_stmt 0 view .LVU72
 287 0000 00B5     		push	{lr}
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 12


 288              	.LCFI3:
 289              		.cfi_def_cfa_offset 4
 290              		.cfi_offset 14, -4
 323:lib/utils.c   ****     // 将 YCbCr 转换为 RGB
 324:lib/utils.c   ****     int32_t C = Y - 16;
 291              		.loc 1 324 5 is_stmt 1 view .LVU73
 292              		.loc 1 324 13 is_stmt 0 view .LVU74
 293 0002 1038     		subs	r0, r0, #16
 294              	.LVL27:
 325:lib/utils.c   ****     int32_t D = U - 128;
 295              		.loc 1 325 5 is_stmt 1 view .LVU75
 296              		.loc 1 325 13 is_stmt 0 view .LVU76
 297 0004 8039     		subs	r1, r1, #128
 298              	.LVL28:
 326:lib/utils.c   ****     int32_t E = V - 128;
 299              		.loc 1 326 5 is_stmt 1 view .LVU77
 300              		.loc 1 326 13 is_stmt 0 view .LVU78
 301 0006 A2F1800C 		sub	ip, r2, #128
 302              	.LVL29:
 327:lib/utils.c   **** 
 328:lib/utils.c   ****     uint8_t R = (298 * C + 409 * E + 128) >> 8;
 303              		.loc 1 328 5 is_stmt 1 view .LVU79
 304              		.loc 1 328 22 is_stmt 0 view .LVU80
 305 000a 4FF49573 		mov	r3, #298
 306 000e 00FB03F3 		mul	r3, r0, r3
 307              		.loc 1 328 26 view .LVU81
 308 0012 40F29910 		movw	r0, #409
 309              	.LVL30:
 310              		.loc 1 328 26 view .LVU82
 311 0016 00FB0C30 		mla	r0, r0, ip, r3
 312              		.loc 1 328 36 view .LVU83
 313 001a 8030     		adds	r0, r0, #128
 314              	.LVL31:
 329:lib/utils.c   ****     uint8_t G = (298 * C - 100 * D - 208 * E + 128) >> 8;
 315              		.loc 1 329 5 is_stmt 1 view .LVU84
 316              		.loc 1 329 26 is_stmt 0 view .LVU85
 317 001c 6FF06302 		mvn	r2, #99
 318              	.LVL32:
 319              		.loc 1 329 26 view .LVU86
 320 0020 02FB0132 		mla	r2, r2, r1, r3
 321              		.loc 1 329 36 view .LVU87
 322 0024 6FF0CF0E 		mvn	lr, #207
 323 0028 0EFB0C22 		mla	r2, lr, ip, r2
 324              		.loc 1 329 46 view .LVU88
 325 002c 8032     		adds	r2, r2, #128
 326              		.loc 1 329 13 view .LVU89
 327 002e C2F30722 		ubfx	r2, r2, #8, #8
 328              	.LVL33:
 330:lib/utils.c   ****     uint8_t B = (298 * C + 516 * D + 128) >> 8;
 329              		.loc 1 330 5 is_stmt 1 view .LVU90
 330              		.loc 1 330 32 is_stmt 0 view .LVU91
 331 0032 01EBC111 		add	r1, r1, r1, lsl #7
 332              	.LVL34:
 333              		.loc 1 330 26 view .LVU92
 334 0036 03EB8103 		add	r3, r3, r1, lsl #2
 335              		.loc 1 330 36 view .LVU93
 336 003a 8033     		adds	r3, r3, #128
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 13


 337              	.LVL35:
 331:lib/utils.c   **** 
 332:lib/utils.c   ****     // 裁剪 RGB 值到 8 位
 333:lib/utils.c   ****     if (R > 255)
 338              		.loc 1 333 5 is_stmt 1 view .LVU94
 334:lib/utils.c   ****         R = 255;
 335:lib/utils.c   ****     if (G > 255)
 339              		.loc 1 335 5 view .LVU95
 336:lib/utils.c   ****         G = 255;
 337:lib/utils.c   ****     if (B > 255)
 340              		.loc 1 337 5 view .LVU96
 338:lib/utils.c   ****         B = 255;
 339:lib/utils.c   **** 
 340:lib/utils.c   ****     // 将 RGB 转换为 RGB565
 341:lib/utils.c   ****     return ((R & 0xF8) << 8) | ((G & 0xFC) << 3) | (B >> 3);
 341              		.loc 1 341 5 view .LVU97
 342              		.loc 1 341 24 is_stmt 0 view .LVU98
 343 003c 00F47840 		and	r0, r0, #63488
 344              	.LVL36:
 345              		.loc 1 341 24 view .LVU99
 346 0040 00B2     		sxth	r0, r0
 347              		.loc 1 341 44 view .LVU100
 348 0042 D200     		lsls	r2, r2, #3
 349              	.LVL37:
 350              		.loc 1 341 44 view .LVU101
 351 0044 02F4FC62 		and	r2, r2, #2016
 352              		.loc 1 341 30 view .LVU102
 353 0048 1043     		orrs	r0, r0, r2
 354              		.loc 1 341 50 view .LVU103
 355 004a C3F3C423 		ubfx	r3, r3, #11, #5
 356              	.LVL38:
 357              		.loc 1 341 50 view .LVU104
 358 004e 1843     		orrs	r0, r0, r3
 342:lib/utils.c   **** }
 359              		.loc 1 342 1 view .LVU105
 360 0050 80B2     		uxth	r0, r0
 361 0052 5DF804FB 		ldr	pc, [sp], #4
 362              		.cfi_endproc
 363              	.LFE3:
 365              		.section	.text.yuv422_to_rgb565_memcpy,"ax",%progbits
 366              		.align	1
 367              		.global	yuv422_to_rgb565_memcpy
 368              		.syntax unified
 369              		.thumb
 370              		.thumb_func
 372              	yuv422_to_rgb565_memcpy:
 373              	.LVL39:
 374              	.LFB4:
 343:lib/utils.c   **** 
 344:lib/utils.c   **** // 函数用于将YUV422数据转换为RGB565并复制到目标缓冲区
 345:lib/utils.c   **** void yuv422_to_rgb565_memcpy(uint8_t *src, uint16_t *dst, int width, int height)
 346:lib/utils.c   **** {
 375              		.loc 1 346 1 is_stmt 1 view -0
 376              		.cfi_startproc
 377              		@ args = 0, pretend = 0, frame = 0
 378              		@ frame_needed = 0, uses_anonymous_args = 0
 379              		.loc 1 346 1 is_stmt 0 view .LVU107
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 14


 380 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 381              	.LCFI4:
 382              		.cfi_def_cfa_offset 32
 383              		.cfi_offset 3, -32
 384              		.cfi_offset 4, -28
 385              		.cfi_offset 5, -24
 386              		.cfi_offset 6, -20
 387              		.cfi_offset 7, -16
 388              		.cfi_offset 8, -12
 389              		.cfi_offset 9, -8
 390              		.cfi_offset 14, -4
 391 0004 0446     		mov	r4, r0
 392 0006 0D46     		mov	r5, r1
 393 0008 9046     		mov	r8, r2
 394 000a 1F46     		mov	r7, r3
 347:lib/utils.c   ****     for (int i = 0; i < width * height / 2; i++)
 395              		.loc 1 347 5 is_stmt 1 view .LVU108
 396              	.LBB13:
 397              		.loc 1 347 10 view .LVU109
 398              	.LVL40:
 399              		.loc 1 347 14 is_stmt 0 view .LVU110
 400 000c 0026     		movs	r6, #0
 401              		.loc 1 347 5 view .LVU111
 402 000e 18E0     		b	.L29
 403              	.LVL41:
 404              	.L30:
 405              	.LBB14:
 348:lib/utils.c   ****     {
 349:lib/utils.c   ****         uint8_t Y0 = src[0];
 406              		.loc 1 349 9 is_stmt 1 view .LVU112
 350:lib/utils.c   ****         uint8_t U = src[1] & 0xF0; // 高4位为U
 407              		.loc 1 350 9 view .LVU113
 408              		.loc 1 350 24 is_stmt 0 view .LVU114
 409 0010 6178     		ldrb	r1, [r4, #1]	@ zero_extendqisi2
 410              	.LVL42:
 351:lib/utils.c   ****         uint8_t V = src[1] << 4;   // 低4位为V
 411              		.loc 1 351 9 is_stmt 1 view .LVU115
 412              		.loc 1 351 17 is_stmt 0 view .LVU116
 413 0012 0A01     		lsls	r2, r1, #4
 414              	.LVL43:
 352:lib/utils.c   ****         uint8_t Y1 = src[2];
 415              		.loc 1 352 9 is_stmt 1 view .LVU117
 416              		.loc 1 352 17 is_stmt 0 view .LVU118
 417 0014 94F80290 		ldrb	r9, [r4, #2]	@ zero_extendqisi2
 418              	.LVL44:
 353:lib/utils.c   **** 
 354:lib/utils.c   ****         // 转换第一个像素
 355:lib/utils.c   ****         dst[0] = yuv422_to_rgb565(Y0, U, V);
 419              		.loc 1 355 9 is_stmt 1 view .LVU119
 420              		.loc 1 355 18 is_stmt 0 view .LVU120
 421 0018 02F0F002 		and	r2, r2, #240
 422              	.LVL45:
 423              		.loc 1 355 18 view .LVU121
 424 001c 01F0F001 		and	r1, r1, #240
 425              	.LVL46:
 426              		.loc 1 355 18 view .LVU122
 427 0020 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 15


 428 0022 FFF7FEFF 		bl	yuv422_to_rgb565
 429              	.LVL47:
 430              		.loc 1 355 16 discriminator 1 view .LVU123
 431 0026 2880     		strh	r0, [r5]	@ movhi
 356:lib/utils.c   **** 
 357:lib/utils.c   ****         // 转换第二个像素
 358:lib/utils.c   ****         U = src[3] & 0xF0; // 高4位为U
 432              		.loc 1 358 9 is_stmt 1 view .LVU124
 433              		.loc 1 358 16 is_stmt 0 view .LVU125
 434 0028 E178     		ldrb	r1, [r4, #3]	@ zero_extendqisi2
 435              	.LVL48:
 359:lib/utils.c   ****         V = src[3] << 4;   // 低4位为V
 436              		.loc 1 359 9 is_stmt 1 view .LVU126
 437              		.loc 1 359 11 is_stmt 0 view .LVU127
 438 002a 0A01     		lsls	r2, r1, #4
 439              	.LVL49:
 360:lib/utils.c   ****         dst[1] = yuv422_to_rgb565(Y1, U, V);
 440              		.loc 1 360 9 is_stmt 1 view .LVU128
 441              		.loc 1 360 18 is_stmt 0 view .LVU129
 442 002c 02F0F002 		and	r2, r2, #240
 443              	.LVL50:
 444              		.loc 1 360 18 view .LVU130
 445 0030 01F0F001 		and	r1, r1, #240
 446              	.LVL51:
 447              		.loc 1 360 18 view .LVU131
 448 0034 4846     		mov	r0, r9
 449 0036 FFF7FEFF 		bl	yuv422_to_rgb565
 450              	.LVL52:
 451              		.loc 1 360 16 discriminator 1 view .LVU132
 452 003a 6880     		strh	r0, [r5, #2]	@ movhi
 361:lib/utils.c   **** 
 362:lib/utils.c   ****         // 调整源指针
 363:lib/utils.c   ****         src += 4;
 453              		.loc 1 363 9 is_stmt 1 view .LVU133
 454              		.loc 1 363 13 is_stmt 0 view .LVU134
 455 003c 0434     		adds	r4, r4, #4
 456              	.LVL53:
 364:lib/utils.c   ****         // 调整目标指针
 365:lib/utils.c   ****         dst += 2;
 457              		.loc 1 365 9 is_stmt 1 view .LVU135
 458              		.loc 1 365 13 is_stmt 0 view .LVU136
 459 003e 0435     		adds	r5, r5, #4
 460              	.LVL54:
 461              		.loc 1 365 13 view .LVU137
 462              	.LBE14:
 347:lib/utils.c   ****     {
 463              		.loc 1 347 46 is_stmt 1 discriminator 3 view .LVU138
 464 0040 0136     		adds	r6, r6, #1
 465              	.LVL55:
 466              	.L29:
 347:lib/utils.c   ****     {
 467              		.loc 1 347 23 discriminator 1 view .LVU139
 347:lib/utils.c   ****     {
 468              		.loc 1 347 31 is_stmt 0 discriminator 1 view .LVU140
 469 0042 07FB08F0 		mul	r0, r7, r8
 347:lib/utils.c   ****     {
 470              		.loc 1 347 40 discriminator 1 view .LVU141
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 16


 471 0046 00EBD070 		add	r0, r0, r0, lsr #31
 347:lib/utils.c   ****     {
 472              		.loc 1 347 23 discriminator 1 view .LVU142
 473 004a B6EB600F 		cmp	r6, r0, asr #1
 474 004e DFDB     		blt	.L30
 347:lib/utils.c   ****     {
 475              		.loc 1 347 23 discriminator 1 view .LVU143
 476              	.LBE13:
 366:lib/utils.c   ****     }
 367:lib/utils.c   **** }
 477              		.loc 1 367 1 view .LVU144
 478 0050 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 479              		.loc 1 367 1 view .LVU145
 480              		.cfi_endproc
 481              	.LFE4:
 483              		.section	.text.U32_memcpy_asm,"ax",%progbits
 484              		.align	1
 485              		.global	U32_memcpy_asm
 486              		.syntax unified
 487              		.thumb
 488              		.thumb_func
 490              	U32_memcpy_asm:
 491              	.LVL56:
 492              	.LFB5:
 368:lib/utils.c   **** 
 369:lib/utils.c   **** inline void U32_memcpy_asm(uint32_t *dest, const uint32_t *src, int num)
 370:lib/utils.c   **** {
 493              		.loc 1 370 1 is_stmt 1 view -0
 494              		.cfi_startproc
 495              		@ args = 0, pretend = 0, frame = 0
 496              		@ frame_needed = 0, uses_anonymous_args = 0
 497              		@ link register save eliminated.
 498              		.loc 1 370 1 is_stmt 0 view .LVU147
 499 0000 1346     		mov	r3, r2
 371:lib/utils.c   ****     asm volatile(
 500              		.loc 1 371 5 is_stmt 1 view .LVU148
 501              		.syntax unified
 502              	@ 371 "lib/utils.c" 1
 503              		1: 
 504 0002 51F8042B 	LDR r2, [r1], #4 
 505 0006 40F8042B 	STR r2, [r0], #4 
 506 000a 013B     	SUBS r3, r3, #1 
 507 000c F9D1     	BNE 1b 
 508              	
 509              	@ 0 "" 2
 510              	.LVL57:
 372:lib/utils.c   ****         "1: \n"
 373:lib/utils.c   ****         "LDR r2, [%1], #4 \n" // 从 src 加载 32 位数据到寄存器 r2，并自增 src 指针
 374:lib/utils.c   ****         "STR r2, [%0], #4 \n" // 将 r2 中的数据存储到 dest，并自增 dest 指针
 375:lib/utils.c   ****         "SUBS %2, %2, #1 \n"  // num -= 1，递减计数器
 376:lib/utils.c   ****         "BNE 1b \n"           // 如果 num > 0，跳转到标签 1，继续循环
 377:lib/utils.c   ****         :
 378:lib/utils.c   ****         : "r"(dest), "r"(src), "r"(num) // 输入操作数：dest, src, num
 379:lib/utils.c   ****         : "r2", "memory"                // 使用的寄存器 r2 和 memory
 380:lib/utils.c   ****     );
 381:lib/utils.c   **** }
 511              		.loc 1 381 1 is_stmt 0 view .LVU149
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 17


 512              		.thumb
 513              		.syntax unified
 514 000e 7047     		bx	lr
 515              		.cfi_endproc
 516              	.LFE5:
 518              		.section	.text.U64_memcpy_fast,"ax",%progbits
 519              		.align	1
 520              		.global	U64_memcpy_fast
 521              		.syntax unified
 522              		.thumb
 523              		.thumb_func
 525              	U64_memcpy_fast:
 526              	.LVL58:
 527              	.LFB6:
 382:lib/utils.c   **** 
 383:lib/utils.c   **** inline void U64_memcpy_fast(uint64_t *dest, const uint64_t *src, int num)
 384:lib/utils.c   **** {
 528              		.loc 1 384 1 is_stmt 1 view -0
 529              		.cfi_startproc
 530              		@ args = 0, pretend = 0, frame = 0
 531              		@ frame_needed = 0, uses_anonymous_args = 0
 532              		@ link register save eliminated.
 533              		.loc 1 384 1 is_stmt 0 view .LVU151
 534 0000 9446     		mov	ip, r2
 385:lib/utils.c   ****     asm volatile(
 535              		.loc 1 385 5 is_stmt 1 view .LVU152
 536              		.syntax unified
 537              	@ 385 "lib/utils.c" 1
 538              		1: 
 539 0002 51F8042B 	LDR r2, [r1], #4 
 540 0006 51F8043B 	LDR r3, [r1], #4 
 541 000a 40F8042B 	STR r2, [r0], #4 
 542 000e 40F8043B 	STR r3, [r0], #4 
 543 0012 BCF1010C 	SUBS ip, ip, #1 
 544 0016 F4D1     	BNE 1b 
 545              	
 546              	@ 0 "" 2
 547              	.LVL59:
 386:lib/utils.c   ****         "1: \n"
 387:lib/utils.c   ****         "LDR r2, [%1], #4 \n" // 从 src 加载低 32 位到 r2
 388:lib/utils.c   ****         "LDR r3, [%1], #4 \n" // 从 src 加载高 32 位到 r3
 389:lib/utils.c   ****         "STR r2, [%0], #4 \n" // 将 r2 存储到 dest 的低 32 位
 390:lib/utils.c   ****         "STR r3, [%0], #4 \n" // 将 r3 存储到 dest 的高 32 位
 391:lib/utils.c   ****         "SUBS %2, %2, #1 \n"  // num -= 1，递减计数器
 392:lib/utils.c   ****         "BNE 1b \n"           // 如果 num > 0，跳转到标签 1，继续循环
 393:lib/utils.c   ****         :
 394:lib/utils.c   ****         : "r"(dest), "r"(src), "r"(num)
 395:lib/utils.c   ****         : "r2", "r3", "memory");
 396:lib/utils.c   **** }
 548              		.loc 1 396 1 is_stmt 0 view .LVU153
 549              		.thumb
 550              		.syntax unified
 551 0018 7047     		bx	lr
 552              		.cfi_endproc
 553              	.LFE6:
 555              		.section	.text.gray_to_rgb565,"ax",%progbits
 556              		.align	1
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 18


 557              		.global	gray_to_rgb565
 558              		.syntax unified
 559              		.thumb
 560              		.thumb_func
 562              	gray_to_rgb565:
 563              	.LVL60:
 564              	.LFB7:
 397:lib/utils.c   **** 
 398:lib/utils.c   **** uint16_t gray_to_rgb565(uint16_t gray, uint16_t min_gray, uint16_t max_gray)
 399:lib/utils.c   **** {
 565              		.loc 1 399 1 is_stmt 1 view -0
 566              		.cfi_startproc
 567              		@ args = 0, pretend = 0, frame = 8
 568              		@ frame_needed = 0, uses_anonymous_args = 0
 569              		@ link register save eliminated.
 570              		.loc 1 399 1 is_stmt 0 view .LVU155
 571 0000 10B4     		push	{r4}
 572              	.LCFI5:
 573              		.cfi_def_cfa_offset 4
 574              		.cfi_offset 4, -4
 575 0002 83B0     		sub	sp, sp, #12
 576              	.LCFI6:
 577              		.cfi_def_cfa_offset 16
 400:lib/utils.c   ****     uint8_t r, g, b;
 578              		.loc 1 400 5 is_stmt 1 view .LVU156
 401:lib/utils.c   **** 
 402:lib/utils.c   ****     // 归一化灰度值到 [0, 1]
 403:lib/utils.c   ****     float normalized_gray = (float)(gray - min_gray) / (max_gray - min_gray);
 579              		.loc 1 403 5 view .LVU157
 580              		.loc 1 403 42 is_stmt 0 view .LVU158
 581 0004 401A     		subs	r0, r0, r1
 582              	.LVL61:
 583              		.loc 1 403 29 view .LVU159
 584 0006 07EE900A 		vmov	s15, r0	@ int
 585 000a F8EEE76A 		vcvt.f32.s32	s13, s15
 586              		.loc 1 403 66 view .LVU160
 587 000e 521A     		subs	r2, r2, r1
 588              	.LVL62:
 589              		.loc 1 403 54 view .LVU161
 590 0010 07EE902A 		vmov	s15, r2	@ int
 591 0014 B8EEE77A 		vcvt.f32.s32	s14, s15
 592              		.loc 1 403 11 view .LVU162
 593 0018 C6EE877A 		vdiv.f32	s15, s13, s14
 594              	.LVL63:
 404:lib/utils.c   ****     if (normalized_gray < 0.0f)
 595              		.loc 1 404 5 is_stmt 1 view .LVU163
 596              		.loc 1 404 8 is_stmt 0 view .LVU164
 597 001c F5EEC07A 		vcmpe.f32	s15, #0
 598 0020 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 599 0024 45D4     		bmi	.L49
 405:lib/utils.c   ****         normalized_gray = 0.0f;
 406:lib/utils.c   ****     else if (normalized_gray > 1.0f)
 600              		.loc 1 406 10 is_stmt 1 view .LVU165
 601              		.loc 1 406 13 is_stmt 0 view .LVU166
 602 0026 B7EE007A 		vmov.f32	s14, #1.0e+0
 603 002a F4EEC77A 		vcmpe.f32	s15, s14
 604 002e F1EE10FA 		vmrs	APSR_nzcv, FPSCR
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 19


 605 0032 36DD     		ble	.L58
 407:lib/utils.c   ****         normalized_gray = 1.0f;
 606              		.loc 1 407 25 view .LVU167
 607 0034 F7EE007A 		vmov.f32	s15, #1.0e+0
 608              	.LVL64:
 609              	.L36:
 408:lib/utils.c   **** 
 409:lib/utils.c   ****     // 基础伪彩：蓝-绿-红-紫色过渡（保持室温偏蓝）
 410:lib/utils.c   ****     if (normalized_gray < 0.5f)
 411:lib/utils.c   ****     {
 412:lib/utils.c   ****         float t = normalized_gray / 0.5f; // 0~1
 413:lib/utils.c   ****         r = 0;
 414:lib/utils.c   ****         g = (uint8_t)(t * 32.0f);
 415:lib/utils.c   ****         b = 31;
 416:lib/utils.c   ****     }
 417:lib/utils.c   ****     else if (normalized_gray < 0.75f)
 610              		.loc 1 417 10 is_stmt 1 view .LVU168
 611              		.loc 1 417 13 is_stmt 0 view .LVU169
 612 0038 B6EE087A 		vmov.f32	s14, #7.5e-1
 613 003c F4EEC77A 		vcmpe.f32	s15, s14
 614 0040 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 615 0044 40F1AD80 		bpl	.L56
 616              	.LBB15:
 418:lib/utils.c   ****     {
 419:lib/utils.c   ****         float t = (normalized_gray - 0.5f) / 0.25f; // 0~1
 617              		.loc 1 419 9 is_stmt 1 view .LVU170
 618              		.loc 1 419 36 is_stmt 0 view .LVU171
 619 0048 F6EE006A 		vmov.f32	s13, #5.0e-1
 620 004c 77EEE67A 		vsub.f32	s15, s15, s13
 621              		.loc 1 419 15 view .LVU172
 622 0050 B1EE007A 		vmov.f32	s14, #4.0e+0
 623 0054 67EE877A 		vmul.f32	s15, s15, s14
 624              	.LVL65:
 420:lib/utils.c   ****         r = (uint8_t)(t * 31.0f);
 625              		.loc 1 420 9 is_stmt 1 view .LVU173
 626              		.loc 1 420 25 is_stmt 0 view .LVU174
 627 0058 B3EE0F6A 		vmov.f32	s12, #3.1e+1
 628 005c 27EE867A 		vmul.f32	s14, s15, s12
 629              		.loc 1 420 11 view .LVU175
 630 0060 BCEEC77A 		vcvt.u32.f32	s14, s14
 631 0064 8DED017A 		vstr.32	s14, [sp, #4]	@ int
 632 0068 9DF80410 		ldrb	r1, [sp, #4]	@ zero_extendqisi2
 633              	.LVL66:
 421:lib/utils.c   ****         g = (uint8_t)((0.5f + 0.5f * t) * 63.0f);
 634              		.loc 1 421 9 is_stmt 1 view .LVU176
 635              		.loc 1 421 36 is_stmt 0 view .LVU177
 636 006c 27EEA67A 		vmul.f32	s14, s15, s13
 637              		.loc 1 421 29 view .LVU178
 638 0070 37EE267A 		vadd.f32	s14, s14, s13
 639              		.loc 1 421 41 view .LVU179
 640 0074 DFED7C6A 		vldr.32	s13, .L59
 641 0078 27EE267A 		vmul.f32	s14, s14, s13
 642              		.loc 1 421 11 view .LVU180
 643 007c BCEEC77A 		vcvt.u32.f32	s14, s14
 644 0080 8DED017A 		vstr.32	s14, [sp, #4]	@ int
 645 0084 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 646              	.LVL67:
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 20


 422:lib/utils.c   ****         b = (uint8_t)((1.0f - t) * 31.0f);
 647              		.loc 1 422 9 is_stmt 1 view .LVU181
 648              		.loc 1 422 29 is_stmt 0 view .LVU182
 649 0088 B7EE007A 		vmov.f32	s14, #1.0e+0
 650 008c 77EE677A 		vsub.f32	s15, s14, s15
 651              	.LVL68:
 652              		.loc 1 422 34 view .LVU183
 653 0090 67EE867A 		vmul.f32	s15, s15, s12
 654              		.loc 1 422 11 view .LVU184
 655 0094 FCEEE77A 		vcvt.u32.f32	s15, s15
 656 0098 CDED017A 		vstr.32	s15, [sp, #4]	@ int
 657 009c 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 658              	.LVL69:
 659              		.loc 1 422 11 view .LVU185
 660              	.LBE15:
 661 00a0 17E0     		b	.L38
 662              	.LVL70:
 663              	.L58:
 410:lib/utils.c   ****     {
 664              		.loc 1 410 5 is_stmt 1 view .LVU186
 410:lib/utils.c   ****     {
 665              		.loc 1 410 8 is_stmt 0 view .LVU187
 666 00a2 B6EE007A 		vmov.f32	s14, #5.0e-1
 667 00a6 F4EEC77A 		vcmpe.f32	s15, s14
 668 00aa F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 669 00ae 02D4     		bmi	.L35
 670 00b0 C2E7     		b	.L36
 671              	.L49:
 405:lib/utils.c   ****     else if (normalized_gray > 1.0f)
 672              		.loc 1 405 25 view .LVU188
 673 00b2 DFED6E7A 		vldr.32	s15, .L59+4
 674              	.LVL71:
 675              	.L35:
 676              	.LBB16:
 412:lib/utils.c   ****         r = 0;
 677              		.loc 1 412 9 is_stmt 1 view .LVU189
 412:lib/utils.c   ****         r = 0;
 678              		.loc 1 412 15 is_stmt 0 view .LVU190
 679 00b6 77EEA77A 		vadd.f32	s15, s15, s15
 680              	.LVL72:
 413:lib/utils.c   ****         g = (uint8_t)(t * 32.0f);
 681              		.loc 1 413 9 is_stmt 1 view .LVU191
 414:lib/utils.c   ****         b = 31;
 682              		.loc 1 414 9 view .LVU192
 414:lib/utils.c   ****         b = 31;
 683              		.loc 1 414 25 is_stmt 0 view .LVU193
 684 00ba 9FED6D7A 		vldr.32	s14, .L59+8
 685 00be 67EE877A 		vmul.f32	s15, s15, s14
 686              	.LVL73:
 414:lib/utils.c   ****         b = 31;
 687              		.loc 1 414 11 view .LVU194
 688 00c2 FCEEE77A 		vcvt.u32.f32	s15, s15
 689 00c6 CDED017A 		vstr.32	s15, [sp, #4]	@ int
 690 00ca 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 691              	.LVL74:
 415:lib/utils.c   ****     }
 692              		.loc 1 415 9 is_stmt 1 view .LVU195
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 21


 415:lib/utils.c   ****     }
 693              		.loc 1 415 11 is_stmt 0 view .LVU196
 694 00ce 1F22     		movs	r2, #31
 413:lib/utils.c   ****         g = (uint8_t)(t * 32.0f);
 695              		.loc 1 413 11 view .LVU197
 696 00d0 0021     		movs	r1, #0
 697              	.LVL75:
 698              	.L38:
 413:lib/utils.c   ****         g = (uint8_t)(t * 32.0f);
 699              		.loc 1 413 11 view .LVU198
 700              	.LBE16:
 423:lib/utils.c   ****     }
 424:lib/utils.c   ****     else
 425:lib/utils.c   ****     {
 426:lib/utils.c   ****         float t = (normalized_gray - 0.75f) / 0.25f; // 0~1
 427:lib/utils.c   ****         r = 31;
 428:lib/utils.c   ****         g = (uint8_t)((1.0f - t) * 63.0f);
 429:lib/utils.c   ****         b = (uint8_t)(t * 31.0f);
 430:lib/utils.c   ****     }
 431:lib/utils.c   **** 
 432:lib/utils.c   ****     // 全局色调偏移：g_color_tint <0 偏冷，>0 偏暖，影响整幅图
 433:lib/utils.c   ****     if (g_color_tint != 0)
 701              		.loc 1 433 5 is_stmt 1 view .LVU199
 702              		.loc 1 433 22 is_stmt 0 view .LVU200
 703 00d2 6848     		ldr	r0, .L59+12
 704 00d4 90F90000 		ldrsb	r0, [r0]
 705              		.loc 1 433 8 view .LVU201
 706 00d8 0028     		cmp	r0, #0
 707 00da 58D0     		beq	.L41
 708              	.LBB17:
 434:lib/utils.c   ****     {
 435:lib/utils.c   ****         float alpha = (float)(g_color_tint > 0 ? g_color_tint : -g_color_tint) / 10.0f; // 0~1
 709              		.loc 1 435 9 is_stmt 1 view .LVU202
 710              		.loc 1 435 23 is_stmt 0 view .LVU203
 711 00dc 0028     		cmp	r0, #0
 712 00de 40F38280 		ble	.L42
 713              		.loc 1 435 23 discriminator 1 view .LVU204
 714 00e2 07EE900A 		vmov	s15, r0	@ int
 715 00e6 F8EEE77A 		vcvt.f32.s32	s15, s15
 716              	.L43:
 717              		.loc 1 435 15 discriminator 4 view .LVU205
 718 00ea F2EE046A 		vmov.f32	s13, #1.0e+1
 719 00ee 87EEA67A 		vdiv.f32	s14, s15, s13
 720              	.LVL76:
 436:lib/utils.c   ****         if (alpha > 1.0f)
 721              		.loc 1 436 9 is_stmt 1 view .LVU206
 722              		.loc 1 436 12 is_stmt 0 view .LVU207
 723 00f2 F7EE007A 		vmov.f32	s15, #1.0e+0
 724 00f6 B4EEE77A 		vcmpe.f32	s14, s15
 725 00fa F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 726 00fe 01DD     		ble	.L44
 437:lib/utils.c   ****             alpha = 1.0f;
 727              		.loc 1 437 19 view .LVU208
 728 0100 B0EE677A 		vmov.f32	s14, s15
 729              	.LVL77:
 730              	.L44:
 438:lib/utils.c   **** 
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 22


 439:lib/utils.c   ****         if (g_color_tint > 0)
 731              		.loc 1 439 9 is_stmt 1 view .LVU209
 732              		.loc 1 439 12 is_stmt 0 view .LVU210
 733 0104 0028     		cmp	r0, #0
 734 0106 74DD     		ble	.L45
 440:lib/utils.c   ****         {
 441:lib/utils.c   ****             // 暖色：加强红色，减弱蓝色、部分绿色
 442:lib/utils.c   ****             r = (uint8_t)(r + (float)(31 - r) * alpha);
 735              		.loc 1 442 13 is_stmt 1 view .LVU211
 736              		.loc 1 442 42 is_stmt 0 view .LVU212
 737 0108 C1F11F00 		rsb	r0, r1, #31
 738 010c 06EE900A 		vmov	s13, r0	@ int
 739              		.loc 1 442 31 view .LVU213
 740 0110 F8EEE66A 		vcvt.f32.s32	s13, s13
 741              		.loc 1 442 47 view .LVU214
 742 0114 66EE876A 		vmul.f32	s13, s13, s14
 743              		.loc 1 442 29 view .LVU215
 744 0118 07EE901A 		vmov	s15, r1	@ int
 745 011c F8EEE77A 		vcvt.f32.s32	s15, s15
 746 0120 77EEA67A 		vadd.f32	s15, s15, s13
 747              		.loc 1 442 15 view .LVU216
 748 0124 FCEEE77A 		vcvt.u32.f32	s15, s15
 749 0128 CDED017A 		vstr.32	s15, [sp, #4]	@ int
 750 012c 9DF80410 		ldrb	r1, [sp, #4]	@ zero_extendqisi2
 751              	.LVL78:
 443:lib/utils.c   ****             g = (uint8_t)(g * (1.0f - 0.3f * alpha));
 752              		.loc 1 443 13 is_stmt 1 view .LVU217
 753              		.loc 1 443 44 is_stmt 0 view .LVU218
 754 0130 DFED516A 		vldr.32	s13, .L59+16
 755 0134 67EE266A 		vmul.f32	s13, s14, s13
 756              		.loc 1 443 37 view .LVU219
 757 0138 B7EE006A 		vmov.f32	s12, #1.0e+0
 758 013c 76EE666A 		vsub.f32	s13, s12, s13
 759              		.loc 1 443 29 view .LVU220
 760 0140 07EE903A 		vmov	s15, r3	@ int
 761 0144 F8EEE77A 		vcvt.f32.s32	s15, s15
 762 0148 67EEA67A 		vmul.f32	s15, s15, s13
 763              		.loc 1 443 15 view .LVU221
 764 014c FCEEE77A 		vcvt.u32.f32	s15, s15
 765 0150 CDED017A 		vstr.32	s15, [sp, #4]	@ int
 766 0154 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 767              	.LVL79:
 444:lib/utils.c   ****             b = (uint8_t)(b * (1.0f - 0.7f * alpha));
 768              		.loc 1 444 13 is_stmt 1 view .LVU222
 769              		.loc 1 444 44 is_stmt 0 view .LVU223
 770 0158 DFED487A 		vldr.32	s15, .L59+20
 771 015c 27EE277A 		vmul.f32	s14, s14, s15
 772              	.LVL80:
 773              		.loc 1 444 37 view .LVU224
 774 0160 36EE476A 		vsub.f32	s12, s12, s14
 775              		.loc 1 444 29 view .LVU225
 776 0164 07EE902A 		vmov	s15, r2	@ int
 777 0168 F8EEE77A 		vcvt.f32.s32	s15, s15
 778 016c 67EE867A 		vmul.f32	s15, s15, s12
 779              		.loc 1 444 15 view .LVU226
 780 0170 FCEEE77A 		vcvt.u32.f32	s15, s15
 781 0174 CDED017A 		vstr.32	s15, [sp, #4]	@ int
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 23


 782 0178 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 783              	.LVL81:
 784              	.L46:
 445:lib/utils.c   ****         }
 446:lib/utils.c   ****         else
 447:lib/utils.c   ****         {
 448:lib/utils.c   ****             // 冷色：加强蓝色，减弱红色、部分绿色
 449:lib/utils.c   ****             b = (uint8_t)(b + (float)(31 - b) * alpha);
 450:lib/utils.c   ****             g = (uint8_t)(g * (1.0f - 0.3f * alpha));
 451:lib/utils.c   ****             r = (uint8_t)(r * (1.0f - 0.7f * alpha));
 452:lib/utils.c   ****         }
 453:lib/utils.c   **** 
 454:lib/utils.c   ****         // 防止超出 5/6 位范围
 455:lib/utils.c   ****         if (r > 31)
 785              		.loc 1 455 9 is_stmt 1 view .LVU227
 786              		.loc 1 455 12 is_stmt 0 view .LVU228
 787 017c 1F29     		cmp	r1, #31
 788 017e 00D9     		bls	.L47
 456:lib/utils.c   ****             r = 31;
 789              		.loc 1 456 15 view .LVU229
 790 0180 1F21     		movs	r1, #31
 791              	.LVL82:
 792              	.L47:
 457:lib/utils.c   ****         if (g > 63)
 793              		.loc 1 457 9 is_stmt 1 view .LVU230
 794              		.loc 1 457 12 is_stmt 0 view .LVU231
 795 0182 3F2B     		cmp	r3, #63
 796 0184 00D9     		bls	.L48
 458:lib/utils.c   ****             g = 63;
 797              		.loc 1 458 15 view .LVU232
 798 0186 3F23     		movs	r3, #63
 799              	.LVL83:
 800              	.L48:
 459:lib/utils.c   ****         if (b > 31)
 801              		.loc 1 459 9 is_stmt 1 view .LVU233
 802              		.loc 1 459 12 is_stmt 0 view .LVU234
 803 0188 1F2A     		cmp	r2, #31
 804 018a 00D9     		bls	.L41
 460:lib/utils.c   ****             b = 31;
 805              		.loc 1 460 15 view .LVU235
 806 018c 1F22     		movs	r2, #31
 807              	.LVL84:
 808              	.L41:
 809              		.loc 1 460 15 view .LVU236
 810              	.LBE17:
 461:lib/utils.c   ****     }
 462:lib/utils.c   **** 
 463:lib/utils.c   ****     return (r << 11) | (g << 5) | b;
 811              		.loc 1 463 5 is_stmt 1 view .LVU237
 812              		.loc 1 463 22 is_stmt 0 view .LVU238
 813 018e 5801     		lsls	r0, r3, #5
 814 0190 40EAC120 		orr	r0, r0, r1, lsl #11
 815 0194 00B2     		sxth	r0, r0
 816              		.loc 1 463 33 view .LVU239
 817 0196 1043     		orrs	r0, r0, r2
 464:lib/utils.c   **** }
 818              		.loc 1 464 1 view .LVU240
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 24


 819 0198 80B2     		uxth	r0, r0
 820 019a 03B0     		add	sp, sp, #12
 821              	.LCFI7:
 822              		.cfi_remember_state
 823              		.cfi_def_cfa_offset 4
 824              		@ sp needed
 825 019c 5DF8044B 		ldr	r4, [sp], #4
 826              	.LCFI8:
 827              		.cfi_restore 4
 828              		.cfi_def_cfa_offset 0
 829 01a0 7047     		bx	lr
 830              	.LVL85:
 831              	.L56:
 832              	.LCFI9:
 833              		.cfi_restore_state
 834              	.LBB18:
 426:lib/utils.c   ****         r = 31;
 835              		.loc 1 426 9 is_stmt 1 view .LVU241
 426:lib/utils.c   ****         r = 31;
 836              		.loc 1 426 36 is_stmt 0 view .LVU242
 837 01a2 B6EE087A 		vmov.f32	s14, #7.5e-1
 838 01a6 77EEC77A 		vsub.f32	s15, s15, s14
 426:lib/utils.c   ****         r = 31;
 839              		.loc 1 426 15 view .LVU243
 840 01aa B1EE007A 		vmov.f32	s14, #4.0e+0
 841 01ae 67EE877A 		vmul.f32	s15, s15, s14
 842              	.LVL86:
 427:lib/utils.c   ****         g = (uint8_t)((1.0f - t) * 63.0f);
 843              		.loc 1 427 9 is_stmt 1 view .LVU244
 428:lib/utils.c   ****         b = (uint8_t)(t * 31.0f);
 844              		.loc 1 428 9 view .LVU245
 428:lib/utils.c   ****         b = (uint8_t)(t * 31.0f);
 845              		.loc 1 428 29 is_stmt 0 view .LVU246
 846 01b2 B7EE007A 		vmov.f32	s14, #1.0e+0
 847 01b6 37EE677A 		vsub.f32	s14, s14, s15
 428:lib/utils.c   ****         b = (uint8_t)(t * 31.0f);
 848              		.loc 1 428 34 view .LVU247
 849 01ba DFED2B6A 		vldr.32	s13, .L59
 850 01be 27EE267A 		vmul.f32	s14, s14, s13
 428:lib/utils.c   ****         b = (uint8_t)(t * 31.0f);
 851              		.loc 1 428 11 view .LVU248
 852 01c2 BCEEC77A 		vcvt.u32.f32	s14, s14
 853 01c6 8DED017A 		vstr.32	s14, [sp, #4]	@ int
 854 01ca 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 855              	.LVL87:
 429:lib/utils.c   ****     }
 856              		.loc 1 429 9 is_stmt 1 view .LVU249
 429:lib/utils.c   ****     }
 857              		.loc 1 429 25 is_stmt 0 view .LVU250
 858 01ce B3EE0F7A 		vmov.f32	s14, #3.1e+1
 859 01d2 67EE877A 		vmul.f32	s15, s15, s14
 860              	.LVL88:
 429:lib/utils.c   ****     }
 861              		.loc 1 429 11 view .LVU251
 862 01d6 FCEEE77A 		vcvt.u32.f32	s15, s15
 863 01da CDED017A 		vstr.32	s15, [sp, #4]	@ int
 864 01de 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 25


 865              	.LVL89:
 427:lib/utils.c   ****         g = (uint8_t)((1.0f - t) * 63.0f);
 866              		.loc 1 427 11 view .LVU252
 867 01e2 1F21     		movs	r1, #31
 868              	.LVL90:
 427:lib/utils.c   ****         g = (uint8_t)((1.0f - t) * 63.0f);
 869              		.loc 1 427 11 view .LVU253
 870 01e4 75E7     		b	.L38
 871              	.LVL91:
 872              	.L42:
 427:lib/utils.c   ****         g = (uint8_t)((1.0f - t) * 63.0f);
 873              		.loc 1 427 11 view .LVU254
 874              	.LBE18:
 875              	.LBB19:
 435:lib/utils.c   ****         if (alpha > 1.0f)
 876              		.loc 1 435 65 discriminator 2 view .LVU255
 877 01e6 4442     		rsbs	r4, r0, #0
 878 01e8 07EE904A 		vmov	s15, r4	@ int
 435:lib/utils.c   ****         if (alpha > 1.0f)
 879              		.loc 1 435 23 discriminator 2 view .LVU256
 880 01ec F8EEE77A 		vcvt.f32.s32	s15, s15
 881 01f0 7BE7     		b	.L43
 882              	.LVL92:
 883              	.L45:
 449:lib/utils.c   ****             g = (uint8_t)(g * (1.0f - 0.3f * alpha));
 884              		.loc 1 449 13 is_stmt 1 view .LVU257
 449:lib/utils.c   ****             g = (uint8_t)(g * (1.0f - 0.3f * alpha));
 885              		.loc 1 449 42 is_stmt 0 view .LVU258
 886 01f2 C2F11F00 		rsb	r0, r2, #31
 887 01f6 06EE900A 		vmov	s13, r0	@ int
 449:lib/utils.c   ****             g = (uint8_t)(g * (1.0f - 0.3f * alpha));
 888              		.loc 1 449 31 view .LVU259
 889 01fa F8EEE66A 		vcvt.f32.s32	s13, s13
 449:lib/utils.c   ****             g = (uint8_t)(g * (1.0f - 0.3f * alpha));
 890              		.loc 1 449 47 view .LVU260
 891 01fe 66EE876A 		vmul.f32	s13, s13, s14
 449:lib/utils.c   ****             g = (uint8_t)(g * (1.0f - 0.3f * alpha));
 892              		.loc 1 449 29 view .LVU261
 893 0202 07EE902A 		vmov	s15, r2	@ int
 894 0206 F8EEE77A 		vcvt.f32.s32	s15, s15
 895 020a 77EEA67A 		vadd.f32	s15, s15, s13
 449:lib/utils.c   ****             g = (uint8_t)(g * (1.0f - 0.3f * alpha));
 896              		.loc 1 449 15 view .LVU262
 897 020e FCEEE77A 		vcvt.u32.f32	s15, s15
 898 0212 CDED017A 		vstr.32	s15, [sp, #4]	@ int
 899 0216 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 900              	.LVL93:
 450:lib/utils.c   ****             r = (uint8_t)(r * (1.0f - 0.7f * alpha));
 901              		.loc 1 450 13 is_stmt 1 view .LVU263
 450:lib/utils.c   ****             r = (uint8_t)(r * (1.0f - 0.7f * alpha));
 902              		.loc 1 450 44 is_stmt 0 view .LVU264
 903 021a DFED176A 		vldr.32	s13, .L59+16
 904 021e 67EE266A 		vmul.f32	s13, s14, s13
 450:lib/utils.c   ****             r = (uint8_t)(r * (1.0f - 0.7f * alpha));
 905              		.loc 1 450 37 view .LVU265
 906 0222 B7EE006A 		vmov.f32	s12, #1.0e+0
 907 0226 76EE666A 		vsub.f32	s13, s12, s13
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 26


 450:lib/utils.c   ****             r = (uint8_t)(r * (1.0f - 0.7f * alpha));
 908              		.loc 1 450 29 view .LVU266
 909 022a 07EE903A 		vmov	s15, r3	@ int
 910 022e F8EEE77A 		vcvt.f32.s32	s15, s15
 911 0232 67EEA67A 		vmul.f32	s15, s15, s13
 450:lib/utils.c   ****             r = (uint8_t)(r * (1.0f - 0.7f * alpha));
 912              		.loc 1 450 15 view .LVU267
 913 0236 FCEEE77A 		vcvt.u32.f32	s15, s15
 914 023a CDED017A 		vstr.32	s15, [sp, #4]	@ int
 915 023e 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 916              	.LVL94:
 451:lib/utils.c   ****         }
 917              		.loc 1 451 13 is_stmt 1 view .LVU268
 451:lib/utils.c   ****         }
 918              		.loc 1 451 44 is_stmt 0 view .LVU269
 919 0242 DFED0E7A 		vldr.32	s15, .L59+20
 920 0246 27EE277A 		vmul.f32	s14, s14, s15
 921              	.LVL95:
 451:lib/utils.c   ****         }
 922              		.loc 1 451 37 view .LVU270
 923 024a 36EE476A 		vsub.f32	s12, s12, s14
 451:lib/utils.c   ****         }
 924              		.loc 1 451 29 view .LVU271
 925 024e 07EE901A 		vmov	s15, r1	@ int
 926 0252 F8EEE77A 		vcvt.f32.s32	s15, s15
 927 0256 67EE867A 		vmul.f32	s15, s15, s12
 451:lib/utils.c   ****         }
 928              		.loc 1 451 15 view .LVU272
 929 025a FCEEE77A 		vcvt.u32.f32	s15, s15
 930 025e CDED017A 		vstr.32	s15, [sp, #4]	@ int
 931 0262 9DF80410 		ldrb	r1, [sp, #4]	@ zero_extendqisi2
 932              	.LVL96:
 451:lib/utils.c   ****         }
 933              		.loc 1 451 15 view .LVU273
 934 0266 89E7     		b	.L46
 935              	.L60:
 936              		.align	2
 937              	.L59:
 938 0268 00007C42 		.word	1115422720
 939 026c 00000000 		.word	0
 940 0270 00000042 		.word	1107296256
 941 0274 00000000 		.word	g_color_tint
 942 0278 9A99993E 		.word	1050253722
 943 027c 3333333F 		.word	1060320051
 944              	.LBE19:
 945              		.cfi_endproc
 946              	.LFE7:
 948              		.section	.text.medianFilter3x3,"ax",%progbits
 949              		.align	1
 950              		.global	medianFilter3x3
 951              		.syntax unified
 952              		.thumb
 953              		.thumb_func
 955              	medianFilter3x3:
 956              	.LVL97:
 957              	.LFB8:
 465:lib/utils.c   **** 
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 27


 466:lib/utils.c   **** // 3x3中值滤波（比较网络实现）
 467:lib/utils.c   **** #define SWAP(a, b)            \
 468:lib/utils.c   ****     {                         \
 469:lib/utils.c   ****         if ((a) > (b))        \
 470:lib/utils.c   ****         {                     \
 471:lib/utils.c   ****             uint16_t t = (a); \
 472:lib/utils.c   ****             (a) = (b);        \
 473:lib/utils.c   ****             (b) = t;          \
 474:lib/utils.c   ****         }                     \
 475:lib/utils.c   ****     }
 476:lib/utils.c   **** void medianFilter3x3(uint16_t *src, uint16_t *dst, int width, int height)
 477:lib/utils.c   **** {
 958              		.loc 1 477 1 is_stmt 1 view -0
 959              		.cfi_startproc
 960              		@ args = 0, pretend = 0, frame = 24
 961              		@ frame_needed = 0, uses_anonymous_args = 0
 962              		.loc 1 477 1 is_stmt 0 view .LVU275
 963 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 964              	.LCFI10:
 965              		.cfi_def_cfa_offset 24
 966              		.cfi_offset 4, -24
 967              		.cfi_offset 5, -20
 968              		.cfi_offset 6, -16
 969              		.cfi_offset 7, -12
 970              		.cfi_offset 8, -8
 971              		.cfi_offset 14, -4
 972 0004 86B0     		sub	sp, sp, #24
 973              	.LCFI11:
 974              		.cfi_def_cfa_offset 48
 975 0006 0546     		mov	r5, r0
 976 0008 0E46     		mov	r6, r1
 977 000a 1446     		mov	r4, r2
 978 000c 9846     		mov	r8, r3
 478:lib/utils.c   ****     uint16_t window[9];
 979              		.loc 1 478 5 is_stmt 1 view .LVU276
 479:lib/utils.c   ****     for (int y = 1; y < height - 1; y++)
 980              		.loc 1 479 5 view .LVU277
 981              	.LBB20:
 982              		.loc 1 479 10 view .LVU278
 983              	.LVL98:
 984              		.loc 1 479 14 is_stmt 0 view .LVU279
 985 000e 0127     		movs	r7, #1
 986              		.loc 1 479 5 view .LVU280
 987 0010 E6E0     		b	.L62
 988              	.LVL99:
 989              	.L63:
 990              	.LBB21:
 991              	.LBB22:
 992              	.LBB23:
 993              	.LBB24:
 480:lib/utils.c   ****     {
 481:lib/utils.c   ****         for (int x = 1; x < width - 1; x++)
 482:lib/utils.c   ****         {
 483:lib/utils.c   ****             int k = 0;
 484:lib/utils.c   ****             for (int dy = -1; dy <= 1; dy++)
 485:lib/utils.c   ****             {
 486:lib/utils.c   ****                 for (int dx = -1; dx <= 1; dx++)
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 28


 487:lib/utils.c   ****                 {
 488:lib/utils.c   ****                     window[k++] = src[(y + dy) * width + (x + dx)];
 994              		.loc 1 488 21 is_stmt 1 view .LVU281
 995              		.loc 1 488 42 is_stmt 0 view .LVU282
 996 0012 07EB0C01 		add	r1, r7, ip
 997              		.loc 1 488 61 view .LVU283
 998 0016 0EEB0302 		add	r2, lr, r3
 999              		.loc 1 488 56 view .LVU284
 1000 001a 04FB0122 		mla	r2, r4, r1, r2
 1001              	.LVL100:
 1002              		.loc 1 488 38 view .LVU285
 1003 001e 35F81210 		ldrh	r1, [r5, r2, lsl #1]
 1004              		.loc 1 488 33 view .LVU286
 1005 0022 06AA     		add	r2, sp, #24
 1006 0024 02EB4002 		add	r2, r2, r0, lsl #1
 1007 0028 22F8141C 		strh	r1, [r2, #-20]	@ movhi
 486:lib/utils.c   ****                 {
 1008              		.loc 1 486 46 is_stmt 1 discriminator 3 view .LVU287
 1009 002c 0133     		adds	r3, r3, #1
 1010              	.LVL101:
 1011              		.loc 1 488 29 is_stmt 0 view .LVU288
 1012 002e 0130     		adds	r0, r0, #1
 1013              	.LVL102:
 1014              	.L64:
 486:lib/utils.c   ****                 {
 1015              		.loc 1 486 38 is_stmt 1 discriminator 1 view .LVU289
 1016 0030 012B     		cmp	r3, #1
 1017 0032 EEDD     		ble	.L63
 486:lib/utils.c   ****                 {
 1018              		.loc 1 486 38 is_stmt 0 discriminator 1 view .LVU290
 1019              	.LBE24:
 484:lib/utils.c   ****             {
 1020              		.loc 1 484 42 is_stmt 1 discriminator 2 view .LVU291
 1021 0034 0CF1010C 		add	ip, ip, #1
 1022              	.LVL103:
 1023              	.L84:
 484:lib/utils.c   ****             {
 1024              		.loc 1 484 34 discriminator 1 view .LVU292
 1025 0038 BCF1010F 		cmp	ip, #1
 1026 003c 02DC     		bgt	.L94
 1027              	.LBB25:
 486:lib/utils.c   ****                 {
 1028              		.loc 1 486 26 is_stmt 0 view .LVU293
 1029 003e 4FF0FF33 		mov	r3, #-1
 1030 0042 F5E7     		b	.L64
 1031              	.L94:
 1032              	.LBE25:
 1033              	.LBE23:
 489:lib/utils.c   ****                 }
 490:lib/utils.c   ****             }
 491:lib/utils.c   ****             // 比较网络排序，window[4]为中值
 492:lib/utils.c   ****             SWAP(window[1], window[2]);
 1034              		.loc 1 492 13 is_stmt 1 view .LVU294
 1035 0044 BDF80630 		ldrh	r3, [sp, #6]
 1036 0048 BDF80820 		ldrh	r2, [sp, #8]
 1037 004c 9342     		cmp	r3, r2
 1038 004e 03D9     		bls	.L65
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 29


 1039              	.LBB26:
 1040              		.loc 1 492 13 discriminator 1 view .LVU295
 1041              	.LVL104:
 1042              		.loc 1 492 13 discriminator 1 view .LVU296
 1043 0050 ADF80620 		strh	r2, [sp, #6]	@ movhi
 1044              		.loc 1 492 13 discriminator 1 view .LVU297
 1045 0054 ADF80830 		strh	r3, [sp, #8]	@ movhi
 1046              	.LVL105:
 1047              	.L65:
 1048              		.loc 1 492 13 is_stmt 0 discriminator 1 view .LVU298
 1049              	.LBE26:
 1050              		.loc 1 492 39 is_stmt 1 discriminator 3 view .LVU299
 493:lib/utils.c   ****             SWAP(window[4], window[5]);
 1051              		.loc 1 493 13 view .LVU300
 1052 0058 BDF80C30 		ldrh	r3, [sp, #12]
 1053 005c BDF80E20 		ldrh	r2, [sp, #14]
 1054 0060 9342     		cmp	r3, r2
 1055 0062 03D9     		bls	.L66
 1056              	.LBB27:
 1057              		.loc 1 493 13 discriminator 1 view .LVU301
 1058              	.LVL106:
 1059              		.loc 1 493 13 discriminator 1 view .LVU302
 1060 0064 ADF80C20 		strh	r2, [sp, #12]	@ movhi
 1061              		.loc 1 493 13 discriminator 1 view .LVU303
 1062 0068 ADF80E30 		strh	r3, [sp, #14]	@ movhi
 1063              	.LVL107:
 1064              	.L66:
 1065              		.loc 1 493 13 is_stmt 0 discriminator 1 view .LVU304
 1066              	.LBE27:
 1067              		.loc 1 493 39 is_stmt 1 discriminator 3 view .LVU305
 494:lib/utils.c   ****             SWAP(window[7], window[8]);
 1068              		.loc 1 494 13 view .LVU306
 1069 006c BDF81230 		ldrh	r3, [sp, #18]
 1070 0070 BDF81420 		ldrh	r2, [sp, #20]
 1071 0074 9342     		cmp	r3, r2
 1072 0076 03D9     		bls	.L67
 1073              	.LBB28:
 1074              		.loc 1 494 13 discriminator 1 view .LVU307
 1075              	.LVL108:
 1076              		.loc 1 494 13 discriminator 1 view .LVU308
 1077 0078 ADF81220 		strh	r2, [sp, #18]	@ movhi
 1078              		.loc 1 494 13 discriminator 1 view .LVU309
 1079 007c ADF81430 		strh	r3, [sp, #20]	@ movhi
 1080              	.LVL109:
 1081              	.L67:
 1082              		.loc 1 494 13 is_stmt 0 discriminator 1 view .LVU310
 1083              	.LBE28:
 1084              		.loc 1 494 39 is_stmt 1 discriminator 3 view .LVU311
 495:lib/utils.c   ****             SWAP(window[0], window[1]);
 1085              		.loc 1 495 13 view .LVU312
 1086 0080 BDF80430 		ldrh	r3, [sp, #4]
 1087 0084 BDF80620 		ldrh	r2, [sp, #6]
 1088 0088 9342     		cmp	r3, r2
 1089 008a 03D9     		bls	.L68
 1090              	.LBB29:
 1091              		.loc 1 495 13 discriminator 1 view .LVU313
 1092              	.LVL110:
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 30


 1093              		.loc 1 495 13 discriminator 1 view .LVU314
 1094 008c ADF80420 		strh	r2, [sp, #4]	@ movhi
 1095              		.loc 1 495 13 discriminator 1 view .LVU315
 1096 0090 ADF80630 		strh	r3, [sp, #6]	@ movhi
 1097              	.LVL111:
 1098              	.L68:
 1099              		.loc 1 495 13 is_stmt 0 discriminator 1 view .LVU316
 1100              	.LBE29:
 1101              		.loc 1 495 39 is_stmt 1 discriminator 3 view .LVU317
 496:lib/utils.c   ****             SWAP(window[3], window[4]);
 1102              		.loc 1 496 13 view .LVU318
 1103 0094 BDF80A30 		ldrh	r3, [sp, #10]
 1104 0098 BDF80C20 		ldrh	r2, [sp, #12]
 1105 009c 9342     		cmp	r3, r2
 1106 009e 03D9     		bls	.L69
 1107              	.LBB30:
 1108              		.loc 1 496 13 discriminator 1 view .LVU319
 1109              	.LVL112:
 1110              		.loc 1 496 13 discriminator 1 view .LVU320
 1111 00a0 ADF80A20 		strh	r2, [sp, #10]	@ movhi
 1112              		.loc 1 496 13 discriminator 1 view .LVU321
 1113 00a4 ADF80C30 		strh	r3, [sp, #12]	@ movhi
 1114              	.LVL113:
 1115              	.L69:
 1116              		.loc 1 496 13 is_stmt 0 discriminator 1 view .LVU322
 1117              	.LBE30:
 1118              		.loc 1 496 39 is_stmt 1 discriminator 3 view .LVU323
 497:lib/utils.c   ****             SWAP(window[6], window[7]);
 1119              		.loc 1 497 13 view .LVU324
 1120 00a8 BDF81030 		ldrh	r3, [sp, #16]
 1121 00ac BDF81220 		ldrh	r2, [sp, #18]
 1122 00b0 9342     		cmp	r3, r2
 1123 00b2 03D9     		bls	.L70
 1124              	.LBB31:
 1125              		.loc 1 497 13 discriminator 1 view .LVU325
 1126              	.LVL114:
 1127              		.loc 1 497 13 discriminator 1 view .LVU326
 1128 00b4 ADF81020 		strh	r2, [sp, #16]	@ movhi
 1129              		.loc 1 497 13 discriminator 1 view .LVU327
 1130 00b8 ADF81230 		strh	r3, [sp, #18]	@ movhi
 1131              	.LVL115:
 1132              	.L70:
 1133              		.loc 1 497 13 is_stmt 0 discriminator 1 view .LVU328
 1134              	.LBE31:
 1135              		.loc 1 497 39 is_stmt 1 discriminator 3 view .LVU329
 498:lib/utils.c   ****             SWAP(window[1], window[2]);
 1136              		.loc 1 498 13 view .LVU330
 1137 00bc BDF80630 		ldrh	r3, [sp, #6]
 1138 00c0 BDF80820 		ldrh	r2, [sp, #8]
 1139 00c4 9342     		cmp	r3, r2
 1140 00c6 03D9     		bls	.L71
 1141              	.LBB32:
 1142              		.loc 1 498 13 discriminator 1 view .LVU331
 1143              	.LVL116:
 1144              		.loc 1 498 13 discriminator 1 view .LVU332
 1145 00c8 ADF80620 		strh	r2, [sp, #6]	@ movhi
 1146              		.loc 1 498 13 discriminator 1 view .LVU333
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 31


 1147 00cc ADF80830 		strh	r3, [sp, #8]	@ movhi
 1148              	.LVL117:
 1149              	.L71:
 1150              		.loc 1 498 13 is_stmt 0 discriminator 1 view .LVU334
 1151              	.LBE32:
 1152              		.loc 1 498 39 is_stmt 1 discriminator 3 view .LVU335
 499:lib/utils.c   ****             SWAP(window[4], window[5]);
 1153              		.loc 1 499 13 view .LVU336
 1154 00d0 BDF80C30 		ldrh	r3, [sp, #12]
 1155 00d4 BDF80E20 		ldrh	r2, [sp, #14]
 1156 00d8 9342     		cmp	r3, r2
 1157 00da 03D9     		bls	.L72
 1158              	.LBB33:
 1159              		.loc 1 499 13 discriminator 1 view .LVU337
 1160              	.LVL118:
 1161              		.loc 1 499 13 discriminator 1 view .LVU338
 1162 00dc ADF80C20 		strh	r2, [sp, #12]	@ movhi
 1163              		.loc 1 499 13 discriminator 1 view .LVU339
 1164 00e0 ADF80E30 		strh	r3, [sp, #14]	@ movhi
 1165              	.LVL119:
 1166              	.L72:
 1167              		.loc 1 499 13 is_stmt 0 discriminator 1 view .LVU340
 1168              	.LBE33:
 1169              		.loc 1 499 39 is_stmt 1 discriminator 3 view .LVU341
 500:lib/utils.c   ****             SWAP(window[7], window[8]);
 1170              		.loc 1 500 13 view .LVU342
 1171 00e4 BDF81230 		ldrh	r3, [sp, #18]
 1172 00e8 BDF81420 		ldrh	r2, [sp, #20]
 1173 00ec 9342     		cmp	r3, r2
 1174 00ee 03D9     		bls	.L73
 1175              	.LBB34:
 1176              		.loc 1 500 13 discriminator 1 view .LVU343
 1177              	.LVL120:
 1178              		.loc 1 500 13 discriminator 1 view .LVU344
 1179 00f0 ADF81220 		strh	r2, [sp, #18]	@ movhi
 1180              		.loc 1 500 13 discriminator 1 view .LVU345
 1181 00f4 ADF81430 		strh	r3, [sp, #20]	@ movhi
 1182              	.LVL121:
 1183              	.L73:
 1184              		.loc 1 500 13 is_stmt 0 discriminator 1 view .LVU346
 1185              	.LBE34:
 1186              		.loc 1 500 39 is_stmt 1 discriminator 3 view .LVU347
 501:lib/utils.c   ****             SWAP(window[0], window[3]);
 1187              		.loc 1 501 13 view .LVU348
 1188 00f8 BDF80430 		ldrh	r3, [sp, #4]
 1189 00fc BDF80A20 		ldrh	r2, [sp, #10]
 1190 0100 9342     		cmp	r3, r2
 1191 0102 03D9     		bls	.L74
 1192              	.LBB35:
 1193              		.loc 1 501 13 discriminator 1 view .LVU349
 1194              	.LVL122:
 1195              		.loc 1 501 13 discriminator 1 view .LVU350
 1196 0104 ADF80420 		strh	r2, [sp, #4]	@ movhi
 1197              		.loc 1 501 13 discriminator 1 view .LVU351
 1198 0108 ADF80A30 		strh	r3, [sp, #10]	@ movhi
 1199              	.LVL123:
 1200              	.L74:
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 32


 1201              		.loc 1 501 13 is_stmt 0 discriminator 1 view .LVU352
 1202              	.LBE35:
 1203              		.loc 1 501 39 is_stmt 1 discriminator 3 view .LVU353
 502:lib/utils.c   ****             SWAP(window[5], window[8]);
 1204              		.loc 1 502 13 view .LVU354
 1205 010c BDF80E30 		ldrh	r3, [sp, #14]
 1206 0110 BDF81420 		ldrh	r2, [sp, #20]
 1207 0114 9342     		cmp	r3, r2
 1208 0116 03D9     		bls	.L75
 1209              	.LBB36:
 1210              		.loc 1 502 13 discriminator 1 view .LVU355
 1211              	.LVL124:
 1212              		.loc 1 502 13 discriminator 1 view .LVU356
 1213 0118 ADF80E20 		strh	r2, [sp, #14]	@ movhi
 1214              		.loc 1 502 13 discriminator 1 view .LVU357
 1215 011c ADF81430 		strh	r3, [sp, #20]	@ movhi
 1216              	.LVL125:
 1217              	.L75:
 1218              		.loc 1 502 13 is_stmt 0 discriminator 1 view .LVU358
 1219              	.LBE36:
 1220              		.loc 1 502 39 is_stmt 1 discriminator 3 view .LVU359
 503:lib/utils.c   ****             SWAP(window[4], window[7]);
 1221              		.loc 1 503 13 view .LVU360
 1222 0120 BDF80C30 		ldrh	r3, [sp, #12]
 1223 0124 BDF81220 		ldrh	r2, [sp, #18]
 1224 0128 9342     		cmp	r3, r2
 1225 012a 03D9     		bls	.L76
 1226              	.LBB37:
 1227              		.loc 1 503 13 discriminator 1 view .LVU361
 1228              	.LVL126:
 1229              		.loc 1 503 13 discriminator 1 view .LVU362
 1230 012c ADF80C20 		strh	r2, [sp, #12]	@ movhi
 1231              		.loc 1 503 13 discriminator 1 view .LVU363
 1232 0130 ADF81230 		strh	r3, [sp, #18]	@ movhi
 1233              	.LVL127:
 1234              	.L76:
 1235              		.loc 1 503 13 is_stmt 0 discriminator 1 view .LVU364
 1236              	.LBE37:
 1237              		.loc 1 503 39 is_stmt 1 discriminator 3 view .LVU365
 504:lib/utils.c   ****             SWAP(window[3], window[6]);
 1238              		.loc 1 504 13 view .LVU366
 1239 0134 BDF80A30 		ldrh	r3, [sp, #10]
 1240 0138 BDF81020 		ldrh	r2, [sp, #16]
 1241 013c 9342     		cmp	r3, r2
 1242 013e 03D9     		bls	.L77
 1243              	.LBB38:
 1244              		.loc 1 504 13 discriminator 1 view .LVU367
 1245              	.LVL128:
 1246              		.loc 1 504 13 discriminator 1 view .LVU368
 1247 0140 ADF80A20 		strh	r2, [sp, #10]	@ movhi
 1248              		.loc 1 504 13 discriminator 1 view .LVU369
 1249 0144 ADF81030 		strh	r3, [sp, #16]	@ movhi
 1250              	.LVL129:
 1251              	.L77:
 1252              		.loc 1 504 13 is_stmt 0 discriminator 1 view .LVU370
 1253              	.LBE38:
 1254              		.loc 1 504 39 is_stmt 1 discriminator 3 view .LVU371
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 33


 505:lib/utils.c   ****             SWAP(window[1], window[4]);
 1255              		.loc 1 505 13 view .LVU372
 1256 0148 BDF80630 		ldrh	r3, [sp, #6]
 1257 014c BDF80C20 		ldrh	r2, [sp, #12]
 1258 0150 9342     		cmp	r3, r2
 1259 0152 03D9     		bls	.L78
 1260              	.LBB39:
 1261              		.loc 1 505 13 discriminator 1 view .LVU373
 1262              	.LVL130:
 1263              		.loc 1 505 13 discriminator 1 view .LVU374
 1264 0154 ADF80620 		strh	r2, [sp, #6]	@ movhi
 1265              		.loc 1 505 13 discriminator 1 view .LVU375
 1266 0158 ADF80C30 		strh	r3, [sp, #12]	@ movhi
 1267              	.LVL131:
 1268              	.L78:
 1269              		.loc 1 505 13 is_stmt 0 discriminator 1 view .LVU376
 1270              	.LBE39:
 1271              		.loc 1 505 39 is_stmt 1 discriminator 3 view .LVU377
 506:lib/utils.c   ****             SWAP(window[2], window[5]);
 1272              		.loc 1 506 13 view .LVU378
 1273 015c BDF80830 		ldrh	r3, [sp, #8]
 1274 0160 BDF80E20 		ldrh	r2, [sp, #14]
 1275 0164 9342     		cmp	r3, r2
 1276 0166 03D9     		bls	.L79
 1277              	.LBB40:
 1278              		.loc 1 506 13 discriminator 1 view .LVU379
 1279              	.LVL132:
 1280              		.loc 1 506 13 discriminator 1 view .LVU380
 1281 0168 ADF80820 		strh	r2, [sp, #8]	@ movhi
 1282              		.loc 1 506 13 discriminator 1 view .LVU381
 1283 016c ADF80E30 		strh	r3, [sp, #14]	@ movhi
 1284              	.LVL133:
 1285              	.L79:
 1286              		.loc 1 506 13 is_stmt 0 discriminator 1 view .LVU382
 1287              	.LBE40:
 1288              		.loc 1 506 39 is_stmt 1 discriminator 3 view .LVU383
 507:lib/utils.c   ****             SWAP(window[4], window[7]);
 1289              		.loc 1 507 13 view .LVU384
 1290 0170 BDF80C30 		ldrh	r3, [sp, #12]
 1291 0174 BDF81220 		ldrh	r2, [sp, #18]
 1292 0178 9342     		cmp	r3, r2
 1293 017a 03D9     		bls	.L80
 1294              	.LBB41:
 1295              		.loc 1 507 13 discriminator 1 view .LVU385
 1296              	.LVL134:
 1297              		.loc 1 507 13 discriminator 1 view .LVU386
 1298 017c ADF80C20 		strh	r2, [sp, #12]	@ movhi
 1299              		.loc 1 507 13 discriminator 1 view .LVU387
 1300 0180 ADF81230 		strh	r3, [sp, #18]	@ movhi
 1301              	.LVL135:
 1302              	.L80:
 1303              		.loc 1 507 13 is_stmt 0 discriminator 1 view .LVU388
 1304              	.LBE41:
 1305              		.loc 1 507 39 is_stmt 1 discriminator 3 view .LVU389
 508:lib/utils.c   ****             SWAP(window[4], window[2]);
 1306              		.loc 1 508 13 view .LVU390
 1307 0184 BDF80C30 		ldrh	r3, [sp, #12]
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 34


 1308 0188 BDF80820 		ldrh	r2, [sp, #8]
 1309 018c 9342     		cmp	r3, r2
 1310 018e 03D9     		bls	.L81
 1311              	.LBB42:
 1312              		.loc 1 508 13 discriminator 1 view .LVU391
 1313              	.LVL136:
 1314              		.loc 1 508 13 discriminator 1 view .LVU392
 1315 0190 ADF80C20 		strh	r2, [sp, #12]	@ movhi
 1316              		.loc 1 508 13 discriminator 1 view .LVU393
 1317 0194 ADF80830 		strh	r3, [sp, #8]	@ movhi
 1318              	.LVL137:
 1319              	.L81:
 1320              		.loc 1 508 13 is_stmt 0 discriminator 1 view .LVU394
 1321              	.LBE42:
 1322              		.loc 1 508 39 is_stmt 1 discriminator 3 view .LVU395
 509:lib/utils.c   ****             SWAP(window[6], window[4]);
 1323              		.loc 1 509 13 view .LVU396
 1324 0198 BDF81030 		ldrh	r3, [sp, #16]
 1325 019c BDF80C20 		ldrh	r2, [sp, #12]
 1326 01a0 9342     		cmp	r3, r2
 1327 01a2 03D9     		bls	.L82
 1328              	.LBB43:
 1329              		.loc 1 509 13 discriminator 1 view .LVU397
 1330              	.LVL138:
 1331              		.loc 1 509 13 discriminator 1 view .LVU398
 1332 01a4 ADF81020 		strh	r2, [sp, #16]	@ movhi
 1333              		.loc 1 509 13 discriminator 1 view .LVU399
 1334 01a8 ADF80C30 		strh	r3, [sp, #12]	@ movhi
 1335              	.LVL139:
 1336              	.L82:
 1337              		.loc 1 509 13 is_stmt 0 discriminator 1 view .LVU400
 1338              	.LBE43:
 1339              		.loc 1 509 39 is_stmt 1 discriminator 3 view .LVU401
 510:lib/utils.c   ****             SWAP(window[4], window[2]);
 1340              		.loc 1 510 13 view .LVU402
 1341 01ac BDF80C30 		ldrh	r3, [sp, #12]
 1342 01b0 BDF80820 		ldrh	r2, [sp, #8]
 1343 01b4 9342     		cmp	r3, r2
 1344 01b6 03D9     		bls	.L83
 1345              	.LBB44:
 1346              		.loc 1 510 13 discriminator 1 view .LVU403
 1347              	.LVL140:
 1348              		.loc 1 510 13 discriminator 1 view .LVU404
 1349 01b8 ADF80C20 		strh	r2, [sp, #12]	@ movhi
 1350              		.loc 1 510 13 discriminator 1 view .LVU405
 1351 01bc ADF80830 		strh	r3, [sp, #8]	@ movhi
 1352              	.LVL141:
 1353              	.L83:
 1354              		.loc 1 510 13 is_stmt 0 discriminator 1 view .LVU406
 1355              	.LBE44:
 1356              		.loc 1 510 39 is_stmt 1 discriminator 3 view .LVU407
 511:lib/utils.c   ****             dst[y * width + x] = window[4];
 1357              		.loc 1 511 13 view .LVU408
 1358              		.loc 1 511 27 is_stmt 0 view .LVU409
 1359 01c0 04FB07E3 		mla	r3, r4, r7, lr
 1360              		.loc 1 511 40 view .LVU410
 1361 01c4 BDF80C20 		ldrh	r2, [sp, #12]
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 35


 1362              		.loc 1 511 32 view .LVU411
 1363 01c8 26F81320 		strh	r2, [r6, r3, lsl #1]	@ movhi
 1364              	.LBE22:
 481:lib/utils.c   ****         {
 1365              		.loc 1 481 41 is_stmt 1 discriminator 2 view .LVU412
 1366 01cc 0EF1010E 		add	lr, lr, #1
 1367              	.LVL142:
 1368              	.L85:
 481:lib/utils.c   ****         {
 1369              		.loc 1 481 27 discriminator 1 view .LVU413
 481:lib/utils.c   ****         {
 1370              		.loc 1 481 35 is_stmt 0 discriminator 1 view .LVU414
 1371 01d0 631E     		subs	r3, r4, #1
 481:lib/utils.c   ****         {
 1372              		.loc 1 481 27 discriminator 1 view .LVU415
 1373 01d2 7345     		cmp	r3, lr
 1374 01d4 03DD     		ble	.L95
 1375              	.LBB46:
 1376              	.LBB45:
 484:lib/utils.c   ****             {
 1377              		.loc 1 484 22 view .LVU416
 1378 01d6 4FF0FF3C 		mov	ip, #-1
 1379              	.LBE45:
 483:lib/utils.c   ****             for (int dy = -1; dy <= 1; dy++)
 1380              		.loc 1 483 17 view .LVU417
 1381 01da 0020     		movs	r0, #0
 1382 01dc 2CE7     		b	.L84
 1383              	.L95:
 1384              	.LBE46:
 1385              	.LBE21:
 479:lib/utils.c   ****     {
 1386              		.loc 1 479 38 is_stmt 1 discriminator 2 view .LVU418
 1387 01de 0137     		adds	r7, r7, #1
 1388              	.LVL143:
 1389              	.L62:
 479:lib/utils.c   ****     {
 1390              		.loc 1 479 23 discriminator 1 view .LVU419
 479:lib/utils.c   ****     {
 1391              		.loc 1 479 32 is_stmt 0 discriminator 1 view .LVU420
 1392 01e0 08F1FF32 		add	r2, r8, #-1
 479:lib/utils.c   ****     {
 1393              		.loc 1 479 23 discriminator 1 view .LVU421
 1394 01e4 BA42     		cmp	r2, r7
 1395 01e6 02DD     		ble	.L96
 1396              	.LBB47:
 481:lib/utils.c   ****         {
 1397              		.loc 1 481 18 view .LVU422
 1398 01e8 4FF0010E 		mov	lr, #1
 1399 01ec F0E7     		b	.L85
 1400              	.L96:
 1401              	.LBE47:
 1402              	.LBE20:
 1403              	.LBB48:
 512:lib/utils.c   ****         }
 513:lib/utils.c   ****     }
 514:lib/utils.c   ****     // 边缘像素直接复制
 515:lib/utils.c   ****     for (int x = 0; x < width; x++)
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 36


 1404              		.loc 1 515 14 view .LVU423
 1405 01ee 0023     		movs	r3, #0
 1406 01f0 0AE0     		b	.L86
 1407              	.LVL144:
 1408              	.L87:
 516:lib/utils.c   ****     {
 517:lib/utils.c   ****         dst[x] = src[x];
 1409              		.loc 1 517 9 is_stmt 1 view .LVU424
 1410              		.loc 1 517 21 is_stmt 0 view .LVU425
 1411 01f2 35F81310 		ldrh	r1, [r5, r3, lsl #1]
 1412              		.loc 1 517 16 view .LVU426
 1413 01f6 26F81310 		strh	r1, [r6, r3, lsl #1]	@ movhi
 518:lib/utils.c   ****         dst[(height - 1) * width + x] = src[(height - 1) * width + x];
 1414              		.loc 1 518 9 is_stmt 1 view .LVU427
 1415              		.loc 1 518 66 is_stmt 0 view .LVU428
 1416 01fa 04FB0231 		mla	r1, r4, r2, r3
 1417              		.loc 1 518 44 view .LVU429
 1418 01fe 35F81100 		ldrh	r0, [r5, r1, lsl #1]
 1419              		.loc 1 518 39 view .LVU430
 1420 0202 26F81100 		strh	r0, [r6, r1, lsl #1]	@ movhi
 515:lib/utils.c   ****     {
 1421              		.loc 1 515 33 is_stmt 1 discriminator 3 view .LVU431
 1422 0206 0133     		adds	r3, r3, #1
 1423              	.LVL145:
 1424              	.L86:
 515:lib/utils.c   ****     {
 1425              		.loc 1 515 23 discriminator 1 view .LVU432
 1426 0208 A342     		cmp	r3, r4
 1427 020a F2DB     		blt	.L87
 1428              	.LBE48:
 1429              	.LBB49:
 519:lib/utils.c   ****     }
 520:lib/utils.c   ****     for (int y = 0; y < height; y++)
 1430              		.loc 1 520 14 is_stmt 0 view .LVU433
 1431 020c 0022     		movs	r2, #0
 1432 020e 0EE0     		b	.L88
 1433              	.LVL146:
 1434              	.L89:
 521:lib/utils.c   ****     {
 522:lib/utils.c   ****         dst[y * width] = src[y * width];
 1435              		.loc 1 522 9 is_stmt 1 view .LVU434
 1436              		.loc 1 522 32 is_stmt 0 view .LVU435
 1437 0210 04FB02F3 		mul	r3, r4, r2
 1438              		.loc 1 522 29 view .LVU436
 1439 0214 35F81310 		ldrh	r1, [r5, r3, lsl #1]
 1440              		.loc 1 522 24 view .LVU437
 1441 0218 26F81310 		strh	r1, [r6, r3, lsl #1]	@ movhi
 523:lib/utils.c   ****         dst[y * width + width - 1] = src[y * width + width - 1];
 1442              		.loc 1 523 9 is_stmt 1 view .LVU438
 1443              		.loc 1 523 52 is_stmt 0 view .LVU439
 1444 021c 2344     		add	r3, r3, r4
 1445              		.loc 1 523 41 view .LVU440
 1446 021e 03F10043 		add	r3, r3, #-2147483648
 1447 0222 013B     		subs	r3, r3, #1
 1448 0224 35F81310 		ldrh	r1, [r5, r3, lsl #1]
 1449              		.loc 1 523 36 view .LVU441
 1450 0228 26F81310 		strh	r1, [r6, r3, lsl #1]	@ movhi
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 37


 520:lib/utils.c   ****     {
 1451              		.loc 1 520 34 is_stmt 1 discriminator 3 view .LVU442
 1452 022c 0132     		adds	r2, r2, #1
 1453              	.LVL147:
 1454              	.L88:
 520:lib/utils.c   ****     {
 1455              		.loc 1 520 23 discriminator 1 view .LVU443
 1456 022e 4245     		cmp	r2, r8
 1457 0230 EEDB     		blt	.L89
 1458              	.LBE49:
 524:lib/utils.c   ****     }
 525:lib/utils.c   **** }
 1459              		.loc 1 525 1 is_stmt 0 view .LVU444
 1460 0232 06B0     		add	sp, sp, #24
 1461              	.LCFI12:
 1462              		.cfi_def_cfa_offset 24
 1463              		@ sp needed
 1464 0234 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1465              		.loc 1 525 1 view .LVU445
 1466              		.cfi_endproc
 1467              	.LFE8:
 1469              		.section	.text.sharpen3x3,"ax",%progbits
 1470              		.align	1
 1471              		.global	sharpen3x3
 1472              		.syntax unified
 1473              		.thumb
 1474              		.thumb_func
 1476              	sharpen3x3:
 1477              	.LVL148:
 1478              	.LFB9:
 526:lib/utils.c   **** 
 527:lib/utils.c   **** // void grayImageToRGB(uint16_t *src, uint16_t *dst, int width, int height)
 528:lib/utils.c   **** // {
 529:lib/utils.c   **** //     static uint16_t smoothBuf[256*192]; // 假设最大分辨率为256x192
 530:lib/utils.c   **** //     medianFilter3x3(src, smoothBuf, width, height);
 531:lib/utils.c   **** 
 532:lib/utils.c   **** //     uint16_t min = 65535, max = 0, tmp;
 533:lib/utils.c   **** //     int size = width * height;
 534:lib/utils.c   **** //     for (int i = 0; i < size; i++) {
 535:lib/utils.c   **** //         tmp = smoothBuf[i];
 536:lib/utils.c   **** //         if (tmp < min) min = tmp;
 537:lib/utils.c   **** //         if (tmp > max) max = tmp;
 538:lib/utils.c   **** //     }
 539:lib/utils.c   **** //     if (max == min) max = min + 1;
 540:lib/utils.c   **** 
 541:lib/utils.c   **** //     for (int i = 0; i < size; i++) {
 542:lib/utils.c   **** //         double norm = (double)(smoothBuf[i] - min) / (max - min);
 543:lib/utils.c   **** //         norm = powf(norm, g_gamma);
 544:lib/utils.c   **** //         if (norm < 0.0f) norm = 0.0f;
 545:lib/utils.c   **** //         if (norm > 1.0f) norm = 1.0f;
 546:lib/utils.c   **** //         uint16_t norm255 = (uint16_t)(norm * 255.0f);
 547:lib/utils.c   **** //         dst[i] = colorLUT[norm255];
 548:lib/utils.c   **** //     }
 549:lib/utils.c   **** // }
 550:lib/utils.c   **** // 3x3锐化卷积
 551:lib/utils.c   **** void sharpen3x3(uint16_t *src, uint16_t *dst, int width, int height)
 552:lib/utils.c   **** {
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 38


 1479              		.loc 1 552 1 is_stmt 1 view -0
 1480              		.cfi_startproc
 1481              		@ args = 0, pretend = 0, frame = 0
 1482              		@ frame_needed = 0, uses_anonymous_args = 0
 1483              		.loc 1 552 1 is_stmt 0 view .LVU447
 1484 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 1485              	.LCFI13:
 1486              		.cfi_def_cfa_offset 28
 1487              		.cfi_offset 4, -28
 1488              		.cfi_offset 5, -24
 1489              		.cfi_offset 6, -20
 1490              		.cfi_offset 7, -16
 1491              		.cfi_offset 8, -12
 1492              		.cfi_offset 9, -8
 1493              		.cfi_offset 14, -4
 1494 0004 0546     		mov	r5, r0
 1495 0006 8946     		mov	r9, r1
 1496 0008 1446     		mov	r4, r2
 1497 000a 9846     		mov	r8, r3
 553:lib/utils.c   ****     // 3x3锐化核
 554:lib/utils.c   ****     const static int8_t kernel[3][3] = {
 1498              		.loc 1 554 5 is_stmt 1 view .LVU448
 555:lib/utils.c   ****         {0, -1, 0},
 556:lib/utils.c   ****         {-1, 5, -1},
 557:lib/utils.c   ****         {0, -1, 0}};
 558:lib/utils.c   ****     for (int y = 1; y < height - 1; y++)
 1499              		.loc 1 558 5 view .LVU449
 1500              	.LBB50:
 1501              		.loc 1 558 10 view .LVU450
 1502              	.LVL149:
 1503              		.loc 1 558 14 is_stmt 0 view .LVU451
 1504 000c 0127     		movs	r7, #1
 1505              		.loc 1 558 5 view .LVU452
 1506 000e 2FE0     		b	.L98
 1507              	.LVL150:
 1508              	.L99:
 1509              	.LBB51:
 1510              	.LBB52:
 1511              	.LBB53:
 1512              	.LBB54:
 559:lib/utils.c   ****     {
 560:lib/utils.c   ****         for (int x = 1; x < width - 1; x++)
 561:lib/utils.c   ****         {
 562:lib/utils.c   ****             int32_t sum = 0;
 563:lib/utils.c   ****             for (int ky = -1; ky <= 1; ky++)
 564:lib/utils.c   ****             {
 565:lib/utils.c   ****                 for (int kx = -1; kx <= 1; kx++)
 566:lib/utils.c   ****                 {
 567:lib/utils.c   ****                     sum += src[(y + ky) * width + (x + kx)] * kernel[ky + 1][kx + 1];
 1513              		.loc 1 567 21 is_stmt 1 view .LVU453
 1514              		.loc 1 567 35 is_stmt 0 view .LVU454
 1515 0010 07EB010C 		add	ip, r7, r1
 1516              		.loc 1 567 54 view .LVU455
 1517 0014 0EEB0203 		add	r3, lr, r2
 1518              		.loc 1 567 49 view .LVU456
 1519 0018 04FB0C33 		mla	r3, r4, ip, r3
 1520              		.loc 1 567 31 view .LVU457
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 39


 1521 001c 35F813C0 		ldrh	ip, [r5, r3, lsl #1]
 1522              		.loc 1 567 73 view .LVU458
 1523 0020 4B1C     		adds	r3, r1, #1
 1524              		.loc 1 567 81 view .LVU459
 1525 0022 0132     		adds	r2, r2, #1
 1526              	.LVL151:
 1527              		.loc 1 567 77 view .LVU460
 1528 0024 03EB4303 		add	r3, r3, r3, lsl #1
 1529 0028 274E     		ldr	r6, .L117
 1530 002a 3344     		add	r3, r3, r6
 1531 002c 9B56     		ldrsb	r3, [r3, r2]
 1532              		.loc 1 567 25 view .LVU461
 1533 002e 03FB0C00 		mla	r0, r3, ip, r0
 1534              	.LVL152:
 565:lib/utils.c   ****                 {
 1535              		.loc 1 565 46 is_stmt 1 discriminator 3 view .LVU462
 1536              	.L100:
 565:lib/utils.c   ****                 {
 1537              		.loc 1 565 38 discriminator 1 view .LVU463
 1538 0032 012A     		cmp	r2, #1
 1539 0034 ECDD     		ble	.L99
 565:lib/utils.c   ****                 {
 1540              		.loc 1 565 38 is_stmt 0 discriminator 1 view .LVU464
 1541              	.LBE54:
 563:lib/utils.c   ****             {
 1542              		.loc 1 563 42 is_stmt 1 discriminator 2 view .LVU465
 1543 0036 0131     		adds	r1, r1, #1
 1544              	.LVL153:
 1545              	.L102:
 563:lib/utils.c   ****             {
 1546              		.loc 1 563 34 discriminator 1 view .LVU466
 1547 0038 0129     		cmp	r1, #1
 1548 003a 02DC     		bgt	.L114
 1549              	.LBB55:
 565:lib/utils.c   ****                 {
 1550              		.loc 1 565 26 is_stmt 0 view .LVU467
 1551 003c 4FF0FF32 		mov	r2, #-1
 1552 0040 F7E7     		b	.L100
 1553              	.L114:
 1554              	.LBE55:
 1555              	.LBE53:
 568:lib/utils.c   ****                 }
 569:lib/utils.c   ****             }
 570:lib/utils.c   ****             // 防止溢出
 571:lib/utils.c   ****             if (sum < 0)
 1556              		.loc 1 571 13 is_stmt 1 view .LVU468
 1557              		.loc 1 571 16 is_stmt 0 view .LVU469
 1558 0042 0028     		cmp	r0, #0
 1559 0044 05DB     		blt	.L109
 572:lib/utils.c   ****                 sum = 0;
 573:lib/utils.c   ****             if (sum > 65535)
 1560              		.loc 1 573 13 is_stmt 1 view .LVU470
 1561              		.loc 1 573 16 is_stmt 0 view .LVU471
 1562 0046 B0F5803F 		cmp	r0, #65536
 1563 004a 03DB     		blt	.L101
 574:lib/utils.c   ****                 sum = 65535;
 1564              		.loc 1 574 21 view .LVU472
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 40


 1565 004c 4FF6FF70 		movw	r0, #65535
 1566              	.LVL154:
 1567              		.loc 1 574 21 view .LVU473
 1568 0050 00E0     		b	.L101
 1569              	.LVL155:
 1570              	.L109:
 572:lib/utils.c   ****                 sum = 0;
 1571              		.loc 1 572 21 view .LVU474
 1572 0052 0020     		movs	r0, #0
 1573              	.LVL156:
 1574              	.L101:
 575:lib/utils.c   ****             dst[y * width + x] = (uint16_t)sum;
 1575              		.loc 1 575 13 is_stmt 1 view .LVU475
 1576              		.loc 1 575 27 is_stmt 0 view .LVU476
 1577 0054 04FB07E3 		mla	r3, r4, r7, lr
 1578              		.loc 1 575 32 view .LVU477
 1579 0058 29F81300 		strh	r0, [r9, r3, lsl #1]	@ movhi
 1580              	.LBE52:
 560:lib/utils.c   ****         {
 1581              		.loc 1 560 41 is_stmt 1 discriminator 2 view .LVU478
 1582 005c 0EF1010E 		add	lr, lr, #1
 1583              	.LVL157:
 1584              	.L103:
 560:lib/utils.c   ****         {
 1585              		.loc 1 560 27 discriminator 1 view .LVU479
 560:lib/utils.c   ****         {
 1586              		.loc 1 560 35 is_stmt 0 discriminator 1 view .LVU480
 1587 0060 631E     		subs	r3, r4, #1
 560:lib/utils.c   ****         {
 1588              		.loc 1 560 27 discriminator 1 view .LVU481
 1589 0062 7345     		cmp	r3, lr
 1590 0064 03DD     		ble	.L115
 1591              	.LBB57:
 1592              	.LBB56:
 563:lib/utils.c   ****             {
 1593              		.loc 1 563 22 view .LVU482
 1594 0066 4FF0FF31 		mov	r1, #-1
 1595              	.LBE56:
 562:lib/utils.c   ****             for (int ky = -1; ky <= 1; ky++)
 1596              		.loc 1 562 21 view .LVU483
 1597 006a 0020     		movs	r0, #0
 1598 006c E4E7     		b	.L102
 1599              	.L115:
 1600              	.LBE57:
 1601              	.LBE51:
 558:lib/utils.c   ****     {
 1602              		.loc 1 558 38 is_stmt 1 discriminator 2 view .LVU484
 1603 006e 0137     		adds	r7, r7, #1
 1604              	.LVL158:
 1605              	.L98:
 558:lib/utils.c   ****     {
 1606              		.loc 1 558 23 discriminator 1 view .LVU485
 558:lib/utils.c   ****     {
 1607              		.loc 1 558 32 is_stmt 0 discriminator 1 view .LVU486
 1608 0070 08F1FF32 		add	r2, r8, #-1
 558:lib/utils.c   ****     {
 1609              		.loc 1 558 23 discriminator 1 view .LVU487
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 41


 1610 0074 BA42     		cmp	r2, r7
 1611 0076 02DD     		ble	.L116
 1612              	.LBB58:
 560:lib/utils.c   ****         {
 1613              		.loc 1 560 18 view .LVU488
 1614 0078 4FF0010E 		mov	lr, #1
 1615 007c F0E7     		b	.L103
 1616              	.L116:
 1617              	.LBE58:
 1618              	.LBE50:
 1619              	.LBB59:
 576:lib/utils.c   ****         }
 577:lib/utils.c   ****     }
 578:lib/utils.c   ****     // 边缘像素直接复制
 579:lib/utils.c   ****     for (int x = 0; x < width; x++)
 1620              		.loc 1 579 14 view .LVU489
 1621 007e 0023     		movs	r3, #0
 1622 0080 0AE0     		b	.L104
 1623              	.LVL159:
 1624              	.L105:
 580:lib/utils.c   ****     {
 581:lib/utils.c   ****         dst[x] = src[x];
 1625              		.loc 1 581 9 is_stmt 1 view .LVU490
 1626              		.loc 1 581 21 is_stmt 0 view .LVU491
 1627 0082 35F81310 		ldrh	r1, [r5, r3, lsl #1]
 1628              		.loc 1 581 16 view .LVU492
 1629 0086 29F81310 		strh	r1, [r9, r3, lsl #1]	@ movhi
 582:lib/utils.c   ****         dst[(height - 1) * width + x] = src[(height - 1) * width + x];
 1630              		.loc 1 582 9 is_stmt 1 view .LVU493
 1631              		.loc 1 582 66 is_stmt 0 view .LVU494
 1632 008a 04FB0231 		mla	r1, r4, r2, r3
 1633              		.loc 1 582 44 view .LVU495
 1634 008e 35F81100 		ldrh	r0, [r5, r1, lsl #1]
 1635              		.loc 1 582 39 view .LVU496
 1636 0092 29F81100 		strh	r0, [r9, r1, lsl #1]	@ movhi
 579:lib/utils.c   ****     {
 1637              		.loc 1 579 33 is_stmt 1 discriminator 3 view .LVU497
 1638 0096 0133     		adds	r3, r3, #1
 1639              	.LVL160:
 1640              	.L104:
 579:lib/utils.c   ****     {
 1641              		.loc 1 579 23 discriminator 1 view .LVU498
 1642 0098 A342     		cmp	r3, r4
 1643 009a F2DB     		blt	.L105
 1644              	.LBE59:
 1645              	.LBB60:
 583:lib/utils.c   ****     }
 584:lib/utils.c   ****     for (int y = 0; y < height; y++)
 1646              		.loc 1 584 14 is_stmt 0 view .LVU499
 1647 009c 0022     		movs	r2, #0
 1648 009e 0EE0     		b	.L106
 1649              	.LVL161:
 1650              	.L107:
 585:lib/utils.c   ****     {
 586:lib/utils.c   ****         dst[y * width] = src[y * width];
 1651              		.loc 1 586 9 is_stmt 1 view .LVU500
 1652              		.loc 1 586 32 is_stmt 0 view .LVU501
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 42


 1653 00a0 04FB02F3 		mul	r3, r4, r2
 1654              		.loc 1 586 29 view .LVU502
 1655 00a4 35F81310 		ldrh	r1, [r5, r3, lsl #1]
 1656              		.loc 1 586 24 view .LVU503
 1657 00a8 29F81310 		strh	r1, [r9, r3, lsl #1]	@ movhi
 587:lib/utils.c   ****         dst[y * width + width - 1] = src[y * width + width - 1];
 1658              		.loc 1 587 9 is_stmt 1 view .LVU504
 1659              		.loc 1 587 52 is_stmt 0 view .LVU505
 1660 00ac 2344     		add	r3, r3, r4
 1661              		.loc 1 587 41 view .LVU506
 1662 00ae 03F10043 		add	r3, r3, #-2147483648
 1663 00b2 013B     		subs	r3, r3, #1
 1664 00b4 35F81310 		ldrh	r1, [r5, r3, lsl #1]
 1665              		.loc 1 587 36 view .LVU507
 1666 00b8 29F81310 		strh	r1, [r9, r3, lsl #1]	@ movhi
 584:lib/utils.c   ****     {
 1667              		.loc 1 584 34 is_stmt 1 discriminator 3 view .LVU508
 1668 00bc 0132     		adds	r2, r2, #1
 1669              	.LVL162:
 1670              	.L106:
 584:lib/utils.c   ****     {
 1671              		.loc 1 584 23 discriminator 1 view .LVU509
 1672 00be 4245     		cmp	r2, r8
 1673 00c0 EEDB     		blt	.L107
 1674              	.LBE60:
 588:lib/utils.c   ****     }
 589:lib/utils.c   **** }
 1675              		.loc 1 589 1 is_stmt 0 view .LVU510
 1676 00c2 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 1677              	.LVL163:
 1678              	.L118:
 1679              		.loc 1 589 1 view .LVU511
 1680 00c6 00BF     		.align	2
 1681              	.L117:
 1682 00c8 00000000 		.word	kernel.1
 1683              		.cfi_endproc
 1684              	.LFE9:
 1686              		.section	.text.grayImageToRGB,"ax",%progbits
 1687              		.align	1
 1688              		.global	grayImageToRGB
 1689              		.syntax unified
 1690              		.thumb
 1691              		.thumb_func
 1693              	grayImageToRGB:
 1694              	.LVL164:
 1695              	.LFB10:
 590:lib/utils.c   **** 
 591:lib/utils.c   **** void grayImageToRGB(uint16_t *src, uint16_t *dst, int width, int height)
 592:lib/utils.c   **** {
 1696              		.loc 1 592 1 is_stmt 1 view -0
 1697              		.cfi_startproc
 1698              		@ args = 0, pretend = 0, frame = 0
 1699              		@ frame_needed = 0, uses_anonymous_args = 0
 1700              		.loc 1 592 1 is_stmt 0 view .LVU513
 1701 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1702              	.LCFI14:
 1703              		.cfi_def_cfa_offset 24
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 43


 1704              		.cfi_offset 4, -24
 1705              		.cfi_offset 5, -20
 1706              		.cfi_offset 6, -16
 1707              		.cfi_offset 7, -12
 1708              		.cfi_offset 8, -8
 1709              		.cfi_offset 14, -4
 1710 0004 0646     		mov	r6, r0
 1711 0006 0F46     		mov	r7, r1
 1712 0008 1546     		mov	r5, r2
 1713 000a 1C46     		mov	r4, r3
 593:lib/utils.c   ****     static uint16_t buf1[256 * 192]; // 中值滤波结果
 1714              		.loc 1 593 5 is_stmt 1 view .LVU514
 594:lib/utils.c   **** 
 595:lib/utils.c   ****     medianFilter3x3(src, buf1, width, height);
 1715              		.loc 1 595 5 view .LVU515
 1716 000c DFF85080 		ldr	r8, .L123
 1717 0010 4146     		mov	r1, r8
 1718              	.LVL165:
 1719              		.loc 1 595 5 is_stmt 0 view .LVU516
 1720 0012 FFF7FEFF 		bl	medianFilter3x3
 1721              	.LVL166:
 596:lib/utils.c   ****     sharpen3x3(buf1, src, width, height);
 1722              		.loc 1 596 5 is_stmt 1 view .LVU517
 1723 0016 2346     		mov	r3, r4
 1724 0018 2A46     		mov	r2, r5
 1725 001a 3146     		mov	r1, r6
 1726 001c 4046     		mov	r0, r8
 1727 001e FFF7FEFF 		bl	sharpen3x3
 1728              	.LVL167:
 597:lib/utils.c   ****     uint16_t *buf2 = src;
 1729              		.loc 1 597 5 view .LVU518
 598:lib/utils.c   **** 
 599:lib/utils.c   ****     medianFilter3x3(src, buf1, width, height);
 1730              		.loc 1 599 5 view .LVU519
 1731 0022 2346     		mov	r3, r4
 1732 0024 2A46     		mov	r2, r5
 1733 0026 4146     		mov	r1, r8
 1734 0028 3046     		mov	r0, r6
 1735 002a FFF7FEFF 		bl	medianFilter3x3
 1736              	.LVL168:
 600:lib/utils.c   ****     // 降噪
 601:lib/utils.c   ****     sharpen3x3(buf1, buf2, width, height);
 1737              		.loc 1 601 5 view .LVU520
 1738 002e 2346     		mov	r3, r4
 1739 0030 2A46     		mov	r2, r5
 1740 0032 3146     		mov	r1, r6
 1741 0034 4046     		mov	r0, r8
 1742 0036 FFF7FEFF 		bl	sharpen3x3
 1743              	.LVL169:
 602:lib/utils.c   ****     // 锐化
 603:lib/utils.c   **** 
 604:lib/utils.c   ****     uint16_t local_min = g_min_gray;
 1744              		.loc 1 604 5 view .LVU521
 605:lib/utils.c   ****     uint16_t local_max = g_max_gray;
 1745              		.loc 1 605 5 view .LVU522
 606:lib/utils.c   ****     if (local_max <= local_min)
 1746              		.loc 1 606 5 view .LVU523
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 44


 607:lib/utils.c   ****     {
 608:lib/utils.c   ****         local_max = local_min + 1;
 609:lib/utils.c   ****     }
 610:lib/utils.c   **** 
 611:lib/utils.c   ****     int size = width * height;
 1747              		.loc 1 611 5 view .LVU524
 1748              		.loc 1 611 9 is_stmt 0 view .LVU525
 1749 003a 04FB05F5 		mul	r5, r4, r5
 1750              	.LVL170:
 612:lib/utils.c   ****     for (int i = 0; i < size; i++)
 1751              		.loc 1 612 5 is_stmt 1 view .LVU526
 1752              	.LBB61:
 1753              		.loc 1 612 10 view .LVU527
 1754              		.loc 1 612 14 is_stmt 0 view .LVU528
 1755 003e 0024     		movs	r4, #0
 1756              	.LVL171:
 1757              		.loc 1 612 5 view .LVU529
 1758 0040 0AE0     		b	.L120
 1759              	.LVL172:
 1760              	.L121:
 613:lib/utils.c   ****     {
 614:lib/utils.c   ****         dst[i] = gray_to_rgb565(buf2[i], local_min, local_max);
 1761              		.loc 1 614 9 is_stmt 1 view .LVU530
 1762              		.loc 1 614 18 is_stmt 0 view .LVU531
 1763 0042 45F2F052 		movw	r2, #22000
 1764 0046 44F25061 		movw	r1, #18000
 1765 004a 36F81400 		ldrh	r0, [r6, r4, lsl #1]
 1766 004e FFF7FEFF 		bl	gray_to_rgb565
 1767              	.LVL173:
 1768              		.loc 1 614 16 discriminator 1 view .LVU532
 1769 0052 27F81400 		strh	r0, [r7, r4, lsl #1]	@ movhi
 612:lib/utils.c   ****     for (int i = 0; i < size; i++)
 1770              		.loc 1 612 32 is_stmt 1 discriminator 3 view .LVU533
 1771 0056 0134     		adds	r4, r4, #1
 1772              	.LVL174:
 1773              	.L120:
 612:lib/utils.c   ****     for (int i = 0; i < size; i++)
 1774              		.loc 1 612 23 discriminator 1 view .LVU534
 1775 0058 AC42     		cmp	r4, r5
 1776 005a F2DB     		blt	.L121
 1777              	.LBE61:
 615:lib/utils.c   ****     }
 616:lib/utils.c   **** }
 1778              		.loc 1 616 1 is_stmt 0 view .LVU535
 1779 005c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1780              	.LVL175:
 1781              	.L124:
 1782              		.loc 1 616 1 view .LVU536
 1783              		.align	2
 1784              	.L123:
 1785 0060 00000000 		.word	buf1.0
 1786              		.cfi_endproc
 1787              	.LFE10:
 1789              		.section	.text.color_shift_cooler,"ax",%progbits
 1790              		.align	1
 1791              		.global	color_shift_cooler
 1792              		.syntax unified
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 45


 1793              		.thumb
 1794              		.thumb_func
 1796              	color_shift_cooler:
 1797              	.LFB11:
 617:lib/utils.c   **** 
 618:lib/utils.c   **** void color_shift_cooler(void)
 619:lib/utils.c   **** {
 1798              		.loc 1 619 1 is_stmt 1 view -0
 1799              		.cfi_startproc
 1800              		@ args = 0, pretend = 0, frame = 0
 1801              		@ frame_needed = 0, uses_anonymous_args = 0
 1802              		@ link register save eliminated.
 620:lib/utils.c   ****     // 按键使整幅图偏冷（整体偏蓝）
 621:lib/utils.c   ****     if (g_color_tint > -10)
 1803              		.loc 1 621 5 view .LVU538
 1804              		.loc 1 621 22 is_stmt 0 view .LVU539
 1805 0000 044B     		ldr	r3, .L127
 1806 0002 93F90030 		ldrsb	r3, [r3]
 1807              		.loc 1 621 8 view .LVU540
 1808 0006 13F1090F 		cmn	r3, #9
 1809 000a 02DB     		blt	.L125
 622:lib/utils.c   ****     {
 623:lib/utils.c   ****         g_color_tint--;
 1810              		.loc 1 623 9 is_stmt 1 view .LVU541
 1811              		.loc 1 623 21 is_stmt 0 view .LVU542
 1812 000c 013B     		subs	r3, r3, #1
 1813 000e 014A     		ldr	r2, .L127
 1814 0010 1370     		strb	r3, [r2]
 1815              	.L125:
 624:lib/utils.c   ****     }
 625:lib/utils.c   **** }
 1816              		.loc 1 625 1 view .LVU543
 1817 0012 7047     		bx	lr
 1818              	.L128:
 1819              		.align	2
 1820              	.L127:
 1821 0014 00000000 		.word	g_color_tint
 1822              		.cfi_endproc
 1823              	.LFE11:
 1825              		.section	.text.color_shift_warmer,"ax",%progbits
 1826              		.align	1
 1827              		.global	color_shift_warmer
 1828              		.syntax unified
 1829              		.thumb
 1830              		.thumb_func
 1832              	color_shift_warmer:
 1833              	.LFB12:
 626:lib/utils.c   **** 
 627:lib/utils.c   **** void color_shift_warmer(void)
 628:lib/utils.c   **** {
 1834              		.loc 1 628 1 is_stmt 1 view -0
 1835              		.cfi_startproc
 1836              		@ args = 0, pretend = 0, frame = 0
 1837              		@ frame_needed = 0, uses_anonymous_args = 0
 1838              		@ link register save eliminated.
 629:lib/utils.c   ****     // 按键使整幅图偏暖（整体偏红）
 630:lib/utils.c   ****     if (g_color_tint < 10)
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 46


 1839              		.loc 1 630 5 view .LVU545
 1840              		.loc 1 630 22 is_stmt 0 view .LVU546
 1841 0000 044B     		ldr	r3, .L131
 1842 0002 93F90030 		ldrsb	r3, [r3]
 1843              		.loc 1 630 8 view .LVU547
 1844 0006 092B     		cmp	r3, #9
 1845 0008 02DC     		bgt	.L129
 631:lib/utils.c   ****     {
 632:lib/utils.c   ****         g_color_tint++;
 1846              		.loc 1 632 9 is_stmt 1 view .LVU548
 1847              		.loc 1 632 21 is_stmt 0 view .LVU549
 1848 000a 0133     		adds	r3, r3, #1
 1849 000c 014A     		ldr	r2, .L131
 1850 000e 1370     		strb	r3, [r2]
 1851              	.L129:
 633:lib/utils.c   ****     }
 634:lib/utils.c   **** }
 1852              		.loc 1 634 1 view .LVU550
 1853 0010 7047     		bx	lr
 1854              	.L132:
 1855 0012 00BF     		.align	2
 1856              	.L131:
 1857 0014 00000000 		.word	g_color_tint
 1858              		.cfi_endproc
 1859              	.LFE12:
 1861              		.section	.text.grayImageLarger,"ax",%progbits
 1862              		.align	1
 1863              		.global	grayImageLarger
 1864              		.syntax unified
 1865              		.thumb
 1866              		.thumb_func
 1868              	grayImageLarger:
 1869              	.LVL176:
 1870              	.LFB13:
 635:lib/utils.c   **** 
 636:lib/utils.c   **** void grayImageLarger(uint16_t *src, uint16_t *dst, uint16_t width, uint16_t height, uint16_t out_w,
 637:lib/utils.c   **** {
 1871              		.loc 1 637 1 is_stmt 1 view -0
 1872              		.cfi_startproc
 1873              		@ args = 8, pretend = 0, frame = 8
 1874              		@ frame_needed = 0, uses_anonymous_args = 0
 1875              		.loc 1 637 1 is_stmt 0 view .LVU552
 1876 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1877              	.LCFI15:
 1878              		.cfi_def_cfa_offset 36
 1879              		.cfi_offset 4, -36
 1880              		.cfi_offset 5, -32
 1881              		.cfi_offset 6, -28
 1882              		.cfi_offset 7, -24
 1883              		.cfi_offset 8, -20
 1884              		.cfi_offset 9, -16
 1885              		.cfi_offset 10, -12
 1886              		.cfi_offset 11, -8
 1887              		.cfi_offset 14, -4
 1888 0004 83B0     		sub	sp, sp, #12
 1889              	.LCFI16:
 1890              		.cfi_def_cfa_offset 48
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 47


 1891 0006 0D46     		mov	r5, r1
 1892 0008 1146     		mov	r1, r2
 1893              	.LVL177:
 1894              		.loc 1 637 1 view .LVU553
 1895 000a 1E46     		mov	r6, r3
 1896 000c BDF83040 		ldrh	r4, [sp, #48]
 1897 0010 BDF83470 		ldrh	r7, [sp, #52]
 638:lib/utils.c   ****     // 计算缩放比例
 639:lib/utils.c   ****     float scale_x = (float)(width - 1) / (out_w - 1);
 1898              		.loc 1 639 5 is_stmt 1 view .LVU554
 1899              		.loc 1 639 35 is_stmt 0 view .LVU555
 1900 0014 531E     		subs	r3, r2, #1
 1901              	.LVL178:
 1902              		.loc 1 639 35 view .LVU556
 1903 0016 07EE103A 		vmov	s14, r3	@ int
 1904              		.loc 1 639 21 view .LVU557
 1905 001a B8EEC77A 		vcvt.f32.s32	s14, s14
 1906              		.loc 1 639 49 view .LVU558
 1907 001e 631E     		subs	r3, r4, #1
 1908 0020 07EE903A 		vmov	s15, r3	@ int
 1909              		.loc 1 639 40 view .LVU559
 1910 0024 F8EEE77A 		vcvt.f32.s32	s15, s15
 1911              		.loc 1 639 11 view .LVU560
 1912 0028 C7EE273A 		vdiv.f32	s7, s14, s15
 1913              	.LVL179:
 640:lib/utils.c   ****     float scale_y = (float)(height - 1) / (out_h - 1);
 1914              		.loc 1 640 5 is_stmt 1 view .LVU561
 1915              		.loc 1 640 36 is_stmt 0 view .LVU562
 1916 002c 731E     		subs	r3, r6, #1
 1917 002e 07EE103A 		vmov	s14, r3	@ int
 1918              		.loc 1 640 21 view .LVU563
 1919 0032 B8EEC77A 		vcvt.f32.s32	s14, s14
 1920              		.loc 1 640 50 view .LVU564
 1921 0036 7B1E     		subs	r3, r7, #1
 1922 0038 07EE903A 		vmov	s15, r3	@ int
 1923              		.loc 1 640 41 view .LVU565
 1924 003c F8EEE77A 		vcvt.f32.s32	s15, s15
 1925              		.loc 1 640 11 view .LVU566
 1926 0040 87EE274A 		vdiv.f32	s8, s14, s15
 1927              	.LVL180:
 641:lib/utils.c   **** 
 642:lib/utils.c   ****     for (uint16_t y = 0; y < out_h; y++)
 1928              		.loc 1 642 5 is_stmt 1 view .LVU567
 1929              	.LBB62:
 1930              		.loc 1 642 10 view .LVU568
 1931              		.loc 1 642 19 is_stmt 0 view .LVU569
 1932 0044 0023     		movs	r3, #0
 1933 0046 0193     		str	r3, [sp, #4]
 1934              		.loc 1 642 5 view .LVU570
 1935 0048 82E0     		b	.L134
 1936              	.LVL181:
 1937              	.L136:
 1938              	.LBB63:
 1939              	.LBB64:
 643:lib/utils.c   ****     {
 644:lib/utils.c   ****         for (uint16_t x = 0; x < out_w; x++)
 645:lib/utils.c   ****         {
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 48


 646:lib/utils.c   ****             // 计算对应的输入图像的坐标
 647:lib/utils.c   ****             float src_x = x * scale_x;
 648:lib/utils.c   ****             float src_y = y * scale_y;
 649:lib/utils.c   **** 
 650:lib/utils.c   ****             // 获取整数部分和小数部分
 651:lib/utils.c   ****             uint16_t x0 = (uint16_t)src_x;
 652:lib/utils.c   ****             uint16_t y0 = (uint16_t)src_y;
 653:lib/utils.c   ****             uint16_t x1 = (x0 + 1 < width) ? x0 + 1 : x0;
 654:lib/utils.c   ****             uint16_t y1 = (y0 + 1 < height) ? y0 + 1 : y0;
 655:lib/utils.c   **** 
 656:lib/utils.c   ****             float x_diff = src_x - x0;
 1940              		.loc 1 656 13 is_stmt 1 view .LVU571
 1941              		.loc 1 656 34 is_stmt 0 view .LVU572
 1942 004a 07EE909A 		vmov	s15, r9	@ int
 1943 004e F8EEE77A 		vcvt.f32.s32	s15, s15
 1944              		.loc 1 656 19 view .LVU573
 1945 0052 37EE677A 		vsub.f32	s14, s14, s15
 1946              	.LVL182:
 657:lib/utils.c   ****             float y_diff = src_y - y0;
 1947              		.loc 1 657 13 is_stmt 1 view .LVU574
 1948              		.loc 1 657 34 is_stmt 0 view .LVU575
 1949 0056 07EE90AA 		vmov	s15, r10	@ int
 1950 005a F8EEE77A 		vcvt.f32.s32	s15, s15
 1951              		.loc 1 657 19 view .LVU576
 1952 005e 76EEE76A 		vsub.f32	s13, s13, s15
 1953              	.LVL183:
 658:lib/utils.c   **** 
 659:lib/utils.c   ****             // 取四个相邻像素的灰度值
 660:lib/utils.c   ****             uint16_t gray00 = src[y0 * width + x0];
 1954              		.loc 1 660 13 is_stmt 1 view .LVU577
 1955              		.loc 1 660 38 is_stmt 0 view .LVU578
 1956 0062 0AFB01FA 		mul	r10, r10, r1
 1957              	.LVL184:
 1958              		.loc 1 660 46 view .LVU579
 1959 0066 09EB0A0B 		add	fp, r9, r10
 1960              	.LVL185:
 1961              		.loc 1 660 22 view .LVU580
 1962 006a 30F81BB0 		ldrh	fp, [r0, fp, lsl #1]
 1963 006e 07EE90BA 		vmov	s15, fp	@ int
 1964              	.LVL186:
 661:lib/utils.c   ****             uint16_t gray01 = src[y0 * width + x1];
 1965              		.loc 1 661 13 is_stmt 1 view .LVU581
 1966              		.loc 1 661 46 is_stmt 0 view .LVU582
 1967 0072 E244     		add	r10, r10, ip
 1968              	.LVL187:
 1969              		.loc 1 661 22 view .LVU583
 1970 0074 30F81AA0 		ldrh	r10, [r0, r10, lsl #1]
 1971 0078 05EE90AA 		vmov	s11, r10	@ int
 1972              	.LVL188:
 662:lib/utils.c   ****             uint16_t gray10 = src[y1 * width + x0];
 1973              		.loc 1 662 13 is_stmt 1 view .LVU584
 1974              		.loc 1 662 38 is_stmt 0 view .LVU585
 1975 007c 01FB0EFE 		mul	lr, r1, lr
 1976              	.LVL189:
 1977              		.loc 1 662 46 view .LVU586
 1978 0080 F144     		add	r9, r9, lr
 1979              	.LVL190:
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 49


 1980              		.loc 1 662 22 view .LVU587
 1981 0082 30F81990 		ldrh	r9, [r0, r9, lsl #1]
 1982              	.LVL191:
 663:lib/utils.c   ****             uint16_t gray11 = src[y1 * width + x1];
 1983              		.loc 1 663 13 is_stmt 1 view .LVU588
 1984              		.loc 1 663 46 is_stmt 0 view .LVU589
 1985 0086 F444     		add	ip, ip, lr
 1986              	.LVL192:
 1987              		.loc 1 663 22 view .LVU590
 1988 0088 30F81CC0 		ldrh	ip, [r0, ip, lsl #1]
 1989              	.LVL193:
 664:lib/utils.c   **** 
 665:lib/utils.c   ****             // 双线性插值公式
 666:lib/utils.c   ****             float gray = (1 - x_diff) * (1 - y_diff) * gray00 +
 1990              		.loc 1 666 13 is_stmt 1 view .LVU591
 1991              		.loc 1 666 29 is_stmt 0 view .LVU592
 1992 008c B7EE006A 		vmov.f32	s12, #1.0e+0
 1993 0090 36EE475A 		vsub.f32	s10, s12, s14
 1994              		.loc 1 666 44 view .LVU593
 1995 0094 36EE666A 		vsub.f32	s12, s12, s13
 1996              		.loc 1 666 39 view .LVU594
 1997 0098 65EE064A 		vmul.f32	s9, s10, s12
 1998              		.loc 1 666 54 view .LVU595
 1999 009c F8EEE77A 		vcvt.f32.s32	s15, s15
 2000 00a0 67EEA47A 		vmul.f32	s15, s15, s9
 667:lib/utils.c   ****                          x_diff * (1 - y_diff) * gray01 +
 2001              		.loc 1 667 33 view .LVU596
 2002 00a4 26EE076A 		vmul.f32	s12, s12, s14
 2003              		.loc 1 667 48 view .LVU597
 2004 00a8 F8EEE55A 		vcvt.f32.s32	s11, s11
 2005 00ac 25EE866A 		vmul.f32	s12, s11, s12
 666:lib/utils.c   ****                          x_diff * (1 - y_diff) * gray01 +
 2006              		.loc 1 666 63 view .LVU598
 2007 00b0 77EE867A 		vadd.f32	s15, s15, s12
 668:lib/utils.c   ****                          (1 - x_diff) * y_diff * gray10 +
 2008              		.loc 1 668 39 view .LVU599
 2009 00b4 25EE265A 		vmul.f32	s10, s10, s13
 2010              		.loc 1 668 48 view .LVU600
 2011 00b8 06EE109A 		vmov	s12, r9	@ int
 2012 00bc B8EEC66A 		vcvt.f32.s32	s12, s12
 2013 00c0 26EE056A 		vmul.f32	s12, s12, s10
 667:lib/utils.c   ****                          x_diff * (1 - y_diff) * gray01 +
 2014              		.loc 1 667 57 view .LVU601
 2015 00c4 77EE867A 		vadd.f32	s15, s15, s12
 669:lib/utils.c   ****                          x_diff * y_diff * gray11;
 2016              		.loc 1 669 33 view .LVU602
 2017 00c8 27EE267A 		vmul.f32	s14, s14, s13
 2018              	.LVL194:
 2019              		.loc 1 669 42 view .LVU603
 2020 00cc 06EE90CA 		vmov	s13, ip	@ int
 2021              	.LVL195:
 2022              		.loc 1 669 42 view .LVU604
 2023 00d0 F8EEE66A 		vcvt.f32.s32	s13, s13
 2024 00d4 26EE877A 		vmul.f32	s14, s13, s14
 666:lib/utils.c   ****                          x_diff * (1 - y_diff) * gray01 +
 2025              		.loc 1 666 19 view .LVU605
 2026 00d8 77EE877A 		vadd.f32	s15, s15, s14
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 50


 2027              	.LVL196:
 670:lib/utils.c   **** 
 671:lib/utils.c   ****             // 将插值结果放入目标图像
 672:lib/utils.c   ****             dst[y * out_w + x] = (uint16_t)gray;
 2028              		.loc 1 672 13 is_stmt 1 view .LVU606
 2029              		.loc 1 672 27 is_stmt 0 view .LVU607
 2030 00dc 08FB0422 		mla	r2, r8, r4, r2
 2031              	.LVL197:
 2032              		.loc 1 672 34 view .LVU608
 2033 00e0 FCEEE77A 		vcvt.u32.f32	s15, s15
 2034              	.LVL198:
 2035              		.loc 1 672 32 view .LVU609
 2036 00e4 17EE90CA 		vmov	ip, s15	@ int
 2037 00e8 25F812C0 		strh	ip, [r5, r2, lsl #1]	@ movhi
 2038              	.LVL199:
 2039              		.loc 1 672 32 view .LVU610
 2040              	.LBE64:
 644:lib/utils.c   ****         {
 2041              		.loc 1 644 42 is_stmt 1 discriminator 2 view .LVU611
 2042 00ec 0133     		adds	r3, r3, #1
 2043              	.LVL200:
 644:lib/utils.c   ****         {
 2044              		.loc 1 644 42 is_stmt 0 discriminator 2 view .LVU612
 2045 00ee 9BB2     		uxth	r3, r3
 2046              	.LVL201:
 2047              	.L138:
 644:lib/utils.c   ****         {
 2048              		.loc 1 644 32 is_stmt 1 discriminator 1 view .LVU613
 2049 00f0 A342     		cmp	r3, r4
 2050 00f2 29D2     		bcs	.L141
 2051              	.LBB65:
 647:lib/utils.c   ****             float src_y = y * scale_y;
 2052              		.loc 1 647 13 view .LVU614
 647:lib/utils.c   ****             float src_y = y * scale_y;
 2053              		.loc 1 647 29 is_stmt 0 view .LVU615
 2054 00f4 1A46     		mov	r2, r3
 2055 00f6 07EE903A 		vmov	s15, r3	@ int
 2056 00fa B8EEE77A 		vcvt.f32.s32	s14, s15
 647:lib/utils.c   ****             float src_y = y * scale_y;
 2057              		.loc 1 647 19 view .LVU616
 2058 00fe 27EE237A 		vmul.f32	s14, s14, s7
 2059              	.LVL202:
 648:lib/utils.c   **** 
 2060              		.loc 1 648 13 is_stmt 1 view .LVU617
 648:lib/utils.c   **** 
 2061              		.loc 1 648 29 is_stmt 0 view .LVU618
 2062 0102 DDF80480 		ldr	r8, [sp, #4]
 2063 0106 07EE908A 		vmov	s15, r8	@ int
 2064 010a F8EEE76A 		vcvt.f32.s32	s13, s15
 648:lib/utils.c   **** 
 2065              		.loc 1 648 19 view .LVU619
 2066 010e 66EE846A 		vmul.f32	s13, s13, s8
 2067              	.LVL203:
 651:lib/utils.c   ****             uint16_t y0 = (uint16_t)src_y;
 2068              		.loc 1 651 13 is_stmt 1 view .LVU620
 651:lib/utils.c   ****             uint16_t y0 = (uint16_t)src_y;
 2069              		.loc 1 651 22 is_stmt 0 view .LVU621
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 51


 2070 0112 FCEEC77A 		vcvt.u32.f32	s15, s14
 2071 0116 17EE90CA 		vmov	ip, s15	@ int
 2072 011a 1FFA8CFC 		uxth	ip, ip
 2073              	.LVL204:
 652:lib/utils.c   ****             uint16_t x1 = (x0 + 1 < width) ? x0 + 1 : x0;
 2074              		.loc 1 652 13 is_stmt 1 view .LVU622
 652:lib/utils.c   ****             uint16_t x1 = (x0 + 1 < width) ? x0 + 1 : x0;
 2075              		.loc 1 652 22 is_stmt 0 view .LVU623
 2076 011e FCEEE67A 		vcvt.u32.f32	s15, s13
 2077 0122 17EE90EA 		vmov	lr, s15	@ int
 2078 0126 1FFA8EFE 		uxth	lr, lr
 2079              	.LVL205:
 653:lib/utils.c   ****             uint16_t y1 = (y0 + 1 < height) ? y0 + 1 : y0;
 2080              		.loc 1 653 13 is_stmt 1 view .LVU624
 653:lib/utils.c   ****             uint16_t y1 = (y0 + 1 < height) ? y0 + 1 : y0;
 2081              		.loc 1 653 31 is_stmt 0 view .LVU625
 2082 012a E146     		mov	r9, ip
 2083 012c 0CF1010A 		add	r10, ip, #1
 653:lib/utils.c   ****             uint16_t y1 = (y0 + 1 < height) ? y0 + 1 : y0;
 2084              		.loc 1 653 22 view .LVU626
 2085 0130 5145     		cmp	r1, r10
 2086 0132 01DD     		ble	.L135
 653:lib/utils.c   ****             uint16_t y1 = (y0 + 1 < height) ? y0 + 1 : y0;
 2087              		.loc 1 653 22 discriminator 1 view .LVU627
 2088 0134 1FFA8AFC 		uxth	ip, r10
 2089              	.LVL206:
 2090              	.L135:
 654:lib/utils.c   **** 
 2091              		.loc 1 654 13 is_stmt 1 view .LVU628
 654:lib/utils.c   **** 
 2092              		.loc 1 654 31 is_stmt 0 view .LVU629
 2093 0138 F246     		mov	r10, lr
 2094 013a 0EF1010B 		add	fp, lr, #1
 654:lib/utils.c   **** 
 2095              		.loc 1 654 22 view .LVU630
 2096 013e 5E45     		cmp	r6, fp
 2097 0140 83DD     		ble	.L136
 654:lib/utils.c   **** 
 2098              		.loc 1 654 22 discriminator 1 view .LVU631
 2099 0142 1FFA8BFE 		uxth	lr, fp
 2100              	.LVL207:
 654:lib/utils.c   **** 
 2101              		.loc 1 654 22 discriminator 1 view .LVU632
 2102 0146 80E7     		b	.L136
 2103              	.LVL208:
 2104              	.L141:
 654:lib/utils.c   **** 
 2105              		.loc 1 654 22 discriminator 1 view .LVU633
 2106              	.LBE65:
 2107              	.LBE63:
 642:lib/utils.c   ****     {
 2108              		.loc 1 642 38 is_stmt 1 discriminator 2 view .LVU634
 2109 0148 019B     		ldr	r3, [sp, #4]
 2110              	.LVL209:
 642:lib/utils.c   ****     {
 2111              		.loc 1 642 38 is_stmt 0 discriminator 2 view .LVU635
 2112 014a 0133     		adds	r3, r3, #1
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 52


 2113 014c 9BB2     		uxth	r3, r3
 2114 014e 0193     		str	r3, [sp, #4]
 2115              	.LVL210:
 2116              	.L134:
 642:lib/utils.c   ****     {
 2117              		.loc 1 642 28 is_stmt 1 discriminator 1 view .LVU636
 2118 0150 019B     		ldr	r3, [sp, #4]
 2119 0152 BB42     		cmp	r3, r7
 2120 0154 01D2     		bcs	.L142
 2121              	.LBB66:
 644:lib/utils.c   ****         {
 2122              		.loc 1 644 23 is_stmt 0 view .LVU637
 2123 0156 0023     		movs	r3, #0
 2124 0158 CAE7     		b	.L138
 2125              	.L142:
 2126              	.LBE66:
 2127              	.LBE62:
 673:lib/utils.c   ****         }
 674:lib/utils.c   ****     }
 675:lib/utils.c   **** }
 2128              		.loc 1 675 1 view .LVU638
 2129 015a 03B0     		add	sp, sp, #12
 2130              	.LCFI17:
 2131              		.cfi_def_cfa_offset 36
 2132              		@ sp needed
 2133 015c BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2134              		.loc 1 675 1 view .LVU639
 2135              		.cfi_endproc
 2136              	.LFE13:
 2138              		.section	.text.grayImagEnlarge,"ax",%progbits
 2139              		.align	1
 2140              		.global	grayImagEnlarge
 2141              		.syntax unified
 2142              		.thumb
 2143              		.thumb_func
 2145              	grayImagEnlarge:
 2146              	.LVL211:
 2147              	.LFB14:
 676:lib/utils.c   **** 
 677:lib/utils.c   **** void grayImagEnlarge(uint16_t *src, uint16_t *dst, uint16_t width, uint16_t height, uint8_t n)
 678:lib/utils.c   **** {
 2148              		.loc 1 678 1 is_stmt 1 view -0
 2149              		.cfi_startproc
 2150              		@ args = 4, pretend = 0, frame = 0
 2151              		@ frame_needed = 0, uses_anonymous_args = 0
 2152              		.loc 1 678 1 is_stmt 0 view .LVU641
 2153 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 2154              	.LCFI18:
 2155              		.cfi_def_cfa_offset 20
 2156              		.cfi_offset 4, -20
 2157              		.cfi_offset 5, -16
 2158              		.cfi_offset 6, -12
 2159              		.cfi_offset 7, -8
 2160              		.cfi_offset 14, -4
 2161 0002 0446     		mov	r4, r0
 2162 0004 0D46     		mov	r5, r1
 2163 0006 1646     		mov	r6, r2
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 53


 2164 0008 9DF81400 		ldrb	r0, [sp, #20]	@ zero_extendqisi2
 2165              	.LVL212:
 679:lib/utils.c   ****     uint16_t out_w = width * n;
 2166              		.loc 1 679 5 is_stmt 1 view .LVU642
 2167              		.loc 1 679 14 is_stmt 0 view .LVU643
 2168 000c 10FB02F1 		smulbb	r1, r0, r2
 2169              	.LVL213:
 2170              		.loc 1 679 14 view .LVU644
 2171 0010 89B2     		uxth	r1, r1
 2172              	.LVL214:
 680:lib/utils.c   ****     uint16_t out_h = height * n;
 2173              		.loc 1 680 5 is_stmt 1 view .LVU645
 2174              		.loc 1 680 14 is_stmt 0 view .LVU646
 2175 0012 10FB03F7 		smulbb	r7, r0, r3
 2176 0016 BFB2     		uxth	r7, r7
 2177              	.LVL215:
 681:lib/utils.c   **** 
 682:lib/utils.c   ****     for (uint16_t y = 0; y < out_h; y++)
 2178              		.loc 1 682 5 is_stmt 1 view .LVU647
 2179              	.LBB67:
 2180              		.loc 1 682 10 view .LVU648
 2181              		.loc 1 682 19 is_stmt 0 view .LVU649
 2182 0018 0022     		movs	r2, #0
 2183              	.LVL216:
 2184              		.loc 1 682 5 view .LVU650
 2185 001a 11E0     		b	.L144
 2186              	.LVL217:
 2187              	.L145:
 2188              	.LBB68:
 2189              	.LBB69:
 683:lib/utils.c   ****     {
 684:lib/utils.c   ****         for (uint16_t x = 0; x < out_w; x++)
 685:lib/utils.c   ****         {
 686:lib/utils.c   ****             uint16_t src_x = x / n;
 2190              		.loc 1 686 13 is_stmt 1 view .LVU651
 687:lib/utils.c   ****             uint16_t src_y = y / n;
 2191              		.loc 1 687 13 view .LVU652
 688:lib/utils.c   ****             dst[y * out_w + x] = src[src_y * width + src_x];
 2192              		.loc 1 688 13 view .LVU653
 2193              		.loc 1 688 44 is_stmt 0 view .LVU654
 2194 001c 92FBF0FE 		sdiv	lr, r2, r0
 2195              	.LVL218:
 2196              		.loc 1 688 52 view .LVU655
 2197 0020 93FBF0FC 		sdiv	ip, r3, r0
 2198              	.LVL219:
 2199              		.loc 1 688 52 view .LVU656
 2200 0024 06FB0ECC 		mla	ip, r6, lr, ip
 2201              	.LVL220:
 2202              		.loc 1 688 27 view .LVU657
 2203 0028 02FB013E 		mla	lr, r2, r1, r3
 2204              	.LVL221:
 2205              		.loc 1 688 37 view .LVU658
 2206 002c 34F81CC0 		ldrh	ip, [r4, ip, lsl #1]
 2207              		.loc 1 688 32 view .LVU659
 2208 0030 25F81EC0 		strh	ip, [r5, lr, lsl #1]	@ movhi
 2209              	.LBE69:
 684:lib/utils.c   ****         {
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 54


 2210              		.loc 1 684 42 is_stmt 1 discriminator 3 view .LVU660
 2211 0034 0133     		adds	r3, r3, #1
 2212              	.LVL222:
 684:lib/utils.c   ****         {
 2213              		.loc 1 684 42 is_stmt 0 discriminator 3 view .LVU661
 2214 0036 9BB2     		uxth	r3, r3
 2215              	.LVL223:
 2216              	.L146:
 684:lib/utils.c   ****         {
 2217              		.loc 1 684 32 is_stmt 1 discriminator 1 view .LVU662
 2218 0038 8B42     		cmp	r3, r1
 2219 003a EFD3     		bcc	.L145
 2220              	.LBE68:
 682:lib/utils.c   ****     {
 2221              		.loc 1 682 38 discriminator 2 view .LVU663
 2222 003c 0132     		adds	r2, r2, #1
 2223              	.LVL224:
 682:lib/utils.c   ****     {
 2224              		.loc 1 682 38 is_stmt 0 discriminator 2 view .LVU664
 2225 003e 92B2     		uxth	r2, r2
 2226              	.LVL225:
 2227              	.L144:
 682:lib/utils.c   ****     {
 2228              		.loc 1 682 28 is_stmt 1 discriminator 1 view .LVU665
 2229 0040 BA42     		cmp	r2, r7
 2230 0042 01D2     		bcs	.L149
 2231              	.LBB70:
 684:lib/utils.c   ****         {
 2232              		.loc 1 684 23 is_stmt 0 view .LVU666
 2233 0044 0023     		movs	r3, #0
 2234 0046 F7E7     		b	.L146
 2235              	.L149:
 2236              	.LBE70:
 2237              	.LBE67:
 689:lib/utils.c   ****         }
 690:lib/utils.c   ****     }
 691:lib/utils.c   **** }
 2238              		.loc 1 691 1 view .LVU667
 2239 0048 F0BD     		pop	{r4, r5, r6, r7, pc}
 2240              		.loc 1 691 1 view .LVU668
 2241              		.cfi_endproc
 2242              	.LFE14:
 2244              		.section	.text.rgb565ImageEnlarge,"ax",%progbits
 2245              		.align	1
 2246              		.global	rgb565ImageEnlarge
 2247              		.syntax unified
 2248              		.thumb
 2249              		.thumb_func
 2251              	rgb565ImageEnlarge:
 2252              	.LVL226:
 2253              	.LFB15:
 692:lib/utils.c   **** 
 693:lib/utils.c   **** void rgb565ImageEnlarge(uint16_t *src, uint16_t *dst, uint16_t width, uint16_t height, uint8_t n)
 694:lib/utils.c   **** {
 2254              		.loc 1 694 1 is_stmt 1 view -0
 2255              		.cfi_startproc
 2256              		@ args = 4, pretend = 0, frame = 0
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 55


 2257              		@ frame_needed = 0, uses_anonymous_args = 0
 2258              		.loc 1 694 1 is_stmt 0 view .LVU670
 2259 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 2260              	.LCFI19:
 2261              		.cfi_def_cfa_offset 20
 2262              		.cfi_offset 4, -20
 2263              		.cfi_offset 5, -16
 2264              		.cfi_offset 6, -12
 2265              		.cfi_offset 7, -8
 2266              		.cfi_offset 14, -4
 2267 0002 0446     		mov	r4, r0
 2268 0004 0D46     		mov	r5, r1
 2269 0006 1646     		mov	r6, r2
 2270 0008 9DF81400 		ldrb	r0, [sp, #20]	@ zero_extendqisi2
 2271              	.LVL227:
 695:lib/utils.c   ****     // 计算输出图像的宽高
 696:lib/utils.c   ****     uint16_t out_w = width * n;
 2272              		.loc 1 696 5 is_stmt 1 view .LVU671
 2273              		.loc 1 696 14 is_stmt 0 view .LVU672
 2274 000c 10FB02F1 		smulbb	r1, r0, r2
 2275              	.LVL228:
 2276              		.loc 1 696 14 view .LVU673
 2277 0010 89B2     		uxth	r1, r1
 2278              	.LVL229:
 697:lib/utils.c   ****     uint16_t out_h = height * n;
 2279              		.loc 1 697 5 is_stmt 1 view .LVU674
 2280              		.loc 1 697 14 is_stmt 0 view .LVU675
 2281 0012 10FB03F7 		smulbb	r7, r0, r3
 2282 0016 BFB2     		uxth	r7, r7
 2283              	.LVL230:
 698:lib/utils.c   **** 
 699:lib/utils.c   ****     for (uint16_t y = 0; y < out_h; y++)
 2284              		.loc 1 699 5 is_stmt 1 view .LVU676
 2285              	.LBB71:
 2286              		.loc 1 699 10 view .LVU677
 2287              		.loc 1 699 19 is_stmt 0 view .LVU678
 2288 0018 0022     		movs	r2, #0
 2289              	.LVL231:
 2290              		.loc 1 699 5 view .LVU679
 2291 001a 11E0     		b	.L151
 2292              	.LVL232:
 2293              	.L152:
 2294              	.LBB72:
 2295              	.LBB73:
 700:lib/utils.c   ****     {
 701:lib/utils.c   ****         for (uint16_t x = 0; x < out_w; x++)
 702:lib/utils.c   ****         {
 703:lib/utils.c   ****             // 对应输入图像的坐标（最近邻插值）
 704:lib/utils.c   ****             uint16_t src_x = x / n;
 2296              		.loc 1 704 13 is_stmt 1 view .LVU680
 705:lib/utils.c   ****             uint16_t src_y = y / n;
 2297              		.loc 1 705 13 view .LVU681
 706:lib/utils.c   **** 
 707:lib/utils.c   ****             // 获取输入图像的 RGB565 值并赋给输出图像
 708:lib/utils.c   ****             dst[y * out_w + x] = src[src_y * width + src_x];
 2298              		.loc 1 708 13 view .LVU682
 2299              		.loc 1 708 44 is_stmt 0 view .LVU683
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 56


 2300 001c 92FBF0FE 		sdiv	lr, r2, r0
 2301              	.LVL233:
 2302              		.loc 1 708 52 view .LVU684
 2303 0020 93FBF0FC 		sdiv	ip, r3, r0
 2304              	.LVL234:
 2305              		.loc 1 708 52 view .LVU685
 2306 0024 06FB0ECC 		mla	ip, r6, lr, ip
 2307              	.LVL235:
 2308              		.loc 1 708 27 view .LVU686
 2309 0028 02FB013E 		mla	lr, r2, r1, r3
 2310              	.LVL236:
 2311              		.loc 1 708 37 view .LVU687
 2312 002c 34F81CC0 		ldrh	ip, [r4, ip, lsl #1]
 2313              		.loc 1 708 32 view .LVU688
 2314 0030 25F81EC0 		strh	ip, [r5, lr, lsl #1]	@ movhi
 2315              	.LBE73:
 701:lib/utils.c   ****         {
 2316              		.loc 1 701 42 is_stmt 1 discriminator 3 view .LVU689
 2317 0034 0133     		adds	r3, r3, #1
 2318              	.LVL237:
 701:lib/utils.c   ****         {
 2319              		.loc 1 701 42 is_stmt 0 discriminator 3 view .LVU690
 2320 0036 9BB2     		uxth	r3, r3
 2321              	.LVL238:
 2322              	.L153:
 701:lib/utils.c   ****         {
 2323              		.loc 1 701 32 is_stmt 1 discriminator 1 view .LVU691
 2324 0038 8B42     		cmp	r3, r1
 2325 003a EFD3     		bcc	.L152
 2326              	.LBE72:
 699:lib/utils.c   ****     {
 2327              		.loc 1 699 38 discriminator 2 view .LVU692
 2328 003c 0132     		adds	r2, r2, #1
 2329              	.LVL239:
 699:lib/utils.c   ****     {
 2330              		.loc 1 699 38 is_stmt 0 discriminator 2 view .LVU693
 2331 003e 92B2     		uxth	r2, r2
 2332              	.LVL240:
 2333              	.L151:
 699:lib/utils.c   ****     {
 2334              		.loc 1 699 28 is_stmt 1 discriminator 1 view .LVU694
 2335 0040 BA42     		cmp	r2, r7
 2336 0042 01D2     		bcs	.L156
 2337              	.LBB74:
 701:lib/utils.c   ****         {
 2338              		.loc 1 701 23 is_stmt 0 view .LVU695
 2339 0044 0023     		movs	r3, #0
 2340 0046 F7E7     		b	.L153
 2341              	.L156:
 2342              	.LBE74:
 2343              	.LBE71:
 709:lib/utils.c   ****         }
 710:lib/utils.c   ****     }
 711:lib/utils.c   **** }
 2344              		.loc 1 711 1 view .LVU696
 2345 0048 F0BD     		pop	{r4, r5, r6, r7, pc}
 2346              		.loc 1 711 1 view .LVU697
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 57


 2347              		.cfi_endproc
 2348              	.LFE15:
 2350              		.section	.text.rgb565ImageEnlargeF,"ax",%progbits
 2351              		.align	1
 2352              		.global	rgb565ImageEnlargeF
 2353              		.syntax unified
 2354              		.thumb
 2355              		.thumb_func
 2357              	rgb565ImageEnlargeF:
 2358              	.LVL241:
 2359              	.LFB16:
 712:lib/utils.c   **** 
 713:lib/utils.c   **** // 提取RGB565格式的颜色通道
 714:lib/utils.c   **** #define GET_R(c) (((c) >> 11) & 0x1F)
 715:lib/utils.c   **** #define GET_G(c) (((c) >> 5) & 0x3F)
 716:lib/utils.c   **** #define GET_B(c) ((c) & 0x1F)
 717:lib/utils.c   **** 
 718:lib/utils.c   **** // 合成RGB565格式的颜色
 719:lib/utils.c   **** #define RGB565(r, g, b) (((r) << 11) | ((g) << 5) | (b))
 720:lib/utils.c   **** 
 721:lib/utils.c   **** void rgb565ImageEnlargeF(uint16_t *src, uint16_t *dst, uint16_t w_in, uint16_t h_in, uint16_t w_out
 722:lib/utils.c   **** {
 2360              		.loc 1 722 1 is_stmt 1 view -0
 2361              		.cfi_startproc
 2362              		@ args = 8, pretend = 0, frame = 8
 2363              		@ frame_needed = 0, uses_anonymous_args = 0
 2364              		.loc 1 722 1 is_stmt 0 view .LVU699
 2365 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2366              	.LCFI20:
 2367              		.cfi_def_cfa_offset 36
 2368              		.cfi_offset 4, -36
 2369              		.cfi_offset 5, -32
 2370              		.cfi_offset 6, -28
 2371              		.cfi_offset 7, -24
 2372              		.cfi_offset 8, -20
 2373              		.cfi_offset 9, -16
 2374              		.cfi_offset 10, -12
 2375              		.cfi_offset 11, -8
 2376              		.cfi_offset 14, -4
 2377 0004 83B0     		sub	sp, sp, #12
 2378              	.LCFI21:
 2379              		.cfi_def_cfa_offset 48
 2380 0006 0191     		str	r1, [sp, #4]
 2381 0008 1146     		mov	r1, r2
 2382              	.LVL242:
 2383              		.loc 1 722 1 view .LVU700
 2384 000a 1E46     		mov	r6, r3
 2385 000c BDF83050 		ldrh	r5, [sp, #48]
 2386 0010 BDF83430 		ldrh	r3, [sp, #52]
 2387              	.LVL243:
 2388              		.loc 1 722 1 view .LVU701
 2389 0014 06EE103A 		vmov	s12, r3	@ int
 723:lib/utils.c   ****     for (uint16_t y = 0; y < h_out; y++)
 2390              		.loc 1 723 5 is_stmt 1 view .LVU702
 2391              	.LBB75:
 2392              		.loc 1 723 10 view .LVU703
 2393              	.LVL244:
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 58


 2394              		.loc 1 723 19 is_stmt 0 view .LVU704
 2395 0018 4FF0000B 		mov	fp, #0
 2396              		.loc 1 723 5 view .LVU705
 2397 001c FBE0     		b	.L158
 2398              	.LVL245:
 2399              	.L160:
 2400              	.LBB76:
 2401              	.LBB77:
 724:lib/utils.c   ****     {
 725:lib/utils.c   ****         for (uint16_t x = 0; x < w_out; x++)
 726:lib/utils.c   ****         {
 727:lib/utils.c   ****             // 计算在原图上的对应位置（浮点数）
 728:lib/utils.c   ****             float src_x = ((float)x / w_out) * (w_in - 1);
 729:lib/utils.c   ****             float src_y = ((float)y / h_out) * (h_in - 1);
 730:lib/utils.c   **** 
 731:lib/utils.c   ****             // 计算左上角像素的坐标
 732:lib/utils.c   ****             uint16_t x0 = (uint16_t)src_x;
 733:lib/utils.c   ****             uint16_t y0 = (uint16_t)src_y;
 734:lib/utils.c   ****             uint16_t x1 = (x0 + 1 < w_in) ? (x0 + 1) : x0;
 735:lib/utils.c   ****             uint16_t y1 = (y0 + 1 < h_in) ? (y0 + 1) : y0;
 736:lib/utils.c   **** 
 737:lib/utils.c   ****             // 获取四个相邻像素的颜色值
 738:lib/utils.c   ****             uint16_t c00 = src[y0 * w_in + x0];
 2402              		.loc 1 738 13 is_stmt 1 view .LVU706
 2403              		.loc 1 738 35 is_stmt 0 view .LVU707
 2404 001e 0AFB01F7 		mul	r7, r10, r1
 2405              		.loc 1 738 42 view .LVU708
 2406 0022 09EB070C 		add	ip, r9, r7
 2407              		.loc 1 738 22 view .LVU709
 2408 0026 30F81CC0 		ldrh	ip, [r0, ip, lsl #1]
 2409              	.LVL246:
 739:lib/utils.c   ****             uint16_t c01 = src[y0 * w_in + x1];
 2410              		.loc 1 739 13 is_stmt 1 view .LVU710
 2411              		.loc 1 739 42 is_stmt 0 view .LVU711
 2412 002a 7744     		add	r7, r7, lr
 2413              		.loc 1 739 22 view .LVU712
 2414 002c 30F81770 		ldrh	r7, [r0, r7, lsl #1]
 2415              	.LVL247:
 740:lib/utils.c   ****             uint16_t c10 = src[y1 * w_in + x0];
 2416              		.loc 1 740 13 is_stmt 1 view .LVU713
 2417              		.loc 1 740 35 is_stmt 0 view .LVU714
 2418 0030 01FB03F3 		mul	r3, r1, r3
 2419              	.LVL248:
 2420              		.loc 1 740 42 view .LVU715
 2421 0034 09EB0308 		add	r8, r9, r3
 2422              		.loc 1 740 22 view .LVU716
 2423 0038 30F81880 		ldrh	r8, [r0, r8, lsl #1]
 2424              	.LVL249:
 741:lib/utils.c   ****             uint16_t c11 = src[y1 * w_in + x1];
 2425              		.loc 1 741 13 is_stmt 1 view .LVU717
 2426              		.loc 1 741 42 is_stmt 0 view .LVU718
 2427 003c 9E44     		add	lr, lr, r3
 2428              	.LVL250:
 2429              		.loc 1 741 22 view .LVU719
 2430 003e 30F81E30 		ldrh	r3, [r0, lr, lsl #1]
 2431              	.LVL251:
 742:lib/utils.c   **** 
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 59


 743:lib/utils.c   ****             // 计算权重
 744:lib/utils.c   ****             float dx = src_x - x0;
 2432              		.loc 1 744 13 is_stmt 1 view .LVU720
 2433              		.loc 1 744 30 is_stmt 0 view .LVU721
 2434 0042 07EE909A 		vmov	s15, r9	@ int
 2435 0046 F8EEE77A 		vcvt.f32.s32	s15, s15
 2436              		.loc 1 744 19 view .LVU722
 2437 004a 37EE677A 		vsub.f32	s14, s14, s15
 2438              	.LVL252:
 745:lib/utils.c   ****             float dy = src_y - y0;
 2439              		.loc 1 745 13 is_stmt 1 view .LVU723
 2440              		.loc 1 745 30 is_stmt 0 view .LVU724
 2441 004e 07EE90AA 		vmov	s15, r10	@ int
 2442 0052 F8EEE77A 		vcvt.f32.s32	s15, s15
 2443              		.loc 1 745 19 view .LVU725
 2444 0056 76EEE76A 		vsub.f32	s13, s13, s15
 2445              	.LVL253:
 746:lib/utils.c   **** 
 747:lib/utils.c   ****             // 分别计算R、G、B分量
 748:lib/utils.c   ****             uint8_t r = (1 - dx) * (1 - dy) * GET_R(c00) + dx * (1 - dy) * GET_R(c01) + (1 - dx) * 
 2446              		.loc 1 748 13 is_stmt 1 view .LVU726
 2447              		.loc 1 748 28 is_stmt 0 view .LVU727
 2448 005a F7EE005A 		vmov.f32	s11, #1.0e+0
 2449              	.LVL254:
 2450              		.loc 1 748 28 view .LVU728
 2451 005e 35EEC75A 		vsub.f32	s10, s11, s14
 2452              		.loc 1 748 39 view .LVU729
 2453 0062 75EEE65A 		vsub.f32	s11, s11, s13
 2454              		.loc 1 748 34 view .LVU730
 2455 0066 65EE254A 		vmul.f32	s9, s10, s11
 2456              		.loc 1 748 47 view .LVU731
 2457 006a 4FEADC24 		lsr	r4, ip, #11
 2458 006e 07EE904A 		vmov	s15, r4	@ int
 2459              		.loc 1 748 45 view .LVU732
 2460 0072 F8EEE77A 		vcvt.f32.s32	s15, s15
 2461 0076 67EEA47A 		vmul.f32	s15, s15, s9
 2462              		.loc 1 748 63 view .LVU733
 2463 007a 65EE875A 		vmul.f32	s11, s11, s14
 2464              		.loc 1 748 76 view .LVU734
 2465 007e FC0A     		lsrs	r4, r7, #11
 2466 0080 04EE104A 		vmov	s8, r4	@ int
 2467              		.loc 1 748 74 view .LVU735
 2468 0084 B8EEC44A 		vcvt.f32.s32	s8, s8
 2469 0088 24EE254A 		vmul.f32	s8, s8, s11
 2470              		.loc 1 748 58 view .LVU736
 2471 008c 77EE847A 		vadd.f32	s15, s15, s8
 2472              		.loc 1 748 98 view .LVU737
 2473 0090 25EE265A 		vmul.f32	s10, s10, s13
 2474              		.loc 1 748 105 view .LVU738
 2475 0094 4FEAD824 		lsr	r4, r8, #11
 2476 0098 04EE104A 		vmov	s8, r4	@ int
 2477              		.loc 1 748 103 view .LVU739
 2478 009c B8EEC44A 		vcvt.f32.s32	s8, s8
 2479 00a0 24EE054A 		vmul.f32	s8, s8, s10
 2480              		.loc 1 748 87 view .LVU740
 2481 00a4 77EE847A 		vadd.f32	s15, s15, s8
 2482              		.loc 1 748 121 view .LVU741
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 60


 2483 00a8 27EE267A 		vmul.f32	s14, s14, s13
 2484              	.LVL255:
 2485              		.loc 1 748 128 view .LVU742
 2486 00ac DC0A     		lsrs	r4, r3, #11
 2487 00ae 06EE904A 		vmov	s13, r4	@ int
 2488              	.LVL256:
 2489              		.loc 1 748 126 view .LVU743
 2490 00b2 F8EEE66A 		vcvt.f32.s32	s13, s13
 2491 00b6 66EE876A 		vmul.f32	s13, s13, s14
 2492              		.loc 1 748 116 view .LVU744
 2493 00ba 77EEA67A 		vadd.f32	s15, s15, s13
 2494              		.loc 1 748 21 view .LVU745
 2495 00be FCEEE77A 		vcvt.u32.f32	s15, s15
 2496 00c2 CDED007A 		vstr.32	s15, [sp]	@ int
 2497 00c6 9DF800E0 		ldrb	lr, [sp]	@ zero_extendqisi2
 2498              	.LVL257:
 749:lib/utils.c   ****             uint8_t g = (1 - dx) * (1 - dy) * GET_G(c00) + dx * (1 - dy) * GET_G(c01) + (1 - dx) * 
 2499              		.loc 1 749 13 is_stmt 1 view .LVU746
 2500              		.loc 1 749 47 is_stmt 0 view .LVU747
 2501 00ca CCF34514 		ubfx	r4, ip, #5, #6
 2502 00ce 07EE904A 		vmov	s15, r4	@ int
 2503              		.loc 1 749 45 view .LVU748
 2504 00d2 F8EEE77A 		vcvt.f32.s32	s15, s15
 2505 00d6 67EEA47A 		vmul.f32	s15, s15, s9
 2506              		.loc 1 749 76 view .LVU749
 2507 00da C7F34514 		ubfx	r4, r7, #5, #6
 2508 00de 06EE904A 		vmov	s13, r4	@ int
 2509              		.loc 1 749 74 view .LVU750
 2510 00e2 F8EEE66A 		vcvt.f32.s32	s13, s13
 2511 00e6 66EEA56A 		vmul.f32	s13, s13, s11
 2512              		.loc 1 749 58 view .LVU751
 2513 00ea 77EEA67A 		vadd.f32	s15, s15, s13
 2514              		.loc 1 749 105 view .LVU752
 2515 00ee C8F34514 		ubfx	r4, r8, #5, #6
 2516 00f2 06EE904A 		vmov	s13, r4	@ int
 2517              		.loc 1 749 103 view .LVU753
 2518 00f6 F8EEE66A 		vcvt.f32.s32	s13, s13
 2519 00fa 66EE856A 		vmul.f32	s13, s13, s10
 2520              		.loc 1 749 87 view .LVU754
 2521 00fe 77EEA67A 		vadd.f32	s15, s15, s13
 2522              		.loc 1 749 128 view .LVU755
 2523 0102 C3F34514 		ubfx	r4, r3, #5, #6
 2524 0106 06EE904A 		vmov	s13, r4	@ int
 2525              		.loc 1 749 126 view .LVU756
 2526 010a F8EEE66A 		vcvt.f32.s32	s13, s13
 2527 010e 66EE876A 		vmul.f32	s13, s13, s14
 2528              		.loc 1 749 116 view .LVU757
 2529 0112 77EEA67A 		vadd.f32	s15, s15, s13
 2530              		.loc 1 749 21 view .LVU758
 2531 0116 FCEEE77A 		vcvt.u32.f32	s15, s15
 2532 011a CDED007A 		vstr.32	s15, [sp]	@ int
 2533 011e 9DF80090 		ldrb	r9, [sp]	@ zero_extendqisi2
 2534              	.LVL258:
 750:lib/utils.c   ****             uint8_t b = (1 - dx) * (1 - dy) * GET_B(c00) + dx * (1 - dy) * GET_B(c01) + (1 - dx) * 
 2535              		.loc 1 750 13 is_stmt 1 view .LVU759
 2536              		.loc 1 750 47 is_stmt 0 view .LVU760
 2537 0122 0CF01F04 		and	r4, ip, #31
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 61


 2538 0126 07EE904A 		vmov	s15, r4	@ int
 2539              		.loc 1 750 45 view .LVU761
 2540 012a F8EEE77A 		vcvt.f32.s32	s15, s15
 2541 012e 67EEA47A 		vmul.f32	s15, s15, s9
 2542              		.loc 1 750 76 view .LVU762
 2543 0132 07F01F04 		and	r4, r7, #31
 2544 0136 06EE904A 		vmov	s13, r4	@ int
 2545              		.loc 1 750 74 view .LVU763
 2546 013a F8EEE66A 		vcvt.f32.s32	s13, s13
 2547 013e 66EEA56A 		vmul.f32	s13, s13, s11
 2548              		.loc 1 750 58 view .LVU764
 2549 0142 77EEA67A 		vadd.f32	s15, s15, s13
 2550              		.loc 1 750 105 view .LVU765
 2551 0146 08F01F04 		and	r4, r8, #31
 2552 014a 06EE904A 		vmov	s13, r4	@ int
 2553              		.loc 1 750 103 view .LVU766
 2554 014e F8EEE66A 		vcvt.f32.s32	s13, s13
 2555 0152 66EE856A 		vmul.f32	s13, s13, s10
 2556              		.loc 1 750 87 view .LVU767
 2557 0156 77EEA67A 		vadd.f32	s15, s15, s13
 2558              		.loc 1 750 128 view .LVU768
 2559 015a 03F01F03 		and	r3, r3, #31
 2560              	.LVL259:
 2561              		.loc 1 750 126 view .LVU769
 2562 015e 06EE903A 		vmov	s13, r3	@ int
 2563 0162 F8EEE66A 		vcvt.f32.s32	s13, s13
 2564 0166 26EE877A 		vmul.f32	s14, s13, s14
 2565              		.loc 1 750 116 view .LVU770
 2566 016a 77EE877A 		vadd.f32	s15, s15, s14
 2567              		.loc 1 750 21 view .LVU771
 2568 016e FCEEE77A 		vcvt.u32.f32	s15, s15
 2569 0172 CDED007A 		vstr.32	s15, [sp]	@ int
 2570 0176 9DF80030 		ldrb	r3, [sp]	@ zero_extendqisi2
 2571              	.LVL260:
 751:lib/utils.c   **** 
 752:lib/utils.c   ****             // 组合RGB565格式
 753:lib/utils.c   ****             dst[y * w_out + x] = RGB565(r, g, b);
 2572              		.loc 1 753 13 is_stmt 1 view .LVU772
 2573              		.loc 1 753 34 is_stmt 0 view .LVU773
 2574 017a 4FEA491C 		lsl	ip, r9, #5
 2575              	.LVL261:
 2576              		.loc 1 753 34 view .LVU774
 2577 017e 4CEACE2C 		orr	ip, ip, lr, lsl #11
 2578 0182 0FFA8CFC 		sxth	ip, ip
 2579              		.loc 1 753 27 view .LVU775
 2580 0186 05FB0B27 		mla	r7, r5, fp, r2
 2581              	.LVL262:
 2582              		.loc 1 753 34 view .LVU776
 2583 018a 4CEA030C 		orr	ip, ip, r3
 2584              		.loc 1 753 32 view .LVU777
 2585 018e 019B     		ldr	r3, [sp, #4]
 2586              	.LVL263:
 2587              		.loc 1 753 32 view .LVU778
 2588 0190 23F817C0 		strh	ip, [r3, r7, lsl #1]	@ movhi
 2589              	.LVL264:
 2590              		.loc 1 753 32 view .LVU779
 2591              	.LBE77:
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 62


 725:lib/utils.c   ****         {
 2592              		.loc 1 725 42 is_stmt 1 discriminator 2 view .LVU780
 2593 0194 0132     		adds	r2, r2, #1
 2594              	.LVL265:
 725:lib/utils.c   ****         {
 2595              		.loc 1 725 42 is_stmt 0 discriminator 2 view .LVU781
 2596 0196 92B2     		uxth	r2, r2
 2597              	.LVL266:
 2598              	.L162:
 725:lib/utils.c   ****         {
 2599              		.loc 1 725 32 is_stmt 1 discriminator 1 view .LVU782
 2600 0198 AA42     		cmp	r2, r5
 2601 019a 38D2     		bcs	.L165
 2602              	.LBB78:
 728:lib/utils.c   ****             float src_y = ((float)y / h_out) * (h_in - 1);
 2603              		.loc 1 728 13 view .LVU783
 728:lib/utils.c   ****             float src_y = ((float)y / h_out) * (h_in - 1);
 2604              		.loc 1 728 28 is_stmt 0 view .LVU784
 2605 019c 07EE902A 		vmov	s15, r2	@ int
 2606 01a0 F8EE677A 		vcvt.f32.u32	s15, s15
 728:lib/utils.c   ****             float src_y = ((float)y / h_out) * (h_in - 1);
 2607              		.loc 1 728 37 view .LVU785
 2608 01a4 07EE105A 		vmov	s14, r5	@ int
 2609 01a8 F8EEC76A 		vcvt.f32.s32	s13, s14
 2610 01ac 87EEA67A 		vdiv.f32	s14, s15, s13
 728:lib/utils.c   ****             float src_y = ((float)y / h_out) * (h_in - 1);
 2611              		.loc 1 728 54 view .LVU786
 2612 01b0 4B1E     		subs	r3, r1, #1
 2613 01b2 07EE903A 		vmov	s15, r3	@ int
 728:lib/utils.c   ****             float src_y = ((float)y / h_out) * (h_in - 1);
 2614              		.loc 1 728 46 view .LVU787
 2615 01b6 F8EEE77A 		vcvt.f32.s32	s15, s15
 728:lib/utils.c   ****             float src_y = ((float)y / h_out) * (h_in - 1);
 2616              		.loc 1 728 19 view .LVU788
 2617 01ba 27EE277A 		vmul.f32	s14, s14, s15
 2618              	.LVL267:
 729:lib/utils.c   **** 
 2619              		.loc 1 729 13 is_stmt 1 view .LVU789
 729:lib/utils.c   **** 
 2620              		.loc 1 729 28 is_stmt 0 view .LVU790
 2621 01be 07EE90BA 		vmov	s15, fp	@ int
 2622 01c2 F8EE677A 		vcvt.f32.u32	s15, s15
 729:lib/utils.c   **** 
 2623              		.loc 1 729 37 view .LVU791
 2624 01c6 F8EEC65A 		vcvt.f32.s32	s11, s12
 2625 01ca C7EEA56A 		vdiv.f32	s13, s15, s11
 729:lib/utils.c   **** 
 2626              		.loc 1 729 54 view .LVU792
 2627 01ce 731E     		subs	r3, r6, #1
 2628 01d0 07EE903A 		vmov	s15, r3	@ int
 729:lib/utils.c   **** 
 2629              		.loc 1 729 46 view .LVU793
 2630 01d4 F8EEE77A 		vcvt.f32.s32	s15, s15
 729:lib/utils.c   **** 
 2631              		.loc 1 729 19 view .LVU794
 2632 01d8 66EEA76A 		vmul.f32	s13, s13, s15
 2633              	.LVL268:
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 63


 732:lib/utils.c   ****             uint16_t y0 = (uint16_t)src_y;
 2634              		.loc 1 732 13 is_stmt 1 view .LVU795
 732:lib/utils.c   ****             uint16_t y0 = (uint16_t)src_y;
 2635              		.loc 1 732 22 is_stmt 0 view .LVU796
 2636 01dc FCEEC77A 		vcvt.u32.f32	s15, s14
 2637 01e0 17EE903A 		vmov	r3, s15	@ int
 2638 01e4 1FFA83FE 		uxth	lr, r3
 2639              	.LVL269:
 733:lib/utils.c   ****             uint16_t x1 = (x0 + 1 < w_in) ? (x0 + 1) : x0;
 2640              		.loc 1 733 13 is_stmt 1 view .LVU797
 733:lib/utils.c   ****             uint16_t x1 = (x0 + 1 < w_in) ? (x0 + 1) : x0;
 2641              		.loc 1 733 22 is_stmt 0 view .LVU798
 2642 01e8 FCEEE67A 		vcvt.u32.f32	s15, s13
 2643 01ec 17EE903A 		vmov	r3, s15	@ int
 2644 01f0 9BB2     		uxth	r3, r3
 2645              	.LVL270:
 734:lib/utils.c   ****             uint16_t y1 = (y0 + 1 < h_in) ? (y0 + 1) : y0;
 2646              		.loc 1 734 13 is_stmt 1 view .LVU799
 734:lib/utils.c   ****             uint16_t y1 = (y0 + 1 < h_in) ? (y0 + 1) : y0;
 2647              		.loc 1 734 31 is_stmt 0 view .LVU800
 2648 01f2 F146     		mov	r9, lr
 2649 01f4 0EF10107 		add	r7, lr, #1
 734:lib/utils.c   ****             uint16_t y1 = (y0 + 1 < h_in) ? (y0 + 1) : y0;
 2650              		.loc 1 734 22 view .LVU801
 2651 01f8 B942     		cmp	r1, r7
 2652 01fa 01DD     		ble	.L159
 734:lib/utils.c   ****             uint16_t y1 = (y0 + 1 < h_in) ? (y0 + 1) : y0;
 2653              		.loc 1 734 22 discriminator 1 view .LVU802
 2654 01fc 1FFA87FE 		uxth	lr, r7
 2655              	.LVL271:
 2656              	.L159:
 735:lib/utils.c   **** 
 2657              		.loc 1 735 13 is_stmt 1 view .LVU803
 735:lib/utils.c   **** 
 2658              		.loc 1 735 31 is_stmt 0 view .LVU804
 2659 0200 9A46     		mov	r10, r3
 2660 0202 5F1C     		adds	r7, r3, #1
 735:lib/utils.c   **** 
 2661              		.loc 1 735 22 view .LVU805
 2662 0204 BE42     		cmp	r6, r7
 2663 0206 7FF70AAF 		ble	.L160
 735:lib/utils.c   **** 
 2664              		.loc 1 735 22 discriminator 1 view .LVU806
 2665 020a BBB2     		uxth	r3, r7
 2666              	.LVL272:
 735:lib/utils.c   **** 
 2667              		.loc 1 735 22 discriminator 1 view .LVU807
 2668 020c 07E7     		b	.L160
 2669              	.LVL273:
 2670              	.L165:
 735:lib/utils.c   **** 
 2671              		.loc 1 735 22 discriminator 1 view .LVU808
 2672              	.LBE78:
 2673              	.LBE76:
 723:lib/utils.c   ****     {
 2674              		.loc 1 723 38 is_stmt 1 discriminator 2 view .LVU809
 2675 020e 0BF1010B 		add	fp, fp, #1
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 64


 2676              	.LVL274:
 723:lib/utils.c   ****     {
 2677              		.loc 1 723 38 is_stmt 0 discriminator 2 view .LVU810
 2678 0212 1FFA8BFB 		uxth	fp, fp
 2679              	.LVL275:
 2680              	.L158:
 723:lib/utils.c   ****     {
 2681              		.loc 1 723 28 is_stmt 1 discriminator 1 view .LVU811
 2682 0216 16EE103A 		vmov	r3, s12	@ int
 2683 021a 9B45     		cmp	fp, r3
 2684 021c 01D2     		bcs	.L166
 2685              	.LBB79:
 725:lib/utils.c   ****         {
 2686              		.loc 1 725 23 is_stmt 0 view .LVU812
 2687 021e 0022     		movs	r2, #0
 2688 0220 BAE7     		b	.L162
 2689              	.L166:
 2690              	.LBE79:
 2691              	.LBE75:
 754:lib/utils.c   ****         }
 755:lib/utils.c   ****     }
 756:lib/utils.c   **** }
 2692              		.loc 1 756 1 view .LVU813
 2693 0222 03B0     		add	sp, sp, #12
 2694              	.LCFI22:
 2695              		.cfi_def_cfa_offset 36
 2696              		@ sp needed
 2697 0224 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2698              		.loc 1 756 1 view .LVU814
 2699              		.cfi_endproc
 2700              	.LFE16:
 2702              		.section	.text.rgb565Rotate90,"ax",%progbits
 2703              		.align	1
 2704              		.global	rgb565Rotate90
 2705              		.syntax unified
 2706              		.thumb
 2707              		.thumb_func
 2709              	rgb565Rotate90:
 2710              	.LVL276:
 2711              	.LFB17:
 757:lib/utils.c   ****  
 758:lib/utils.c   **** void rgb565Rotate90(uint16_t *src, uint16_t *dst, uint16_t width, uint16_t height)
 759:lib/utils.c   **** {
 2712              		.loc 1 759 1 is_stmt 1 view -0
 2713              		.cfi_startproc
 2714              		@ args = 0, pretend = 0, frame = 0
 2715              		@ frame_needed = 0, uses_anonymous_args = 0
 2716              		.loc 1 759 1 is_stmt 0 view .LVU816
 2717 0000 30B5     		push	{r4, r5, lr}
 2718              	.LCFI23:
 2719              		.cfi_def_cfa_offset 12
 2720              		.cfi_offset 4, -12
 2721              		.cfi_offset 5, -8
 2722              		.cfi_offset 14, -4
 2723 0002 0C46     		mov	r4, r1
 2724 0004 1146     		mov	r1, r2
 2725              	.LVL277:
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 65


 760:lib/utils.c   ****     uint32_t index = 0;
 2726              		.loc 1 760 5 is_stmt 1 view .LVU817
 761:lib/utils.c   ****     for (uint16_t y = 0; y < height; y++)
 2727              		.loc 1 761 5 view .LVU818
 2728              	.LBB80:
 2729              		.loc 1 761 10 view .LVU819
 2730              		.loc 1 761 19 is_stmt 0 view .LVU820
 2731 0006 0022     		movs	r2, #0
 2732              	.LVL278:
 2733              		.loc 1 761 5 view .LVU821
 2734 0008 13E0     		b	.L168
 2735              	.LVL279:
 2736              	.L169:
 2737              	.LBB81:
 762:lib/utils.c   ****     {
 763:lib/utils.c   ****         for (uint16_t x = 0; x < width; x++)
 764:lib/utils.c   ****         {
 765:lib/utils.c   ****             dst[x * height + (height - y - 1)] = src[y * width + x];
 2738              		.loc 1 765 13 is_stmt 1 view .LVU822
 2739              		.loc 1 765 64 is_stmt 0 view .LVU823
 2740 000a 02FB01C5 		mla	r5, r2, r1, ip
 2741              		.loc 1 765 38 view .LVU824
 2742 000e A3EB020E 		sub	lr, r3, r2
 2743              		.loc 1 765 42 view .LVU825
 2744 0012 0EF1FF3E 		add	lr, lr, #-1
 2745              		.loc 1 765 28 view .LVU826
 2746 0016 03FB0CEE 		mla	lr, r3, ip, lr
 2747              		.loc 1 765 53 view .LVU827
 2748 001a 30F81550 		ldrh	r5, [r0, r5, lsl #1]
 2749              		.loc 1 765 48 view .LVU828
 2750 001e 24F81E50 		strh	r5, [r4, lr, lsl #1]	@ movhi
 763:lib/utils.c   ****         {
 2751              		.loc 1 763 42 is_stmt 1 discriminator 3 view .LVU829
 2752 0022 0CF1010C 		add	ip, ip, #1
 2753              	.LVL280:
 763:lib/utils.c   ****         {
 2754              		.loc 1 763 42 is_stmt 0 discriminator 3 view .LVU830
 2755 0026 1FFA8CFC 		uxth	ip, ip
 2756              	.LVL281:
 2757              	.L170:
 763:lib/utils.c   ****         {
 2758              		.loc 1 763 32 is_stmt 1 discriminator 1 view .LVU831
 2759 002a 8C45     		cmp	ip, r1
 2760 002c EDD3     		bcc	.L169
 2761              	.LBE81:
 761:lib/utils.c   ****     for (uint16_t y = 0; y < height; y++)
 2762              		.loc 1 761 39 discriminator 2 view .LVU832
 2763 002e 0132     		adds	r2, r2, #1
 2764              	.LVL282:
 761:lib/utils.c   ****     for (uint16_t y = 0; y < height; y++)
 2765              		.loc 1 761 39 is_stmt 0 discriminator 2 view .LVU833
 2766 0030 92B2     		uxth	r2, r2
 2767              	.LVL283:
 2768              	.L168:
 761:lib/utils.c   ****     for (uint16_t y = 0; y < height; y++)
 2769              		.loc 1 761 28 is_stmt 1 discriminator 1 view .LVU834
 2770 0032 9A42     		cmp	r2, r3
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 66


 2771 0034 02D2     		bcs	.L173
 2772              	.LBB82:
 763:lib/utils.c   ****         {
 2773              		.loc 1 763 23 is_stmt 0 view .LVU835
 2774 0036 4FF0000C 		mov	ip, #0
 2775 003a F6E7     		b	.L170
 2776              	.L173:
 2777              	.LBE82:
 2778              	.LBE80:
 766:lib/utils.c   ****         }
 767:lib/utils.c   ****     }
 768:lib/utils.c   **** }...
 2779              		.loc 1 768 1 view .LVU836
 2780 003c 30BD     		pop	{r4, r5, pc}
 2781              		.loc 1 768 1 view .LVU837
 2782              		.cfi_endproc
 2783              	.LFE17:
 2785              		.section	.bss.buf1.0,"aw",%nobits
 2786              		.align	2
 2789              	buf1.0:
 2790 0000 00000000 		.space	98304
 2790      00000000 
 2790      00000000 
 2790      00000000 
 2790      00000000 
 2791              		.section	.rodata.kernel.1,"a"
 2792              		.align	2
 2795              	kernel.1:
 2796 0000 00FF00   		.ascii	"\000\377\000"
 2797 0003 FF05FF   		.ascii	"\377\005\377"
 2798 0006 00FF00   		.ascii	"\000\377\000"
 2799              		.global	g_gamma
 2800              		.section	.data.g_gamma,"aw"
 2801              		.align	2
 2804              	g_gamma:
 2805 0000 0000803F 		.word	1065353216
 2806              		.section	.bss.crc16_table,"aw",%nobits
 2807              		.align	2
 2810              	crc16_table:
 2811 0000 00000000 		.space	512
 2811      00000000 
 2811      00000000 
 2811      00000000 
 2811      00000000 
 2812              		.section	.bss.g_color_tint,"aw",%nobits
 2815              	g_color_tint:
 2816 0000 00       		.space	1
 2817              		.global	max_wh
 2818              		.section	.data.max_wh,"aw"
 2819              		.align	2
 2822              	max_wh:
 2823 0000 A4510000 		.word	20900
 2824              		.global	min_wh
 2825              		.section	.data.min_wh,"aw"
 2826              		.align	2
 2829              	min_wh:
 2830 0000 803E0000 		.word	16000
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 67


 2831              		.text
 2832              	.Letext0:
 2833              		.file 2 "D:/armtoolchain/arm-gnu-toolchain-13.3.rel1-mingw-w64-i686-arm-none-eabi/arm-none-eabi/in
 2834              		.file 3 "D:/armtoolchain/arm-gnu-toolchain-13.3.rel1-mingw-w64-i686-arm-none-eabi/arm-none-eabi/in
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 68


DEFINED SYMBOLS
                            *ABS*:00000000 utils.c
C:\usertemp\ccc7KZ7O.s:22     .text.crcInit:00000000 $t
C:\usertemp\ccc7KZ7O.s:28     .text.crcInit:00000000 crcInit
C:\usertemp\ccc7KZ7O.s:112    .text.crcInit:00000038 $d
C:\usertemp\ccc7KZ7O.s:2810   .bss.crc16_table:00000000 crc16_table
C:\usertemp\ccc7KZ7O.s:117    .text.crc_caculate:00000000 $t
C:\usertemp\ccc7KZ7O.s:123    .text.crc_caculate:00000000 crc_caculate
C:\usertemp\ccc7KZ7O.s:192    .text.crc_caculate:00000030 $d
C:\usertemp\ccc7KZ7O.s:197    .text.reverseBits:00000000 $t
C:\usertemp\ccc7KZ7O.s:203    .text.reverseBits:00000000 reverseBits
C:\usertemp\ccc7KZ7O.s:273    .text.yuv422_to_rgb565:00000000 $t
C:\usertemp\ccc7KZ7O.s:279    .text.yuv422_to_rgb565:00000000 yuv422_to_rgb565
C:\usertemp\ccc7KZ7O.s:366    .text.yuv422_to_rgb565_memcpy:00000000 $t
C:\usertemp\ccc7KZ7O.s:372    .text.yuv422_to_rgb565_memcpy:00000000 yuv422_to_rgb565_memcpy
C:\usertemp\ccc7KZ7O.s:484    .text.U32_memcpy_asm:00000000 $t
C:\usertemp\ccc7KZ7O.s:490    .text.U32_memcpy_asm:00000000 U32_memcpy_asm
C:\usertemp\ccc7KZ7O.s:519    .text.U64_memcpy_fast:00000000 $t
C:\usertemp\ccc7KZ7O.s:525    .text.U64_memcpy_fast:00000000 U64_memcpy_fast
C:\usertemp\ccc7KZ7O.s:556    .text.gray_to_rgb565:00000000 $t
C:\usertemp\ccc7KZ7O.s:562    .text.gray_to_rgb565:00000000 gray_to_rgb565
C:\usertemp\ccc7KZ7O.s:938    .text.gray_to_rgb565:00000268 $d
C:\usertemp\ccc7KZ7O.s:2815   .bss.g_color_tint:00000000 g_color_tint
C:\usertemp\ccc7KZ7O.s:949    .text.medianFilter3x3:00000000 $t
C:\usertemp\ccc7KZ7O.s:955    .text.medianFilter3x3:00000000 medianFilter3x3
C:\usertemp\ccc7KZ7O.s:1470   .text.sharpen3x3:00000000 $t
C:\usertemp\ccc7KZ7O.s:1476   .text.sharpen3x3:00000000 sharpen3x3
C:\usertemp\ccc7KZ7O.s:1682   .text.sharpen3x3:000000c8 $d
C:\usertemp\ccc7KZ7O.s:2795   .rodata.kernel.1:00000000 kernel.1
C:\usertemp\ccc7KZ7O.s:1687   .text.grayImageToRGB:00000000 $t
C:\usertemp\ccc7KZ7O.s:1693   .text.grayImageToRGB:00000000 grayImageToRGB
C:\usertemp\ccc7KZ7O.s:1785   .text.grayImageToRGB:00000060 $d
C:\usertemp\ccc7KZ7O.s:2789   .bss.buf1.0:00000000 buf1.0
C:\usertemp\ccc7KZ7O.s:1790   .text.color_shift_cooler:00000000 $t
C:\usertemp\ccc7KZ7O.s:1796   .text.color_shift_cooler:00000000 color_shift_cooler
C:\usertemp\ccc7KZ7O.s:1821   .text.color_shift_cooler:00000014 $d
C:\usertemp\ccc7KZ7O.s:1826   .text.color_shift_warmer:00000000 $t
C:\usertemp\ccc7KZ7O.s:1832   .text.color_shift_warmer:00000000 color_shift_warmer
C:\usertemp\ccc7KZ7O.s:1857   .text.color_shift_warmer:00000014 $d
C:\usertemp\ccc7KZ7O.s:1862   .text.grayImageLarger:00000000 $t
C:\usertemp\ccc7KZ7O.s:1868   .text.grayImageLarger:00000000 grayImageLarger
C:\usertemp\ccc7KZ7O.s:2139   .text.grayImagEnlarge:00000000 $t
C:\usertemp\ccc7KZ7O.s:2145   .text.grayImagEnlarge:00000000 grayImagEnlarge
C:\usertemp\ccc7KZ7O.s:2245   .text.rgb565ImageEnlarge:00000000 $t
C:\usertemp\ccc7KZ7O.s:2251   .text.rgb565ImageEnlarge:00000000 rgb565ImageEnlarge
C:\usertemp\ccc7KZ7O.s:2351   .text.rgb565ImageEnlargeF:00000000 $t
C:\usertemp\ccc7KZ7O.s:2357   .text.rgb565ImageEnlargeF:00000000 rgb565ImageEnlargeF
C:\usertemp\ccc7KZ7O.s:2703   .text.rgb565Rotate90:00000000 $t
C:\usertemp\ccc7KZ7O.s:2709   .text.rgb565Rotate90:00000000 rgb565Rotate90
C:\usertemp\ccc7KZ7O.s:2786   .bss.buf1.0:00000000 $d
C:\usertemp\ccc7KZ7O.s:2792   .rodata.kernel.1:00000000 $d
C:\usertemp\ccc7KZ7O.s:2804   .data.g_gamma:00000000 g_gamma
C:\usertemp\ccc7KZ7O.s:2801   .data.g_gamma:00000000 $d
C:\usertemp\ccc7KZ7O.s:2807   .bss.crc16_table:00000000 $d
C:\usertemp\ccc7KZ7O.s:2816   .bss.g_color_tint:00000000 $d
C:\usertemp\ccc7KZ7O.s:2822   .data.max_wh:00000000 max_wh
C:\usertemp\ccc7KZ7O.s:2819   .data.max_wh:00000000 $d
ARM GAS  C:\usertemp\ccc7KZ7O.s 			page 69


C:\usertemp\ccc7KZ7O.s:2829   .data.min_wh:00000000 min_wh
C:\usertemp\ccc7KZ7O.s:2826   .data.min_wh:00000000 $d

NO UNDEFINED SYMBOLS
