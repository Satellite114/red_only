ARM GAS  C:\usertemp\cctRPN2Y.s 			page 1


   1              		.cpu cortex-m33
   2              		.arch armv8-m.main
   3              		.fpu fpv4-sp-d16
   4              		.arch_extension dsp
   5              		.eabi_attribute 27, 1
   6              		.eabi_attribute 28, 1
   7              		.eabi_attribute 20, 1
   8              		.eabi_attribute 21, 1
   9              		.eabi_attribute 23, 3
  10              		.eabi_attribute 24, 1
  11              		.eabi_attribute 25, 1
  12              		.eabi_attribute 26, 1
  13              		.eabi_attribute 30, 1
  14              		.eabi_attribute 34, 1
  15              		.eabi_attribute 18, 4
  16              		.file	"utils.c"
  17              		.text
  18              	.Ltext0:
  19              		.cfi_sections	.debug_frame
  20              		.file 1 "lib/utils.c"
  21              		.section	.text.crcInit,"ax",%progbits
  22              		.align	1
  23              		.global	crcInit
  24              		.syntax unified
  25              		.thumb
  26              		.thumb_func
  28              	crcInit:
  29              	.LFB0:
   1:lib/utils.c   **** #include "utils.h"
   2:lib/utils.c   **** uint32_t min_wh = 16000, max_wh = 20900;
   3:lib/utils.c   **** static uint16_t g_min_gray = 18000;
   4:lib/utils.c   **** static uint16_t g_max_gray = 22000;
   5:lib/utils.c   **** static int8_t g_color_tint = 0; // <0 cooler, >0 warmer
   6:lib/utils.c   **** 
   7:lib/utils.c   **** static uint16_t crc16_table[256];
   8:lib/utils.c   **** #define CONTRAST_STRENGTH 20.0f
   9:lib/utils.c   **** #define MID_POINT 0.5f
  10:lib/utils.c   **** // #define ALIGN_32BYTES __attribute__((aligned(32)))
  11:lib/utils.c   **** // #define IN_SDRAM      __attribute__((section(".SDRAM")))
  12:lib/utils.c   **** 
  13:lib/utils.c   **** // ALIGN_32BYTES static uint16_t buf1[256 * 192] IN_SDRAM; // 中值滤波结果
  14:lib/utils.c   **** // ALIGN_32BYTES static uint16_t buf2[256 * 192] IN_SDRAM; // 锐化卷积结果
  15:lib/utils.c   **** 
  16:lib/utils.c   **** float g_gamma = 1.0f; // 默认线性，可在主程序中动态调整
  17:lib/utils.c   **** 
  18:lib/utils.c   **** static const uint16_t colorLUT[256] = {
  19:lib/utils.c   ****     0x000F,
  20:lib/utils.c   ****     0x0010,
  21:lib/utils.c   ****     0x0011,
  22:lib/utils.c   ****     0x0011,
  23:lib/utils.c   ****     0x0012,
  24:lib/utils.c   ****     0x0012,
  25:lib/utils.c   ****     0x0013,
  26:lib/utils.c   ****     0x0013,
  27:lib/utils.c   ****     0x0014,
  28:lib/utils.c   ****     0x0015,
  29:lib/utils.c   ****     0x0015,
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 2


  30:lib/utils.c   ****     0x0016,
  31:lib/utils.c   ****     0x0016,
  32:lib/utils.c   ****     0x0017,
  33:lib/utils.c   ****     0x0017,
  34:lib/utils.c   ****     0x0018,
  35:lib/utils.c   ****     0x0019,
  36:lib/utils.c   ****     0x0019,
  37:lib/utils.c   ****     0x001A,
  38:lib/utils.c   ****     0x001A,
  39:lib/utils.c   ****     0x001B,
  40:lib/utils.c   ****     0x001B,
  41:lib/utils.c   ****     0x001C,
  42:lib/utils.c   ****     0x001D,
  43:lib/utils.c   ****     0x001D,
  44:lib/utils.c   ****     0x001E,
  45:lib/utils.c   ****     0x001E,
  46:lib/utils.c   ****     0x001F,
  47:lib/utils.c   ****     0x001F,
  48:lib/utils.c   ****     0x001F,
  49:lib/utils.c   ****     0x001F,
  50:lib/utils.c   ****     0x001F,
  51:lib/utils.c   ****     0x001F,
  52:lib/utils.c   ****     0x003F,
  53:lib/utils.c   ****     0x005F,
  54:lib/utils.c   ****     0x007F,
  55:lib/utils.c   ****     0x009F,
  56:lib/utils.c   ****     0x00BF,
  57:lib/utils.c   ****     0x00DF,
  58:lib/utils.c   ****     0x00FF,
  59:lib/utils.c   ****     0x011F,
  60:lib/utils.c   ****     0x013F,
  61:lib/utils.c   ****     0x015F,
  62:lib/utils.c   ****     0x017F,
  63:lib/utils.c   ****     0x019F,
  64:lib/utils.c   ****     0x01BF,
  65:lib/utils.c   ****     0x01DF,
  66:lib/utils.c   ****     0x01FF,
  67:lib/utils.c   ****     0x021F,
  68:lib/utils.c   ****     0x023F,
  69:lib/utils.c   ****     0x025F,
  70:lib/utils.c   ****     0x027F,
  71:lib/utils.c   ****     0x029F,
  72:lib/utils.c   ****     0x02BF,
  73:lib/utils.c   ****     0x02DF,
  74:lib/utils.c   ****     0x02FF,
  75:lib/utils.c   ****     0x031F,
  76:lib/utils.c   ****     0x033F,
  77:lib/utils.c   ****     0x035F,
  78:lib/utils.c   ****     0x037F,
  79:lib/utils.c   ****     0x039F,
  80:lib/utils.c   ****     0x03BF,
  81:lib/utils.c   ****     0x03DF,
  82:lib/utils.c   ****     0x03FF,
  83:lib/utils.c   ****     0x041F,
  84:lib/utils.c   ****     0x043F,
  85:lib/utils.c   ****     0x045F,
  86:lib/utils.c   ****     0x047F,
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 3


  87:lib/utils.c   ****     0x049F,
  88:lib/utils.c   ****     0x04BF,
  89:lib/utils.c   ****     0x04DF,
  90:lib/utils.c   ****     0x04FF,
  91:lib/utils.c   ****     0x051F,
  92:lib/utils.c   ****     0x053F,
  93:lib/utils.c   ****     0x055F,
  94:lib/utils.c   ****     0x057F,
  95:lib/utils.c   ****     0x059F,
  96:lib/utils.c   ****     0x05BF,
  97:lib/utils.c   ****     0x05DF,
  98:lib/utils.c   ****     0x05FF,
  99:lib/utils.c   ****     0x061F,
 100:lib/utils.c   ****     0x063F,
 101:lib/utils.c   ****     0x065F,
 102:lib/utils.c   ****     0x067F,
 103:lib/utils.c   ****     0x069F,
 104:lib/utils.c   ****     0x06BF,
 105:lib/utils.c   ****     0x06DF,
 106:lib/utils.c   ****     0x06FF,
 107:lib/utils.c   ****     0x071F,
 108:lib/utils.c   ****     0x073E,
 109:lib/utils.c   ****     0x075E,
 110:lib/utils.c   ****     0x077E,
 111:lib/utils.c   ****     0x0F9D,
 112:lib/utils.c   ****     0x0FBD,
 113:lib/utils.c   ****     0x0FDC,
 114:lib/utils.c   ****     0x17FC,
 115:lib/utils.c   ****     0x17FC,
 116:lib/utils.c   ****     0x1FFB,
 117:lib/utils.c   ****     0x1FFB,
 118:lib/utils.c   ****     0x1FFA,
 119:lib/utils.c   ****     0x27FA,
 120:lib/utils.c   ****     0x27FA,
 121:lib/utils.c   ****     0x2FF9,
 122:lib/utils.c   ****     0x2FF9,
 123:lib/utils.c   ****     0x2FF8,
 124:lib/utils.c   ****     0x37F8,
 125:lib/utils.c   ****     0x37F8,
 126:lib/utils.c   ****     0x3FF7,
 127:lib/utils.c   ****     0x3FF7,
 128:lib/utils.c   ****     0x3FF6,
 129:lib/utils.c   ****     0x47F6,
 130:lib/utils.c   ****     0x47F6,
 131:lib/utils.c   ****     0x4FF5,
 132:lib/utils.c   ****     0x4FF5,
 133:lib/utils.c   ****     0x4FF4,
 134:lib/utils.c   ****     0x57F4,
 135:lib/utils.c   ****     0x57F4,
 136:lib/utils.c   ****     0x5FF3,
 137:lib/utils.c   ****     0x5FF3,
 138:lib/utils.c   ****     0x5FF2,
 139:lib/utils.c   ****     0x67F2,
 140:lib/utils.c   ****     0x67F2,
 141:lib/utils.c   ****     0x6FF1,
 142:lib/utils.c   ****     0x6FF1,
 143:lib/utils.c   ****     0x77F0,
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 4


 144:lib/utils.c   ****     0x77F0,
 145:lib/utils.c   ****     0x77F0,
 146:lib/utils.c   ****     0x7FEF,
 147:lib/utils.c   ****     0x7FEF,
 148:lib/utils.c   ****     0x87EE,
 149:lib/utils.c   ****     0x87EE,
 150:lib/utils.c   ****     0x87EE,
 151:lib/utils.c   ****     0x8FED,
 152:lib/utils.c   ****     0x8FED,
 153:lib/utils.c   ****     0x97EC,
 154:lib/utils.c   ****     0x97EC,
 155:lib/utils.c   ****     0x97EB,
 156:lib/utils.c   ****     0x9FEB,
 157:lib/utils.c   ****     0x9FEB,
 158:lib/utils.c   ****     0xA7EA,
 159:lib/utils.c   ****     0xA7EA,
 160:lib/utils.c   ****     0xA7E9,
 161:lib/utils.c   ****     0xAFE9,
 162:lib/utils.c   ****     0xAFE9,
 163:lib/utils.c   ****     0xB7E8,
 164:lib/utils.c   ****     0xB7E8,
 165:lib/utils.c   ****     0xB7E7,
 166:lib/utils.c   ****     0xBFE7,
 167:lib/utils.c   ****     0xBFE7,
 168:lib/utils.c   ****     0xC7E6,
 169:lib/utils.c   ****     0xC7E6,
 170:lib/utils.c   ****     0xC7E5,
 171:lib/utils.c   ****     0xCFE5,
 172:lib/utils.c   ****     0xCFE5,
 173:lib/utils.c   ****     0xD7E4,
 174:lib/utils.c   ****     0xD7E4,
 175:lib/utils.c   ****     0xD7E3,
 176:lib/utils.c   ****     0xDFE3,
 177:lib/utils.c   ****     0xDFE3,
 178:lib/utils.c   ****     0xE7E2,
 179:lib/utils.c   ****     0xE7E2,
 180:lib/utils.c   ****     0xE7E1,
 181:lib/utils.c   ****     0xEFE1,
 182:lib/utils.c   ****     0xEFE1,
 183:lib/utils.c   ****     0xF7E0,
 184:lib/utils.c   ****     0xF7C0,
 185:lib/utils.c   ****     0xF7A0,
 186:lib/utils.c   ****     0xFF80,
 187:lib/utils.c   ****     0xFF60,
 188:lib/utils.c   ****     0xFF40,
 189:lib/utils.c   ****     0xFF20,
 190:lib/utils.c   ****     0xFF00,
 191:lib/utils.c   ****     0xFEE0,
 192:lib/utils.c   ****     0xFEC0,
 193:lib/utils.c   ****     0xFEA0,
 194:lib/utils.c   ****     0xFE80,
 195:lib/utils.c   ****     0xFE60,
 196:lib/utils.c   ****     0xFE40,
 197:lib/utils.c   ****     0xFE40,
 198:lib/utils.c   ****     0xFE20,
 199:lib/utils.c   ****     0xFE00,
 200:lib/utils.c   ****     0xFDE0,
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 5


 201:lib/utils.c   ****     0xFDC0,
 202:lib/utils.c   ****     0xFDA0,
 203:lib/utils.c   ****     0xFD80,
 204:lib/utils.c   ****     0xFD60,
 205:lib/utils.c   ****     0xFD40,
 206:lib/utils.c   ****     0xFD20,
 207:lib/utils.c   ****     0xFD00,
 208:lib/utils.c   ****     0xFCE0,
 209:lib/utils.c   ****     0xFCC0,
 210:lib/utils.c   ****     0xFCC0,
 211:lib/utils.c   ****     0xFCA0,
 212:lib/utils.c   ****     0xFC80,
 213:lib/utils.c   ****     0xFC60,
 214:lib/utils.c   ****     0xFC40,
 215:lib/utils.c   ****     0xFC20,
 216:lib/utils.c   ****     0xFC00,
 217:lib/utils.c   ****     0xFBE0,
 218:lib/utils.c   ****     0xFBC0,
 219:lib/utils.c   ****     0xFBA0,
 220:lib/utils.c   ****     0xFB80,
 221:lib/utils.c   ****     0xFB60,
 222:lib/utils.c   ****     0xFB40,
 223:lib/utils.c   ****     0xFB20,
 224:lib/utils.c   ****     0xFB20,
 225:lib/utils.c   ****     0xFB00,
 226:lib/utils.c   ****     0xFAE0,
 227:lib/utils.c   ****     0xFAC0,
 228:lib/utils.c   ****     0xFAA0,
 229:lib/utils.c   ****     0xFA80,
 230:lib/utils.c   ****     0xFA60,
 231:lib/utils.c   ****     0xFA40,
 232:lib/utils.c   ****     0xFA20,
 233:lib/utils.c   ****     0xFA00,
 234:lib/utils.c   ****     0xF9E0,
 235:lib/utils.c   ****     0xF9C0,
 236:lib/utils.c   ****     0xF9A0,
 237:lib/utils.c   ****     0xF9A0,
 238:lib/utils.c   ****     0xF980,
 239:lib/utils.c   ****     0xF960,
 240:lib/utils.c   ****     0xF940,
 241:lib/utils.c   ****     0xF920,
 242:lib/utils.c   ****     0xF900,
 243:lib/utils.c   ****     0xF8E0,
 244:lib/utils.c   ****     0xF8C0,
 245:lib/utils.c   ****     0xF8A0,
 246:lib/utils.c   ****     0xF880,
 247:lib/utils.c   ****     0xF860,
 248:lib/utils.c   ****     0xF040,
 249:lib/utils.c   ****     0xF020,
 250:lib/utils.c   ****     0xE800,
 251:lib/utils.c   ****     0xE800,
 252:lib/utils.c   ****     0xE000,
 253:lib/utils.c   ****     0xD800,
 254:lib/utils.c   ****     0xD800,
 255:lib/utils.c   ****     0xD000,
 256:lib/utils.c   ****     0xD000,
 257:lib/utils.c   ****     0xC800,
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 6


 258:lib/utils.c   ****     0xC800,
 259:lib/utils.c   ****     0xC000,
 260:lib/utils.c   ****     0xB800,
 261:lib/utils.c   ****     0xB800,
 262:lib/utils.c   ****     0xB000,
 263:lib/utils.c   ****     0xB000,
 264:lib/utils.c   ****     0xA800,
 265:lib/utils.c   ****     0xA800,
 266:lib/utils.c   ****     0xA000,
 267:lib/utils.c   ****     0x9800,
 268:lib/utils.c   ****     0x9800,
 269:lib/utils.c   ****     0x9000,
 270:lib/utils.c   ****     0x9000,
 271:lib/utils.c   ****     0x8800,
 272:lib/utils.c   ****     0x8800,
 273:lib/utils.c   ****     0x8000,
 274:lib/utils.c   ****     0x7800,
 275:lib/utils.c   **** };
 276:lib/utils.c   **** 
 277:lib/utils.c   **** void crcInit(void)
 278:lib/utils.c   **** {
  30              		.loc 1 278 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
 279:lib/utils.c   ****     for (uint16_t i = 0; i < 256; i++)
  35              		.loc 1 279 5 view .LVU1
  36              	.LBB2:
  37              		.loc 1 279 10 view .LVU2
  38              	.LVL0:
  39              		.loc 1 279 19 is_stmt 0 view .LVU3
  40 0000 0021     		movs	r1, #0
  41              		.loc 1 279 5 view .LVU4
  42 0002 13E0     		b	.L2
  43              	.LVL1:
  44              	.L3:
  45              	.LBB3:
  46              	.LBB4:
 280:lib/utils.c   ****     {
 281:lib/utils.c   ****         uint16_t crc = i;
 282:lib/utils.c   ****         for (int j = 0; j < 8; j++)
 283:lib/utils.c   ****         {
 284:lib/utils.c   ****             if (crc & 0x0001)
 285:lib/utils.c   ****             {
 286:lib/utils.c   ****                 crc >>= 1;
 287:lib/utils.c   ****                 crc ^= CRC16_POLY;
 288:lib/utils.c   ****             }
 289:lib/utils.c   ****             else
 290:lib/utils.c   ****             {
 291:lib/utils.c   ****                 crc >>= 1;
  47              		.loc 1 291 17 is_stmt 1 view .LVU5
  48              		.loc 1 291 21 is_stmt 0 view .LVU6
  49 0004 C3F34F03 		ubfx	r3, r3, #1, #16
  50              	.LVL2:
  51              	.L4:
 282:lib/utils.c   ****         {
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 7


  52              		.loc 1 282 33 is_stmt 1 discriminator 2 view .LVU7
  53 0008 0132     		adds	r2, r2, #1
  54              	.LVL3:
  55              	.L6:
 282:lib/utils.c   ****         {
  56              		.loc 1 282 27 discriminator 1 view .LVU8
  57 000a 072A     		cmp	r2, #7
  58 000c 09DC     		bgt	.L8
 284:lib/utils.c   ****             {
  59              		.loc 1 284 13 view .LVU9
 284:lib/utils.c   ****             {
  60              		.loc 1 284 16 is_stmt 0 view .LVU10
  61 000e 13F0010F 		tst	r3, #1
  62 0012 F7D0     		beq	.L3
 286:lib/utils.c   ****                 crc ^= CRC16_POLY;
  63              		.loc 1 286 17 is_stmt 1 view .LVU11
 286:lib/utils.c   ****                 crc ^= CRC16_POLY;
  64              		.loc 1 286 21 is_stmt 0 view .LVU12
  65 0014 C3F34F03 		ubfx	r3, r3, #1, #16
  66              	.LVL4:
 287:lib/utils.c   ****             }
  67              		.loc 1 287 17 is_stmt 1 view .LVU13
 287:lib/utils.c   ****             }
  68              		.loc 1 287 21 is_stmt 0 view .LVU14
  69 0018 83F42043 		eor	r3, r3, #40960
  70              	.LVL5:
 287:lib/utils.c   ****             }
  71              		.loc 1 287 21 view .LVU15
  72 001c 83F00103 		eor	r3, r3, #1
  73              	.LVL6:
 287:lib/utils.c   ****             }
  74              		.loc 1 287 21 view .LVU16
  75 0020 F2E7     		b	.L4
  76              	.L8:
 287:lib/utils.c   ****             }
  77              		.loc 1 287 21 view .LVU17
  78              	.LBE4:
 292:lib/utils.c   ****             }
 293:lib/utils.c   ****         }
 294:lib/utils.c   ****         crc16_table[i] = crc;
  79              		.loc 1 294 9 is_stmt 1 view .LVU18
  80              		.loc 1 294 24 is_stmt 0 view .LVU19
  81 0022 054A     		ldr	r2, .L10
  82              	.LVL7:
  83              		.loc 1 294 24 view .LVU20
  84 0024 22F81130 		strh	r3, [r2, r1, lsl #1]	@ movhi
  85              	.LBE3:
 279:lib/utils.c   ****     {
  86              		.loc 1 279 36 is_stmt 1 discriminator 2 view .LVU21
  87 0028 0131     		adds	r1, r1, #1
  88              	.LVL8:
 279:lib/utils.c   ****     {
  89              		.loc 1 279 36 is_stmt 0 discriminator 2 view .LVU22
  90 002a 89B2     		uxth	r1, r1
  91              	.LVL9:
  92              	.L2:
 279:lib/utils.c   ****     {
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 8


  93              		.loc 1 279 28 is_stmt 1 discriminator 1 view .LVU23
  94 002c FF29     		cmp	r1, #255
  95 002e 02D8     		bhi	.L9
  96              	.LBB6:
 281:lib/utils.c   ****         for (int j = 0; j < 8; j++)
  97              		.loc 1 281 18 is_stmt 0 view .LVU24
  98 0030 0B46     		mov	r3, r1
  99              	.LBB5:
 282:lib/utils.c   ****         {
 100              		.loc 1 282 18 view .LVU25
 101 0032 0022     		movs	r2, #0
 102 0034 E9E7     		b	.L6
 103              	.L9:
 104              	.LBE5:
 105              	.LBE6:
 106              	.LBE2:
 295:lib/utils.c   ****     }
 296:lib/utils.c   **** }
 107              		.loc 1 296 1 view .LVU26
 108 0036 7047     		bx	lr
 109              	.L11:
 110              		.align	2
 111              	.L10:
 112 0038 00000000 		.word	crc16_table
 113              		.cfi_endproc
 114              	.LFE0:
 116              		.section	.text.crc_caculate,"ax",%progbits
 117              		.align	1
 118              		.global	crc_caculate
 119              		.syntax unified
 120              		.thumb
 121              		.thumb_func
 123              	crc_caculate:
 124              	.LVL10:
 125              	.LFB1:
 297:lib/utils.c   **** 
 298:lib/utils.c   **** uint16_t crc_caculate(uint8_t *buffer, uint16_t size)
 299:lib/utils.c   **** {
 126              		.loc 1 299 1 is_stmt 1 view -0
 127              		.cfi_startproc
 128              		@ args = 0, pretend = 0, frame = 0
 129              		@ frame_needed = 0, uses_anonymous_args = 0
 130              		@ link register save eliminated.
 131              		.loc 1 299 1 is_stmt 0 view .LVU28
 132 0000 8446     		mov	ip, r0
 300:lib/utils.c   ****     uint16_t crc = CRC16_START_VALUE;
 133              		.loc 1 300 5 is_stmt 1 view .LVU29
 134              	.LVL11:
 301:lib/utils.c   ****     for (uint16_t i = 0; i < size; i++)
 135              		.loc 1 301 5 view .LVU30
 136              	.LBB7:
 137              		.loc 1 301 10 view .LVU31
 138              		.loc 1 301 19 is_stmt 0 view .LVU32
 139 0002 0023     		movs	r3, #0
 140              	.LBE7:
 300:lib/utils.c   ****     uint16_t crc = CRC16_START_VALUE;
 141              		.loc 1 300 14 view .LVU33
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 9


 142 0004 4FF6FF70 		movw	r0, #65535
 143              	.LVL12:
 144              	.LBB8:
 145              		.loc 1 301 28 is_stmt 1 discriminator 1 view .LVU34
 146 0008 8B42     		cmp	r3, r1
 147 000a 10D2     		bcs	.L19
 148              	.LBE8:
 299:lib/utils.c   ****     uint16_t crc = CRC16_START_VALUE;
 149              		.loc 1 299 1 is_stmt 0 view .LVU35
 150 000c 10B4     		push	{r4}
 151              	.LCFI0:
 152              		.cfi_def_cfa_offset 4
 153              		.cfi_offset 4, -4
 154              	.L14:
 155              	.LBB9:
 302:lib/utils.c   ****     {
 303:lib/utils.c   ****         crc = (crc >> 8) ^ crc16_table[(crc ^ buffer[i]) & 0xFF];
 156              		.loc 1 303 9 is_stmt 1 view .LVU36
 157              		.loc 1 303 53 is_stmt 0 view .LVU37
 158 000e 1CF80320 		ldrb	r2, [ip, r3]	@ zero_extendqisi2
 159              		.loc 1 303 45 view .LVU38
 160 0012 4240     		eors	r2, r2, r0
 161              		.loc 1 303 58 view .LVU39
 162 0014 D2B2     		uxtb	r2, r2
 163              		.loc 1 303 39 view .LVU40
 164 0016 064C     		ldr	r4, .L20
 165 0018 34F81220 		ldrh	r2, [r4, r2, lsl #1]
 166              		.loc 1 303 13 view .LVU41
 167 001c 82EA1020 		eor	r0, r2, r0, lsr #8
 168              	.LVL13:
 301:lib/utils.c   ****     {
 169              		.loc 1 301 37 is_stmt 1 discriminator 3 view .LVU42
 170 0020 0133     		adds	r3, r3, #1
 171              	.LVL14:
 301:lib/utils.c   ****     {
 172              		.loc 1 301 37 is_stmt 0 discriminator 3 view .LVU43
 173 0022 9BB2     		uxth	r3, r3
 174              	.LVL15:
 301:lib/utils.c   ****     {
 175              		.loc 1 301 28 is_stmt 1 discriminator 1 view .LVU44
 176 0024 8B42     		cmp	r3, r1
 177 0026 F2D3     		bcc	.L14
 178              	.LBE9:
 304:lib/utils.c   ****     }
 305:lib/utils.c   ****     return crc;
 179              		.loc 1 305 5 view .LVU45
 306:lib/utils.c   **** }
 180              		.loc 1 306 1 is_stmt 0 view .LVU46
 181 0028 5DF8044B 		ldr	r4, [sp], #4
 182              	.LCFI1:
 183              		.cfi_restore 4
 184              		.cfi_def_cfa_offset 0
 185 002c 7047     		bx	lr
 186              	.L19:
 187              		.loc 1 306 1 view .LVU47
 188 002e 7047     		bx	lr
 189              	.L21:
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 10


 190              		.align	2
 191              	.L20:
 192 0030 00000000 		.word	crc16_table
 193              		.cfi_endproc
 194              	.LFE1:
 196              		.section	.text.reverseBits,"ax",%progbits
 197              		.align	1
 198              		.global	reverseBits
 199              		.syntax unified
 200              		.thumb
 201              		.thumb_func
 203              	reverseBits:
 204              	.LVL16:
 205              	.LFB2:
 307:lib/utils.c   **** 
 308:lib/utils.c   **** uint8_t reverseBits(uint8_t num, uint8_t bitCnt)
 309:lib/utils.c   **** {
 206              		.loc 1 309 1 is_stmt 1 view -0
 207              		.cfi_startproc
 208              		@ args = 0, pretend = 0, frame = 0
 209              		@ frame_needed = 0, uses_anonymous_args = 0
 210              		.loc 1 309 1 is_stmt 0 view .LVU49
 211 0000 00B5     		push	{lr}
 212              	.LCFI2:
 213              		.cfi_def_cfa_offset 4
 214              		.cfi_offset 14, -4
 215 0002 8646     		mov	lr, r0
 310:lib/utils.c   ****     uint8_t result = 0;
 216              		.loc 1 310 5 is_stmt 1 view .LVU50
 217              	.LVL17:
 311:lib/utils.c   ****     for (uint8_t i = 0; i < bitCnt; ++i)
 218              		.loc 1 311 5 view .LVU51
 219              	.LBB10:
 220              		.loc 1 311 10 view .LVU52
 221              		.loc 1 311 18 is_stmt 0 view .LVU53
 222 0004 0023     		movs	r3, #0
 223              	.LBE10:
 310:lib/utils.c   ****     uint8_t result = 0;
 224              		.loc 1 310 13 view .LVU54
 225 0006 1846     		mov	r0, r3
 226              	.LVL18:
 227              	.LBB12:
 228              		.loc 1 311 5 view .LVU55
 229 0008 0DE0     		b	.L23
 230              	.LVL19:
 231              	.L24:
 232              	.LBB11:
 312:lib/utils.c   ****     {
 313:lib/utils.c   ****         uint8_t bit = (num >> i) & 1;
 233              		.loc 1 313 9 is_stmt 1 view .LVU56
 234              		.loc 1 313 28 is_stmt 0 view .LVU57
 235 000a 4EFA03F2 		asr	r2, lr, r3
 236              		.loc 1 313 17 view .LVU58
 237 000e 02F00102 		and	r2, r2, #1
 238              	.LVL20:
 314:lib/utils.c   **** 
 315:lib/utils.c   ****         result |= (bit << (bitCnt - 1 - i));
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 11


 239              		.loc 1 315 9 is_stmt 1 view .LVU59
 240              		.loc 1 315 35 is_stmt 0 view .LVU60
 241 0012 01F1FF3C 		add	ip, r1, #-1
 242              		.loc 1 315 39 view .LVU61
 243 0016 ACEB030C 		sub	ip, ip, r3
 244              		.loc 1 315 24 view .LVU62
 245 001a 02FA0CF2 		lsl	r2, r2, ip
 246              	.LVL21:
 247              		.loc 1 315 16 view .LVU63
 248 001e 1043     		orrs	r0, r0, r2
 249              	.LVL22:
 250              		.loc 1 315 16 view .LVU64
 251 0020 C0B2     		uxtb	r0, r0
 252              	.LVL23:
 253              		.loc 1 315 16 view .LVU65
 254              	.LBE11:
 311:lib/utils.c   ****     {
 255              		.loc 1 311 37 is_stmt 1 discriminator 3 view .LVU66
 256 0022 0133     		adds	r3, r3, #1
 257              	.LVL24:
 311:lib/utils.c   ****     {
 258              		.loc 1 311 37 is_stmt 0 discriminator 3 view .LVU67
 259 0024 DBB2     		uxtb	r3, r3
 260              	.LVL25:
 261              	.L23:
 311:lib/utils.c   ****     {
 262              		.loc 1 311 27 is_stmt 1 discriminator 1 view .LVU68
 263 0026 8B42     		cmp	r3, r1
 264 0028 EFD3     		bcc	.L24
 265              	.LBE12:
 316:lib/utils.c   ****     }
 317:lib/utils.c   ****     return result;
 266              		.loc 1 317 5 view .LVU69
 318:lib/utils.c   **** }
 267              		.loc 1 318 1 is_stmt 0 view .LVU70
 268 002a 5DF804FB 		ldr	pc, [sp], #4
 269              		.cfi_endproc
 270              	.LFE2:
 272              		.section	.text.yuv422_to_rgb565,"ax",%progbits
 273              		.align	1
 274              		.global	yuv422_to_rgb565
 275              		.syntax unified
 276              		.thumb
 277              		.thumb_func
 279              	yuv422_to_rgb565:
 280              	.LVL26:
 281              	.LFB3:
 319:lib/utils.c   **** 
 320:lib/utils.c   **** // YUV422到RGB565转换函数
 321:lib/utils.c   **** uint16_t yuv422_to_rgb565(uint8_t Y, uint8_t U, uint8_t V)
 322:lib/utils.c   **** {
 282              		.loc 1 322 1 is_stmt 1 view -0
 283              		.cfi_startproc
 284              		@ args = 0, pretend = 0, frame = 0
 285              		@ frame_needed = 0, uses_anonymous_args = 0
 286              		.loc 1 322 1 is_stmt 0 view .LVU72
 287 0000 00B5     		push	{lr}
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 12


 288              	.LCFI3:
 289              		.cfi_def_cfa_offset 4
 290              		.cfi_offset 14, -4
 323:lib/utils.c   ****     // 将 YCbCr 转换为 RGB
 324:lib/utils.c   ****     int32_t C = Y - 16;
 291              		.loc 1 324 5 is_stmt 1 view .LVU73
 292              		.loc 1 324 13 is_stmt 0 view .LVU74
 293 0002 1038     		subs	r0, r0, #16
 294              	.LVL27:
 325:lib/utils.c   ****     int32_t D = U - 128;
 295              		.loc 1 325 5 is_stmt 1 view .LVU75
 296              		.loc 1 325 13 is_stmt 0 view .LVU76
 297 0004 8039     		subs	r1, r1, #128
 298              	.LVL28:
 326:lib/utils.c   ****     int32_t E = V - 128;
 299              		.loc 1 326 5 is_stmt 1 view .LVU77
 300              		.loc 1 326 13 is_stmt 0 view .LVU78
 301 0006 A2F1800C 		sub	ip, r2, #128
 302              	.LVL29:
 327:lib/utils.c   **** 
 328:lib/utils.c   ****     uint8_t R = (298 * C + 409 * E + 128) >> 8;
 303              		.loc 1 328 5 is_stmt 1 view .LVU79
 304              		.loc 1 328 22 is_stmt 0 view .LVU80
 305 000a 4FF49573 		mov	r3, #298
 306 000e 00FB03F3 		mul	r3, r0, r3
 307              		.loc 1 328 26 view .LVU81
 308 0012 40F29910 		movw	r0, #409
 309              	.LVL30:
 310              		.loc 1 328 26 view .LVU82
 311 0016 00FB0C30 		mla	r0, r0, ip, r3
 312              		.loc 1 328 36 view .LVU83
 313 001a 8030     		adds	r0, r0, #128
 314              	.LVL31:
 329:lib/utils.c   ****     uint8_t G = (298 * C - 100 * D - 208 * E + 128) >> 8;
 315              		.loc 1 329 5 is_stmt 1 view .LVU84
 316              		.loc 1 329 26 is_stmt 0 view .LVU85
 317 001c 6FF06302 		mvn	r2, #99
 318              	.LVL32:
 319              		.loc 1 329 26 view .LVU86
 320 0020 02FB0132 		mla	r2, r2, r1, r3
 321              		.loc 1 329 36 view .LVU87
 322 0024 6FF0CF0E 		mvn	lr, #207
 323 0028 0EFB0C22 		mla	r2, lr, ip, r2
 324              		.loc 1 329 46 view .LVU88
 325 002c 8032     		adds	r2, r2, #128
 326              		.loc 1 329 13 view .LVU89
 327 002e C2F30722 		ubfx	r2, r2, #8, #8
 328              	.LVL33:
 330:lib/utils.c   ****     uint8_t B = (298 * C + 516 * D + 128) >> 8;
 329              		.loc 1 330 5 is_stmt 1 view .LVU90
 330              		.loc 1 330 32 is_stmt 0 view .LVU91
 331 0032 01EBC111 		add	r1, r1, r1, lsl #7
 332              	.LVL34:
 333              		.loc 1 330 26 view .LVU92
 334 0036 03EB8103 		add	r3, r3, r1, lsl #2
 335              		.loc 1 330 36 view .LVU93
 336 003a 8033     		adds	r3, r3, #128
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 13


 337              	.LVL35:
 331:lib/utils.c   **** 
 332:lib/utils.c   ****     // 裁剪 RGB 值到 8 位
 333:lib/utils.c   ****     if (R > 255)
 338              		.loc 1 333 5 is_stmt 1 view .LVU94
 334:lib/utils.c   ****         R = 255;
 335:lib/utils.c   ****     if (G > 255)
 339              		.loc 1 335 5 view .LVU95
 336:lib/utils.c   ****         G = 255;
 337:lib/utils.c   ****     if (B > 255)
 340              		.loc 1 337 5 view .LVU96
 338:lib/utils.c   ****         B = 255;
 339:lib/utils.c   **** 
 340:lib/utils.c   ****     // 将 RGB 转换为 RGB565
 341:lib/utils.c   ****     return ((R & 0xF8) << 8) | ((G & 0xFC) << 3) | (B >> 3);
 341              		.loc 1 341 5 view .LVU97
 342              		.loc 1 341 24 is_stmt 0 view .LVU98
 343 003c 00F47840 		and	r0, r0, #63488
 344              	.LVL36:
 345              		.loc 1 341 24 view .LVU99
 346 0040 00B2     		sxth	r0, r0
 347              		.loc 1 341 44 view .LVU100
 348 0042 D200     		lsls	r2, r2, #3
 349              	.LVL37:
 350              		.loc 1 341 44 view .LVU101
 351 0044 02F4FC62 		and	r2, r2, #2016
 352              		.loc 1 341 30 view .LVU102
 353 0048 1043     		orrs	r0, r0, r2
 354              		.loc 1 341 50 view .LVU103
 355 004a C3F3C423 		ubfx	r3, r3, #11, #5
 356              	.LVL38:
 357              		.loc 1 341 50 view .LVU104
 358 004e 1843     		orrs	r0, r0, r3
 342:lib/utils.c   **** }
 359              		.loc 1 342 1 view .LVU105
 360 0050 80B2     		uxth	r0, r0
 361 0052 5DF804FB 		ldr	pc, [sp], #4
 362              		.cfi_endproc
 363              	.LFE3:
 365              		.section	.text.yuv422_to_rgb565_memcpy,"ax",%progbits
 366              		.align	1
 367              		.global	yuv422_to_rgb565_memcpy
 368              		.syntax unified
 369              		.thumb
 370              		.thumb_func
 372              	yuv422_to_rgb565_memcpy:
 373              	.LVL39:
 374              	.LFB4:
 343:lib/utils.c   **** 
 344:lib/utils.c   **** // 函数用于将YUV422数据转换为RGB565并复制到目标缓冲区
 345:lib/utils.c   **** void yuv422_to_rgb565_memcpy(uint8_t *src, uint16_t *dst, int width, int height)
 346:lib/utils.c   **** {
 375              		.loc 1 346 1 is_stmt 1 view -0
 376              		.cfi_startproc
 377              		@ args = 0, pretend = 0, frame = 0
 378              		@ frame_needed = 0, uses_anonymous_args = 0
 379              		.loc 1 346 1 is_stmt 0 view .LVU107
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 14


 380 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 381              	.LCFI4:
 382              		.cfi_def_cfa_offset 32
 383              		.cfi_offset 3, -32
 384              		.cfi_offset 4, -28
 385              		.cfi_offset 5, -24
 386              		.cfi_offset 6, -20
 387              		.cfi_offset 7, -16
 388              		.cfi_offset 8, -12
 389              		.cfi_offset 9, -8
 390              		.cfi_offset 14, -4
 391 0004 0446     		mov	r4, r0
 392 0006 0D46     		mov	r5, r1
 393 0008 9046     		mov	r8, r2
 394 000a 1F46     		mov	r7, r3
 347:lib/utils.c   ****     for (int i = 0; i < width * height / 2; i++)
 395              		.loc 1 347 5 is_stmt 1 view .LVU108
 396              	.LBB13:
 397              		.loc 1 347 10 view .LVU109
 398              	.LVL40:
 399              		.loc 1 347 14 is_stmt 0 view .LVU110
 400 000c 0026     		movs	r6, #0
 401              		.loc 1 347 5 view .LVU111
 402 000e 18E0     		b	.L29
 403              	.LVL41:
 404              	.L30:
 405              	.LBB14:
 348:lib/utils.c   ****     {
 349:lib/utils.c   ****         uint8_t Y0 = src[0];
 406              		.loc 1 349 9 is_stmt 1 view .LVU112
 350:lib/utils.c   ****         uint8_t U = src[1] & 0xF0; // 高4位为U
 407              		.loc 1 350 9 view .LVU113
 408              		.loc 1 350 24 is_stmt 0 view .LVU114
 409 0010 6178     		ldrb	r1, [r4, #1]	@ zero_extendqisi2
 410              	.LVL42:
 351:lib/utils.c   ****         uint8_t V = src[1] << 4;   // 低4位为V
 411              		.loc 1 351 9 is_stmt 1 view .LVU115
 412              		.loc 1 351 17 is_stmt 0 view .LVU116
 413 0012 0A01     		lsls	r2, r1, #4
 414              	.LVL43:
 352:lib/utils.c   ****         uint8_t Y1 = src[2];
 415              		.loc 1 352 9 is_stmt 1 view .LVU117
 416              		.loc 1 352 17 is_stmt 0 view .LVU118
 417 0014 94F80290 		ldrb	r9, [r4, #2]	@ zero_extendqisi2
 418              	.LVL44:
 353:lib/utils.c   **** 
 354:lib/utils.c   ****         // 转换第一个像素
 355:lib/utils.c   ****         dst[0] = yuv422_to_rgb565(Y0, U, V);
 419              		.loc 1 355 9 is_stmt 1 view .LVU119
 420              		.loc 1 355 18 is_stmt 0 view .LVU120
 421 0018 02F0F002 		and	r2, r2, #240
 422              	.LVL45:
 423              		.loc 1 355 18 view .LVU121
 424 001c 01F0F001 		and	r1, r1, #240
 425              	.LVL46:
 426              		.loc 1 355 18 view .LVU122
 427 0020 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 15


 428 0022 FFF7FEFF 		bl	yuv422_to_rgb565
 429              	.LVL47:
 430              		.loc 1 355 16 discriminator 1 view .LVU123
 431 0026 2880     		strh	r0, [r5]	@ movhi
 356:lib/utils.c   **** 
 357:lib/utils.c   ****         // 转换第二个像素
 358:lib/utils.c   ****         U = src[3] & 0xF0; // 高4位为U
 432              		.loc 1 358 9 is_stmt 1 view .LVU124
 433              		.loc 1 358 16 is_stmt 0 view .LVU125
 434 0028 E178     		ldrb	r1, [r4, #3]	@ zero_extendqisi2
 435              	.LVL48:
 359:lib/utils.c   ****         V = src[3] << 4;   // 低4位为V
 436              		.loc 1 359 9 is_stmt 1 view .LVU126
 437              		.loc 1 359 11 is_stmt 0 view .LVU127
 438 002a 0A01     		lsls	r2, r1, #4
 439              	.LVL49:
 360:lib/utils.c   ****         dst[1] = yuv422_to_rgb565(Y1, U, V);
 440              		.loc 1 360 9 is_stmt 1 view .LVU128
 441              		.loc 1 360 18 is_stmt 0 view .LVU129
 442 002c 02F0F002 		and	r2, r2, #240
 443              	.LVL50:
 444              		.loc 1 360 18 view .LVU130
 445 0030 01F0F001 		and	r1, r1, #240
 446              	.LVL51:
 447              		.loc 1 360 18 view .LVU131
 448 0034 4846     		mov	r0, r9
 449 0036 FFF7FEFF 		bl	yuv422_to_rgb565
 450              	.LVL52:
 451              		.loc 1 360 16 discriminator 1 view .LVU132
 452 003a 6880     		strh	r0, [r5, #2]	@ movhi
 361:lib/utils.c   **** 
 362:lib/utils.c   ****         // 调整源指针
 363:lib/utils.c   ****         src += 4;
 453              		.loc 1 363 9 is_stmt 1 view .LVU133
 454              		.loc 1 363 13 is_stmt 0 view .LVU134
 455 003c 0434     		adds	r4, r4, #4
 456              	.LVL53:
 364:lib/utils.c   ****         // 调整目标指针
 365:lib/utils.c   ****         dst += 2;
 457              		.loc 1 365 9 is_stmt 1 view .LVU135
 458              		.loc 1 365 13 is_stmt 0 view .LVU136
 459 003e 0435     		adds	r5, r5, #4
 460              	.LVL54:
 461              		.loc 1 365 13 view .LVU137
 462              	.LBE14:
 347:lib/utils.c   ****     {
 463              		.loc 1 347 46 is_stmt 1 discriminator 3 view .LVU138
 464 0040 0136     		adds	r6, r6, #1
 465              	.LVL55:
 466              	.L29:
 347:lib/utils.c   ****     {
 467              		.loc 1 347 23 discriminator 1 view .LVU139
 347:lib/utils.c   ****     {
 468              		.loc 1 347 31 is_stmt 0 discriminator 1 view .LVU140
 469 0042 07FB08F0 		mul	r0, r7, r8
 347:lib/utils.c   ****     {
 470              		.loc 1 347 40 discriminator 1 view .LVU141
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 16


 471 0046 00EBD070 		add	r0, r0, r0, lsr #31
 347:lib/utils.c   ****     {
 472              		.loc 1 347 23 discriminator 1 view .LVU142
 473 004a B6EB600F 		cmp	r6, r0, asr #1
 474 004e DFDB     		blt	.L30
 347:lib/utils.c   ****     {
 475              		.loc 1 347 23 discriminator 1 view .LVU143
 476              	.LBE13:
 366:lib/utils.c   ****     }
 367:lib/utils.c   **** }
 477              		.loc 1 367 1 view .LVU144
 478 0050 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 479              		.loc 1 367 1 view .LVU145
 480              		.cfi_endproc
 481              	.LFE4:
 483              		.section	.text.U32_memcpy_asm,"ax",%progbits
 484              		.align	1
 485              		.global	U32_memcpy_asm
 486              		.syntax unified
 487              		.thumb
 488              		.thumb_func
 490              	U32_memcpy_asm:
 491              	.LVL56:
 492              	.LFB5:
 368:lib/utils.c   **** 
 369:lib/utils.c   **** inline void U32_memcpy_asm(uint32_t *dest, const uint32_t *src, int num)
 370:lib/utils.c   **** {
 493              		.loc 1 370 1 is_stmt 1 view -0
 494              		.cfi_startproc
 495              		@ args = 0, pretend = 0, frame = 0
 496              		@ frame_needed = 0, uses_anonymous_args = 0
 497              		@ link register save eliminated.
 498              		.loc 1 370 1 is_stmt 0 view .LVU147
 499 0000 1346     		mov	r3, r2
 371:lib/utils.c   ****     asm volatile(
 500              		.loc 1 371 5 is_stmt 1 view .LVU148
 501              		.syntax unified
 502              	@ 371 "lib/utils.c" 1
 503              		1: 
 504 0002 51F8042B 	LDR r2, [r1], #4 
 505 0006 40F8042B 	STR r2, [r0], #4 
 506 000a 013B     	SUBS r3, r3, #1 
 507 000c F9D1     	BNE 1b 
 508              	
 509              	@ 0 "" 2
 510              	.LVL57:
 372:lib/utils.c   ****         "1: \n"
 373:lib/utils.c   ****         "LDR r2, [%1], #4 \n" // 从 src 加载 32 位数据到寄存器 r2，并自增 src 指针
 374:lib/utils.c   ****         "STR r2, [%0], #4 \n" // 将 r2 中的数据存储到 dest，并自增 dest 指针
 375:lib/utils.c   ****         "SUBS %2, %2, #1 \n"  // num -= 1，递减计数器
 376:lib/utils.c   ****         "BNE 1b \n"           // 如果 num > 0，跳转到标签 1，继续循环
 377:lib/utils.c   ****         :
 378:lib/utils.c   ****         : "r"(dest), "r"(src), "r"(num) // 输入操作数：dest, src, num
 379:lib/utils.c   ****         : "r2", "memory"                // 使用的寄存器 r2 和 memory
 380:lib/utils.c   ****     );
 381:lib/utils.c   **** }
 511              		.loc 1 381 1 is_stmt 0 view .LVU149
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 17


 512              		.thumb
 513              		.syntax unified
 514 000e 7047     		bx	lr
 515              		.cfi_endproc
 516              	.LFE5:
 518              		.section	.text.U64_memcpy_fast,"ax",%progbits
 519              		.align	1
 520              		.global	U64_memcpy_fast
 521              		.syntax unified
 522              		.thumb
 523              		.thumb_func
 525              	U64_memcpy_fast:
 526              	.LVL58:
 527              	.LFB6:
 382:lib/utils.c   **** 
 383:lib/utils.c   **** inline void U64_memcpy_fast(uint64_t *dest, const uint64_t *src, int num)
 384:lib/utils.c   **** {
 528              		.loc 1 384 1 is_stmt 1 view -0
 529              		.cfi_startproc
 530              		@ args = 0, pretend = 0, frame = 0
 531              		@ frame_needed = 0, uses_anonymous_args = 0
 532              		@ link register save eliminated.
 533              		.loc 1 384 1 is_stmt 0 view .LVU151
 534 0000 9446     		mov	ip, r2
 385:lib/utils.c   ****     asm volatile(
 535              		.loc 1 385 5 is_stmt 1 view .LVU152
 536              		.syntax unified
 537              	@ 385 "lib/utils.c" 1
 538              		1: 
 539 0002 51F8042B 	LDR r2, [r1], #4 
 540 0006 51F8043B 	LDR r3, [r1], #4 
 541 000a 40F8042B 	STR r2, [r0], #4 
 542 000e 40F8043B 	STR r3, [r0], #4 
 543 0012 BCF1010C 	SUBS ip, ip, #1 
 544 0016 F4D1     	BNE 1b 
 545              	
 546              	@ 0 "" 2
 547              	.LVL59:
 386:lib/utils.c   ****         "1: \n"
 387:lib/utils.c   ****         "LDR r2, [%1], #4 \n" // 从 src 加载低 32 位到 r2
 388:lib/utils.c   ****         "LDR r3, [%1], #4 \n" // 从 src 加载高 32 位到 r3
 389:lib/utils.c   ****         "STR r2, [%0], #4 \n" // 将 r2 存储到 dest 的低 32 位
 390:lib/utils.c   ****         "STR r3, [%0], #4 \n" // 将 r3 存储到 dest 的高 32 位
 391:lib/utils.c   ****         "SUBS %2, %2, #1 \n"  // num -= 1，递减计数器
 392:lib/utils.c   ****         "BNE 1b \n"           // 如果 num > 0，跳转到标签 1，继续循环
 393:lib/utils.c   ****         :
 394:lib/utils.c   ****         : "r"(dest), "r"(src), "r"(num)
 395:lib/utils.c   ****         : "r2", "r3", "memory");
 396:lib/utils.c   **** }
 548              		.loc 1 396 1 is_stmt 0 view .LVU153
 549              		.thumb
 550              		.syntax unified
 551 0018 7047     		bx	lr
 552              		.cfi_endproc
 553              	.LFE6:
 555              		.section	.text.gray_to_rgb565,"ax",%progbits
 556              		.align	1
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 18


 557              		.global	gray_to_rgb565
 558              		.syntax unified
 559              		.thumb
 560              		.thumb_func
 562              	gray_to_rgb565:
 563              	.LVL60:
 564              	.LFB7:
 397:lib/utils.c   **** 
 398:lib/utils.c   **** uint16_t gray_to_rgb565(uint16_t gray, uint16_t min_gray, uint16_t max_gray)
 399:lib/utils.c   **** {
 565              		.loc 1 399 1 is_stmt 1 view -0
 566              		.cfi_startproc
 567              		@ args = 0, pretend = 0, frame = 8
 568              		@ frame_needed = 0, uses_anonymous_args = 0
 569              		@ link register save eliminated.
 570              		.loc 1 399 1 is_stmt 0 view .LVU155
 571 0000 10B4     		push	{r4}
 572              	.LCFI5:
 573              		.cfi_def_cfa_offset 4
 574              		.cfi_offset 4, -4
 575 0002 83B0     		sub	sp, sp, #12
 576              	.LCFI6:
 577              		.cfi_def_cfa_offset 16
 400:lib/utils.c   ****     uint8_t r, g, b;
 578              		.loc 1 400 5 is_stmt 1 view .LVU156
 401:lib/utils.c   **** 
 402:lib/utils.c   ****     // 归一化灰度值到 [0, 1]
 403:lib/utils.c   ****     float normalized_gray = (float)(gray - min_gray) / (max_gray - min_gray);
 579              		.loc 1 403 5 view .LVU157
 580              		.loc 1 403 42 is_stmt 0 view .LVU158
 581 0004 401A     		subs	r0, r0, r1
 582              	.LVL61:
 583              		.loc 1 403 29 view .LVU159
 584 0006 07EE900A 		vmov	s15, r0	@ int
 585 000a F8EEE76A 		vcvt.f32.s32	s13, s15
 586              		.loc 1 403 66 view .LVU160
 587 000e 521A     		subs	r2, r2, r1
 588              	.LVL62:
 589              		.loc 1 403 54 view .LVU161
 590 0010 07EE902A 		vmov	s15, r2	@ int
 591 0014 B8EEE77A 		vcvt.f32.s32	s14, s15
 592              		.loc 1 403 11 view .LVU162
 593 0018 C6EE877A 		vdiv.f32	s15, s13, s14
 594              	.LVL63:
 404:lib/utils.c   ****     if (normalized_gray < 0.0f)
 595              		.loc 1 404 5 is_stmt 1 view .LVU163
 596              		.loc 1 404 8 is_stmt 0 view .LVU164
 597 001c F5EEC07A 		vcmpe.f32	s15, #0
 598 0020 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 599 0024 09D4     		bmi	.L50
 405:lib/utils.c   ****         normalized_gray = 0.0f;
 406:lib/utils.c   ****     else if (normalized_gray > 1.0f)
 600              		.loc 1 406 10 is_stmt 1 view .LVU165
 601              		.loc 1 406 13 is_stmt 0 view .LVU166
 602 0026 B7EE007A 		vmov.f32	s14, #1.0e+0
 603 002a F4EEC77A 		vcmpe.f32	s15, s14
 604 002e F1EE10FA 		vmrs	APSR_nzcv, FPSCR
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 19


 605 0032 04DD     		ble	.L35
 407:lib/utils.c   ****         normalized_gray = 1.0f;
 606              		.loc 1 407 25 view .LVU167
 607 0034 F7EE007A 		vmov.f32	s15, #1.0e+0
 608              	.LVL64:
 609              		.loc 1 407 25 view .LVU168
 610 0038 01E0     		b	.L35
 611              	.LVL65:
 612              	.L50:
 405:lib/utils.c   ****         normalized_gray = 0.0f;
 613              		.loc 1 405 25 view .LVU169
 614 003a DFED997A 		vldr.32	s15, .L62
 615              	.LVL66:
 616              	.L35:
 408:lib/utils.c   **** 
 409:lib/utils.c   ****     // 对比度增强：以 0.5 为中心拉伸
 410:lib/utils.c   ****     const float contrast = 1.1f; // >1 提高对比度
 617              		.loc 1 410 5 is_stmt 1 view .LVU170
 411:lib/utils.c   ****     normalized_gray = (normalized_gray - 0.5f) * contrast + 0.5f;
 618              		.loc 1 411 5 view .LVU171
 619              		.loc 1 411 40 is_stmt 0 view .LVU172
 620 003e B6EE007A 		vmov.f32	s14, #5.0e-1
 621 0042 77EEC77A 		vsub.f32	s15, s15, s14
 622              	.LVL67:
 623              		.loc 1 411 48 view .LVU173
 624 0046 DFED976A 		vldr.32	s13, .L62+4
 625 004a 67EEA67A 		vmul.f32	s15, s15, s13
 626              		.loc 1 411 21 view .LVU174
 627 004e 77EE877A 		vadd.f32	s15, s15, s14
 628              	.LVL68:
 412:lib/utils.c   ****     if (normalized_gray < 0.0f)
 629              		.loc 1 412 5 is_stmt 1 view .LVU175
 630              		.loc 1 412 8 is_stmt 0 view .LVU176
 631 0052 F5EEC07A 		vcmpe.f32	s15, #0
 632 0056 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 633 005a 45D4     		bmi	.L52
 413:lib/utils.c   ****         normalized_gray = 0.0f;
 414:lib/utils.c   ****     else if (normalized_gray > 1.0f)
 634              		.loc 1 414 10 is_stmt 1 view .LVU177
 635              		.loc 1 414 13 is_stmt 0 view .LVU178
 636 005c B7EE007A 		vmov.f32	s14, #1.0e+0
 637 0060 F4EEC77A 		vcmpe.f32	s15, s14
 638 0064 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 639 0068 36DD     		ble	.L61
 415:lib/utils.c   ****         normalized_gray = 1.0f;
 640              		.loc 1 415 25 view .LVU179
 641 006a F7EE007A 		vmov.f32	s15, #1.0e+0
 642              	.LVL69:
 643              	.L37:
 416:lib/utils.c   **** 
 417:lib/utils.c   ****     // 基础伪彩：蓝-绿-红-紫色过渡（保持室温偏蓝）
 418:lib/utils.c   ****     if (normalized_gray < 0.5f)
 419:lib/utils.c   ****     {
 420:lib/utils.c   ****         float t = normalized_gray / 0.5f; // 0~1
 421:lib/utils.c   ****         r = 0;
 422:lib/utils.c   ****         g = (uint8_t)(t * 32.0f);
 423:lib/utils.c   ****         b = 31;
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 20


 424:lib/utils.c   ****     }
 425:lib/utils.c   ****     else if (normalized_gray < 0.75f)
 644              		.loc 1 425 10 is_stmt 1 view .LVU180
 645              		.loc 1 425 13 is_stmt 0 view .LVU181
 646 006e B6EE087A 		vmov.f32	s14, #7.5e-1
 647 0072 F4EEC77A 		vcmpe.f32	s15, s14
 648 0076 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 649 007a 40F1AD80 		bpl	.L59
 650              	.LBB15:
 426:lib/utils.c   ****     {
 427:lib/utils.c   ****         float t = (normalized_gray - 0.5f) / 0.25f; // 0~1
 651              		.loc 1 427 9 is_stmt 1 view .LVU182
 652              		.loc 1 427 36 is_stmt 0 view .LVU183
 653 007e F6EE006A 		vmov.f32	s13, #5.0e-1
 654 0082 77EEE67A 		vsub.f32	s15, s15, s13
 655              		.loc 1 427 15 view .LVU184
 656 0086 B1EE007A 		vmov.f32	s14, #4.0e+0
 657 008a 67EE877A 		vmul.f32	s15, s15, s14
 658              	.LVL70:
 428:lib/utils.c   ****         r = (uint8_t)(t * 31.0f);
 659              		.loc 1 428 9 is_stmt 1 view .LVU185
 660              		.loc 1 428 25 is_stmt 0 view .LVU186
 661 008e B3EE0F6A 		vmov.f32	s12, #3.1e+1
 662 0092 27EE867A 		vmul.f32	s14, s15, s12
 663              		.loc 1 428 11 view .LVU187
 664 0096 BCEEC77A 		vcvt.u32.f32	s14, s14
 665 009a 8DED017A 		vstr.32	s14, [sp, #4]	@ int
 666 009e 9DF80410 		ldrb	r1, [sp, #4]	@ zero_extendqisi2
 667              	.LVL71:
 429:lib/utils.c   ****         g = (uint8_t)((0.5f + 0.5f * t) * 63.0f);
 668              		.loc 1 429 9 is_stmt 1 view .LVU188
 669              		.loc 1 429 36 is_stmt 0 view .LVU189
 670 00a2 27EEA67A 		vmul.f32	s14, s15, s13
 671              		.loc 1 429 29 view .LVU190
 672 00a6 37EE267A 		vadd.f32	s14, s14, s13
 673              		.loc 1 429 41 view .LVU191
 674 00aa DFED7F6A 		vldr.32	s13, .L62+8
 675 00ae 27EE267A 		vmul.f32	s14, s14, s13
 676              		.loc 1 429 11 view .LVU192
 677 00b2 BCEEC77A 		vcvt.u32.f32	s14, s14
 678 00b6 8DED017A 		vstr.32	s14, [sp, #4]	@ int
 679 00ba 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 680              	.LVL72:
 430:lib/utils.c   ****         b = (uint8_t)((1.0f - t) * 31.0f);
 681              		.loc 1 430 9 is_stmt 1 view .LVU193
 682              		.loc 1 430 29 is_stmt 0 view .LVU194
 683 00be B7EE007A 		vmov.f32	s14, #1.0e+0
 684 00c2 77EE677A 		vsub.f32	s15, s14, s15
 685              	.LVL73:
 686              		.loc 1 430 34 view .LVU195
 687 00c6 67EE867A 		vmul.f32	s15, s15, s12
 688              		.loc 1 430 11 view .LVU196
 689 00ca FCEEE77A 		vcvt.u32.f32	s15, s15
 690 00ce CDED017A 		vstr.32	s15, [sp, #4]	@ int
 691 00d2 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 692              	.LVL74:
 693              		.loc 1 430 11 view .LVU197
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 21


 694              	.LBE15:
 695 00d6 17E0     		b	.L39
 696              	.LVL75:
 697              	.L61:
 418:lib/utils.c   ****     {
 698              		.loc 1 418 5 is_stmt 1 view .LVU198
 418:lib/utils.c   ****     {
 699              		.loc 1 418 8 is_stmt 0 view .LVU199
 700 00d8 B6EE007A 		vmov.f32	s14, #5.0e-1
 701 00dc F4EEC77A 		vcmpe.f32	s15, s14
 702 00e0 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 703 00e4 02D4     		bmi	.L36
 704 00e6 C2E7     		b	.L37
 705              	.L52:
 413:lib/utils.c   ****     else if (normalized_gray > 1.0f)
 706              		.loc 1 413 25 view .LVU200
 707 00e8 DFED6D7A 		vldr.32	s15, .L62
 708              	.LVL76:
 709              	.L36:
 710              	.LBB16:
 420:lib/utils.c   ****         r = 0;
 711              		.loc 1 420 9 is_stmt 1 view .LVU201
 420:lib/utils.c   ****         r = 0;
 712              		.loc 1 420 15 is_stmt 0 view .LVU202
 713 00ec 77EEA77A 		vadd.f32	s15, s15, s15
 714              	.LVL77:
 421:lib/utils.c   ****         g = (uint8_t)(t * 32.0f);
 715              		.loc 1 421 9 is_stmt 1 view .LVU203
 422:lib/utils.c   ****         b = 31;
 716              		.loc 1 422 9 view .LVU204
 422:lib/utils.c   ****         b = 31;
 717              		.loc 1 422 25 is_stmt 0 view .LVU205
 718 00f0 9FED6E7A 		vldr.32	s14, .L62+12
 719 00f4 67EE877A 		vmul.f32	s15, s15, s14
 720              	.LVL78:
 422:lib/utils.c   ****         b = 31;
 721              		.loc 1 422 11 view .LVU206
 722 00f8 FCEEE77A 		vcvt.u32.f32	s15, s15
 723 00fc CDED017A 		vstr.32	s15, [sp, #4]	@ int
 724 0100 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 725              	.LVL79:
 423:lib/utils.c   ****     }
 726              		.loc 1 423 9 is_stmt 1 view .LVU207
 423:lib/utils.c   ****     }
 727              		.loc 1 423 11 is_stmt 0 view .LVU208
 728 0104 1F22     		movs	r2, #31
 421:lib/utils.c   ****         g = (uint8_t)(t * 32.0f);
 729              		.loc 1 421 11 view .LVU209
 730 0106 0021     		movs	r1, #0
 731              	.LVL80:
 732              	.L39:
 421:lib/utils.c   ****         g = (uint8_t)(t * 32.0f);
 733              		.loc 1 421 11 view .LVU210
 734              	.LBE16:
 431:lib/utils.c   ****     }
 432:lib/utils.c   ****     else
 433:lib/utils.c   ****     {
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 22


 434:lib/utils.c   ****         float t = (normalized_gray - 0.75f) / 0.25f; // 0~1
 435:lib/utils.c   ****         r = 31;
 436:lib/utils.c   ****         g = (uint8_t)((1.0f - t) * 63.0f);
 437:lib/utils.c   ****         b = (uint8_t)(t * 31.0f);
 438:lib/utils.c   ****     }
 439:lib/utils.c   **** 
 440:lib/utils.c   ****     // 全局色调偏移：g_color_tint <0 偏冷，>0 偏暖，影响整幅图
 441:lib/utils.c   ****     if (g_color_tint != 0)
 735              		.loc 1 441 5 is_stmt 1 view .LVU211
 736              		.loc 1 441 22 is_stmt 0 view .LVU212
 737 0108 6948     		ldr	r0, .L62+16
 738 010a 90F90000 		ldrsb	r0, [r0]
 739              		.loc 1 441 8 view .LVU213
 740 010e 0028     		cmp	r0, #0
 741 0110 58D0     		beq	.L42
 742              	.LBB17:
 442:lib/utils.c   ****     {
 443:lib/utils.c   ****         float alpha = (float)(g_color_tint > 0 ? g_color_tint : -g_color_tint) / 10.0f; // 0~1
 743              		.loc 1 443 9 is_stmt 1 view .LVU214
 744              		.loc 1 443 23 is_stmt 0 view .LVU215
 745 0112 0028     		cmp	r0, #0
 746 0114 40F38280 		ble	.L43
 747              		.loc 1 443 23 discriminator 1 view .LVU216
 748 0118 07EE900A 		vmov	s15, r0	@ int
 749 011c F8EEE77A 		vcvt.f32.s32	s15, s15
 750              	.L44:
 751              		.loc 1 443 15 discriminator 4 view .LVU217
 752 0120 F2EE046A 		vmov.f32	s13, #1.0e+1
 753 0124 87EEA67A 		vdiv.f32	s14, s15, s13
 754              	.LVL81:
 444:lib/utils.c   ****         if (alpha > 1.0f)
 755              		.loc 1 444 9 is_stmt 1 view .LVU218
 756              		.loc 1 444 12 is_stmt 0 view .LVU219
 757 0128 F7EE007A 		vmov.f32	s15, #1.0e+0
 758 012c B4EEE77A 		vcmpe.f32	s14, s15
 759 0130 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 760 0134 01DD     		ble	.L45
 445:lib/utils.c   ****             alpha = 1.0f;
 761              		.loc 1 445 19 view .LVU220
 762 0136 B0EE677A 		vmov.f32	s14, s15
 763              	.LVL82:
 764              	.L45:
 446:lib/utils.c   **** 
 447:lib/utils.c   ****         if (g_color_tint > 0)
 765              		.loc 1 447 9 is_stmt 1 view .LVU221
 766              		.loc 1 447 12 is_stmt 0 view .LVU222
 767 013a 0028     		cmp	r0, #0
 768 013c 74DD     		ble	.L46
 448:lib/utils.c   ****         {
 449:lib/utils.c   ****             // 暖色：加强红色，减弱蓝色、部分绿色
 450:lib/utils.c   ****             r = (uint8_t)(r + (float)(31 - r) * alpha);
 769              		.loc 1 450 13 is_stmt 1 view .LVU223
 770              		.loc 1 450 42 is_stmt 0 view .LVU224
 771 013e C1F11F00 		rsb	r0, r1, #31
 772 0142 06EE900A 		vmov	s13, r0	@ int
 773              		.loc 1 450 31 view .LVU225
 774 0146 F8EEE66A 		vcvt.f32.s32	s13, s13
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 23


 775              		.loc 1 450 47 view .LVU226
 776 014a 66EE876A 		vmul.f32	s13, s13, s14
 777              		.loc 1 450 29 view .LVU227
 778 014e 07EE901A 		vmov	s15, r1	@ int
 779 0152 F8EEE77A 		vcvt.f32.s32	s15, s15
 780 0156 77EEA67A 		vadd.f32	s15, s15, s13
 781              		.loc 1 450 15 view .LVU228
 782 015a FCEEE77A 		vcvt.u32.f32	s15, s15
 783 015e CDED017A 		vstr.32	s15, [sp, #4]	@ int
 784 0162 9DF80410 		ldrb	r1, [sp, #4]	@ zero_extendqisi2
 785              	.LVL83:
 451:lib/utils.c   ****             g = (uint8_t)(g * (1.0f - 0.3f * alpha));
 786              		.loc 1 451 13 is_stmt 1 view .LVU229
 787              		.loc 1 451 44 is_stmt 0 view .LVU230
 788 0166 DFED536A 		vldr.32	s13, .L62+20
 789 016a 67EE266A 		vmul.f32	s13, s14, s13
 790              		.loc 1 451 37 view .LVU231
 791 016e B7EE006A 		vmov.f32	s12, #1.0e+0
 792 0172 76EE666A 		vsub.f32	s13, s12, s13
 793              		.loc 1 451 29 view .LVU232
 794 0176 07EE903A 		vmov	s15, r3	@ int
 795 017a F8EEE77A 		vcvt.f32.s32	s15, s15
 796 017e 67EEA67A 		vmul.f32	s15, s15, s13
 797              		.loc 1 451 15 view .LVU233
 798 0182 FCEEE77A 		vcvt.u32.f32	s15, s15
 799 0186 CDED017A 		vstr.32	s15, [sp, #4]	@ int
 800 018a 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 801              	.LVL84:
 452:lib/utils.c   ****             b = (uint8_t)(b * (1.0f - 0.7f * alpha));
 802              		.loc 1 452 13 is_stmt 1 view .LVU234
 803              		.loc 1 452 44 is_stmt 0 view .LVU235
 804 018e DFED4A7A 		vldr.32	s15, .L62+24
 805 0192 27EE277A 		vmul.f32	s14, s14, s15
 806              	.LVL85:
 807              		.loc 1 452 37 view .LVU236
 808 0196 36EE476A 		vsub.f32	s12, s12, s14
 809              		.loc 1 452 29 view .LVU237
 810 019a 07EE902A 		vmov	s15, r2	@ int
 811 019e F8EEE77A 		vcvt.f32.s32	s15, s15
 812 01a2 67EE867A 		vmul.f32	s15, s15, s12
 813              		.loc 1 452 15 view .LVU238
 814 01a6 FCEEE77A 		vcvt.u32.f32	s15, s15
 815 01aa CDED017A 		vstr.32	s15, [sp, #4]	@ int
 816 01ae 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 817              	.LVL86:
 818              	.L47:
 453:lib/utils.c   ****         }
 454:lib/utils.c   ****         else
 455:lib/utils.c   ****         {
 456:lib/utils.c   ****             // 冷色：加强蓝色，减弱红色、部分绿色
 457:lib/utils.c   ****             b = (uint8_t)(b + (float)(31 - b) * alpha);
 458:lib/utils.c   ****             g = (uint8_t)(g * (1.0f - 0.3f * alpha));
 459:lib/utils.c   ****             r = (uint8_t)(r * (1.0f - 0.7f * alpha));
 460:lib/utils.c   ****         }
 461:lib/utils.c   **** 
 462:lib/utils.c   ****         // 防止超出 5/6 位范围
 463:lib/utils.c   ****         if (r > 31)
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 24


 819              		.loc 1 463 9 is_stmt 1 view .LVU239
 820              		.loc 1 463 12 is_stmt 0 view .LVU240
 821 01b2 1F29     		cmp	r1, #31
 822 01b4 00D9     		bls	.L48
 464:lib/utils.c   ****             r = 31;
 823              		.loc 1 464 15 view .LVU241
 824 01b6 1F21     		movs	r1, #31
 825              	.LVL87:
 826              	.L48:
 465:lib/utils.c   ****         if (g > 63)
 827              		.loc 1 465 9 is_stmt 1 view .LVU242
 828              		.loc 1 465 12 is_stmt 0 view .LVU243
 829 01b8 3F2B     		cmp	r3, #63
 830 01ba 00D9     		bls	.L49
 466:lib/utils.c   ****             g = 63;
 831              		.loc 1 466 15 view .LVU244
 832 01bc 3F23     		movs	r3, #63
 833              	.LVL88:
 834              	.L49:
 467:lib/utils.c   ****         if (b > 31)
 835              		.loc 1 467 9 is_stmt 1 view .LVU245
 836              		.loc 1 467 12 is_stmt 0 view .LVU246
 837 01be 1F2A     		cmp	r2, #31
 838 01c0 00D9     		bls	.L42
 468:lib/utils.c   ****             b = 31;
 839              		.loc 1 468 15 view .LVU247
 840 01c2 1F22     		movs	r2, #31
 841              	.LVL89:
 842              	.L42:
 843              		.loc 1 468 15 view .LVU248
 844              	.LBE17:
 469:lib/utils.c   ****     }
 470:lib/utils.c   **** 
 471:lib/utils.c   ****     return (r << 11) | (g << 5) | b;
 845              		.loc 1 471 5 is_stmt 1 view .LVU249
 846              		.loc 1 471 22 is_stmt 0 view .LVU250
 847 01c4 5801     		lsls	r0, r3, #5
 848 01c6 40EAC120 		orr	r0, r0, r1, lsl #11
 849 01ca 00B2     		sxth	r0, r0
 850              		.loc 1 471 33 view .LVU251
 851 01cc 1043     		orrs	r0, r0, r2
 472:lib/utils.c   **** }
 852              		.loc 1 472 1 view .LVU252
 853 01ce 80B2     		uxth	r0, r0
 854 01d0 03B0     		add	sp, sp, #12
 855              	.LCFI7:
 856              		.cfi_remember_state
 857              		.cfi_def_cfa_offset 4
 858              		@ sp needed
 859 01d2 5DF8044B 		ldr	r4, [sp], #4
 860              	.LCFI8:
 861              		.cfi_restore 4
 862              		.cfi_def_cfa_offset 0
 863 01d6 7047     		bx	lr
 864              	.LVL90:
 865              	.L59:
 866              	.LCFI9:
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 25


 867              		.cfi_restore_state
 868              	.LBB18:
 434:lib/utils.c   ****         r = 31;
 869              		.loc 1 434 9 is_stmt 1 view .LVU253
 434:lib/utils.c   ****         r = 31;
 870              		.loc 1 434 36 is_stmt 0 view .LVU254
 871 01d8 B6EE087A 		vmov.f32	s14, #7.5e-1
 872 01dc 77EEC77A 		vsub.f32	s15, s15, s14
 434:lib/utils.c   ****         r = 31;
 873              		.loc 1 434 15 view .LVU255
 874 01e0 B1EE007A 		vmov.f32	s14, #4.0e+0
 875 01e4 67EE877A 		vmul.f32	s15, s15, s14
 876              	.LVL91:
 435:lib/utils.c   ****         g = (uint8_t)((1.0f - t) * 63.0f);
 877              		.loc 1 435 9 is_stmt 1 view .LVU256
 436:lib/utils.c   ****         b = (uint8_t)(t * 31.0f);
 878              		.loc 1 436 9 view .LVU257
 436:lib/utils.c   ****         b = (uint8_t)(t * 31.0f);
 879              		.loc 1 436 29 is_stmt 0 view .LVU258
 880 01e8 B7EE007A 		vmov.f32	s14, #1.0e+0
 881 01ec 37EE677A 		vsub.f32	s14, s14, s15
 436:lib/utils.c   ****         b = (uint8_t)(t * 31.0f);
 882              		.loc 1 436 34 view .LVU259
 883 01f0 DFED2D6A 		vldr.32	s13, .L62+8
 884 01f4 27EE267A 		vmul.f32	s14, s14, s13
 436:lib/utils.c   ****         b = (uint8_t)(t * 31.0f);
 885              		.loc 1 436 11 view .LVU260
 886 01f8 BCEEC77A 		vcvt.u32.f32	s14, s14
 887 01fc 8DED017A 		vstr.32	s14, [sp, #4]	@ int
 888 0200 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 889              	.LVL92:
 437:lib/utils.c   ****     }
 890              		.loc 1 437 9 is_stmt 1 view .LVU261
 437:lib/utils.c   ****     }
 891              		.loc 1 437 25 is_stmt 0 view .LVU262
 892 0204 B3EE0F7A 		vmov.f32	s14, #3.1e+1
 893 0208 67EE877A 		vmul.f32	s15, s15, s14
 894              	.LVL93:
 437:lib/utils.c   ****     }
 895              		.loc 1 437 11 view .LVU263
 896 020c FCEEE77A 		vcvt.u32.f32	s15, s15
 897 0210 CDED017A 		vstr.32	s15, [sp, #4]	@ int
 898 0214 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 899              	.LVL94:
 435:lib/utils.c   ****         g = (uint8_t)((1.0f - t) * 63.0f);
 900              		.loc 1 435 11 view .LVU264
 901 0218 1F21     		movs	r1, #31
 902              	.LVL95:
 435:lib/utils.c   ****         g = (uint8_t)((1.0f - t) * 63.0f);
 903              		.loc 1 435 11 view .LVU265
 904 021a 75E7     		b	.L39
 905              	.LVL96:
 906              	.L43:
 435:lib/utils.c   ****         g = (uint8_t)((1.0f - t) * 63.0f);
 907              		.loc 1 435 11 view .LVU266
 908              	.LBE18:
 909              	.LBB19:
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 26


 443:lib/utils.c   ****         if (alpha > 1.0f)
 910              		.loc 1 443 65 discriminator 2 view .LVU267
 911 021c 4442     		rsbs	r4, r0, #0
 912 021e 07EE904A 		vmov	s15, r4	@ int
 443:lib/utils.c   ****         if (alpha > 1.0f)
 913              		.loc 1 443 23 discriminator 2 view .LVU268
 914 0222 F8EEE77A 		vcvt.f32.s32	s15, s15
 915 0226 7BE7     		b	.L44
 916              	.LVL97:
 917              	.L46:
 457:lib/utils.c   ****             g = (uint8_t)(g * (1.0f - 0.3f * alpha));
 918              		.loc 1 457 13 is_stmt 1 view .LVU269
 457:lib/utils.c   ****             g = (uint8_t)(g * (1.0f - 0.3f * alpha));
 919              		.loc 1 457 42 is_stmt 0 view .LVU270
 920 0228 C2F11F00 		rsb	r0, r2, #31
 921 022c 06EE900A 		vmov	s13, r0	@ int
 457:lib/utils.c   ****             g = (uint8_t)(g * (1.0f - 0.3f * alpha));
 922              		.loc 1 457 31 view .LVU271
 923 0230 F8EEE66A 		vcvt.f32.s32	s13, s13
 457:lib/utils.c   ****             g = (uint8_t)(g * (1.0f - 0.3f * alpha));
 924              		.loc 1 457 47 view .LVU272
 925 0234 66EE876A 		vmul.f32	s13, s13, s14
 457:lib/utils.c   ****             g = (uint8_t)(g * (1.0f - 0.3f * alpha));
 926              		.loc 1 457 29 view .LVU273
 927 0238 07EE902A 		vmov	s15, r2	@ int
 928 023c F8EEE77A 		vcvt.f32.s32	s15, s15
 929 0240 77EEA67A 		vadd.f32	s15, s15, s13
 457:lib/utils.c   ****             g = (uint8_t)(g * (1.0f - 0.3f * alpha));
 930              		.loc 1 457 15 view .LVU274
 931 0244 FCEEE77A 		vcvt.u32.f32	s15, s15
 932 0248 CDED017A 		vstr.32	s15, [sp, #4]	@ int
 933 024c 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 934              	.LVL98:
 458:lib/utils.c   ****             r = (uint8_t)(r * (1.0f - 0.7f * alpha));
 935              		.loc 1 458 13 is_stmt 1 view .LVU275
 458:lib/utils.c   ****             r = (uint8_t)(r * (1.0f - 0.7f * alpha));
 936              		.loc 1 458 44 is_stmt 0 view .LVU276
 937 0250 DFED186A 		vldr.32	s13, .L62+20
 938 0254 67EE266A 		vmul.f32	s13, s14, s13
 458:lib/utils.c   ****             r = (uint8_t)(r * (1.0f - 0.7f * alpha));
 939              		.loc 1 458 37 view .LVU277
 940 0258 B7EE006A 		vmov.f32	s12, #1.0e+0
 941 025c 76EE666A 		vsub.f32	s13, s12, s13
 458:lib/utils.c   ****             r = (uint8_t)(r * (1.0f - 0.7f * alpha));
 942              		.loc 1 458 29 view .LVU278
 943 0260 07EE903A 		vmov	s15, r3	@ int
 944 0264 F8EEE77A 		vcvt.f32.s32	s15, s15
 945 0268 67EEA67A 		vmul.f32	s15, s15, s13
 458:lib/utils.c   ****             r = (uint8_t)(r * (1.0f - 0.7f * alpha));
 946              		.loc 1 458 15 view .LVU279
 947 026c FCEEE77A 		vcvt.u32.f32	s15, s15
 948 0270 CDED017A 		vstr.32	s15, [sp, #4]	@ int
 949 0274 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 950              	.LVL99:
 459:lib/utils.c   ****         }
 951              		.loc 1 459 13 is_stmt 1 view .LVU280
 459:lib/utils.c   ****         }
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 27


 952              		.loc 1 459 44 is_stmt 0 view .LVU281
 953 0278 DFED0F7A 		vldr.32	s15, .L62+24
 954 027c 27EE277A 		vmul.f32	s14, s14, s15
 955              	.LVL100:
 459:lib/utils.c   ****         }
 956              		.loc 1 459 37 view .LVU282
 957 0280 36EE476A 		vsub.f32	s12, s12, s14
 459:lib/utils.c   ****         }
 958              		.loc 1 459 29 view .LVU283
 959 0284 07EE901A 		vmov	s15, r1	@ int
 960 0288 F8EEE77A 		vcvt.f32.s32	s15, s15
 961 028c 67EE867A 		vmul.f32	s15, s15, s12
 459:lib/utils.c   ****         }
 962              		.loc 1 459 15 view .LVU284
 963 0290 FCEEE77A 		vcvt.u32.f32	s15, s15
 964 0294 CDED017A 		vstr.32	s15, [sp, #4]	@ int
 965 0298 9DF80410 		ldrb	r1, [sp, #4]	@ zero_extendqisi2
 966              	.LVL101:
 459:lib/utils.c   ****         }
 967              		.loc 1 459 15 view .LVU285
 968 029c 89E7     		b	.L47
 969              	.L63:
 970 029e 00BF     		.align	2
 971              	.L62:
 972 02a0 00000000 		.word	0
 973 02a4 CDCC8C3F 		.word	1066192077
 974 02a8 00007C42 		.word	1115422720
 975 02ac 00000042 		.word	1107296256
 976 02b0 00000000 		.word	g_color_tint
 977 02b4 9A99993E 		.word	1050253722
 978 02b8 3333333F 		.word	1060320051
 979              	.LBE19:
 980              		.cfi_endproc
 981              	.LFE7:
 983              		.section	.text.medianFilter3x3,"ax",%progbits
 984              		.align	1
 985              		.global	medianFilter3x3
 986              		.syntax unified
 987              		.thumb
 988              		.thumb_func
 990              	medianFilter3x3:
 991              	.LVL102:
 992              	.LFB8:
 473:lib/utils.c   **** 
 474:lib/utils.c   **** // 3x3中值滤波（比较网络实现）
 475:lib/utils.c   **** #define SWAP(a, b)            \
 476:lib/utils.c   ****     {                         \
 477:lib/utils.c   ****         if ((a) > (b))        \
 478:lib/utils.c   ****         {                     \
 479:lib/utils.c   ****             uint16_t t = (a); \
 480:lib/utils.c   ****             (a) = (b);        \
 481:lib/utils.c   ****             (b) = t;          \
 482:lib/utils.c   ****         }                     \
 483:lib/utils.c   ****     }
 484:lib/utils.c   **** void medianFilter3x3(uint16_t *src, uint16_t *dst, int width, int height)
 485:lib/utils.c   **** {
 993              		.loc 1 485 1 is_stmt 1 view -0
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 28


 994              		.cfi_startproc
 995              		@ args = 0, pretend = 0, frame = 24
 996              		@ frame_needed = 0, uses_anonymous_args = 0
 997              		.loc 1 485 1 is_stmt 0 view .LVU287
 998 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 999              	.LCFI10:
 1000              		.cfi_def_cfa_offset 24
 1001              		.cfi_offset 4, -24
 1002              		.cfi_offset 5, -20
 1003              		.cfi_offset 6, -16
 1004              		.cfi_offset 7, -12
 1005              		.cfi_offset 8, -8
 1006              		.cfi_offset 14, -4
 1007 0004 86B0     		sub	sp, sp, #24
 1008              	.LCFI11:
 1009              		.cfi_def_cfa_offset 48
 1010 0006 0546     		mov	r5, r0
 1011 0008 0E46     		mov	r6, r1
 1012 000a 1446     		mov	r4, r2
 1013 000c 9846     		mov	r8, r3
 486:lib/utils.c   ****     uint16_t window[9];
 1014              		.loc 1 486 5 is_stmt 1 view .LVU288
 487:lib/utils.c   ****     for (int y = 1; y < height - 1; y++)
 1015              		.loc 1 487 5 view .LVU289
 1016              	.LBB20:
 1017              		.loc 1 487 10 view .LVU290
 1018              	.LVL103:
 1019              		.loc 1 487 14 is_stmt 0 view .LVU291
 1020 000e 0127     		movs	r7, #1
 1021              		.loc 1 487 5 view .LVU292
 1022 0010 E6E0     		b	.L65
 1023              	.LVL104:
 1024              	.L66:
 1025              	.LBB21:
 1026              	.LBB22:
 1027              	.LBB23:
 1028              	.LBB24:
 488:lib/utils.c   ****     {
 489:lib/utils.c   ****         for (int x = 1; x < width - 1; x++)
 490:lib/utils.c   ****         {
 491:lib/utils.c   ****             int k = 0;
 492:lib/utils.c   ****             for (int dy = -1; dy <= 1; dy++)
 493:lib/utils.c   ****             {
 494:lib/utils.c   ****                 for (int dx = -1; dx <= 1; dx++)
 495:lib/utils.c   ****                 {
 496:lib/utils.c   ****                     window[k++] = src[(y + dy) * width + (x + dx)];
 1029              		.loc 1 496 21 is_stmt 1 view .LVU293
 1030              		.loc 1 496 42 is_stmt 0 view .LVU294
 1031 0012 07EB0C01 		add	r1, r7, ip
 1032              		.loc 1 496 61 view .LVU295
 1033 0016 0EEB0302 		add	r2, lr, r3
 1034              		.loc 1 496 56 view .LVU296
 1035 001a 04FB0122 		mla	r2, r4, r1, r2
 1036              	.LVL105:
 1037              		.loc 1 496 38 view .LVU297
 1038 001e 35F81210 		ldrh	r1, [r5, r2, lsl #1]
 1039              		.loc 1 496 33 view .LVU298
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 29


 1040 0022 06AA     		add	r2, sp, #24
 1041 0024 02EB4002 		add	r2, r2, r0, lsl #1
 1042 0028 22F8141C 		strh	r1, [r2, #-20]	@ movhi
 494:lib/utils.c   ****                 {
 1043              		.loc 1 494 46 is_stmt 1 discriminator 3 view .LVU299
 1044 002c 0133     		adds	r3, r3, #1
 1045              	.LVL106:
 1046              		.loc 1 496 29 is_stmt 0 view .LVU300
 1047 002e 0130     		adds	r0, r0, #1
 1048              	.LVL107:
 1049              	.L67:
 494:lib/utils.c   ****                 {
 1050              		.loc 1 494 38 is_stmt 1 discriminator 1 view .LVU301
 1051 0030 012B     		cmp	r3, #1
 1052 0032 EEDD     		ble	.L66
 494:lib/utils.c   ****                 {
 1053              		.loc 1 494 38 is_stmt 0 discriminator 1 view .LVU302
 1054              	.LBE24:
 492:lib/utils.c   ****             {
 1055              		.loc 1 492 42 is_stmt 1 discriminator 2 view .LVU303
 1056 0034 0CF1010C 		add	ip, ip, #1
 1057              	.LVL108:
 1058              	.L87:
 492:lib/utils.c   ****             {
 1059              		.loc 1 492 34 discriminator 1 view .LVU304
 1060 0038 BCF1010F 		cmp	ip, #1
 1061 003c 02DC     		bgt	.L97
 1062              	.LBB25:
 494:lib/utils.c   ****                 {
 1063              		.loc 1 494 26 is_stmt 0 view .LVU305
 1064 003e 4FF0FF33 		mov	r3, #-1
 1065 0042 F5E7     		b	.L67
 1066              	.L97:
 1067              	.LBE25:
 1068              	.LBE23:
 497:lib/utils.c   ****                 }
 498:lib/utils.c   ****             }
 499:lib/utils.c   ****             // 比较网络排序，window[4]为中值
 500:lib/utils.c   ****             SWAP(window[1], window[2]);
 1069              		.loc 1 500 13 is_stmt 1 view .LVU306
 1070 0044 BDF80630 		ldrh	r3, [sp, #6]
 1071 0048 BDF80820 		ldrh	r2, [sp, #8]
 1072 004c 9342     		cmp	r3, r2
 1073 004e 03D9     		bls	.L68
 1074              	.LBB26:
 1075              		.loc 1 500 13 discriminator 1 view .LVU307
 1076              	.LVL109:
 1077              		.loc 1 500 13 discriminator 1 view .LVU308
 1078 0050 ADF80620 		strh	r2, [sp, #6]	@ movhi
 1079              		.loc 1 500 13 discriminator 1 view .LVU309
 1080 0054 ADF80830 		strh	r3, [sp, #8]	@ movhi
 1081              	.LVL110:
 1082              	.L68:
 1083              		.loc 1 500 13 is_stmt 0 discriminator 1 view .LVU310
 1084              	.LBE26:
 1085              		.loc 1 500 39 is_stmt 1 discriminator 3 view .LVU311
 501:lib/utils.c   ****             SWAP(window[4], window[5]);
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 30


 1086              		.loc 1 501 13 view .LVU312
 1087 0058 BDF80C30 		ldrh	r3, [sp, #12]
 1088 005c BDF80E20 		ldrh	r2, [sp, #14]
 1089 0060 9342     		cmp	r3, r2
 1090 0062 03D9     		bls	.L69
 1091              	.LBB27:
 1092              		.loc 1 501 13 discriminator 1 view .LVU313
 1093              	.LVL111:
 1094              		.loc 1 501 13 discriminator 1 view .LVU314
 1095 0064 ADF80C20 		strh	r2, [sp, #12]	@ movhi
 1096              		.loc 1 501 13 discriminator 1 view .LVU315
 1097 0068 ADF80E30 		strh	r3, [sp, #14]	@ movhi
 1098              	.LVL112:
 1099              	.L69:
 1100              		.loc 1 501 13 is_stmt 0 discriminator 1 view .LVU316
 1101              	.LBE27:
 1102              		.loc 1 501 39 is_stmt 1 discriminator 3 view .LVU317
 502:lib/utils.c   ****             SWAP(window[7], window[8]);
 1103              		.loc 1 502 13 view .LVU318
 1104 006c BDF81230 		ldrh	r3, [sp, #18]
 1105 0070 BDF81420 		ldrh	r2, [sp, #20]
 1106 0074 9342     		cmp	r3, r2
 1107 0076 03D9     		bls	.L70
 1108              	.LBB28:
 1109              		.loc 1 502 13 discriminator 1 view .LVU319
 1110              	.LVL113:
 1111              		.loc 1 502 13 discriminator 1 view .LVU320
 1112 0078 ADF81220 		strh	r2, [sp, #18]	@ movhi
 1113              		.loc 1 502 13 discriminator 1 view .LVU321
 1114 007c ADF81430 		strh	r3, [sp, #20]	@ movhi
 1115              	.LVL114:
 1116              	.L70:
 1117              		.loc 1 502 13 is_stmt 0 discriminator 1 view .LVU322
 1118              	.LBE28:
 1119              		.loc 1 502 39 is_stmt 1 discriminator 3 view .LVU323
 503:lib/utils.c   ****             SWAP(window[0], window[1]);
 1120              		.loc 1 503 13 view .LVU324
 1121 0080 BDF80430 		ldrh	r3, [sp, #4]
 1122 0084 BDF80620 		ldrh	r2, [sp, #6]
 1123 0088 9342     		cmp	r3, r2
 1124 008a 03D9     		bls	.L71
 1125              	.LBB29:
 1126              		.loc 1 503 13 discriminator 1 view .LVU325
 1127              	.LVL115:
 1128              		.loc 1 503 13 discriminator 1 view .LVU326
 1129 008c ADF80420 		strh	r2, [sp, #4]	@ movhi
 1130              		.loc 1 503 13 discriminator 1 view .LVU327
 1131 0090 ADF80630 		strh	r3, [sp, #6]	@ movhi
 1132              	.LVL116:
 1133              	.L71:
 1134              		.loc 1 503 13 is_stmt 0 discriminator 1 view .LVU328
 1135              	.LBE29:
 1136              		.loc 1 503 39 is_stmt 1 discriminator 3 view .LVU329
 504:lib/utils.c   ****             SWAP(window[3], window[4]);
 1137              		.loc 1 504 13 view .LVU330
 1138 0094 BDF80A30 		ldrh	r3, [sp, #10]
 1139 0098 BDF80C20 		ldrh	r2, [sp, #12]
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 31


 1140 009c 9342     		cmp	r3, r2
 1141 009e 03D9     		bls	.L72
 1142              	.LBB30:
 1143              		.loc 1 504 13 discriminator 1 view .LVU331
 1144              	.LVL117:
 1145              		.loc 1 504 13 discriminator 1 view .LVU332
 1146 00a0 ADF80A20 		strh	r2, [sp, #10]	@ movhi
 1147              		.loc 1 504 13 discriminator 1 view .LVU333
 1148 00a4 ADF80C30 		strh	r3, [sp, #12]	@ movhi
 1149              	.LVL118:
 1150              	.L72:
 1151              		.loc 1 504 13 is_stmt 0 discriminator 1 view .LVU334
 1152              	.LBE30:
 1153              		.loc 1 504 39 is_stmt 1 discriminator 3 view .LVU335
 505:lib/utils.c   ****             SWAP(window[6], window[7]);
 1154              		.loc 1 505 13 view .LVU336
 1155 00a8 BDF81030 		ldrh	r3, [sp, #16]
 1156 00ac BDF81220 		ldrh	r2, [sp, #18]
 1157 00b0 9342     		cmp	r3, r2
 1158 00b2 03D9     		bls	.L73
 1159              	.LBB31:
 1160              		.loc 1 505 13 discriminator 1 view .LVU337
 1161              	.LVL119:
 1162              		.loc 1 505 13 discriminator 1 view .LVU338
 1163 00b4 ADF81020 		strh	r2, [sp, #16]	@ movhi
 1164              		.loc 1 505 13 discriminator 1 view .LVU339
 1165 00b8 ADF81230 		strh	r3, [sp, #18]	@ movhi
 1166              	.LVL120:
 1167              	.L73:
 1168              		.loc 1 505 13 is_stmt 0 discriminator 1 view .LVU340
 1169              	.LBE31:
 1170              		.loc 1 505 39 is_stmt 1 discriminator 3 view .LVU341
 506:lib/utils.c   ****             SWAP(window[1], window[2]);
 1171              		.loc 1 506 13 view .LVU342
 1172 00bc BDF80630 		ldrh	r3, [sp, #6]
 1173 00c0 BDF80820 		ldrh	r2, [sp, #8]
 1174 00c4 9342     		cmp	r3, r2
 1175 00c6 03D9     		bls	.L74
 1176              	.LBB32:
 1177              		.loc 1 506 13 discriminator 1 view .LVU343
 1178              	.LVL121:
 1179              		.loc 1 506 13 discriminator 1 view .LVU344
 1180 00c8 ADF80620 		strh	r2, [sp, #6]	@ movhi
 1181              		.loc 1 506 13 discriminator 1 view .LVU345
 1182 00cc ADF80830 		strh	r3, [sp, #8]	@ movhi
 1183              	.LVL122:
 1184              	.L74:
 1185              		.loc 1 506 13 is_stmt 0 discriminator 1 view .LVU346
 1186              	.LBE32:
 1187              		.loc 1 506 39 is_stmt 1 discriminator 3 view .LVU347
 507:lib/utils.c   ****             SWAP(window[4], window[5]);
 1188              		.loc 1 507 13 view .LVU348
 1189 00d0 BDF80C30 		ldrh	r3, [sp, #12]
 1190 00d4 BDF80E20 		ldrh	r2, [sp, #14]
 1191 00d8 9342     		cmp	r3, r2
 1192 00da 03D9     		bls	.L75
 1193              	.LBB33:
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 32


 1194              		.loc 1 507 13 discriminator 1 view .LVU349
 1195              	.LVL123:
 1196              		.loc 1 507 13 discriminator 1 view .LVU350
 1197 00dc ADF80C20 		strh	r2, [sp, #12]	@ movhi
 1198              		.loc 1 507 13 discriminator 1 view .LVU351
 1199 00e0 ADF80E30 		strh	r3, [sp, #14]	@ movhi
 1200              	.LVL124:
 1201              	.L75:
 1202              		.loc 1 507 13 is_stmt 0 discriminator 1 view .LVU352
 1203              	.LBE33:
 1204              		.loc 1 507 39 is_stmt 1 discriminator 3 view .LVU353
 508:lib/utils.c   ****             SWAP(window[7], window[8]);
 1205              		.loc 1 508 13 view .LVU354
 1206 00e4 BDF81230 		ldrh	r3, [sp, #18]
 1207 00e8 BDF81420 		ldrh	r2, [sp, #20]
 1208 00ec 9342     		cmp	r3, r2
 1209 00ee 03D9     		bls	.L76
 1210              	.LBB34:
 1211              		.loc 1 508 13 discriminator 1 view .LVU355
 1212              	.LVL125:
 1213              		.loc 1 508 13 discriminator 1 view .LVU356
 1214 00f0 ADF81220 		strh	r2, [sp, #18]	@ movhi
 1215              		.loc 1 508 13 discriminator 1 view .LVU357
 1216 00f4 ADF81430 		strh	r3, [sp, #20]	@ movhi
 1217              	.LVL126:
 1218              	.L76:
 1219              		.loc 1 508 13 is_stmt 0 discriminator 1 view .LVU358
 1220              	.LBE34:
 1221              		.loc 1 508 39 is_stmt 1 discriminator 3 view .LVU359
 509:lib/utils.c   ****             SWAP(window[0], window[3]);
 1222              		.loc 1 509 13 view .LVU360
 1223 00f8 BDF80430 		ldrh	r3, [sp, #4]
 1224 00fc BDF80A20 		ldrh	r2, [sp, #10]
 1225 0100 9342     		cmp	r3, r2
 1226 0102 03D9     		bls	.L77
 1227              	.LBB35:
 1228              		.loc 1 509 13 discriminator 1 view .LVU361
 1229              	.LVL127:
 1230              		.loc 1 509 13 discriminator 1 view .LVU362
 1231 0104 ADF80420 		strh	r2, [sp, #4]	@ movhi
 1232              		.loc 1 509 13 discriminator 1 view .LVU363
 1233 0108 ADF80A30 		strh	r3, [sp, #10]	@ movhi
 1234              	.LVL128:
 1235              	.L77:
 1236              		.loc 1 509 13 is_stmt 0 discriminator 1 view .LVU364
 1237              	.LBE35:
 1238              		.loc 1 509 39 is_stmt 1 discriminator 3 view .LVU365
 510:lib/utils.c   ****             SWAP(window[5], window[8]);
 1239              		.loc 1 510 13 view .LVU366
 1240 010c BDF80E30 		ldrh	r3, [sp, #14]
 1241 0110 BDF81420 		ldrh	r2, [sp, #20]
 1242 0114 9342     		cmp	r3, r2
 1243 0116 03D9     		bls	.L78
 1244              	.LBB36:
 1245              		.loc 1 510 13 discriminator 1 view .LVU367
 1246              	.LVL129:
 1247              		.loc 1 510 13 discriminator 1 view .LVU368
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 33


 1248 0118 ADF80E20 		strh	r2, [sp, #14]	@ movhi
 1249              		.loc 1 510 13 discriminator 1 view .LVU369
 1250 011c ADF81430 		strh	r3, [sp, #20]	@ movhi
 1251              	.LVL130:
 1252              	.L78:
 1253              		.loc 1 510 13 is_stmt 0 discriminator 1 view .LVU370
 1254              	.LBE36:
 1255              		.loc 1 510 39 is_stmt 1 discriminator 3 view .LVU371
 511:lib/utils.c   ****             SWAP(window[4], window[7]);
 1256              		.loc 1 511 13 view .LVU372
 1257 0120 BDF80C30 		ldrh	r3, [sp, #12]
 1258 0124 BDF81220 		ldrh	r2, [sp, #18]
 1259 0128 9342     		cmp	r3, r2
 1260 012a 03D9     		bls	.L79
 1261              	.LBB37:
 1262              		.loc 1 511 13 discriminator 1 view .LVU373
 1263              	.LVL131:
 1264              		.loc 1 511 13 discriminator 1 view .LVU374
 1265 012c ADF80C20 		strh	r2, [sp, #12]	@ movhi
 1266              		.loc 1 511 13 discriminator 1 view .LVU375
 1267 0130 ADF81230 		strh	r3, [sp, #18]	@ movhi
 1268              	.LVL132:
 1269              	.L79:
 1270              		.loc 1 511 13 is_stmt 0 discriminator 1 view .LVU376
 1271              	.LBE37:
 1272              		.loc 1 511 39 is_stmt 1 discriminator 3 view .LVU377
 512:lib/utils.c   ****             SWAP(window[3], window[6]);
 1273              		.loc 1 512 13 view .LVU378
 1274 0134 BDF80A30 		ldrh	r3, [sp, #10]
 1275 0138 BDF81020 		ldrh	r2, [sp, #16]
 1276 013c 9342     		cmp	r3, r2
 1277 013e 03D9     		bls	.L80
 1278              	.LBB38:
 1279              		.loc 1 512 13 discriminator 1 view .LVU379
 1280              	.LVL133:
 1281              		.loc 1 512 13 discriminator 1 view .LVU380
 1282 0140 ADF80A20 		strh	r2, [sp, #10]	@ movhi
 1283              		.loc 1 512 13 discriminator 1 view .LVU381
 1284 0144 ADF81030 		strh	r3, [sp, #16]	@ movhi
 1285              	.LVL134:
 1286              	.L80:
 1287              		.loc 1 512 13 is_stmt 0 discriminator 1 view .LVU382
 1288              	.LBE38:
 1289              		.loc 1 512 39 is_stmt 1 discriminator 3 view .LVU383
 513:lib/utils.c   ****             SWAP(window[1], window[4]);
 1290              		.loc 1 513 13 view .LVU384
 1291 0148 BDF80630 		ldrh	r3, [sp, #6]
 1292 014c BDF80C20 		ldrh	r2, [sp, #12]
 1293 0150 9342     		cmp	r3, r2
 1294 0152 03D9     		bls	.L81
 1295              	.LBB39:
 1296              		.loc 1 513 13 discriminator 1 view .LVU385
 1297              	.LVL135:
 1298              		.loc 1 513 13 discriminator 1 view .LVU386
 1299 0154 ADF80620 		strh	r2, [sp, #6]	@ movhi
 1300              		.loc 1 513 13 discriminator 1 view .LVU387
 1301 0158 ADF80C30 		strh	r3, [sp, #12]	@ movhi
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 34


 1302              	.LVL136:
 1303              	.L81:
 1304              		.loc 1 513 13 is_stmt 0 discriminator 1 view .LVU388
 1305              	.LBE39:
 1306              		.loc 1 513 39 is_stmt 1 discriminator 3 view .LVU389
 514:lib/utils.c   ****             SWAP(window[2], window[5]);
 1307              		.loc 1 514 13 view .LVU390
 1308 015c BDF80830 		ldrh	r3, [sp, #8]
 1309 0160 BDF80E20 		ldrh	r2, [sp, #14]
 1310 0164 9342     		cmp	r3, r2
 1311 0166 03D9     		bls	.L82
 1312              	.LBB40:
 1313              		.loc 1 514 13 discriminator 1 view .LVU391
 1314              	.LVL137:
 1315              		.loc 1 514 13 discriminator 1 view .LVU392
 1316 0168 ADF80820 		strh	r2, [sp, #8]	@ movhi
 1317              		.loc 1 514 13 discriminator 1 view .LVU393
 1318 016c ADF80E30 		strh	r3, [sp, #14]	@ movhi
 1319              	.LVL138:
 1320              	.L82:
 1321              		.loc 1 514 13 is_stmt 0 discriminator 1 view .LVU394
 1322              	.LBE40:
 1323              		.loc 1 514 39 is_stmt 1 discriminator 3 view .LVU395
 515:lib/utils.c   ****             SWAP(window[4], window[7]);
 1324              		.loc 1 515 13 view .LVU396
 1325 0170 BDF80C30 		ldrh	r3, [sp, #12]
 1326 0174 BDF81220 		ldrh	r2, [sp, #18]
 1327 0178 9342     		cmp	r3, r2
 1328 017a 03D9     		bls	.L83
 1329              	.LBB41:
 1330              		.loc 1 515 13 discriminator 1 view .LVU397
 1331              	.LVL139:
 1332              		.loc 1 515 13 discriminator 1 view .LVU398
 1333 017c ADF80C20 		strh	r2, [sp, #12]	@ movhi
 1334              		.loc 1 515 13 discriminator 1 view .LVU399
 1335 0180 ADF81230 		strh	r3, [sp, #18]	@ movhi
 1336              	.LVL140:
 1337              	.L83:
 1338              		.loc 1 515 13 is_stmt 0 discriminator 1 view .LVU400
 1339              	.LBE41:
 1340              		.loc 1 515 39 is_stmt 1 discriminator 3 view .LVU401
 516:lib/utils.c   ****             SWAP(window[4], window[2]);
 1341              		.loc 1 516 13 view .LVU402
 1342 0184 BDF80C30 		ldrh	r3, [sp, #12]
 1343 0188 BDF80820 		ldrh	r2, [sp, #8]
 1344 018c 9342     		cmp	r3, r2
 1345 018e 03D9     		bls	.L84
 1346              	.LBB42:
 1347              		.loc 1 516 13 discriminator 1 view .LVU403
 1348              	.LVL141:
 1349              		.loc 1 516 13 discriminator 1 view .LVU404
 1350 0190 ADF80C20 		strh	r2, [sp, #12]	@ movhi
 1351              		.loc 1 516 13 discriminator 1 view .LVU405
 1352 0194 ADF80830 		strh	r3, [sp, #8]	@ movhi
 1353              	.LVL142:
 1354              	.L84:
 1355              		.loc 1 516 13 is_stmt 0 discriminator 1 view .LVU406
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 35


 1356              	.LBE42:
 1357              		.loc 1 516 39 is_stmt 1 discriminator 3 view .LVU407
 517:lib/utils.c   ****             SWAP(window[6], window[4]);
 1358              		.loc 1 517 13 view .LVU408
 1359 0198 BDF81030 		ldrh	r3, [sp, #16]
 1360 019c BDF80C20 		ldrh	r2, [sp, #12]
 1361 01a0 9342     		cmp	r3, r2
 1362 01a2 03D9     		bls	.L85
 1363              	.LBB43:
 1364              		.loc 1 517 13 discriminator 1 view .LVU409
 1365              	.LVL143:
 1366              		.loc 1 517 13 discriminator 1 view .LVU410
 1367 01a4 ADF81020 		strh	r2, [sp, #16]	@ movhi
 1368              		.loc 1 517 13 discriminator 1 view .LVU411
 1369 01a8 ADF80C30 		strh	r3, [sp, #12]	@ movhi
 1370              	.LVL144:
 1371              	.L85:
 1372              		.loc 1 517 13 is_stmt 0 discriminator 1 view .LVU412
 1373              	.LBE43:
 1374              		.loc 1 517 39 is_stmt 1 discriminator 3 view .LVU413
 518:lib/utils.c   ****             SWAP(window[4], window[2]);
 1375              		.loc 1 518 13 view .LVU414
 1376 01ac BDF80C30 		ldrh	r3, [sp, #12]
 1377 01b0 BDF80820 		ldrh	r2, [sp, #8]
 1378 01b4 9342     		cmp	r3, r2
 1379 01b6 03D9     		bls	.L86
 1380              	.LBB44:
 1381              		.loc 1 518 13 discriminator 1 view .LVU415
 1382              	.LVL145:
 1383              		.loc 1 518 13 discriminator 1 view .LVU416
 1384 01b8 ADF80C20 		strh	r2, [sp, #12]	@ movhi
 1385              		.loc 1 518 13 discriminator 1 view .LVU417
 1386 01bc ADF80830 		strh	r3, [sp, #8]	@ movhi
 1387              	.LVL146:
 1388              	.L86:
 1389              		.loc 1 518 13 is_stmt 0 discriminator 1 view .LVU418
 1390              	.LBE44:
 1391              		.loc 1 518 39 is_stmt 1 discriminator 3 view .LVU419
 519:lib/utils.c   ****             dst[y * width + x] = window[4];
 1392              		.loc 1 519 13 view .LVU420
 1393              		.loc 1 519 27 is_stmt 0 view .LVU421
 1394 01c0 04FB07E3 		mla	r3, r4, r7, lr
 1395              		.loc 1 519 40 view .LVU422
 1396 01c4 BDF80C20 		ldrh	r2, [sp, #12]
 1397              		.loc 1 519 32 view .LVU423
 1398 01c8 26F81320 		strh	r2, [r6, r3, lsl #1]	@ movhi
 1399              	.LBE22:
 489:lib/utils.c   ****         {
 1400              		.loc 1 489 41 is_stmt 1 discriminator 2 view .LVU424
 1401 01cc 0EF1010E 		add	lr, lr, #1
 1402              	.LVL147:
 1403              	.L88:
 489:lib/utils.c   ****         {
 1404              		.loc 1 489 27 discriminator 1 view .LVU425
 489:lib/utils.c   ****         {
 1405              		.loc 1 489 35 is_stmt 0 discriminator 1 view .LVU426
 1406 01d0 631E     		subs	r3, r4, #1
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 36


 489:lib/utils.c   ****         {
 1407              		.loc 1 489 27 discriminator 1 view .LVU427
 1408 01d2 7345     		cmp	r3, lr
 1409 01d4 03DD     		ble	.L98
 1410              	.LBB46:
 1411              	.LBB45:
 492:lib/utils.c   ****             {
 1412              		.loc 1 492 22 view .LVU428
 1413 01d6 4FF0FF3C 		mov	ip, #-1
 1414              	.LBE45:
 491:lib/utils.c   ****             for (int dy = -1; dy <= 1; dy++)
 1415              		.loc 1 491 17 view .LVU429
 1416 01da 0020     		movs	r0, #0
 1417 01dc 2CE7     		b	.L87
 1418              	.L98:
 1419              	.LBE46:
 1420              	.LBE21:
 487:lib/utils.c   ****     {
 1421              		.loc 1 487 38 is_stmt 1 discriminator 2 view .LVU430
 1422 01de 0137     		adds	r7, r7, #1
 1423              	.LVL148:
 1424              	.L65:
 487:lib/utils.c   ****     {
 1425              		.loc 1 487 23 discriminator 1 view .LVU431
 487:lib/utils.c   ****     {
 1426              		.loc 1 487 32 is_stmt 0 discriminator 1 view .LVU432
 1427 01e0 08F1FF32 		add	r2, r8, #-1
 487:lib/utils.c   ****     {
 1428              		.loc 1 487 23 discriminator 1 view .LVU433
 1429 01e4 BA42     		cmp	r2, r7
 1430 01e6 02DD     		ble	.L99
 1431              	.LBB47:
 489:lib/utils.c   ****         {
 1432              		.loc 1 489 18 view .LVU434
 1433 01e8 4FF0010E 		mov	lr, #1
 1434 01ec F0E7     		b	.L88
 1435              	.L99:
 1436              	.LBE47:
 1437              	.LBE20:
 1438              	.LBB48:
 520:lib/utils.c   ****         }
 521:lib/utils.c   ****     }
 522:lib/utils.c   ****     // 边缘像素直接复制
 523:lib/utils.c   ****     for (int x = 0; x < width; x++)
 1439              		.loc 1 523 14 view .LVU435
 1440 01ee 0023     		movs	r3, #0
 1441 01f0 0AE0     		b	.L89
 1442              	.LVL149:
 1443              	.L90:
 524:lib/utils.c   ****     {
 525:lib/utils.c   ****         dst[x] = src[x];
 1444              		.loc 1 525 9 is_stmt 1 view .LVU436
 1445              		.loc 1 525 21 is_stmt 0 view .LVU437
 1446 01f2 35F81310 		ldrh	r1, [r5, r3, lsl #1]
 1447              		.loc 1 525 16 view .LVU438
 1448 01f6 26F81310 		strh	r1, [r6, r3, lsl #1]	@ movhi
 526:lib/utils.c   ****         dst[(height - 1) * width + x] = src[(height - 1) * width + x];
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 37


 1449              		.loc 1 526 9 is_stmt 1 view .LVU439
 1450              		.loc 1 526 66 is_stmt 0 view .LVU440
 1451 01fa 04FB0231 		mla	r1, r4, r2, r3
 1452              		.loc 1 526 44 view .LVU441
 1453 01fe 35F81100 		ldrh	r0, [r5, r1, lsl #1]
 1454              		.loc 1 526 39 view .LVU442
 1455 0202 26F81100 		strh	r0, [r6, r1, lsl #1]	@ movhi
 523:lib/utils.c   ****     {
 1456              		.loc 1 523 33 is_stmt 1 discriminator 3 view .LVU443
 1457 0206 0133     		adds	r3, r3, #1
 1458              	.LVL150:
 1459              	.L89:
 523:lib/utils.c   ****     {
 1460              		.loc 1 523 23 discriminator 1 view .LVU444
 1461 0208 A342     		cmp	r3, r4
 1462 020a F2DB     		blt	.L90
 1463              	.LBE48:
 1464              	.LBB49:
 527:lib/utils.c   ****     }
 528:lib/utils.c   ****     for (int y = 0; y < height; y++)
 1465              		.loc 1 528 14 is_stmt 0 view .LVU445
 1466 020c 0022     		movs	r2, #0
 1467 020e 0EE0     		b	.L91
 1468              	.LVL151:
 1469              	.L92:
 529:lib/utils.c   ****     {
 530:lib/utils.c   ****         dst[y * width] = src[y * width];
 1470              		.loc 1 530 9 is_stmt 1 view .LVU446
 1471              		.loc 1 530 32 is_stmt 0 view .LVU447
 1472 0210 04FB02F3 		mul	r3, r4, r2
 1473              		.loc 1 530 29 view .LVU448
 1474 0214 35F81310 		ldrh	r1, [r5, r3, lsl #1]
 1475              		.loc 1 530 24 view .LVU449
 1476 0218 26F81310 		strh	r1, [r6, r3, lsl #1]	@ movhi
 531:lib/utils.c   ****         dst[y * width + width - 1] = src[y * width + width - 1];
 1477              		.loc 1 531 9 is_stmt 1 view .LVU450
 1478              		.loc 1 531 52 is_stmt 0 view .LVU451
 1479 021c 2344     		add	r3, r3, r4
 1480              		.loc 1 531 41 view .LVU452
 1481 021e 03F10043 		add	r3, r3, #-2147483648
 1482 0222 013B     		subs	r3, r3, #1
 1483 0224 35F81310 		ldrh	r1, [r5, r3, lsl #1]
 1484              		.loc 1 531 36 view .LVU453
 1485 0228 26F81310 		strh	r1, [r6, r3, lsl #1]	@ movhi
 528:lib/utils.c   ****     {
 1486              		.loc 1 528 34 is_stmt 1 discriminator 3 view .LVU454
 1487 022c 0132     		adds	r2, r2, #1
 1488              	.LVL152:
 1489              	.L91:
 528:lib/utils.c   ****     {
 1490              		.loc 1 528 23 discriminator 1 view .LVU455
 1491 022e 4245     		cmp	r2, r8
 1492 0230 EEDB     		blt	.L92
 1493              	.LBE49:
 532:lib/utils.c   ****     }
 533:lib/utils.c   **** }
 1494              		.loc 1 533 1 is_stmt 0 view .LVU456
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 38


 1495 0232 06B0     		add	sp, sp, #24
 1496              	.LCFI12:
 1497              		.cfi_def_cfa_offset 24
 1498              		@ sp needed
 1499 0234 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1500              		.loc 1 533 1 view .LVU457
 1501              		.cfi_endproc
 1502              	.LFE8:
 1504              		.section	.text.sharpen3x3,"ax",%progbits
 1505              		.align	1
 1506              		.global	sharpen3x3
 1507              		.syntax unified
 1508              		.thumb
 1509              		.thumb_func
 1511              	sharpen3x3:
 1512              	.LVL153:
 1513              	.LFB9:
 534:lib/utils.c   **** 
 535:lib/utils.c   **** // void grayImageToRGB(uint16_t *src, uint16_t *dst, int width, int height)
 536:lib/utils.c   **** // {
 537:lib/utils.c   **** //     static uint16_t smoothBuf[256*192]; // 假设最大分辨率为256x192
 538:lib/utils.c   **** //     medianFilter3x3(src, smoothBuf, width, height);
 539:lib/utils.c   **** 
 540:lib/utils.c   **** //     uint16_t min = 65535, max = 0, tmp;
 541:lib/utils.c   **** //     int size = width * height;
 542:lib/utils.c   **** //     for (int i = 0; i < size; i++) {
 543:lib/utils.c   **** //         tmp = smoothBuf[i];
 544:lib/utils.c   **** //         if (tmp < min) min = tmp;
 545:lib/utils.c   **** //         if (tmp > max) max = tmp;
 546:lib/utils.c   **** //     }
 547:lib/utils.c   **** //     if (max == min) max = min + 1;
 548:lib/utils.c   **** 
 549:lib/utils.c   **** //     for (int i = 0; i < size; i++) {
 550:lib/utils.c   **** //         double norm = (double)(smoothBuf[i] - min) / (max - min);
 551:lib/utils.c   **** //         norm = powf(norm, g_gamma);
 552:lib/utils.c   **** //         if (norm < 0.0f) norm = 0.0f;
 553:lib/utils.c   **** //         if (norm > 1.0f) norm = 1.0f;
 554:lib/utils.c   **** //         uint16_t norm255 = (uint16_t)(norm * 255.0f);
 555:lib/utils.c   **** //         dst[i] = colorLUT[norm255];
 556:lib/utils.c   **** //     }
 557:lib/utils.c   **** // }
 558:lib/utils.c   **** // 3x3锐化卷积
 559:lib/utils.c   **** void sharpen3x3(uint16_t *src, uint16_t *dst, int width, int height)
 560:lib/utils.c   **** {
 1514              		.loc 1 560 1 is_stmt 1 view -0
 1515              		.cfi_startproc
 1516              		@ args = 0, pretend = 0, frame = 0
 1517              		@ frame_needed = 0, uses_anonymous_args = 0
 1518              		.loc 1 560 1 is_stmt 0 view .LVU459
 1519 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 1520              	.LCFI13:
 1521              		.cfi_def_cfa_offset 28
 1522              		.cfi_offset 4, -28
 1523              		.cfi_offset 5, -24
 1524              		.cfi_offset 6, -20
 1525              		.cfi_offset 7, -16
 1526              		.cfi_offset 8, -12
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 39


 1527              		.cfi_offset 9, -8
 1528              		.cfi_offset 14, -4
 1529 0004 0546     		mov	r5, r0
 1530 0006 8946     		mov	r9, r1
 1531 0008 1446     		mov	r4, r2
 1532 000a 9846     		mov	r8, r3
 561:lib/utils.c   ****     // 3x3锐化核
 562:lib/utils.c   ****     const static int8_t kernel[3][3] = {
 1533              		.loc 1 562 5 is_stmt 1 view .LVU460
 563:lib/utils.c   ****         {0, -1, 0},
 564:lib/utils.c   ****         {-1, 5, -1},
 565:lib/utils.c   ****         {0, -1, 0}};
 566:lib/utils.c   ****     for (int y = 1; y < height - 1; y++)
 1534              		.loc 1 566 5 view .LVU461
 1535              	.LBB50:
 1536              		.loc 1 566 10 view .LVU462
 1537              	.LVL154:
 1538              		.loc 1 566 14 is_stmt 0 view .LVU463
 1539 000c 0127     		movs	r7, #1
 1540              		.loc 1 566 5 view .LVU464
 1541 000e 2FE0     		b	.L101
 1542              	.LVL155:
 1543              	.L102:
 1544              	.LBB51:
 1545              	.LBB52:
 1546              	.LBB53:
 1547              	.LBB54:
 567:lib/utils.c   ****     {
 568:lib/utils.c   ****         for (int x = 1; x < width - 1; x++)
 569:lib/utils.c   ****         {
 570:lib/utils.c   ****             int32_t sum = 0;
 571:lib/utils.c   ****             for (int ky = -1; ky <= 1; ky++)
 572:lib/utils.c   ****             {
 573:lib/utils.c   ****                 for (int kx = -1; kx <= 1; kx++)
 574:lib/utils.c   ****                 {
 575:lib/utils.c   ****                     sum += src[(y + ky) * width + (x + kx)] * kernel[ky + 1][kx + 1];
 1548              		.loc 1 575 21 is_stmt 1 view .LVU465
 1549              		.loc 1 575 35 is_stmt 0 view .LVU466
 1550 0010 07EB010C 		add	ip, r7, r1
 1551              		.loc 1 575 54 view .LVU467
 1552 0014 0EEB0203 		add	r3, lr, r2
 1553              		.loc 1 575 49 view .LVU468
 1554 0018 04FB0C33 		mla	r3, r4, ip, r3
 1555              		.loc 1 575 31 view .LVU469
 1556 001c 35F813C0 		ldrh	ip, [r5, r3, lsl #1]
 1557              		.loc 1 575 73 view .LVU470
 1558 0020 4B1C     		adds	r3, r1, #1
 1559              		.loc 1 575 81 view .LVU471
 1560 0022 0132     		adds	r2, r2, #1
 1561              	.LVL156:
 1562              		.loc 1 575 77 view .LVU472
 1563 0024 03EB4303 		add	r3, r3, r3, lsl #1
 1564 0028 274E     		ldr	r6, .L120
 1565 002a 3344     		add	r3, r3, r6
 1566 002c 9B56     		ldrsb	r3, [r3, r2]
 1567              		.loc 1 575 25 view .LVU473
 1568 002e 03FB0C00 		mla	r0, r3, ip, r0
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 40


 1569              	.LVL157:
 573:lib/utils.c   ****                 {
 1570              		.loc 1 573 46 is_stmt 1 discriminator 3 view .LVU474
 1571              	.L103:
 573:lib/utils.c   ****                 {
 1572              		.loc 1 573 38 discriminator 1 view .LVU475
 1573 0032 012A     		cmp	r2, #1
 1574 0034 ECDD     		ble	.L102
 573:lib/utils.c   ****                 {
 1575              		.loc 1 573 38 is_stmt 0 discriminator 1 view .LVU476
 1576              	.LBE54:
 571:lib/utils.c   ****             {
 1577              		.loc 1 571 42 is_stmt 1 discriminator 2 view .LVU477
 1578 0036 0131     		adds	r1, r1, #1
 1579              	.LVL158:
 1580              	.L105:
 571:lib/utils.c   ****             {
 1581              		.loc 1 571 34 discriminator 1 view .LVU478
 1582 0038 0129     		cmp	r1, #1
 1583 003a 02DC     		bgt	.L117
 1584              	.LBB55:
 573:lib/utils.c   ****                 {
 1585              		.loc 1 573 26 is_stmt 0 view .LVU479
 1586 003c 4FF0FF32 		mov	r2, #-1
 1587 0040 F7E7     		b	.L103
 1588              	.L117:
 1589              	.LBE55:
 1590              	.LBE53:
 576:lib/utils.c   ****                 }
 577:lib/utils.c   ****             }
 578:lib/utils.c   ****             // 防止溢出
 579:lib/utils.c   ****             if (sum < 0)
 1591              		.loc 1 579 13 is_stmt 1 view .LVU480
 1592              		.loc 1 579 16 is_stmt 0 view .LVU481
 1593 0042 0028     		cmp	r0, #0
 1594 0044 05DB     		blt	.L112
 580:lib/utils.c   ****                 sum = 0;
 581:lib/utils.c   ****             if (sum > 65535)
 1595              		.loc 1 581 13 is_stmt 1 view .LVU482
 1596              		.loc 1 581 16 is_stmt 0 view .LVU483
 1597 0046 B0F5803F 		cmp	r0, #65536
 1598 004a 03DB     		blt	.L104
 582:lib/utils.c   ****                 sum = 65535;
 1599              		.loc 1 582 21 view .LVU484
 1600 004c 4FF6FF70 		movw	r0, #65535
 1601              	.LVL159:
 1602              		.loc 1 582 21 view .LVU485
 1603 0050 00E0     		b	.L104
 1604              	.LVL160:
 1605              	.L112:
 580:lib/utils.c   ****                 sum = 0;
 1606              		.loc 1 580 21 view .LVU486
 1607 0052 0020     		movs	r0, #0
 1608              	.LVL161:
 1609              	.L104:
 583:lib/utils.c   ****             dst[y * width + x] = (uint16_t)sum;
 1610              		.loc 1 583 13 is_stmt 1 view .LVU487
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 41


 1611              		.loc 1 583 27 is_stmt 0 view .LVU488
 1612 0054 04FB07E3 		mla	r3, r4, r7, lr
 1613              		.loc 1 583 32 view .LVU489
 1614 0058 29F81300 		strh	r0, [r9, r3, lsl #1]	@ movhi
 1615              	.LBE52:
 568:lib/utils.c   ****         {
 1616              		.loc 1 568 41 is_stmt 1 discriminator 2 view .LVU490
 1617 005c 0EF1010E 		add	lr, lr, #1
 1618              	.LVL162:
 1619              	.L106:
 568:lib/utils.c   ****         {
 1620              		.loc 1 568 27 discriminator 1 view .LVU491
 568:lib/utils.c   ****         {
 1621              		.loc 1 568 35 is_stmt 0 discriminator 1 view .LVU492
 1622 0060 631E     		subs	r3, r4, #1
 568:lib/utils.c   ****         {
 1623              		.loc 1 568 27 discriminator 1 view .LVU493
 1624 0062 7345     		cmp	r3, lr
 1625 0064 03DD     		ble	.L118
 1626              	.LBB57:
 1627              	.LBB56:
 571:lib/utils.c   ****             {
 1628              		.loc 1 571 22 view .LVU494
 1629 0066 4FF0FF31 		mov	r1, #-1
 1630              	.LBE56:
 570:lib/utils.c   ****             for (int ky = -1; ky <= 1; ky++)
 1631              		.loc 1 570 21 view .LVU495
 1632 006a 0020     		movs	r0, #0
 1633 006c E4E7     		b	.L105
 1634              	.L118:
 1635              	.LBE57:
 1636              	.LBE51:
 566:lib/utils.c   ****     {
 1637              		.loc 1 566 38 is_stmt 1 discriminator 2 view .LVU496
 1638 006e 0137     		adds	r7, r7, #1
 1639              	.LVL163:
 1640              	.L101:
 566:lib/utils.c   ****     {
 1641              		.loc 1 566 23 discriminator 1 view .LVU497
 566:lib/utils.c   ****     {
 1642              		.loc 1 566 32 is_stmt 0 discriminator 1 view .LVU498
 1643 0070 08F1FF32 		add	r2, r8, #-1
 566:lib/utils.c   ****     {
 1644              		.loc 1 566 23 discriminator 1 view .LVU499
 1645 0074 BA42     		cmp	r2, r7
 1646 0076 02DD     		ble	.L119
 1647              	.LBB58:
 568:lib/utils.c   ****         {
 1648              		.loc 1 568 18 view .LVU500
 1649 0078 4FF0010E 		mov	lr, #1
 1650 007c F0E7     		b	.L106
 1651              	.L119:
 1652              	.LBE58:
 1653              	.LBE50:
 1654              	.LBB59:
 584:lib/utils.c   ****         }
 585:lib/utils.c   ****     }
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 42


 586:lib/utils.c   ****     // 边缘像素直接复制
 587:lib/utils.c   ****     for (int x = 0; x < width; x++)
 1655              		.loc 1 587 14 view .LVU501
 1656 007e 0023     		movs	r3, #0
 1657 0080 0AE0     		b	.L107
 1658              	.LVL164:
 1659              	.L108:
 588:lib/utils.c   ****     {
 589:lib/utils.c   ****         dst[x] = src[x];
 1660              		.loc 1 589 9 is_stmt 1 view .LVU502
 1661              		.loc 1 589 21 is_stmt 0 view .LVU503
 1662 0082 35F81310 		ldrh	r1, [r5, r3, lsl #1]
 1663              		.loc 1 589 16 view .LVU504
 1664 0086 29F81310 		strh	r1, [r9, r3, lsl #1]	@ movhi
 590:lib/utils.c   ****         dst[(height - 1) * width + x] = src[(height - 1) * width + x];
 1665              		.loc 1 590 9 is_stmt 1 view .LVU505
 1666              		.loc 1 590 66 is_stmt 0 view .LVU506
 1667 008a 04FB0231 		mla	r1, r4, r2, r3
 1668              		.loc 1 590 44 view .LVU507
 1669 008e 35F81100 		ldrh	r0, [r5, r1, lsl #1]
 1670              		.loc 1 590 39 view .LVU508
 1671 0092 29F81100 		strh	r0, [r9, r1, lsl #1]	@ movhi
 587:lib/utils.c   ****     {
 1672              		.loc 1 587 33 is_stmt 1 discriminator 3 view .LVU509
 1673 0096 0133     		adds	r3, r3, #1
 1674              	.LVL165:
 1675              	.L107:
 587:lib/utils.c   ****     {
 1676              		.loc 1 587 23 discriminator 1 view .LVU510
 1677 0098 A342     		cmp	r3, r4
 1678 009a F2DB     		blt	.L108
 1679              	.LBE59:
 1680              	.LBB60:
 591:lib/utils.c   ****     }
 592:lib/utils.c   ****     for (int y = 0; y < height; y++)
 1681              		.loc 1 592 14 is_stmt 0 view .LVU511
 1682 009c 0022     		movs	r2, #0
 1683 009e 0EE0     		b	.L109
 1684              	.LVL166:
 1685              	.L110:
 593:lib/utils.c   ****     {
 594:lib/utils.c   ****         dst[y * width] = src[y * width];
 1686              		.loc 1 594 9 is_stmt 1 view .LVU512
 1687              		.loc 1 594 32 is_stmt 0 view .LVU513
 1688 00a0 04FB02F3 		mul	r3, r4, r2
 1689              		.loc 1 594 29 view .LVU514
 1690 00a4 35F81310 		ldrh	r1, [r5, r3, lsl #1]
 1691              		.loc 1 594 24 view .LVU515
 1692 00a8 29F81310 		strh	r1, [r9, r3, lsl #1]	@ movhi
 595:lib/utils.c   ****         dst[y * width + width - 1] = src[y * width + width - 1];
 1693              		.loc 1 595 9 is_stmt 1 view .LVU516
 1694              		.loc 1 595 52 is_stmt 0 view .LVU517
 1695 00ac 2344     		add	r3, r3, r4
 1696              		.loc 1 595 41 view .LVU518
 1697 00ae 03F10043 		add	r3, r3, #-2147483648
 1698 00b2 013B     		subs	r3, r3, #1
 1699 00b4 35F81310 		ldrh	r1, [r5, r3, lsl #1]
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 43


 1700              		.loc 1 595 36 view .LVU519
 1701 00b8 29F81310 		strh	r1, [r9, r3, lsl #1]	@ movhi
 592:lib/utils.c   ****     {
 1702              		.loc 1 592 34 is_stmt 1 discriminator 3 view .LVU520
 1703 00bc 0132     		adds	r2, r2, #1
 1704              	.LVL167:
 1705              	.L109:
 592:lib/utils.c   ****     {
 1706              		.loc 1 592 23 discriminator 1 view .LVU521
 1707 00be 4245     		cmp	r2, r8
 1708 00c0 EEDB     		blt	.L110
 1709              	.LBE60:
 596:lib/utils.c   ****     }
 597:lib/utils.c   **** }
 1710              		.loc 1 597 1 is_stmt 0 view .LVU522
 1711 00c2 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 1712              	.LVL168:
 1713              	.L121:
 1714              		.loc 1 597 1 view .LVU523
 1715 00c6 00BF     		.align	2
 1716              	.L120:
 1717 00c8 00000000 		.word	kernel.1
 1718              		.cfi_endproc
 1719              	.LFE9:
 1721              		.section	.text.grayImageToRGB,"ax",%progbits
 1722              		.align	1
 1723              		.global	grayImageToRGB
 1724              		.syntax unified
 1725              		.thumb
 1726              		.thumb_func
 1728              	grayImageToRGB:
 1729              	.LVL169:
 1730              	.LFB10:
 598:lib/utils.c   **** 
 599:lib/utils.c   **** void grayImageToRGB(uint16_t *src, uint16_t *dst, int width, int height)
 600:lib/utils.c   **** {
 1731              		.loc 1 600 1 is_stmt 1 view -0
 1732              		.cfi_startproc
 1733              		@ args = 0, pretend = 0, frame = 0
 1734              		@ frame_needed = 0, uses_anonymous_args = 0
 1735              		.loc 1 600 1 is_stmt 0 view .LVU525
 1736 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1737              	.LCFI14:
 1738              		.cfi_def_cfa_offset 24
 1739              		.cfi_offset 4, -24
 1740              		.cfi_offset 5, -20
 1741              		.cfi_offset 6, -16
 1742              		.cfi_offset 7, -12
 1743              		.cfi_offset 8, -8
 1744              		.cfi_offset 14, -4
 1745 0004 0646     		mov	r6, r0
 1746 0006 0F46     		mov	r7, r1
 1747 0008 1546     		mov	r5, r2
 1748 000a 1C46     		mov	r4, r3
 601:lib/utils.c   ****     static uint16_t buf1[256 * 192]; // 中值滤波结果
 1749              		.loc 1 601 5 is_stmt 1 view .LVU526
 602:lib/utils.c   **** 
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 44


 603:lib/utils.c   ****     medianFilter3x3(src, buf1, width, height);
 1750              		.loc 1 603 5 view .LVU527
 1751 000c DFF85080 		ldr	r8, .L126
 1752 0010 4146     		mov	r1, r8
 1753              	.LVL170:
 1754              		.loc 1 603 5 is_stmt 0 view .LVU528
 1755 0012 FFF7FEFF 		bl	medianFilter3x3
 1756              	.LVL171:
 604:lib/utils.c   ****     sharpen3x3(buf1, src, width, height);
 1757              		.loc 1 604 5 is_stmt 1 view .LVU529
 1758 0016 2346     		mov	r3, r4
 1759 0018 2A46     		mov	r2, r5
 1760 001a 3146     		mov	r1, r6
 1761 001c 4046     		mov	r0, r8
 1762 001e FFF7FEFF 		bl	sharpen3x3
 1763              	.LVL172:
 605:lib/utils.c   ****     uint16_t *buf2 = src;
 1764              		.loc 1 605 5 view .LVU530
 606:lib/utils.c   **** 
 607:lib/utils.c   ****     medianFilter3x3(src, buf1, width, height);
 1765              		.loc 1 607 5 view .LVU531
 1766 0022 2346     		mov	r3, r4
 1767 0024 2A46     		mov	r2, r5
 1768 0026 4146     		mov	r1, r8
 1769 0028 3046     		mov	r0, r6
 1770 002a FFF7FEFF 		bl	medianFilter3x3
 1771              	.LVL173:
 608:lib/utils.c   ****     // 降噪
 609:lib/utils.c   ****     sharpen3x3(buf1, buf2, width, height);
 1772              		.loc 1 609 5 view .LVU532
 1773 002e 2346     		mov	r3, r4
 1774 0030 2A46     		mov	r2, r5
 1775 0032 3146     		mov	r1, r6
 1776 0034 4046     		mov	r0, r8
 1777 0036 FFF7FEFF 		bl	sharpen3x3
 1778              	.LVL174:
 610:lib/utils.c   ****     // 锐化
 611:lib/utils.c   **** 
 612:lib/utils.c   ****     uint16_t local_min = g_min_gray;
 1779              		.loc 1 612 5 view .LVU533
 613:lib/utils.c   ****     uint16_t local_max = g_max_gray;
 1780              		.loc 1 613 5 view .LVU534
 614:lib/utils.c   ****     if (local_max <= local_min)
 1781              		.loc 1 614 5 view .LVU535
 615:lib/utils.c   ****     {
 616:lib/utils.c   ****         local_max = local_min + 1;
 617:lib/utils.c   ****     }
 618:lib/utils.c   **** 
 619:lib/utils.c   ****     int size = width * height;
 1782              		.loc 1 619 5 view .LVU536
 1783              		.loc 1 619 9 is_stmt 0 view .LVU537
 1784 003a 04FB05F5 		mul	r5, r4, r5
 1785              	.LVL175:
 620:lib/utils.c   ****     for (int i = 0; i < size; i++)
 1786              		.loc 1 620 5 is_stmt 1 view .LVU538
 1787              	.LBB61:
 1788              		.loc 1 620 10 view .LVU539
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 45


 1789              		.loc 1 620 14 is_stmt 0 view .LVU540
 1790 003e 0024     		movs	r4, #0
 1791              	.LVL176:
 1792              		.loc 1 620 5 view .LVU541
 1793 0040 0AE0     		b	.L123
 1794              	.LVL177:
 1795              	.L124:
 621:lib/utils.c   ****     {
 622:lib/utils.c   ****         dst[i] = gray_to_rgb565(buf2[i], local_min, local_max);
 1796              		.loc 1 622 9 is_stmt 1 view .LVU542
 1797              		.loc 1 622 18 is_stmt 0 view .LVU543
 1798 0042 45F2F052 		movw	r2, #22000
 1799 0046 44F25061 		movw	r1, #18000
 1800 004a 36F81400 		ldrh	r0, [r6, r4, lsl #1]
 1801 004e FFF7FEFF 		bl	gray_to_rgb565
 1802              	.LVL178:
 1803              		.loc 1 622 16 discriminator 1 view .LVU544
 1804 0052 27F81400 		strh	r0, [r7, r4, lsl #1]	@ movhi
 620:lib/utils.c   ****     for (int i = 0; i < size; i++)
 1805              		.loc 1 620 32 is_stmt 1 discriminator 3 view .LVU545
 1806 0056 0134     		adds	r4, r4, #1
 1807              	.LVL179:
 1808              	.L123:
 620:lib/utils.c   ****     for (int i = 0; i < size; i++)
 1809              		.loc 1 620 23 discriminator 1 view .LVU546
 1810 0058 AC42     		cmp	r4, r5
 1811 005a F2DB     		blt	.L124
 1812              	.LBE61:
 623:lib/utils.c   ****     }
 624:lib/utils.c   **** }
 1813              		.loc 1 624 1 is_stmt 0 view .LVU547
 1814 005c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1815              	.LVL180:
 1816              	.L127:
 1817              		.loc 1 624 1 view .LVU548
 1818              		.align	2
 1819              	.L126:
 1820 0060 00000000 		.word	buf1.0
 1821              		.cfi_endproc
 1822              	.LFE10:
 1824              		.section	.text.color_shift_cooler,"ax",%progbits
 1825              		.align	1
 1826              		.global	color_shift_cooler
 1827              		.syntax unified
 1828              		.thumb
 1829              		.thumb_func
 1831              	color_shift_cooler:
 1832              	.LFB11:
 625:lib/utils.c   **** 
 626:lib/utils.c   **** void color_shift_cooler(void)
 627:lib/utils.c   **** {
 1833              		.loc 1 627 1 is_stmt 1 view -0
 1834              		.cfi_startproc
 1835              		@ args = 0, pretend = 0, frame = 0
 1836              		@ frame_needed = 0, uses_anonymous_args = 0
 1837              		@ link register save eliminated.
 628:lib/utils.c   ****     // 按键使整幅图偏冷（整体偏蓝）
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 46


 629:lib/utils.c   ****     if (g_color_tint > -10)
 1838              		.loc 1 629 5 view .LVU550
 1839              		.loc 1 629 22 is_stmt 0 view .LVU551
 1840 0000 044B     		ldr	r3, .L130
 1841 0002 93F90030 		ldrsb	r3, [r3]
 1842              		.loc 1 629 8 view .LVU552
 1843 0006 13F1090F 		cmn	r3, #9
 1844 000a 02DB     		blt	.L128
 630:lib/utils.c   ****     {
 631:lib/utils.c   ****         g_color_tint--;
 1845              		.loc 1 631 9 is_stmt 1 view .LVU553
 1846              		.loc 1 631 21 is_stmt 0 view .LVU554
 1847 000c 013B     		subs	r3, r3, #1
 1848 000e 014A     		ldr	r2, .L130
 1849 0010 1370     		strb	r3, [r2]
 1850              	.L128:
 632:lib/utils.c   ****     }
 633:lib/utils.c   **** }
 1851              		.loc 1 633 1 view .LVU555
 1852 0012 7047     		bx	lr
 1853              	.L131:
 1854              		.align	2
 1855              	.L130:
 1856 0014 00000000 		.word	g_color_tint
 1857              		.cfi_endproc
 1858              	.LFE11:
 1860              		.section	.text.color_shift_warmer,"ax",%progbits
 1861              		.align	1
 1862              		.global	color_shift_warmer
 1863              		.syntax unified
 1864              		.thumb
 1865              		.thumb_func
 1867              	color_shift_warmer:
 1868              	.LFB12:
 634:lib/utils.c   **** 
 635:lib/utils.c   **** void color_shift_warmer(void)
 636:lib/utils.c   **** {
 1869              		.loc 1 636 1 is_stmt 1 view -0
 1870              		.cfi_startproc
 1871              		@ args = 0, pretend = 0, frame = 0
 1872              		@ frame_needed = 0, uses_anonymous_args = 0
 1873              		@ link register save eliminated.
 637:lib/utils.c   ****     // 按键使整幅图偏暖（整体偏红）
 638:lib/utils.c   ****     if (g_color_tint < 10)
 1874              		.loc 1 638 5 view .LVU557
 1875              		.loc 1 638 22 is_stmt 0 view .LVU558
 1876 0000 044B     		ldr	r3, .L134
 1877 0002 93F90030 		ldrsb	r3, [r3]
 1878              		.loc 1 638 8 view .LVU559
 1879 0006 092B     		cmp	r3, #9
 1880 0008 02DC     		bgt	.L132
 639:lib/utils.c   ****     {
 640:lib/utils.c   ****         g_color_tint++;
 1881              		.loc 1 640 9 is_stmt 1 view .LVU560
 1882              		.loc 1 640 21 is_stmt 0 view .LVU561
 1883 000a 0133     		adds	r3, r3, #1
 1884 000c 014A     		ldr	r2, .L134
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 47


 1885 000e 1370     		strb	r3, [r2]
 1886              	.L132:
 641:lib/utils.c   ****     }
 642:lib/utils.c   **** }
 1887              		.loc 1 642 1 view .LVU562
 1888 0010 7047     		bx	lr
 1889              	.L135:
 1890 0012 00BF     		.align	2
 1891              	.L134:
 1892 0014 00000000 		.word	g_color_tint
 1893              		.cfi_endproc
 1894              	.LFE12:
 1896              		.section	.text.grayImageLarger,"ax",%progbits
 1897              		.align	1
 1898              		.global	grayImageLarger
 1899              		.syntax unified
 1900              		.thumb
 1901              		.thumb_func
 1903              	grayImageLarger:
 1904              	.LVL181:
 1905              	.LFB13:
 643:lib/utils.c   **** 
 644:lib/utils.c   **** void grayImageLarger(uint16_t *src, uint16_t *dst, uint16_t width, uint16_t height, uint16_t out_w,
 645:lib/utils.c   **** {
 1906              		.loc 1 645 1 is_stmt 1 view -0
 1907              		.cfi_startproc
 1908              		@ args = 8, pretend = 0, frame = 8
 1909              		@ frame_needed = 0, uses_anonymous_args = 0
 1910              		.loc 1 645 1 is_stmt 0 view .LVU564
 1911 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1912              	.LCFI15:
 1913              		.cfi_def_cfa_offset 36
 1914              		.cfi_offset 4, -36
 1915              		.cfi_offset 5, -32
 1916              		.cfi_offset 6, -28
 1917              		.cfi_offset 7, -24
 1918              		.cfi_offset 8, -20
 1919              		.cfi_offset 9, -16
 1920              		.cfi_offset 10, -12
 1921              		.cfi_offset 11, -8
 1922              		.cfi_offset 14, -4
 1923 0004 83B0     		sub	sp, sp, #12
 1924              	.LCFI16:
 1925              		.cfi_def_cfa_offset 48
 1926 0006 0D46     		mov	r5, r1
 1927 0008 1146     		mov	r1, r2
 1928              	.LVL182:
 1929              		.loc 1 645 1 view .LVU565
 1930 000a 1E46     		mov	r6, r3
 1931 000c BDF83040 		ldrh	r4, [sp, #48]
 1932 0010 BDF83470 		ldrh	r7, [sp, #52]
 646:lib/utils.c   ****     // 计算缩放比例
 647:lib/utils.c   ****     float scale_x = (float)(width - 1) / (out_w - 1);
 1933              		.loc 1 647 5 is_stmt 1 view .LVU566
 1934              		.loc 1 647 35 is_stmt 0 view .LVU567
 1935 0014 531E     		subs	r3, r2, #1
 1936              	.LVL183:
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 48


 1937              		.loc 1 647 35 view .LVU568
 1938 0016 07EE103A 		vmov	s14, r3	@ int
 1939              		.loc 1 647 21 view .LVU569
 1940 001a B8EEC77A 		vcvt.f32.s32	s14, s14
 1941              		.loc 1 647 49 view .LVU570
 1942 001e 631E     		subs	r3, r4, #1
 1943 0020 07EE903A 		vmov	s15, r3	@ int
 1944              		.loc 1 647 40 view .LVU571
 1945 0024 F8EEE77A 		vcvt.f32.s32	s15, s15
 1946              		.loc 1 647 11 view .LVU572
 1947 0028 C7EE273A 		vdiv.f32	s7, s14, s15
 1948              	.LVL184:
 648:lib/utils.c   ****     float scale_y = (float)(height - 1) / (out_h - 1);
 1949              		.loc 1 648 5 is_stmt 1 view .LVU573
 1950              		.loc 1 648 36 is_stmt 0 view .LVU574
 1951 002c 731E     		subs	r3, r6, #1
 1952 002e 07EE103A 		vmov	s14, r3	@ int
 1953              		.loc 1 648 21 view .LVU575
 1954 0032 B8EEC77A 		vcvt.f32.s32	s14, s14
 1955              		.loc 1 648 50 view .LVU576
 1956 0036 7B1E     		subs	r3, r7, #1
 1957 0038 07EE903A 		vmov	s15, r3	@ int
 1958              		.loc 1 648 41 view .LVU577
 1959 003c F8EEE77A 		vcvt.f32.s32	s15, s15
 1960              		.loc 1 648 11 view .LVU578
 1961 0040 87EE274A 		vdiv.f32	s8, s14, s15
 1962              	.LVL185:
 649:lib/utils.c   **** 
 650:lib/utils.c   ****     for (uint16_t y = 0; y < out_h; y++)
 1963              		.loc 1 650 5 is_stmt 1 view .LVU579
 1964              	.LBB62:
 1965              		.loc 1 650 10 view .LVU580
 1966              		.loc 1 650 19 is_stmt 0 view .LVU581
 1967 0044 0023     		movs	r3, #0
 1968 0046 0193     		str	r3, [sp, #4]
 1969              		.loc 1 650 5 view .LVU582
 1970 0048 82E0     		b	.L137
 1971              	.LVL186:
 1972              	.L139:
 1973              	.LBB63:
 1974              	.LBB64:
 651:lib/utils.c   ****     {
 652:lib/utils.c   ****         for (uint16_t x = 0; x < out_w; x++)
 653:lib/utils.c   ****         {
 654:lib/utils.c   ****             // 计算对应的输入图像的坐标
 655:lib/utils.c   ****             float src_x = x * scale_x;
 656:lib/utils.c   ****             float src_y = y * scale_y;
 657:lib/utils.c   **** 
 658:lib/utils.c   ****             // 获取整数部分和小数部分
 659:lib/utils.c   ****             uint16_t x0 = (uint16_t)src_x;
 660:lib/utils.c   ****             uint16_t y0 = (uint16_t)src_y;
 661:lib/utils.c   ****             uint16_t x1 = (x0 + 1 < width) ? x0 + 1 : x0;
 662:lib/utils.c   ****             uint16_t y1 = (y0 + 1 < height) ? y0 + 1 : y0;
 663:lib/utils.c   **** 
 664:lib/utils.c   ****             float x_diff = src_x - x0;
 1975              		.loc 1 664 13 is_stmt 1 view .LVU583
 1976              		.loc 1 664 34 is_stmt 0 view .LVU584
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 49


 1977 004a 07EE909A 		vmov	s15, r9	@ int
 1978 004e F8EEE77A 		vcvt.f32.s32	s15, s15
 1979              		.loc 1 664 19 view .LVU585
 1980 0052 37EE677A 		vsub.f32	s14, s14, s15
 1981              	.LVL187:
 665:lib/utils.c   ****             float y_diff = src_y - y0;
 1982              		.loc 1 665 13 is_stmt 1 view .LVU586
 1983              		.loc 1 665 34 is_stmt 0 view .LVU587
 1984 0056 07EE90AA 		vmov	s15, r10	@ int
 1985 005a F8EEE77A 		vcvt.f32.s32	s15, s15
 1986              		.loc 1 665 19 view .LVU588
 1987 005e 76EEE76A 		vsub.f32	s13, s13, s15
 1988              	.LVL188:
 666:lib/utils.c   **** 
 667:lib/utils.c   ****             // 取四个相邻像素的灰度值
 668:lib/utils.c   ****             uint16_t gray00 = src[y0 * width + x0];
 1989              		.loc 1 668 13 is_stmt 1 view .LVU589
 1990              		.loc 1 668 38 is_stmt 0 view .LVU590
 1991 0062 0AFB01FA 		mul	r10, r10, r1
 1992              	.LVL189:
 1993              		.loc 1 668 46 view .LVU591
 1994 0066 09EB0A0B 		add	fp, r9, r10
 1995              	.LVL190:
 1996              		.loc 1 668 22 view .LVU592
 1997 006a 30F81BB0 		ldrh	fp, [r0, fp, lsl #1]
 1998 006e 07EE90BA 		vmov	s15, fp	@ int
 1999              	.LVL191:
 669:lib/utils.c   ****             uint16_t gray01 = src[y0 * width + x1];
 2000              		.loc 1 669 13 is_stmt 1 view .LVU593
 2001              		.loc 1 669 46 is_stmt 0 view .LVU594
 2002 0072 E244     		add	r10, r10, ip
 2003              	.LVL192:
 2004              		.loc 1 669 22 view .LVU595
 2005 0074 30F81AA0 		ldrh	r10, [r0, r10, lsl #1]
 2006 0078 05EE90AA 		vmov	s11, r10	@ int
 2007              	.LVL193:
 670:lib/utils.c   ****             uint16_t gray10 = src[y1 * width + x0];
 2008              		.loc 1 670 13 is_stmt 1 view .LVU596
 2009              		.loc 1 670 38 is_stmt 0 view .LVU597
 2010 007c 01FB0EFE 		mul	lr, r1, lr
 2011              	.LVL194:
 2012              		.loc 1 670 46 view .LVU598
 2013 0080 F144     		add	r9, r9, lr
 2014              	.LVL195:
 2015              		.loc 1 670 22 view .LVU599
 2016 0082 30F81990 		ldrh	r9, [r0, r9, lsl #1]
 2017              	.LVL196:
 671:lib/utils.c   ****             uint16_t gray11 = src[y1 * width + x1];
 2018              		.loc 1 671 13 is_stmt 1 view .LVU600
 2019              		.loc 1 671 46 is_stmt 0 view .LVU601
 2020 0086 F444     		add	ip, ip, lr
 2021              	.LVL197:
 2022              		.loc 1 671 22 view .LVU602
 2023 0088 30F81CC0 		ldrh	ip, [r0, ip, lsl #1]
 2024              	.LVL198:
 672:lib/utils.c   **** 
 673:lib/utils.c   ****             // 双线性插值公式
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 50


 674:lib/utils.c   ****             float gray = (1 - x_diff) * (1 - y_diff) * gray00 +
 2025              		.loc 1 674 13 is_stmt 1 view .LVU603
 2026              		.loc 1 674 29 is_stmt 0 view .LVU604
 2027 008c B7EE006A 		vmov.f32	s12, #1.0e+0
 2028 0090 36EE475A 		vsub.f32	s10, s12, s14
 2029              		.loc 1 674 44 view .LVU605
 2030 0094 36EE666A 		vsub.f32	s12, s12, s13
 2031              		.loc 1 674 39 view .LVU606
 2032 0098 65EE064A 		vmul.f32	s9, s10, s12
 2033              		.loc 1 674 54 view .LVU607
 2034 009c F8EEE77A 		vcvt.f32.s32	s15, s15
 2035 00a0 67EEA47A 		vmul.f32	s15, s15, s9
 675:lib/utils.c   ****                          x_diff * (1 - y_diff) * gray01 +
 2036              		.loc 1 675 33 view .LVU608
 2037 00a4 26EE076A 		vmul.f32	s12, s12, s14
 2038              		.loc 1 675 48 view .LVU609
 2039 00a8 F8EEE55A 		vcvt.f32.s32	s11, s11
 2040 00ac 25EE866A 		vmul.f32	s12, s11, s12
 674:lib/utils.c   ****                          x_diff * (1 - y_diff) * gray01 +
 2041              		.loc 1 674 63 view .LVU610
 2042 00b0 77EE867A 		vadd.f32	s15, s15, s12
 676:lib/utils.c   ****                          (1 - x_diff) * y_diff * gray10 +
 2043              		.loc 1 676 39 view .LVU611
 2044 00b4 25EE265A 		vmul.f32	s10, s10, s13
 2045              		.loc 1 676 48 view .LVU612
 2046 00b8 06EE109A 		vmov	s12, r9	@ int
 2047 00bc B8EEC66A 		vcvt.f32.s32	s12, s12
 2048 00c0 26EE056A 		vmul.f32	s12, s12, s10
 675:lib/utils.c   ****                          x_diff * (1 - y_diff) * gray01 +
 2049              		.loc 1 675 57 view .LVU613
 2050 00c4 77EE867A 		vadd.f32	s15, s15, s12
 677:lib/utils.c   ****                          x_diff * y_diff * gray11;
 2051              		.loc 1 677 33 view .LVU614
 2052 00c8 27EE267A 		vmul.f32	s14, s14, s13
 2053              	.LVL199:
 2054              		.loc 1 677 42 view .LVU615
 2055 00cc 06EE90CA 		vmov	s13, ip	@ int
 2056              	.LVL200:
 2057              		.loc 1 677 42 view .LVU616
 2058 00d0 F8EEE66A 		vcvt.f32.s32	s13, s13
 2059 00d4 26EE877A 		vmul.f32	s14, s13, s14
 674:lib/utils.c   ****                          x_diff * (1 - y_diff) * gray01 +
 2060              		.loc 1 674 19 view .LVU617
 2061 00d8 77EE877A 		vadd.f32	s15, s15, s14
 2062              	.LVL201:
 678:lib/utils.c   **** 
 679:lib/utils.c   ****             // 将插值结果放入目标图像
 680:lib/utils.c   ****             dst[y * out_w + x] = (uint16_t)gray;
 2063              		.loc 1 680 13 is_stmt 1 view .LVU618
 2064              		.loc 1 680 27 is_stmt 0 view .LVU619
 2065 00dc 08FB0422 		mla	r2, r8, r4, r2
 2066              	.LVL202:
 2067              		.loc 1 680 34 view .LVU620
 2068 00e0 FCEEE77A 		vcvt.u32.f32	s15, s15
 2069              	.LVL203:
 2070              		.loc 1 680 32 view .LVU621
 2071 00e4 17EE90CA 		vmov	ip, s15	@ int
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 51


 2072 00e8 25F812C0 		strh	ip, [r5, r2, lsl #1]	@ movhi
 2073              	.LVL204:
 2074              		.loc 1 680 32 view .LVU622
 2075              	.LBE64:
 652:lib/utils.c   ****         {
 2076              		.loc 1 652 42 is_stmt 1 discriminator 2 view .LVU623
 2077 00ec 0133     		adds	r3, r3, #1
 2078              	.LVL205:
 652:lib/utils.c   ****         {
 2079              		.loc 1 652 42 is_stmt 0 discriminator 2 view .LVU624
 2080 00ee 9BB2     		uxth	r3, r3
 2081              	.LVL206:
 2082              	.L141:
 652:lib/utils.c   ****         {
 2083              		.loc 1 652 32 is_stmt 1 discriminator 1 view .LVU625
 2084 00f0 A342     		cmp	r3, r4
 2085 00f2 29D2     		bcs	.L144
 2086              	.LBB65:
 655:lib/utils.c   ****             float src_y = y * scale_y;
 2087              		.loc 1 655 13 view .LVU626
 655:lib/utils.c   ****             float src_y = y * scale_y;
 2088              		.loc 1 655 29 is_stmt 0 view .LVU627
 2089 00f4 1A46     		mov	r2, r3
 2090 00f6 07EE903A 		vmov	s15, r3	@ int
 2091 00fa B8EEE77A 		vcvt.f32.s32	s14, s15
 655:lib/utils.c   ****             float src_y = y * scale_y;
 2092              		.loc 1 655 19 view .LVU628
 2093 00fe 27EE237A 		vmul.f32	s14, s14, s7
 2094              	.LVL207:
 656:lib/utils.c   **** 
 2095              		.loc 1 656 13 is_stmt 1 view .LVU629
 656:lib/utils.c   **** 
 2096              		.loc 1 656 29 is_stmt 0 view .LVU630
 2097 0102 DDF80480 		ldr	r8, [sp, #4]
 2098 0106 07EE908A 		vmov	s15, r8	@ int
 2099 010a F8EEE76A 		vcvt.f32.s32	s13, s15
 656:lib/utils.c   **** 
 2100              		.loc 1 656 19 view .LVU631
 2101 010e 66EE846A 		vmul.f32	s13, s13, s8
 2102              	.LVL208:
 659:lib/utils.c   ****             uint16_t y0 = (uint16_t)src_y;
 2103              		.loc 1 659 13 is_stmt 1 view .LVU632
 659:lib/utils.c   ****             uint16_t y0 = (uint16_t)src_y;
 2104              		.loc 1 659 22 is_stmt 0 view .LVU633
 2105 0112 FCEEC77A 		vcvt.u32.f32	s15, s14
 2106 0116 17EE90CA 		vmov	ip, s15	@ int
 2107 011a 1FFA8CFC 		uxth	ip, ip
 2108              	.LVL209:
 660:lib/utils.c   ****             uint16_t x1 = (x0 + 1 < width) ? x0 + 1 : x0;
 2109              		.loc 1 660 13 is_stmt 1 view .LVU634
 660:lib/utils.c   ****             uint16_t x1 = (x0 + 1 < width) ? x0 + 1 : x0;
 2110              		.loc 1 660 22 is_stmt 0 view .LVU635
 2111 011e FCEEE67A 		vcvt.u32.f32	s15, s13
 2112 0122 17EE90EA 		vmov	lr, s15	@ int
 2113 0126 1FFA8EFE 		uxth	lr, lr
 2114              	.LVL210:
 661:lib/utils.c   ****             uint16_t y1 = (y0 + 1 < height) ? y0 + 1 : y0;
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 52


 2115              		.loc 1 661 13 is_stmt 1 view .LVU636
 661:lib/utils.c   ****             uint16_t y1 = (y0 + 1 < height) ? y0 + 1 : y0;
 2116              		.loc 1 661 31 is_stmt 0 view .LVU637
 2117 012a E146     		mov	r9, ip
 2118 012c 0CF1010A 		add	r10, ip, #1
 661:lib/utils.c   ****             uint16_t y1 = (y0 + 1 < height) ? y0 + 1 : y0;
 2119              		.loc 1 661 22 view .LVU638
 2120 0130 5145     		cmp	r1, r10
 2121 0132 01DD     		ble	.L138
 661:lib/utils.c   ****             uint16_t y1 = (y0 + 1 < height) ? y0 + 1 : y0;
 2122              		.loc 1 661 22 discriminator 1 view .LVU639
 2123 0134 1FFA8AFC 		uxth	ip, r10
 2124              	.LVL211:
 2125              	.L138:
 662:lib/utils.c   **** 
 2126              		.loc 1 662 13 is_stmt 1 view .LVU640
 662:lib/utils.c   **** 
 2127              		.loc 1 662 31 is_stmt 0 view .LVU641
 2128 0138 F246     		mov	r10, lr
 2129 013a 0EF1010B 		add	fp, lr, #1
 662:lib/utils.c   **** 
 2130              		.loc 1 662 22 view .LVU642
 2131 013e 5E45     		cmp	r6, fp
 2132 0140 83DD     		ble	.L139
 662:lib/utils.c   **** 
 2133              		.loc 1 662 22 discriminator 1 view .LVU643
 2134 0142 1FFA8BFE 		uxth	lr, fp
 2135              	.LVL212:
 662:lib/utils.c   **** 
 2136              		.loc 1 662 22 discriminator 1 view .LVU644
 2137 0146 80E7     		b	.L139
 2138              	.LVL213:
 2139              	.L144:
 662:lib/utils.c   **** 
 2140              		.loc 1 662 22 discriminator 1 view .LVU645
 2141              	.LBE65:
 2142              	.LBE63:
 650:lib/utils.c   ****     {
 2143              		.loc 1 650 38 is_stmt 1 discriminator 2 view .LVU646
 2144 0148 019B     		ldr	r3, [sp, #4]
 2145              	.LVL214:
 650:lib/utils.c   ****     {
 2146              		.loc 1 650 38 is_stmt 0 discriminator 2 view .LVU647
 2147 014a 0133     		adds	r3, r3, #1
 2148 014c 9BB2     		uxth	r3, r3
 2149 014e 0193     		str	r3, [sp, #4]
 2150              	.LVL215:
 2151              	.L137:
 650:lib/utils.c   ****     {
 2152              		.loc 1 650 28 is_stmt 1 discriminator 1 view .LVU648
 2153 0150 019B     		ldr	r3, [sp, #4]
 2154 0152 BB42     		cmp	r3, r7
 2155 0154 01D2     		bcs	.L145
 2156              	.LBB66:
 652:lib/utils.c   ****         {
 2157              		.loc 1 652 23 is_stmt 0 view .LVU649
 2158 0156 0023     		movs	r3, #0
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 53


 2159 0158 CAE7     		b	.L141
 2160              	.L145:
 2161              	.LBE66:
 2162              	.LBE62:
 681:lib/utils.c   ****         }
 682:lib/utils.c   ****     }
 683:lib/utils.c   **** }
 2163              		.loc 1 683 1 view .LVU650
 2164 015a 03B0     		add	sp, sp, #12
 2165              	.LCFI17:
 2166              		.cfi_def_cfa_offset 36
 2167              		@ sp needed
 2168 015c BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2169              		.loc 1 683 1 view .LVU651
 2170              		.cfi_endproc
 2171              	.LFE13:
 2173              		.section	.text.grayImagEnlarge,"ax",%progbits
 2174              		.align	1
 2175              		.global	grayImagEnlarge
 2176              		.syntax unified
 2177              		.thumb
 2178              		.thumb_func
 2180              	grayImagEnlarge:
 2181              	.LVL216:
 2182              	.LFB14:
 684:lib/utils.c   **** 
 685:lib/utils.c   **** void grayImagEnlarge(uint16_t *src, uint16_t *dst, uint16_t width, uint16_t height, uint8_t n)
 686:lib/utils.c   **** {
 2183              		.loc 1 686 1 is_stmt 1 view -0
 2184              		.cfi_startproc
 2185              		@ args = 4, pretend = 0, frame = 0
 2186              		@ frame_needed = 0, uses_anonymous_args = 0
 2187              		.loc 1 686 1 is_stmt 0 view .LVU653
 2188 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 2189              	.LCFI18:
 2190              		.cfi_def_cfa_offset 20
 2191              		.cfi_offset 4, -20
 2192              		.cfi_offset 5, -16
 2193              		.cfi_offset 6, -12
 2194              		.cfi_offset 7, -8
 2195              		.cfi_offset 14, -4
 2196 0002 0446     		mov	r4, r0
 2197 0004 0D46     		mov	r5, r1
 2198 0006 1646     		mov	r6, r2
 2199 0008 9DF81400 		ldrb	r0, [sp, #20]	@ zero_extendqisi2
 2200              	.LVL217:
 687:lib/utils.c   ****     uint16_t out_w = width * n;
 2201              		.loc 1 687 5 is_stmt 1 view .LVU654
 2202              		.loc 1 687 14 is_stmt 0 view .LVU655
 2203 000c 10FB02F1 		smulbb	r1, r0, r2
 2204              	.LVL218:
 2205              		.loc 1 687 14 view .LVU656
 2206 0010 89B2     		uxth	r1, r1
 2207              	.LVL219:
 688:lib/utils.c   ****     uint16_t out_h = height * n;
 2208              		.loc 1 688 5 is_stmt 1 view .LVU657
 2209              		.loc 1 688 14 is_stmt 0 view .LVU658
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 54


 2210 0012 10FB03F7 		smulbb	r7, r0, r3
 2211 0016 BFB2     		uxth	r7, r7
 2212              	.LVL220:
 689:lib/utils.c   **** 
 690:lib/utils.c   ****     for (uint16_t y = 0; y < out_h; y++)
 2213              		.loc 1 690 5 is_stmt 1 view .LVU659
 2214              	.LBB67:
 2215              		.loc 1 690 10 view .LVU660
 2216              		.loc 1 690 19 is_stmt 0 view .LVU661
 2217 0018 0022     		movs	r2, #0
 2218              	.LVL221:
 2219              		.loc 1 690 5 view .LVU662
 2220 001a 11E0     		b	.L147
 2221              	.LVL222:
 2222              	.L148:
 2223              	.LBB68:
 2224              	.LBB69:
 691:lib/utils.c   ****     {
 692:lib/utils.c   ****         for (uint16_t x = 0; x < out_w; x++)
 693:lib/utils.c   ****         {
 694:lib/utils.c   ****             uint16_t src_x = x / n;
 2225              		.loc 1 694 13 is_stmt 1 view .LVU663
 695:lib/utils.c   ****             uint16_t src_y = y / n;
 2226              		.loc 1 695 13 view .LVU664
 696:lib/utils.c   ****             dst[y * out_w + x] = src[src_y * width + src_x];
 2227              		.loc 1 696 13 view .LVU665
 2228              		.loc 1 696 44 is_stmt 0 view .LVU666
 2229 001c 92FBF0FE 		sdiv	lr, r2, r0
 2230              	.LVL223:
 2231              		.loc 1 696 52 view .LVU667
 2232 0020 93FBF0FC 		sdiv	ip, r3, r0
 2233              	.LVL224:
 2234              		.loc 1 696 52 view .LVU668
 2235 0024 06FB0ECC 		mla	ip, r6, lr, ip
 2236              	.LVL225:
 2237              		.loc 1 696 27 view .LVU669
 2238 0028 02FB013E 		mla	lr, r2, r1, r3
 2239              	.LVL226:
 2240              		.loc 1 696 37 view .LVU670
 2241 002c 34F81CC0 		ldrh	ip, [r4, ip, lsl #1]
 2242              		.loc 1 696 32 view .LVU671
 2243 0030 25F81EC0 		strh	ip, [r5, lr, lsl #1]	@ movhi
 2244              	.LBE69:
 692:lib/utils.c   ****         {
 2245              		.loc 1 692 42 is_stmt 1 discriminator 3 view .LVU672
 2246 0034 0133     		adds	r3, r3, #1
 2247              	.LVL227:
 692:lib/utils.c   ****         {
 2248              		.loc 1 692 42 is_stmt 0 discriminator 3 view .LVU673
 2249 0036 9BB2     		uxth	r3, r3
 2250              	.LVL228:
 2251              	.L149:
 692:lib/utils.c   ****         {
 2252              		.loc 1 692 32 is_stmt 1 discriminator 1 view .LVU674
 2253 0038 8B42     		cmp	r3, r1
 2254 003a EFD3     		bcc	.L148
 2255              	.LBE68:
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 55


 690:lib/utils.c   ****     {
 2256              		.loc 1 690 38 discriminator 2 view .LVU675
 2257 003c 0132     		adds	r2, r2, #1
 2258              	.LVL229:
 690:lib/utils.c   ****     {
 2259              		.loc 1 690 38 is_stmt 0 discriminator 2 view .LVU676
 2260 003e 92B2     		uxth	r2, r2
 2261              	.LVL230:
 2262              	.L147:
 690:lib/utils.c   ****     {
 2263              		.loc 1 690 28 is_stmt 1 discriminator 1 view .LVU677
 2264 0040 BA42     		cmp	r2, r7
 2265 0042 01D2     		bcs	.L152
 2266              	.LBB70:
 692:lib/utils.c   ****         {
 2267              		.loc 1 692 23 is_stmt 0 view .LVU678
 2268 0044 0023     		movs	r3, #0
 2269 0046 F7E7     		b	.L149
 2270              	.L152:
 2271              	.LBE70:
 2272              	.LBE67:
 697:lib/utils.c   ****         }
 698:lib/utils.c   ****     }
 699:lib/utils.c   **** }
 2273              		.loc 1 699 1 view .LVU679
 2274 0048 F0BD     		pop	{r4, r5, r6, r7, pc}
 2275              		.loc 1 699 1 view .LVU680
 2276              		.cfi_endproc
 2277              	.LFE14:
 2279              		.section	.text.rgb565ImageEnlarge,"ax",%progbits
 2280              		.align	1
 2281              		.global	rgb565ImageEnlarge
 2282              		.syntax unified
 2283              		.thumb
 2284              		.thumb_func
 2286              	rgb565ImageEnlarge:
 2287              	.LVL231:
 2288              	.LFB15:
 700:lib/utils.c   **** 
 701:lib/utils.c   **** void rgb565ImageEnlarge(uint16_t *src, uint16_t *dst, uint16_t width, uint16_t height, uint8_t n)
 702:lib/utils.c   **** {
 2289              		.loc 1 702 1 is_stmt 1 view -0
 2290              		.cfi_startproc
 2291              		@ args = 4, pretend = 0, frame = 0
 2292              		@ frame_needed = 0, uses_anonymous_args = 0
 2293              		.loc 1 702 1 is_stmt 0 view .LVU682
 2294 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 2295              	.LCFI19:
 2296              		.cfi_def_cfa_offset 20
 2297              		.cfi_offset 4, -20
 2298              		.cfi_offset 5, -16
 2299              		.cfi_offset 6, -12
 2300              		.cfi_offset 7, -8
 2301              		.cfi_offset 14, -4
 2302 0002 0446     		mov	r4, r0
 2303 0004 0D46     		mov	r5, r1
 2304 0006 1646     		mov	r6, r2
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 56


 2305 0008 9DF81400 		ldrb	r0, [sp, #20]	@ zero_extendqisi2
 2306              	.LVL232:
 703:lib/utils.c   ****     // 计算输出图像的宽高
 704:lib/utils.c   ****     uint16_t out_w = width * n;
 2307              		.loc 1 704 5 is_stmt 1 view .LVU683
 2308              		.loc 1 704 14 is_stmt 0 view .LVU684
 2309 000c 10FB02F1 		smulbb	r1, r0, r2
 2310              	.LVL233:
 2311              		.loc 1 704 14 view .LVU685
 2312 0010 89B2     		uxth	r1, r1
 2313              	.LVL234:
 705:lib/utils.c   ****     uint16_t out_h = height * n;
 2314              		.loc 1 705 5 is_stmt 1 view .LVU686
 2315              		.loc 1 705 14 is_stmt 0 view .LVU687
 2316 0012 10FB03F7 		smulbb	r7, r0, r3
 2317 0016 BFB2     		uxth	r7, r7
 2318              	.LVL235:
 706:lib/utils.c   **** 
 707:lib/utils.c   ****     for (uint16_t y = 0; y < out_h; y++)
 2319              		.loc 1 707 5 is_stmt 1 view .LVU688
 2320              	.LBB71:
 2321              		.loc 1 707 10 view .LVU689
 2322              		.loc 1 707 19 is_stmt 0 view .LVU690
 2323 0018 0022     		movs	r2, #0
 2324              	.LVL236:
 2325              		.loc 1 707 5 view .LVU691
 2326 001a 11E0     		b	.L154
 2327              	.LVL237:
 2328              	.L155:
 2329              	.LBB72:
 2330              	.LBB73:
 708:lib/utils.c   ****     {
 709:lib/utils.c   ****         for (uint16_t x = 0; x < out_w; x++)
 710:lib/utils.c   ****         {
 711:lib/utils.c   ****             // 对应输入图像的坐标（最近邻插值）
 712:lib/utils.c   ****             uint16_t src_x = x / n;
 2331              		.loc 1 712 13 is_stmt 1 view .LVU692
 713:lib/utils.c   ****             uint16_t src_y = y / n;
 2332              		.loc 1 713 13 view .LVU693
 714:lib/utils.c   **** 
 715:lib/utils.c   ****             // 获取输入图像的 RGB565 值并赋给输出图像
 716:lib/utils.c   ****             dst[y * out_w + x] = src[src_y * width + src_x];
 2333              		.loc 1 716 13 view .LVU694
 2334              		.loc 1 716 44 is_stmt 0 view .LVU695
 2335 001c 92FBF0FE 		sdiv	lr, r2, r0
 2336              	.LVL238:
 2337              		.loc 1 716 52 view .LVU696
 2338 0020 93FBF0FC 		sdiv	ip, r3, r0
 2339              	.LVL239:
 2340              		.loc 1 716 52 view .LVU697
 2341 0024 06FB0ECC 		mla	ip, r6, lr, ip
 2342              	.LVL240:
 2343              		.loc 1 716 27 view .LVU698
 2344 0028 02FB013E 		mla	lr, r2, r1, r3
 2345              	.LVL241:
 2346              		.loc 1 716 37 view .LVU699
 2347 002c 34F81CC0 		ldrh	ip, [r4, ip, lsl #1]
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 57


 2348              		.loc 1 716 32 view .LVU700
 2349 0030 25F81EC0 		strh	ip, [r5, lr, lsl #1]	@ movhi
 2350              	.LBE73:
 709:lib/utils.c   ****         {
 2351              		.loc 1 709 42 is_stmt 1 discriminator 3 view .LVU701
 2352 0034 0133     		adds	r3, r3, #1
 2353              	.LVL242:
 709:lib/utils.c   ****         {
 2354              		.loc 1 709 42 is_stmt 0 discriminator 3 view .LVU702
 2355 0036 9BB2     		uxth	r3, r3
 2356              	.LVL243:
 2357              	.L156:
 709:lib/utils.c   ****         {
 2358              		.loc 1 709 32 is_stmt 1 discriminator 1 view .LVU703
 2359 0038 8B42     		cmp	r3, r1
 2360 003a EFD3     		bcc	.L155
 2361              	.LBE72:
 707:lib/utils.c   ****     {
 2362              		.loc 1 707 38 discriminator 2 view .LVU704
 2363 003c 0132     		adds	r2, r2, #1
 2364              	.LVL244:
 707:lib/utils.c   ****     {
 2365              		.loc 1 707 38 is_stmt 0 discriminator 2 view .LVU705
 2366 003e 92B2     		uxth	r2, r2
 2367              	.LVL245:
 2368              	.L154:
 707:lib/utils.c   ****     {
 2369              		.loc 1 707 28 is_stmt 1 discriminator 1 view .LVU706
 2370 0040 BA42     		cmp	r2, r7
 2371 0042 01D2     		bcs	.L159
 2372              	.LBB74:
 709:lib/utils.c   ****         {
 2373              		.loc 1 709 23 is_stmt 0 view .LVU707
 2374 0044 0023     		movs	r3, #0
 2375 0046 F7E7     		b	.L156
 2376              	.L159:
 2377              	.LBE74:
 2378              	.LBE71:
 717:lib/utils.c   ****         }
 718:lib/utils.c   ****     }
 719:lib/utils.c   **** }
 2379              		.loc 1 719 1 view .LVU708
 2380 0048 F0BD     		pop	{r4, r5, r6, r7, pc}
 2381              		.loc 1 719 1 view .LVU709
 2382              		.cfi_endproc
 2383              	.LFE15:
 2385              		.section	.text.rgb565ImageEnlargeF,"ax",%progbits
 2386              		.align	1
 2387              		.global	rgb565ImageEnlargeF
 2388              		.syntax unified
 2389              		.thumb
 2390              		.thumb_func
 2392              	rgb565ImageEnlargeF:
 2393              	.LVL246:
 2394              	.LFB16:
 720:lib/utils.c   **** 
 721:lib/utils.c   **** // 提取RGB565格式的颜色通道
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 58


 722:lib/utils.c   **** #define GET_R(c) (((c) >> 11) & 0x1F)
 723:lib/utils.c   **** #define GET_G(c) (((c) >> 5) & 0x3F)
 724:lib/utils.c   **** #define GET_B(c) ((c) & 0x1F)
 725:lib/utils.c   **** 
 726:lib/utils.c   **** // 合成RGB565格式的颜色
 727:lib/utils.c   **** #define RGB565(r, g, b) (((r) << 11) | ((g) << 5) | (b))
 728:lib/utils.c   **** 
 729:lib/utils.c   **** void rgb565ImageEnlargeF(uint16_t *src, uint16_t *dst, uint16_t w_in, uint16_t h_in, uint16_t w_out
 730:lib/utils.c   **** {
 2395              		.loc 1 730 1 is_stmt 1 view -0
 2396              		.cfi_startproc
 2397              		@ args = 8, pretend = 0, frame = 8
 2398              		@ frame_needed = 0, uses_anonymous_args = 0
 2399              		.loc 1 730 1 is_stmt 0 view .LVU711
 2400 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2401              	.LCFI20:
 2402              		.cfi_def_cfa_offset 36
 2403              		.cfi_offset 4, -36
 2404              		.cfi_offset 5, -32
 2405              		.cfi_offset 6, -28
 2406              		.cfi_offset 7, -24
 2407              		.cfi_offset 8, -20
 2408              		.cfi_offset 9, -16
 2409              		.cfi_offset 10, -12
 2410              		.cfi_offset 11, -8
 2411              		.cfi_offset 14, -4
 2412 0004 83B0     		sub	sp, sp, #12
 2413              	.LCFI21:
 2414              		.cfi_def_cfa_offset 48
 2415 0006 0191     		str	r1, [sp, #4]
 2416 0008 1146     		mov	r1, r2
 2417              	.LVL247:
 2418              		.loc 1 730 1 view .LVU712
 2419 000a 1E46     		mov	r6, r3
 2420 000c BDF83050 		ldrh	r5, [sp, #48]
 2421 0010 BDF83430 		ldrh	r3, [sp, #52]
 2422              	.LVL248:
 2423              		.loc 1 730 1 view .LVU713
 2424 0014 06EE103A 		vmov	s12, r3	@ int
 731:lib/utils.c   ****     for (uint16_t y = 0; y < h_out; y++)
 2425              		.loc 1 731 5 is_stmt 1 view .LVU714
 2426              	.LBB75:
 2427              		.loc 1 731 10 view .LVU715
 2428              	.LVL249:
 2429              		.loc 1 731 19 is_stmt 0 view .LVU716
 2430 0018 4FF0000B 		mov	fp, #0
 2431              		.loc 1 731 5 view .LVU717
 2432 001c FBE0     		b	.L161
 2433              	.LVL250:
 2434              	.L163:
 2435              	.LBB76:
 2436              	.LBB77:
 732:lib/utils.c   ****     {
 733:lib/utils.c   ****         for (uint16_t x = 0; x < w_out; x++)
 734:lib/utils.c   ****         {
 735:lib/utils.c   ****             // 计算在原图上的对应位置（浮点数）
 736:lib/utils.c   ****             float src_x = ((float)x / w_out) * (w_in - 1);
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 59


 737:lib/utils.c   ****             float src_y = ((float)y / h_out) * (h_in - 1);
 738:lib/utils.c   **** 
 739:lib/utils.c   ****             // 计算左上角像素的坐标
 740:lib/utils.c   ****             uint16_t x0 = (uint16_t)src_x;
 741:lib/utils.c   ****             uint16_t y0 = (uint16_t)src_y;
 742:lib/utils.c   ****             uint16_t x1 = (x0 + 1 < w_in) ? (x0 + 1) : x0;
 743:lib/utils.c   ****             uint16_t y1 = (y0 + 1 < h_in) ? (y0 + 1) : y0;
 744:lib/utils.c   **** 
 745:lib/utils.c   ****             // 获取四个相邻像素的颜色值
 746:lib/utils.c   ****             uint16_t c00 = src[y0 * w_in + x0];
 2437              		.loc 1 746 13 is_stmt 1 view .LVU718
 2438              		.loc 1 746 35 is_stmt 0 view .LVU719
 2439 001e 0AFB01F7 		mul	r7, r10, r1
 2440              		.loc 1 746 42 view .LVU720
 2441 0022 09EB070C 		add	ip, r9, r7
 2442              		.loc 1 746 22 view .LVU721
 2443 0026 30F81CC0 		ldrh	ip, [r0, ip, lsl #1]
 2444              	.LVL251:
 747:lib/utils.c   ****             uint16_t c01 = src[y0 * w_in + x1];
 2445              		.loc 1 747 13 is_stmt 1 view .LVU722
 2446              		.loc 1 747 42 is_stmt 0 view .LVU723
 2447 002a 7744     		add	r7, r7, lr
 2448              		.loc 1 747 22 view .LVU724
 2449 002c 30F81770 		ldrh	r7, [r0, r7, lsl #1]
 2450              	.LVL252:
 748:lib/utils.c   ****             uint16_t c10 = src[y1 * w_in + x0];
 2451              		.loc 1 748 13 is_stmt 1 view .LVU725
 2452              		.loc 1 748 35 is_stmt 0 view .LVU726
 2453 0030 01FB03F3 		mul	r3, r1, r3
 2454              	.LVL253:
 2455              		.loc 1 748 42 view .LVU727
 2456 0034 09EB0308 		add	r8, r9, r3
 2457              		.loc 1 748 22 view .LVU728
 2458 0038 30F81880 		ldrh	r8, [r0, r8, lsl #1]
 2459              	.LVL254:
 749:lib/utils.c   ****             uint16_t c11 = src[y1 * w_in + x1];
 2460              		.loc 1 749 13 is_stmt 1 view .LVU729
 2461              		.loc 1 749 42 is_stmt 0 view .LVU730
 2462 003c 9E44     		add	lr, lr, r3
 2463              	.LVL255:
 2464              		.loc 1 749 22 view .LVU731
 2465 003e 30F81E30 		ldrh	r3, [r0, lr, lsl #1]
 2466              	.LVL256:
 750:lib/utils.c   **** 
 751:lib/utils.c   ****             // 计算权重
 752:lib/utils.c   ****             float dx = src_x - x0;
 2467              		.loc 1 752 13 is_stmt 1 view .LVU732
 2468              		.loc 1 752 30 is_stmt 0 view .LVU733
 2469 0042 07EE909A 		vmov	s15, r9	@ int
 2470 0046 F8EEE77A 		vcvt.f32.s32	s15, s15
 2471              		.loc 1 752 19 view .LVU734
 2472 004a 37EE677A 		vsub.f32	s14, s14, s15
 2473              	.LVL257:
 753:lib/utils.c   ****             float dy = src_y - y0;
 2474              		.loc 1 753 13 is_stmt 1 view .LVU735
 2475              		.loc 1 753 30 is_stmt 0 view .LVU736
 2476 004e 07EE90AA 		vmov	s15, r10	@ int
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 60


 2477 0052 F8EEE77A 		vcvt.f32.s32	s15, s15
 2478              		.loc 1 753 19 view .LVU737
 2479 0056 76EEE76A 		vsub.f32	s13, s13, s15
 2480              	.LVL258:
 754:lib/utils.c   **** 
 755:lib/utils.c   ****             // 分别计算R、G、B分量
 756:lib/utils.c   ****             uint8_t r = (1 - dx) * (1 - dy) * GET_R(c00) + dx * (1 - dy) * GET_R(c01) + (1 - dx) * 
 2481              		.loc 1 756 13 is_stmt 1 view .LVU738
 2482              		.loc 1 756 28 is_stmt 0 view .LVU739
 2483 005a F7EE005A 		vmov.f32	s11, #1.0e+0
 2484              	.LVL259:
 2485              		.loc 1 756 28 view .LVU740
 2486 005e 35EEC75A 		vsub.f32	s10, s11, s14
 2487              		.loc 1 756 39 view .LVU741
 2488 0062 75EEE65A 		vsub.f32	s11, s11, s13
 2489              		.loc 1 756 34 view .LVU742
 2490 0066 65EE254A 		vmul.f32	s9, s10, s11
 2491              		.loc 1 756 47 view .LVU743
 2492 006a 4FEADC24 		lsr	r4, ip, #11
 2493 006e 07EE904A 		vmov	s15, r4	@ int
 2494              		.loc 1 756 45 view .LVU744
 2495 0072 F8EEE77A 		vcvt.f32.s32	s15, s15
 2496 0076 67EEA47A 		vmul.f32	s15, s15, s9
 2497              		.loc 1 756 63 view .LVU745
 2498 007a 65EE875A 		vmul.f32	s11, s11, s14
 2499              		.loc 1 756 76 view .LVU746
 2500 007e FC0A     		lsrs	r4, r7, #11
 2501 0080 04EE104A 		vmov	s8, r4	@ int
 2502              		.loc 1 756 74 view .LVU747
 2503 0084 B8EEC44A 		vcvt.f32.s32	s8, s8
 2504 0088 24EE254A 		vmul.f32	s8, s8, s11
 2505              		.loc 1 756 58 view .LVU748
 2506 008c 77EE847A 		vadd.f32	s15, s15, s8
 2507              		.loc 1 756 98 view .LVU749
 2508 0090 25EE265A 		vmul.f32	s10, s10, s13
 2509              		.loc 1 756 105 view .LVU750
 2510 0094 4FEAD824 		lsr	r4, r8, #11
 2511 0098 04EE104A 		vmov	s8, r4	@ int
 2512              		.loc 1 756 103 view .LVU751
 2513 009c B8EEC44A 		vcvt.f32.s32	s8, s8
 2514 00a0 24EE054A 		vmul.f32	s8, s8, s10
 2515              		.loc 1 756 87 view .LVU752
 2516 00a4 77EE847A 		vadd.f32	s15, s15, s8
 2517              		.loc 1 756 121 view .LVU753
 2518 00a8 27EE267A 		vmul.f32	s14, s14, s13
 2519              	.LVL260:
 2520              		.loc 1 756 128 view .LVU754
 2521 00ac DC0A     		lsrs	r4, r3, #11
 2522 00ae 06EE904A 		vmov	s13, r4	@ int
 2523              	.LVL261:
 2524              		.loc 1 756 126 view .LVU755
 2525 00b2 F8EEE66A 		vcvt.f32.s32	s13, s13
 2526 00b6 66EE876A 		vmul.f32	s13, s13, s14
 2527              		.loc 1 756 116 view .LVU756
 2528 00ba 77EEA67A 		vadd.f32	s15, s15, s13
 2529              		.loc 1 756 21 view .LVU757
 2530 00be FCEEE77A 		vcvt.u32.f32	s15, s15
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 61


 2531 00c2 CDED007A 		vstr.32	s15, [sp]	@ int
 2532 00c6 9DF800E0 		ldrb	lr, [sp]	@ zero_extendqisi2
 2533              	.LVL262:
 757:lib/utils.c   ****             uint8_t g = (1 - dx) * (1 - dy) * GET_G(c00) + dx * (1 - dy) * GET_G(c01) + (1 - dx) * 
 2534              		.loc 1 757 13 is_stmt 1 view .LVU758
 2535              		.loc 1 757 47 is_stmt 0 view .LVU759
 2536 00ca CCF34514 		ubfx	r4, ip, #5, #6
 2537 00ce 07EE904A 		vmov	s15, r4	@ int
 2538              		.loc 1 757 45 view .LVU760
 2539 00d2 F8EEE77A 		vcvt.f32.s32	s15, s15
 2540 00d6 67EEA47A 		vmul.f32	s15, s15, s9
 2541              		.loc 1 757 76 view .LVU761
 2542 00da C7F34514 		ubfx	r4, r7, #5, #6
 2543 00de 06EE904A 		vmov	s13, r4	@ int
 2544              		.loc 1 757 74 view .LVU762
 2545 00e2 F8EEE66A 		vcvt.f32.s32	s13, s13
 2546 00e6 66EEA56A 		vmul.f32	s13, s13, s11
 2547              		.loc 1 757 58 view .LVU763
 2548 00ea 77EEA67A 		vadd.f32	s15, s15, s13
 2549              		.loc 1 757 105 view .LVU764
 2550 00ee C8F34514 		ubfx	r4, r8, #5, #6
 2551 00f2 06EE904A 		vmov	s13, r4	@ int
 2552              		.loc 1 757 103 view .LVU765
 2553 00f6 F8EEE66A 		vcvt.f32.s32	s13, s13
 2554 00fa 66EE856A 		vmul.f32	s13, s13, s10
 2555              		.loc 1 757 87 view .LVU766
 2556 00fe 77EEA67A 		vadd.f32	s15, s15, s13
 2557              		.loc 1 757 128 view .LVU767
 2558 0102 C3F34514 		ubfx	r4, r3, #5, #6
 2559 0106 06EE904A 		vmov	s13, r4	@ int
 2560              		.loc 1 757 126 view .LVU768
 2561 010a F8EEE66A 		vcvt.f32.s32	s13, s13
 2562 010e 66EE876A 		vmul.f32	s13, s13, s14
 2563              		.loc 1 757 116 view .LVU769
 2564 0112 77EEA67A 		vadd.f32	s15, s15, s13
 2565              		.loc 1 757 21 view .LVU770
 2566 0116 FCEEE77A 		vcvt.u32.f32	s15, s15
 2567 011a CDED007A 		vstr.32	s15, [sp]	@ int
 2568 011e 9DF80090 		ldrb	r9, [sp]	@ zero_extendqisi2
 2569              	.LVL263:
 758:lib/utils.c   ****             uint8_t b = (1 - dx) * (1 - dy) * GET_B(c00) + dx * (1 - dy) * GET_B(c01) + (1 - dx) * 
 2570              		.loc 1 758 13 is_stmt 1 view .LVU771
 2571              		.loc 1 758 47 is_stmt 0 view .LVU772
 2572 0122 0CF01F04 		and	r4, ip, #31
 2573 0126 07EE904A 		vmov	s15, r4	@ int
 2574              		.loc 1 758 45 view .LVU773
 2575 012a F8EEE77A 		vcvt.f32.s32	s15, s15
 2576 012e 67EEA47A 		vmul.f32	s15, s15, s9
 2577              		.loc 1 758 76 view .LVU774
 2578 0132 07F01F04 		and	r4, r7, #31
 2579 0136 06EE904A 		vmov	s13, r4	@ int
 2580              		.loc 1 758 74 view .LVU775
 2581 013a F8EEE66A 		vcvt.f32.s32	s13, s13
 2582 013e 66EEA56A 		vmul.f32	s13, s13, s11
 2583              		.loc 1 758 58 view .LVU776
 2584 0142 77EEA67A 		vadd.f32	s15, s15, s13
 2585              		.loc 1 758 105 view .LVU777
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 62


 2586 0146 08F01F04 		and	r4, r8, #31
 2587 014a 06EE904A 		vmov	s13, r4	@ int
 2588              		.loc 1 758 103 view .LVU778
 2589 014e F8EEE66A 		vcvt.f32.s32	s13, s13
 2590 0152 66EE856A 		vmul.f32	s13, s13, s10
 2591              		.loc 1 758 87 view .LVU779
 2592 0156 77EEA67A 		vadd.f32	s15, s15, s13
 2593              		.loc 1 758 128 view .LVU780
 2594 015a 03F01F03 		and	r3, r3, #31
 2595              	.LVL264:
 2596              		.loc 1 758 126 view .LVU781
 2597 015e 06EE903A 		vmov	s13, r3	@ int
 2598 0162 F8EEE66A 		vcvt.f32.s32	s13, s13
 2599 0166 26EE877A 		vmul.f32	s14, s13, s14
 2600              		.loc 1 758 116 view .LVU782
 2601 016a 77EE877A 		vadd.f32	s15, s15, s14
 2602              		.loc 1 758 21 view .LVU783
 2603 016e FCEEE77A 		vcvt.u32.f32	s15, s15
 2604 0172 CDED007A 		vstr.32	s15, [sp]	@ int
 2605 0176 9DF80030 		ldrb	r3, [sp]	@ zero_extendqisi2
 2606              	.LVL265:
 759:lib/utils.c   **** 
 760:lib/utils.c   ****             // 组合RGB565格式
 761:lib/utils.c   ****             dst[y * w_out + x] = RGB565(r, g, b);
 2607              		.loc 1 761 13 is_stmt 1 view .LVU784
 2608              		.loc 1 761 34 is_stmt 0 view .LVU785
 2609 017a 4FEA491C 		lsl	ip, r9, #5
 2610              	.LVL266:
 2611              		.loc 1 761 34 view .LVU786
 2612 017e 4CEACE2C 		orr	ip, ip, lr, lsl #11
 2613 0182 0FFA8CFC 		sxth	ip, ip
 2614              		.loc 1 761 27 view .LVU787
 2615 0186 05FB0B27 		mla	r7, r5, fp, r2
 2616              	.LVL267:
 2617              		.loc 1 761 34 view .LVU788
 2618 018a 4CEA030C 		orr	ip, ip, r3
 2619              		.loc 1 761 32 view .LVU789
 2620 018e 019B     		ldr	r3, [sp, #4]
 2621              	.LVL268:
 2622              		.loc 1 761 32 view .LVU790
 2623 0190 23F817C0 		strh	ip, [r3, r7, lsl #1]	@ movhi
 2624              	.LVL269:
 2625              		.loc 1 761 32 view .LVU791
 2626              	.LBE77:
 733:lib/utils.c   ****         {
 2627              		.loc 1 733 42 is_stmt 1 discriminator 2 view .LVU792
 2628 0194 0132     		adds	r2, r2, #1
 2629              	.LVL270:
 733:lib/utils.c   ****         {
 2630              		.loc 1 733 42 is_stmt 0 discriminator 2 view .LVU793
 2631 0196 92B2     		uxth	r2, r2
 2632              	.LVL271:
 2633              	.L165:
 733:lib/utils.c   ****         {
 2634              		.loc 1 733 32 is_stmt 1 discriminator 1 view .LVU794
 2635 0198 AA42     		cmp	r2, r5
 2636 019a 38D2     		bcs	.L168
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 63


 2637              	.LBB78:
 736:lib/utils.c   ****             float src_y = ((float)y / h_out) * (h_in - 1);
 2638              		.loc 1 736 13 view .LVU795
 736:lib/utils.c   ****             float src_y = ((float)y / h_out) * (h_in - 1);
 2639              		.loc 1 736 28 is_stmt 0 view .LVU796
 2640 019c 07EE902A 		vmov	s15, r2	@ int
 2641 01a0 F8EE677A 		vcvt.f32.u32	s15, s15
 736:lib/utils.c   ****             float src_y = ((float)y / h_out) * (h_in - 1);
 2642              		.loc 1 736 37 view .LVU797
 2643 01a4 07EE105A 		vmov	s14, r5	@ int
 2644 01a8 F8EEC76A 		vcvt.f32.s32	s13, s14
 2645 01ac 87EEA67A 		vdiv.f32	s14, s15, s13
 736:lib/utils.c   ****             float src_y = ((float)y / h_out) * (h_in - 1);
 2646              		.loc 1 736 54 view .LVU798
 2647 01b0 4B1E     		subs	r3, r1, #1
 2648 01b2 07EE903A 		vmov	s15, r3	@ int
 736:lib/utils.c   ****             float src_y = ((float)y / h_out) * (h_in - 1);
 2649              		.loc 1 736 46 view .LVU799
 2650 01b6 F8EEE77A 		vcvt.f32.s32	s15, s15
 736:lib/utils.c   ****             float src_y = ((float)y / h_out) * (h_in - 1);
 2651              		.loc 1 736 19 view .LVU800
 2652 01ba 27EE277A 		vmul.f32	s14, s14, s15
 2653              	.LVL272:
 737:lib/utils.c   **** 
 2654              		.loc 1 737 13 is_stmt 1 view .LVU801
 737:lib/utils.c   **** 
 2655              		.loc 1 737 28 is_stmt 0 view .LVU802
 2656 01be 07EE90BA 		vmov	s15, fp	@ int
 2657 01c2 F8EE677A 		vcvt.f32.u32	s15, s15
 737:lib/utils.c   **** 
 2658              		.loc 1 737 37 view .LVU803
 2659 01c6 F8EEC65A 		vcvt.f32.s32	s11, s12
 2660 01ca C7EEA56A 		vdiv.f32	s13, s15, s11
 737:lib/utils.c   **** 
 2661              		.loc 1 737 54 view .LVU804
 2662 01ce 731E     		subs	r3, r6, #1
 2663 01d0 07EE903A 		vmov	s15, r3	@ int
 737:lib/utils.c   **** 
 2664              		.loc 1 737 46 view .LVU805
 2665 01d4 F8EEE77A 		vcvt.f32.s32	s15, s15
 737:lib/utils.c   **** 
 2666              		.loc 1 737 19 view .LVU806
 2667 01d8 66EEA76A 		vmul.f32	s13, s13, s15
 2668              	.LVL273:
 740:lib/utils.c   ****             uint16_t y0 = (uint16_t)src_y;
 2669              		.loc 1 740 13 is_stmt 1 view .LVU807
 740:lib/utils.c   ****             uint16_t y0 = (uint16_t)src_y;
 2670              		.loc 1 740 22 is_stmt 0 view .LVU808
 2671 01dc FCEEC77A 		vcvt.u32.f32	s15, s14
 2672 01e0 17EE903A 		vmov	r3, s15	@ int
 2673 01e4 1FFA83FE 		uxth	lr, r3
 2674              	.LVL274:
 741:lib/utils.c   ****             uint16_t x1 = (x0 + 1 < w_in) ? (x0 + 1) : x0;
 2675              		.loc 1 741 13 is_stmt 1 view .LVU809
 741:lib/utils.c   ****             uint16_t x1 = (x0 + 1 < w_in) ? (x0 + 1) : x0;
 2676              		.loc 1 741 22 is_stmt 0 view .LVU810
 2677 01e8 FCEEE67A 		vcvt.u32.f32	s15, s13
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 64


 2678 01ec 17EE903A 		vmov	r3, s15	@ int
 2679 01f0 9BB2     		uxth	r3, r3
 2680              	.LVL275:
 742:lib/utils.c   ****             uint16_t y1 = (y0 + 1 < h_in) ? (y0 + 1) : y0;
 2681              		.loc 1 742 13 is_stmt 1 view .LVU811
 742:lib/utils.c   ****             uint16_t y1 = (y0 + 1 < h_in) ? (y0 + 1) : y0;
 2682              		.loc 1 742 31 is_stmt 0 view .LVU812
 2683 01f2 F146     		mov	r9, lr
 2684 01f4 0EF10107 		add	r7, lr, #1
 742:lib/utils.c   ****             uint16_t y1 = (y0 + 1 < h_in) ? (y0 + 1) : y0;
 2685              		.loc 1 742 22 view .LVU813
 2686 01f8 B942     		cmp	r1, r7
 2687 01fa 01DD     		ble	.L162
 742:lib/utils.c   ****             uint16_t y1 = (y0 + 1 < h_in) ? (y0 + 1) : y0;
 2688              		.loc 1 742 22 discriminator 1 view .LVU814
 2689 01fc 1FFA87FE 		uxth	lr, r7
 2690              	.LVL276:
 2691              	.L162:
 743:lib/utils.c   **** 
 2692              		.loc 1 743 13 is_stmt 1 view .LVU815
 743:lib/utils.c   **** 
 2693              		.loc 1 743 31 is_stmt 0 view .LVU816
 2694 0200 9A46     		mov	r10, r3
 2695 0202 5F1C     		adds	r7, r3, #1
 743:lib/utils.c   **** 
 2696              		.loc 1 743 22 view .LVU817
 2697 0204 BE42     		cmp	r6, r7
 2698 0206 7FF70AAF 		ble	.L163
 743:lib/utils.c   **** 
 2699              		.loc 1 743 22 discriminator 1 view .LVU818
 2700 020a BBB2     		uxth	r3, r7
 2701              	.LVL277:
 743:lib/utils.c   **** 
 2702              		.loc 1 743 22 discriminator 1 view .LVU819
 2703 020c 07E7     		b	.L163
 2704              	.LVL278:
 2705              	.L168:
 743:lib/utils.c   **** 
 2706              		.loc 1 743 22 discriminator 1 view .LVU820
 2707              	.LBE78:
 2708              	.LBE76:
 731:lib/utils.c   ****     {
 2709              		.loc 1 731 38 is_stmt 1 discriminator 2 view .LVU821
 2710 020e 0BF1010B 		add	fp, fp, #1
 2711              	.LVL279:
 731:lib/utils.c   ****     {
 2712              		.loc 1 731 38 is_stmt 0 discriminator 2 view .LVU822
 2713 0212 1FFA8BFB 		uxth	fp, fp
 2714              	.LVL280:
 2715              	.L161:
 731:lib/utils.c   ****     {
 2716              		.loc 1 731 28 is_stmt 1 discriminator 1 view .LVU823
 2717 0216 16EE103A 		vmov	r3, s12	@ int
 2718 021a 9B45     		cmp	fp, r3
 2719 021c 01D2     		bcs	.L169
 2720              	.LBB79:
 733:lib/utils.c   ****         {
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 65


 2721              		.loc 1 733 23 is_stmt 0 view .LVU824
 2722 021e 0022     		movs	r2, #0
 2723 0220 BAE7     		b	.L165
 2724              	.L169:
 2725              	.LBE79:
 2726              	.LBE75:
 762:lib/utils.c   ****         }
 763:lib/utils.c   ****     }
 764:lib/utils.c   **** }
 2727              		.loc 1 764 1 view .LVU825
 2728 0222 03B0     		add	sp, sp, #12
 2729              	.LCFI22:
 2730              		.cfi_def_cfa_offset 36
 2731              		@ sp needed
 2732 0224 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2733              		.loc 1 764 1 view .LVU826
 2734              		.cfi_endproc
 2735              	.LFE16:
 2737              		.section	.text.rgb565Rotate90,"ax",%progbits
 2738              		.align	1
 2739              		.global	rgb565Rotate90
 2740              		.syntax unified
 2741              		.thumb
 2742              		.thumb_func
 2744              	rgb565Rotate90:
 2745              	.LVL281:
 2746              	.LFB17:
 765:lib/utils.c   ****  
 766:lib/utils.c   **** void rgb565Rotate90(uint16_t *src, uint16_t *dst, uint16_t width, uint16_t height)
 767:lib/utils.c   **** {
 2747              		.loc 1 767 1 is_stmt 1 view -0
 2748              		.cfi_startproc
 2749              		@ args = 0, pretend = 0, frame = 0
 2750              		@ frame_needed = 0, uses_anonymous_args = 0
 2751              		.loc 1 767 1 is_stmt 0 view .LVU828
 2752 0000 30B5     		push	{r4, r5, lr}
 2753              	.LCFI23:
 2754              		.cfi_def_cfa_offset 12
 2755              		.cfi_offset 4, -12
 2756              		.cfi_offset 5, -8
 2757              		.cfi_offset 14, -4
 2758 0002 0C46     		mov	r4, r1
 2759 0004 1146     		mov	r1, r2
 2760              	.LVL282:
 768:lib/utils.c   ****     uint32_t index = 0;
 2761              		.loc 1 768 5 is_stmt 1 view .LVU829
 769:lib/utils.c   ****     for (uint16_t y = 0; y < height; y++)
 2762              		.loc 1 769 5 view .LVU830
 2763              	.LBB80:
 2764              		.loc 1 769 10 view .LVU831
 2765              		.loc 1 769 19 is_stmt 0 view .LVU832
 2766 0006 0022     		movs	r2, #0
 2767              	.LVL283:
 2768              		.loc 1 769 5 view .LVU833
 2769 0008 13E0     		b	.L171
 2770              	.LVL284:
 2771              	.L172:
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 66


 2772              	.LBB81:
 770:lib/utils.c   ****     {
 771:lib/utils.c   ****         for (uint16_t x = 0; x < width; x++)
 772:lib/utils.c   ****         {
 773:lib/utils.c   ****             dst[x * height + (height - y - 1)] = src[y * width + x];
 2773              		.loc 1 773 13 is_stmt 1 view .LVU834
 2774              		.loc 1 773 64 is_stmt 0 view .LVU835
 2775 000a 02FB01C5 		mla	r5, r2, r1, ip
 2776              		.loc 1 773 38 view .LVU836
 2777 000e A3EB020E 		sub	lr, r3, r2
 2778              		.loc 1 773 42 view .LVU837
 2779 0012 0EF1FF3E 		add	lr, lr, #-1
 2780              		.loc 1 773 28 view .LVU838
 2781 0016 03FB0CEE 		mla	lr, r3, ip, lr
 2782              		.loc 1 773 53 view .LVU839
 2783 001a 30F81550 		ldrh	r5, [r0, r5, lsl #1]
 2784              		.loc 1 773 48 view .LVU840
 2785 001e 24F81E50 		strh	r5, [r4, lr, lsl #1]	@ movhi
 771:lib/utils.c   ****         {
 2786              		.loc 1 771 42 is_stmt 1 discriminator 3 view .LVU841
 2787 0022 0CF1010C 		add	ip, ip, #1
 2788              	.LVL285:
 771:lib/utils.c   ****         {
 2789              		.loc 1 771 42 is_stmt 0 discriminator 3 view .LVU842
 2790 0026 1FFA8CFC 		uxth	ip, ip
 2791              	.LVL286:
 2792              	.L173:
 771:lib/utils.c   ****         {
 2793              		.loc 1 771 32 is_stmt 1 discriminator 1 view .LVU843
 2794 002a 8C45     		cmp	ip, r1
 2795 002c EDD3     		bcc	.L172
 2796              	.LBE81:
 769:lib/utils.c   ****     for (uint16_t y = 0; y < height; y++)
 2797              		.loc 1 769 39 discriminator 2 view .LVU844
 2798 002e 0132     		adds	r2, r2, #1
 2799              	.LVL287:
 769:lib/utils.c   ****     for (uint16_t y = 0; y < height; y++)
 2800              		.loc 1 769 39 is_stmt 0 discriminator 2 view .LVU845
 2801 0030 92B2     		uxth	r2, r2
 2802              	.LVL288:
 2803              	.L171:
 769:lib/utils.c   ****     for (uint16_t y = 0; y < height; y++)
 2804              		.loc 1 769 28 is_stmt 1 discriminator 1 view .LVU846
 2805 0032 9A42     		cmp	r2, r3
 2806 0034 02D2     		bcs	.L176
 2807              	.LBB82:
 771:lib/utils.c   ****         {
 2808              		.loc 1 771 23 is_stmt 0 view .LVU847
 2809 0036 4FF0000C 		mov	ip, #0
 2810 003a F6E7     		b	.L173
 2811              	.L176:
 2812              	.LBE82:
 2813              	.LBE80:
 774:lib/utils.c   ****         }
 775:lib/utils.c   ****     }
 776:lib/utils.c   **** }...
 2814              		.loc 1 776 1 view .LVU848
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 67


 2815 003c 30BD     		pop	{r4, r5, pc}
 2816              		.loc 1 776 1 view .LVU849
 2817              		.cfi_endproc
 2818              	.LFE17:
 2820              		.section	.bss.buf1.0,"aw",%nobits
 2821              		.align	2
 2824              	buf1.0:
 2825 0000 00000000 		.space	98304
 2825      00000000 
 2825      00000000 
 2825      00000000 
 2825      00000000 
 2826              		.section	.rodata.kernel.1,"a"
 2827              		.align	2
 2830              	kernel.1:
 2831 0000 00FF00   		.ascii	"\000\377\000"
 2832 0003 FF05FF   		.ascii	"\377\005\377"
 2833 0006 00FF00   		.ascii	"\000\377\000"
 2834              		.global	g_gamma
 2835              		.section	.data.g_gamma,"aw"
 2836              		.align	2
 2839              	g_gamma:
 2840 0000 0000803F 		.word	1065353216
 2841              		.section	.bss.crc16_table,"aw",%nobits
 2842              		.align	2
 2845              	crc16_table:
 2846 0000 00000000 		.space	512
 2846      00000000 
 2846      00000000 
 2846      00000000 
 2846      00000000 
 2847              		.section	.bss.g_color_tint,"aw",%nobits
 2850              	g_color_tint:
 2851 0000 00       		.space	1
 2852              		.global	max_wh
 2853              		.section	.data.max_wh,"aw"
 2854              		.align	2
 2857              	max_wh:
 2858 0000 A4510000 		.word	20900
 2859              		.global	min_wh
 2860              		.section	.data.min_wh,"aw"
 2861              		.align	2
 2864              	min_wh:
 2865 0000 803E0000 		.word	16000
 2866              		.text
 2867              	.Letext0:
 2868              		.file 2 "D:/armtoolchain/arm-gnu-toolchain-13.3.rel1-mingw-w64-i686-arm-none-eabi/arm-none-eabi/in
 2869              		.file 3 "D:/armtoolchain/arm-gnu-toolchain-13.3.rel1-mingw-w64-i686-arm-none-eabi/arm-none-eabi/in
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 68


DEFINED SYMBOLS
                            *ABS*:00000000 utils.c
C:\usertemp\cctRPN2Y.s:22     .text.crcInit:00000000 $t
C:\usertemp\cctRPN2Y.s:28     .text.crcInit:00000000 crcInit
C:\usertemp\cctRPN2Y.s:112    .text.crcInit:00000038 $d
C:\usertemp\cctRPN2Y.s:2845   .bss.crc16_table:00000000 crc16_table
C:\usertemp\cctRPN2Y.s:117    .text.crc_caculate:00000000 $t
C:\usertemp\cctRPN2Y.s:123    .text.crc_caculate:00000000 crc_caculate
C:\usertemp\cctRPN2Y.s:192    .text.crc_caculate:00000030 $d
C:\usertemp\cctRPN2Y.s:197    .text.reverseBits:00000000 $t
C:\usertemp\cctRPN2Y.s:203    .text.reverseBits:00000000 reverseBits
C:\usertemp\cctRPN2Y.s:273    .text.yuv422_to_rgb565:00000000 $t
C:\usertemp\cctRPN2Y.s:279    .text.yuv422_to_rgb565:00000000 yuv422_to_rgb565
C:\usertemp\cctRPN2Y.s:366    .text.yuv422_to_rgb565_memcpy:00000000 $t
C:\usertemp\cctRPN2Y.s:372    .text.yuv422_to_rgb565_memcpy:00000000 yuv422_to_rgb565_memcpy
C:\usertemp\cctRPN2Y.s:484    .text.U32_memcpy_asm:00000000 $t
C:\usertemp\cctRPN2Y.s:490    .text.U32_memcpy_asm:00000000 U32_memcpy_asm
C:\usertemp\cctRPN2Y.s:519    .text.U64_memcpy_fast:00000000 $t
C:\usertemp\cctRPN2Y.s:525    .text.U64_memcpy_fast:00000000 U64_memcpy_fast
C:\usertemp\cctRPN2Y.s:556    .text.gray_to_rgb565:00000000 $t
C:\usertemp\cctRPN2Y.s:562    .text.gray_to_rgb565:00000000 gray_to_rgb565
C:\usertemp\cctRPN2Y.s:972    .text.gray_to_rgb565:000002a0 $d
C:\usertemp\cctRPN2Y.s:2850   .bss.g_color_tint:00000000 g_color_tint
C:\usertemp\cctRPN2Y.s:984    .text.medianFilter3x3:00000000 $t
C:\usertemp\cctRPN2Y.s:990    .text.medianFilter3x3:00000000 medianFilter3x3
C:\usertemp\cctRPN2Y.s:1505   .text.sharpen3x3:00000000 $t
C:\usertemp\cctRPN2Y.s:1511   .text.sharpen3x3:00000000 sharpen3x3
C:\usertemp\cctRPN2Y.s:1717   .text.sharpen3x3:000000c8 $d
C:\usertemp\cctRPN2Y.s:2830   .rodata.kernel.1:00000000 kernel.1
C:\usertemp\cctRPN2Y.s:1722   .text.grayImageToRGB:00000000 $t
C:\usertemp\cctRPN2Y.s:1728   .text.grayImageToRGB:00000000 grayImageToRGB
C:\usertemp\cctRPN2Y.s:1820   .text.grayImageToRGB:00000060 $d
C:\usertemp\cctRPN2Y.s:2824   .bss.buf1.0:00000000 buf1.0
C:\usertemp\cctRPN2Y.s:1825   .text.color_shift_cooler:00000000 $t
C:\usertemp\cctRPN2Y.s:1831   .text.color_shift_cooler:00000000 color_shift_cooler
C:\usertemp\cctRPN2Y.s:1856   .text.color_shift_cooler:00000014 $d
C:\usertemp\cctRPN2Y.s:1861   .text.color_shift_warmer:00000000 $t
C:\usertemp\cctRPN2Y.s:1867   .text.color_shift_warmer:00000000 color_shift_warmer
C:\usertemp\cctRPN2Y.s:1892   .text.color_shift_warmer:00000014 $d
C:\usertemp\cctRPN2Y.s:1897   .text.grayImageLarger:00000000 $t
C:\usertemp\cctRPN2Y.s:1903   .text.grayImageLarger:00000000 grayImageLarger
C:\usertemp\cctRPN2Y.s:2174   .text.grayImagEnlarge:00000000 $t
C:\usertemp\cctRPN2Y.s:2180   .text.grayImagEnlarge:00000000 grayImagEnlarge
C:\usertemp\cctRPN2Y.s:2280   .text.rgb565ImageEnlarge:00000000 $t
C:\usertemp\cctRPN2Y.s:2286   .text.rgb565ImageEnlarge:00000000 rgb565ImageEnlarge
C:\usertemp\cctRPN2Y.s:2386   .text.rgb565ImageEnlargeF:00000000 $t
C:\usertemp\cctRPN2Y.s:2392   .text.rgb565ImageEnlargeF:00000000 rgb565ImageEnlargeF
C:\usertemp\cctRPN2Y.s:2738   .text.rgb565Rotate90:00000000 $t
C:\usertemp\cctRPN2Y.s:2744   .text.rgb565Rotate90:00000000 rgb565Rotate90
C:\usertemp\cctRPN2Y.s:2821   .bss.buf1.0:00000000 $d
C:\usertemp\cctRPN2Y.s:2827   .rodata.kernel.1:00000000 $d
C:\usertemp\cctRPN2Y.s:2839   .data.g_gamma:00000000 g_gamma
C:\usertemp\cctRPN2Y.s:2836   .data.g_gamma:00000000 $d
C:\usertemp\cctRPN2Y.s:2842   .bss.crc16_table:00000000 $d
C:\usertemp\cctRPN2Y.s:2851   .bss.g_color_tint:00000000 $d
C:\usertemp\cctRPN2Y.s:2857   .data.max_wh:00000000 max_wh
C:\usertemp\cctRPN2Y.s:2854   .data.max_wh:00000000 $d
ARM GAS  C:\usertemp\cctRPN2Y.s 			page 69


C:\usertemp\cctRPN2Y.s:2864   .data.min_wh:00000000 min_wh
C:\usertemp\cctRPN2Y.s:2861   .data.min_wh:00000000 $d

NO UNDEFINED SYMBOLS
