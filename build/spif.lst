ARM GAS  C:\usertemp\ccRKfaNB.s 			page 1


   1              		.cpu cortex-m33
   2              		.arch armv8-m.main
   3              		.fpu fpv4-sp-d16
   4              		.arch_extension dsp
   5              		.eabi_attribute 27, 1
   6              		.eabi_attribute 28, 1
   7              		.eabi_attribute 20, 1
   8              		.eabi_attribute 21, 1
   9              		.eabi_attribute 23, 3
  10              		.eabi_attribute 24, 1
  11              		.eabi_attribute 25, 1
  12              		.eabi_attribute 26, 1
  13              		.eabi_attribute 30, 1
  14              		.eabi_attribute 34, 1
  15              		.eabi_attribute 18, 4
  16              		.file	"spif.c"
  17              		.text
  18              	.Ltext0:
  19              		.cfi_sections	.debug_frame
  20              		.file 1 "FLASH/spif.c"
  21              		.section	.text.SPIF_Delay,"ax",%progbits
  22              		.align	1
  23              		.global	SPIF_Delay
  24              		.syntax unified
  25              		.thumb
  26              		.thumb_func
  28              	SPIF_Delay:
  29              	.LVL0:
  30              	.LFB157:
   1:FLASH/spif.c  **** 
   2:FLASH/spif.c  **** /**************************************************************************************************
   3:FLASH/spif.c  **** **************    Include Headers
   4:FLASH/spif.c  **** ***************************************************************************************************
   5:FLASH/spif.c  **** 
   6:FLASH/spif.c  **** #include "spif.h"
   7:FLASH/spif.c  **** #include "main.h"
   8:FLASH/spif.c  **** #include "usart.h"
   9:FLASH/spif.c  **** #if SPIF_DEBUG == SPIF_DEBUG_DISABLE
  10:FLASH/spif.c  **** #define dprintf(...)
  11:FLASH/spif.c  **** #else
  12:FLASH/spif.c  **** #include <stdio.h>
  13:FLASH/spif.c  **** #define dprintf(...) printf(__VA_ARGS__)
  14:FLASH/spif.c  **** #endif
  15:FLASH/spif.c  **** 
  16:FLASH/spif.c  **** #if SPIF_RTOS == SPIF_RTOS_DISABLE
  17:FLASH/spif.c  **** #elif SPIF_RTOS == SPIF_RTOS_CMSIS_V1
  18:FLASH/spif.c  **** #include "cmsis_os.h"
  19:FLASH/spif.c  **** #include "freertos.h"
  20:FLASH/spif.c  **** #elif SPIF_RTOS == SPIF_RTOS_CMSIS_V2
  21:FLASH/spif.c  **** #include "cmsis_os2.h"
  22:FLASH/spif.c  **** #include "freertos.h"
  23:FLASH/spif.c  **** #elif SPIF_RTOS == SPIF_RTOS_THREADX
  24:FLASH/spif.c  **** #include "app_threadx.h"
  25:FLASH/spif.c  **** #endif
  26:FLASH/spif.c  **** 
  27:FLASH/spif.c  **** /**************************************************************************************************
  28:FLASH/spif.c  **** **************    Private Definitions
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 2


  29:FLASH/spif.c  **** ***************************************************************************************************
  30:FLASH/spif.c  **** 
  31:FLASH/spif.c  **** #define SPIF_DUMMY_BYTE 0xA5
  32:FLASH/spif.c  **** 
  33:FLASH/spif.c  **** #define SPIF_CMD_READSFDP 0x5A
  34:FLASH/spif.c  **** #define SPIF_CMD_ID 0x90
  35:FLASH/spif.c  **** #define SPIF_CMD_JEDECID 0x9F
  36:FLASH/spif.c  **** #define SPIF_CMD_UNIQUEID 0x4B
  37:FLASH/spif.c  **** #define SPIF_CMD_WRITEDISABLE 0x04
  38:FLASH/spif.c  **** #define SPIF_CMD_READSTATUS1 0x05
  39:FLASH/spif.c  **** #define SPIF_CMD_READSTATUS2 0x35
  40:FLASH/spif.c  **** #define SPIF_CMD_READSTATUS3 0x15
  41:FLASH/spif.c  **** #define SPIF_CMD_WRITESTATUSEN 0x50
  42:FLASH/spif.c  **** #define SPIF_CMD_WRITESTATUS1 0x01
  43:FLASH/spif.c  **** #define SPIF_CMD_WRITESTATUS2 0x31
  44:FLASH/spif.c  **** #define SPIF_CMD_WRITESTATUS3 0x11
  45:FLASH/spif.c  **** #define SPIF_CMD_WRITEENABLE 0x06
  46:FLASH/spif.c  **** #define SPIF_CMD_ADDR4BYTE_EN 0xB7
  47:FLASH/spif.c  **** #define SPIF_CMD_ADDR4BYTE_DIS 0xE9
  48:FLASH/spif.c  **** #define SPIF_CMD_PAGEPROG3ADD 0x02
  49:FLASH/spif.c  **** #define SPIF_CMD_PAGEPROG4ADD 0x12
  50:FLASH/spif.c  **** #define SPIF_CMD_READDATA3ADD 0x03
  51:FLASH/spif.c  **** #define SPIF_CMD_READDATA4ADD 0x13
  52:FLASH/spif.c  **** #define SPIF_CMD_FASTREAD3ADD 0x0B
  53:FLASH/spif.c  **** #define SPIF_CMD_FASTREAD4ADD 0x0C
  54:FLASH/spif.c  **** #define SPIF_CMD_SECTORERASE3ADD 0x20
  55:FLASH/spif.c  **** #define SPIF_CMD_SECTORERASE4ADD 0x21
  56:FLASH/spif.c  **** #define SPIF_CMD_BLOCKERASE3ADD 0xD8
  57:FLASH/spif.c  **** #define SPIF_CMD_BLOCKERASE4ADD 0xDC
  58:FLASH/spif.c  **** #define SPIF_CMD_CHIPERASE1 0x60
  59:FLASH/spif.c  **** #define SPIF_CMD_CHIPERASE2 0xC7
  60:FLASH/spif.c  **** #define SPIF_CMD_SUSPEND 0x75
  61:FLASH/spif.c  **** #define SPIF_CMD_RESUME 0x7A
  62:FLASH/spif.c  **** #define SPIF_CMD_POWERDOWN 0xB9
  63:FLASH/spif.c  **** #define SPIF_CMD_RELEASE 0xAB
  64:FLASH/spif.c  **** #define SPIF_CMD_FRAMSERNO 0xC3
  65:FLASH/spif.c  **** 
  66:FLASH/spif.c  **** #define SPIF_STATUS1_BUSY (1 << 0)
  67:FLASH/spif.c  **** #define SPIF_STATUS1_WEL (1 << 1)
  68:FLASH/spif.c  **** #define SPIF_STATUS1_BP0 (1 << 2)
  69:FLASH/spif.c  **** #define SPIF_STATUS1_BP1 (1 << 3)
  70:FLASH/spif.c  **** #define SPIF_STATUS1_BP2 (1 << 4)
  71:FLASH/spif.c  **** #define SPIF_STATUS1_TP (1 << 5)
  72:FLASH/spif.c  **** #define SPIF_STATUS1_SEC (1 << 6)
  73:FLASH/spif.c  **** #define SPIF_STATUS1_SRP0 (1 << 7)
  74:FLASH/spif.c  **** 
  75:FLASH/spif.c  **** #define SPIF_STATUS2_SRP1 (1 << 0)
  76:FLASH/spif.c  **** #define SPIF_STATUS2_QE (1 << 1)
  77:FLASH/spif.c  **** #define SPIF_STATUS2_RESERVE1 (1 << 2)
  78:FLASH/spif.c  **** #define SPIF_STATUS2_LB0 (1 << 3)
  79:FLASH/spif.c  **** #define SPIF_STATUS2_LB1 (1 << 4)
  80:FLASH/spif.c  **** #define SPIF_STATUS2_LB2 (1 << 5)
  81:FLASH/spif.c  **** #define SPIF_STATUS2_CMP (1 << 6)
  82:FLASH/spif.c  **** #define SPIF_STATUS2_SUS (1 << 7)
  83:FLASH/spif.c  **** 
  84:FLASH/spif.c  **** #define SPIF_STATUS3_RESERVE1 (1 << 0)
  85:FLASH/spif.c  **** #define SPIF_STATUS3_RESERVE2 (1 << 1)
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 3


  86:FLASH/spif.c  **** #define SPIF_STATUS3_WPS (1 << 2)
  87:FLASH/spif.c  **** #define SPIF_STATUS3_RESERVE3 (1 << 3)
  88:FLASH/spif.c  **** #define SPIF_STATUS3_RESERVE4 (1 << 4)
  89:FLASH/spif.c  **** #define SPIF_STATUS3_DRV0 (1 << 5)
  90:FLASH/spif.c  **** #define SPIF_STATUS3_DRV1 (1 << 6)
  91:FLASH/spif.c  **** #define SPIF_STATUS3_HOLD (1 << 7)
  92:FLASH/spif.c  **** 
  93:FLASH/spif.c  **** /**************************************************************************************************
  94:FLASH/spif.c  **** **************    Private Functions
  95:FLASH/spif.c  **** ***************************************************************************************************
  96:FLASH/spif.c  **** 
  97:FLASH/spif.c  **** void     SPIF_Delay(uint32_t Delay);
  98:FLASH/spif.c  **** void     SPIF_Lock(SPIF_HandleTypeDef *Handle);
  99:FLASH/spif.c  **** void     SPIF_UnLock(SPIF_HandleTypeDef *Handle);
 100:FLASH/spif.c  **** void     SPIF_CsPin(SPIF_HandleTypeDef *Handle, bool Select);
 101:FLASH/spif.c  **** bool     SPIF_TransmitReceive(SPIF_HandleTypeDef *Handle, uint8_t *Tx, uint8_t *Rx, size_t Size, ui
 102:FLASH/spif.c  **** bool     SPIF_Transmit(SPIF_HandleTypeDef *Handle, uint8_t *Tx, size_t Size, uint32_t Timeout);
 103:FLASH/spif.c  **** bool     SPIF_Receive(SPIF_HandleTypeDef *Handle, uint8_t *Rx, size_t Size, uint32_t Timeout);
 104:FLASH/spif.c  **** bool     SPIF_WriteEnable(SPIF_HandleTypeDef *Handle);
 105:FLASH/spif.c  **** bool     SPIF_WriteDisable(SPIF_HandleTypeDef *Handle);
 106:FLASH/spif.c  **** uint8_t  SPIF_ReadReg1(SPIF_HandleTypeDef *Handle);
 107:FLASH/spif.c  **** uint8_t  SPIF_ReadReg2(SPIF_HandleTypeDef *Handle);
 108:FLASH/spif.c  **** uint8_t  SPIF_ReadReg3(SPIF_HandleTypeDef *Handle);
 109:FLASH/spif.c  **** bool     SPIF_WriteReg1(SPIF_HandleTypeDef *Handle, uint8_t Data);
 110:FLASH/spif.c  **** bool     SPIF_WriteReg2(SPIF_HandleTypeDef *Handle, uint8_t Data);
 111:FLASH/spif.c  **** bool     SPIF_WriteReg3(SPIF_HandleTypeDef *Handle, uint8_t Data);
 112:FLASH/spif.c  **** bool     SPIF_WaitForWriting(SPIF_HandleTypeDef *Handle, uint32_t Timeout);
 113:FLASH/spif.c  **** bool     SPIF_FindChip(SPIF_HandleTypeDef *Handle);
 114:FLASH/spif.c  **** bool     SPIF_WriteFn(SPIF_HandleTypeDef *Handle, uint32_t PageNumber, uint8_t *Data, uint32_t Size
 115:FLASH/spif.c  **** bool     SPIF_ReadFn(SPIF_HandleTypeDef *Handle, uint32_t Address, uint8_t *Data, uint32_t Size);
 116:FLASH/spif.c  **** 
 117:FLASH/spif.c  **** /**************************************************************************************************
 118:FLASH/spif.c  **** 
 119:FLASH/spif.c  **** void SPIF_Delay(uint32_t Delay)
 120:FLASH/spif.c  **** {
  31              		.loc 1 120 1 view -0
  32              		.cfi_startproc
  33              		@ args = 0, pretend = 0, frame = 0
  34              		@ frame_needed = 0, uses_anonymous_args = 0
  35              		.loc 1 120 1 is_stmt 0 view .LVU1
  36 0000 08B5     		push	{r3, lr}
  37              	.LCFI0:
  38              		.cfi_def_cfa_offset 8
  39              		.cfi_offset 3, -8
  40              		.cfi_offset 14, -4
 121:FLASH/spif.c  **** #if SPIF_RTOS == SPIF_RTOS_DISABLE
 122:FLASH/spif.c  ****   HAL_Delay(Delay);
  41              		.loc 1 122 3 is_stmt 1 view .LVU2
  42 0002 FFF7FEFF 		bl	HAL_Delay
  43              	.LVL1:
 123:FLASH/spif.c  **** #elif (SPIF_RTOS == SPIF_RTOS_CMSIS_V1) || (SPIF_RTOS == SPIF_RTOS_CMSIS_V2)
 124:FLASH/spif.c  ****   uint32_t d = (configTICK_RATE_HZ * Delay) / 1000;
 125:FLASH/spif.c  ****   if (d == 0)
 126:FLASH/spif.c  ****       d = 1;
 127:FLASH/spif.c  ****   osDelay(d);
 128:FLASH/spif.c  **** #elif SPIF_RTOS == SPIF_RTOS_THREADX
 129:FLASH/spif.c  ****   uint32_t d = (TX_TIMER_TICKS_PER_SECOND * Delay) / 1000;
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 4


 130:FLASH/spif.c  ****   if (d == 0)
 131:FLASH/spif.c  ****     d = 1;
 132:FLASH/spif.c  ****   tx_thread_sleep(d);
 133:FLASH/spif.c  **** #endif
 134:FLASH/spif.c  **** }
  44              		.loc 1 134 1 is_stmt 0 view .LVU3
  45 0006 08BD     		pop	{r3, pc}
  46              		.cfi_endproc
  47              	.LFE157:
  49              		.section	.text.SPIF_Lock,"ax",%progbits
  50              		.align	1
  51              		.global	SPIF_Lock
  52              		.syntax unified
  53              		.thumb
  54              		.thumb_func
  56              	SPIF_Lock:
  57              	.LVL2:
  58              	.LFB158:
 135:FLASH/spif.c  **** 
 136:FLASH/spif.c  **** /**************************************************************************************************
 137:FLASH/spif.c  **** 
 138:FLASH/spif.c  **** void SPIF_Lock(SPIF_HandleTypeDef *Handle)
 139:FLASH/spif.c  **** {
  59              		.loc 1 139 1 is_stmt 1 view -0
  60              		.cfi_startproc
  61              		@ args = 0, pretend = 0, frame = 0
  62              		@ frame_needed = 0, uses_anonymous_args = 0
  63              		.loc 1 139 1 is_stmt 0 view .LVU5
  64 0000 10B5     		push	{r4, lr}
  65              	.LCFI1:
  66              		.cfi_def_cfa_offset 8
  67              		.cfi_offset 4, -8
  68              		.cfi_offset 14, -4
  69 0002 0446     		mov	r4, r0
 140:FLASH/spif.c  ****   while (Handle->Lock)
  70              		.loc 1 140 3 is_stmt 1 view .LVU6
  71              		.loc 1 140 9 is_stmt 0 view .LVU7
  72 0004 02E0     		b	.L4
  73              	.LVL3:
  74              	.L5:
 141:FLASH/spif.c  ****   {
 142:FLASH/spif.c  ****     SPIF_Delay(1);
  75              		.loc 1 142 5 is_stmt 1 view .LVU8
  76 0006 0120     		movs	r0, #1
  77 0008 FFF7FEFF 		bl	SPIF_Delay
  78              	.LVL4:
  79              	.L4:
 140:FLASH/spif.c  ****   while (Handle->Lock)
  80              		.loc 1 140 10 view .LVU9
 140:FLASH/spif.c  ****   while (Handle->Lock)
  81              		.loc 1 140 16 is_stmt 0 view .LVU10
  82 000c 237B     		ldrb	r3, [r4, #12]	@ zero_extendqisi2
 140:FLASH/spif.c  ****   while (Handle->Lock)
  83              		.loc 1 140 10 view .LVU11
  84 000e 002B     		cmp	r3, #0
  85 0010 F9D1     		bne	.L5
 143:FLASH/spif.c  ****   }
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 5


 144:FLASH/spif.c  ****   Handle->Lock = 1;
  86              		.loc 1 144 3 is_stmt 1 view .LVU12
  87              		.loc 1 144 16 is_stmt 0 view .LVU13
  88 0012 0123     		movs	r3, #1
  89 0014 2373     		strb	r3, [r4, #12]
 145:FLASH/spif.c  **** }
  90              		.loc 1 145 1 view .LVU14
  91 0016 10BD     		pop	{r4, pc}
  92              		.loc 1 145 1 view .LVU15
  93              		.cfi_endproc
  94              	.LFE158:
  96              		.section	.text.SPIF_UnLock,"ax",%progbits
  97              		.align	1
  98              		.global	SPIF_UnLock
  99              		.syntax unified
 100              		.thumb
 101              		.thumb_func
 103              	SPIF_UnLock:
 104              	.LVL5:
 105              	.LFB159:
 146:FLASH/spif.c  **** 
 147:FLASH/spif.c  **** /**************************************************************************************************
 148:FLASH/spif.c  **** 
 149:FLASH/spif.c  **** void SPIF_UnLock(SPIF_HandleTypeDef *Handle)
 150:FLASH/spif.c  **** {
 106              		.loc 1 150 1 is_stmt 1 view -0
 107              		.cfi_startproc
 108              		@ args = 0, pretend = 0, frame = 0
 109              		@ frame_needed = 0, uses_anonymous_args = 0
 110              		@ link register save eliminated.
 151:FLASH/spif.c  ****   Handle->Lock = 0;
 111              		.loc 1 151 3 view .LVU17
 112              		.loc 1 151 16 is_stmt 0 view .LVU18
 113 0000 0023     		movs	r3, #0
 114 0002 0373     		strb	r3, [r0, #12]
 152:FLASH/spif.c  **** }
 115              		.loc 1 152 1 view .LVU19
 116 0004 7047     		bx	lr
 117              		.cfi_endproc
 118              	.LFE159:
 120              		.section	.text.SPIF_CsPin,"ax",%progbits
 121              		.align	1
 122              		.global	SPIF_CsPin
 123              		.syntax unified
 124              		.thumb
 125              		.thumb_func
 127              	SPIF_CsPin:
 128              	.LVL6:
 129              	.LFB160:
 153:FLASH/spif.c  **** 
 154:FLASH/spif.c  **** /**************************************************************************************************
 155:FLASH/spif.c  **** 
 156:FLASH/spif.c  **** void SPIF_CsPin(SPIF_HandleTypeDef *Handle, bool Select)
 157:FLASH/spif.c  **** {
 130              		.loc 1 157 1 is_stmt 1 view -0
 131              		.cfi_startproc
 132              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 6


 133              		@ frame_needed = 0, uses_anonymous_args = 0
 134              		.loc 1 157 1 is_stmt 0 view .LVU21
 135 0000 08B5     		push	{r3, lr}
 136              	.LCFI2:
 137              		.cfi_def_cfa_offset 8
 138              		.cfi_offset 3, -8
 139              		.cfi_offset 14, -4
 140 0002 0A46     		mov	r2, r1
 158:FLASH/spif.c  ****   HAL_GPIO_WritePin(Handle->Gpio, Handle->Pin, (GPIO_PinState)Select);
 141              		.loc 1 158 3 is_stmt 1 view .LVU22
 142 0004 018A     		ldrh	r1, [r0, #16]
 143              	.LVL7:
 144              		.loc 1 158 3 is_stmt 0 view .LVU23
 145 0006 4068     		ldr	r0, [r0, #4]
 146              	.LVL8:
 147              		.loc 1 158 3 view .LVU24
 148 0008 FFF7FEFF 		bl	HAL_GPIO_WritePin
 149              	.LVL9:
 159:FLASH/spif.c  ****   for (int i = 0; i < 10; i++);
 150              		.loc 1 159 3 is_stmt 1 view .LVU25
 151              	.LBB2:
 152              		.loc 1 159 8 view .LVU26
 153              		.loc 1 159 12 is_stmt 0 view .LVU27
 154 000c 0023     		movs	r3, #0
 155              		.loc 1 159 3 view .LVU28
 156 000e 00E0     		b	.L9
 157              	.LVL10:
 158              	.L10:
 159              		.loc 1 159 28 is_stmt 1 discriminator 3 view .LVU29
 160 0010 0133     		adds	r3, r3, #1
 161              	.LVL11:
 162              	.L9:
 163              		.loc 1 159 21 discriminator 1 view .LVU30
 164 0012 092B     		cmp	r3, #9
 165 0014 FCDD     		ble	.L10
 166              	.LBE2:
 160:FLASH/spif.c  **** }
 167              		.loc 1 160 1 is_stmt 0 view .LVU31
 168 0016 08BD     		pop	{r3, pc}
 169              		.loc 1 160 1 view .LVU32
 170              		.cfi_endproc
 171              	.LFE160:
 173              		.section	.text.SPIF_TransmitReceive,"ax",%progbits
 174              		.align	1
 175              		.global	SPIF_TransmitReceive
 176              		.syntax unified
 177              		.thumb
 178              		.thumb_func
 180              	SPIF_TransmitReceive:
 181              	.LVL12:
 182              	.LFB161:
 161:FLASH/spif.c  **** 
 162:FLASH/spif.c  **** /**************************************************************************************************
 163:FLASH/spif.c  **** 
 164:FLASH/spif.c  **** bool SPIF_TransmitReceive(SPIF_HandleTypeDef *Handle, uint8_t *Tx, uint8_t *Rx, size_t Size, uint32
 165:FLASH/spif.c  **** {
 183              		.loc 1 165 1 is_stmt 1 view -0
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 7


 184              		.cfi_startproc
 185              		@ args = 4, pretend = 0, frame = 0
 186              		@ frame_needed = 0, uses_anonymous_args = 0
 187              		.loc 1 165 1 is_stmt 0 view .LVU34
 188 0000 10B5     		push	{r4, lr}
 189              	.LCFI3:
 190              		.cfi_def_cfa_offset 8
 191              		.cfi_offset 4, -8
 192              		.cfi_offset 14, -4
 193 0002 82B0     		sub	sp, sp, #8
 194              	.LCFI4:
 195              		.cfi_def_cfa_offset 16
 166:FLASH/spif.c  ****   bool retVal = false;
 196              		.loc 1 166 3 is_stmt 1 view .LVU35
 197              	.LVL13:
 167:FLASH/spif.c  **** #if (SPIF_PLATFORM == SPIF_PLATFORM_HAL)
 168:FLASH/spif.c  ****   if (HAL_SPI_TransmitReceive(Handle->HSpi, Tx, Rx, Size, Timeout) == HAL_OK)
 198              		.loc 1 168 3 view .LVU36
 199              		.loc 1 168 7 is_stmt 0 view .LVU37
 200 0004 0068     		ldr	r0, [r0]
 201              	.LVL14:
 202              		.loc 1 168 7 view .LVU38
 203 0006 049C     		ldr	r4, [sp, #16]
 204 0008 0094     		str	r4, [sp]
 205 000a 9BB2     		uxth	r3, r3
 206              	.LVL15:
 207              		.loc 1 168 7 view .LVU39
 208 000c FFF7FEFF 		bl	HAL_SPI_TransmitReceive
 209              	.LVL16:
 210              		.loc 1 168 6 discriminator 1 view .LVU40
 211 0010 10B1     		cbz	r0, .L14
 166:FLASH/spif.c  ****   bool retVal = false;
 212              		.loc 1 166 8 view .LVU41
 213 0012 0020     		movs	r0, #0
 214              	.L13:
 215              	.LVL17:
 169:FLASH/spif.c  ****   {
 170:FLASH/spif.c  ****     retVal = true;
 171:FLASH/spif.c  ****   }
 172:FLASH/spif.c  ****   else
 173:FLASH/spif.c  ****   {
 174:FLASH/spif.c  ****     dprintf("SPIF TIMEOUT\r\n");
 216              		.loc 1 174 32 is_stmt 1 view .LVU42
 175:FLASH/spif.c  ****   }
 176:FLASH/spif.c  **** #elif (SPIF_PLATFORM == SPIF_PLATFORM_HAL_DMA)
 177:FLASH/spif.c  ****   uint32_t startTime = HAL_GetTick();
 178:FLASH/spif.c  ****   if (HAL_SPI_TransmitReceive_DMA(Handle->HSpi, Tx, Rx, Size) != HAL_OK)
 179:FLASH/spif.c  ****   {
 180:FLASH/spif.c  ****     dprintf("SPIF TRANSFER ERROR\r\n");
 181:FLASH/spif.c  ****   }
 182:FLASH/spif.c  ****   else
 183:FLASH/spif.c  ****   {
 184:FLASH/spif.c  ****     while (1)
 185:FLASH/spif.c  ****     {
 186:FLASH/spif.c  ****       SPIF_Delay(1);
 187:FLASH/spif.c  ****       if (HAL_GetTick() - startTime >= Timeout)
 188:FLASH/spif.c  ****       {
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 8


 189:FLASH/spif.c  ****         dprintf("SPIF TIMEOUT\r\n");
 190:FLASH/spif.c  ****         HAL_SPI_DMAStop(Handle->HSpi);
 191:FLASH/spif.c  ****         break;
 192:FLASH/spif.c  ****       }
 193:FLASH/spif.c  ****       if (HAL_SPI_GetState(Handle->HSpi) == HAL_SPI_STATE_READY)
 194:FLASH/spif.c  ****       {
 195:FLASH/spif.c  ****         retVal = true;
 196:FLASH/spif.c  ****         break;
 197:FLASH/spif.c  ****       }
 198:FLASH/spif.c  ****     }
 199:FLASH/spif.c  ****   }
 200:FLASH/spif.c  **** #endif
 201:FLASH/spif.c  ****   return retVal;
 217              		.loc 1 201 3 view .LVU43
 202:FLASH/spif.c  **** }
 218              		.loc 1 202 1 is_stmt 0 view .LVU44
 219 0014 02B0     		add	sp, sp, #8
 220              	.LCFI5:
 221              		.cfi_remember_state
 222              		.cfi_def_cfa_offset 8
 223              		@ sp needed
 224 0016 10BD     		pop	{r4, pc}
 225              	.LVL18:
 226              	.L14:
 227              	.LCFI6:
 228              		.cfi_restore_state
 170:FLASH/spif.c  ****   }
 229              		.loc 1 170 12 view .LVU45
 230 0018 0120     		movs	r0, #1
 231 001a FBE7     		b	.L13
 232              		.cfi_endproc
 233              	.LFE161:
 235              		.section	.text.SPIF_Transmit,"ax",%progbits
 236              		.align	1
 237              		.global	SPIF_Transmit
 238              		.syntax unified
 239              		.thumb
 240              		.thumb_func
 242              	SPIF_Transmit:
 243              	.LVL19:
 244              	.LFB162:
 203:FLASH/spif.c  **** 
 204:FLASH/spif.c  **** /**************************************************************************************************
 205:FLASH/spif.c  **** 
 206:FLASH/spif.c  **** bool SPIF_Transmit(SPIF_HandleTypeDef *Handle, uint8_t *Tx, size_t Size, uint32_t Timeout)
 207:FLASH/spif.c  **** {
 245              		.loc 1 207 1 is_stmt 1 view -0
 246              		.cfi_startproc
 247              		@ args = 0, pretend = 0, frame = 0
 248              		@ frame_needed = 0, uses_anonymous_args = 0
 249              		.loc 1 207 1 is_stmt 0 view .LVU47
 250 0000 08B5     		push	{r3, lr}
 251              	.LCFI7:
 252              		.cfi_def_cfa_offset 8
 253              		.cfi_offset 3, -8
 254              		.cfi_offset 14, -4
 208:FLASH/spif.c  ****   bool retVal = false;
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 9


 255              		.loc 1 208 3 is_stmt 1 view .LVU48
 256              	.LVL20:
 209:FLASH/spif.c  **** #if (SPIF_PLATFORM == SPIF_PLATFORM_HAL)
 210:FLASH/spif.c  ****   if (HAL_SPI_Transmit(Handle->HSpi, Tx, Size, Timeout) == HAL_OK)
 257              		.loc 1 210 3 view .LVU49
 258              		.loc 1 210 7 is_stmt 0 view .LVU50
 259 0002 92B2     		uxth	r2, r2
 260              	.LVL21:
 261              		.loc 1 210 7 view .LVU51
 262 0004 0068     		ldr	r0, [r0]
 263              	.LVL22:
 264              		.loc 1 210 7 view .LVU52
 265 0006 FFF7FEFF 		bl	HAL_SPI_Transmit
 266              	.LVL23:
 267              		.loc 1 210 6 discriminator 1 view .LVU53
 268 000a 08B1     		cbz	r0, .L18
 208:FLASH/spif.c  ****   bool retVal = false;
 269              		.loc 1 208 8 view .LVU54
 270 000c 0020     		movs	r0, #0
 271              	.L17:
 272              	.LVL24:
 211:FLASH/spif.c  ****   {
 212:FLASH/spif.c  ****     retVal = true;
 213:FLASH/spif.c  ****   }
 214:FLASH/spif.c  ****   else
 215:FLASH/spif.c  ****   {
 216:FLASH/spif.c  ****     dprintf("SPIF TIMEOUT\r\n");
 273              		.loc 1 216 32 is_stmt 1 view .LVU55
 217:FLASH/spif.c  ****   }
 218:FLASH/spif.c  **** #elif (SPIF_PLATFORM == SPIF_PLATFORM_HAL_DMA)
 219:FLASH/spif.c  ****   uint32_t startTime = HAL_GetTick();
 220:FLASH/spif.c  ****   if (HAL_SPI_Transmit_DMA(Handle->HSpi, Tx, Size) != HAL_OK)
 221:FLASH/spif.c  ****   {
 222:FLASH/spif.c  ****     dprintf("SPIF TRANSFER ERROR\r\n");
 223:FLASH/spif.c  ****   }
 224:FLASH/spif.c  ****   else
 225:FLASH/spif.c  ****   {
 226:FLASH/spif.c  ****     while (1)
 227:FLASH/spif.c  ****     {
 228:FLASH/spif.c  ****       SPIF_Delay(1);
 229:FLASH/spif.c  ****       if (HAL_GetTick() - startTime >= Timeout)
 230:FLASH/spif.c  ****       {
 231:FLASH/spif.c  ****         dprintf("SPIF TIMEOUT\r\n");
 232:FLASH/spif.c  ****         HAL_SPI_DMAStop(Handle->HSpi);
 233:FLASH/spif.c  ****         break;
 234:FLASH/spif.c  ****       }
 235:FLASH/spif.c  ****       if (HAL_SPI_GetState(Handle->HSpi) == HAL_SPI_STATE_READY)
 236:FLASH/spif.c  ****       {
 237:FLASH/spif.c  ****         retVal = true;
 238:FLASH/spif.c  ****         break;
 239:FLASH/spif.c  ****       }
 240:FLASH/spif.c  ****     }
 241:FLASH/spif.c  ****   }
 242:FLASH/spif.c  **** #endif
 243:FLASH/spif.c  ****   return retVal;
 274              		.loc 1 243 3 view .LVU56
 244:FLASH/spif.c  **** }
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 10


 275              		.loc 1 244 1 is_stmt 0 view .LVU57
 276 000e 08BD     		pop	{r3, pc}
 277              	.LVL25:
 278              	.L18:
 212:FLASH/spif.c  ****   }
 279              		.loc 1 212 12 view .LVU58
 280 0010 0120     		movs	r0, #1
 281 0012 FCE7     		b	.L17
 282              		.cfi_endproc
 283              	.LFE162:
 285              		.section	.text.SPIF_Receive,"ax",%progbits
 286              		.align	1
 287              		.global	SPIF_Receive
 288              		.syntax unified
 289              		.thumb
 290              		.thumb_func
 292              	SPIF_Receive:
 293              	.LVL26:
 294              	.LFB163:
 245:FLASH/spif.c  **** 
 246:FLASH/spif.c  **** /**************************************************************************************************
 247:FLASH/spif.c  **** 
 248:FLASH/spif.c  **** bool SPIF_Receive(SPIF_HandleTypeDef *Handle, uint8_t *Rx, size_t Size, uint32_t Timeout)
 249:FLASH/spif.c  **** {
 295              		.loc 1 249 1 is_stmt 1 view -0
 296              		.cfi_startproc
 297              		@ args = 0, pretend = 0, frame = 0
 298              		@ frame_needed = 0, uses_anonymous_args = 0
 299              		.loc 1 249 1 is_stmt 0 view .LVU60
 300 0000 08B5     		push	{r3, lr}
 301              	.LCFI8:
 302              		.cfi_def_cfa_offset 8
 303              		.cfi_offset 3, -8
 304              		.cfi_offset 14, -4
 250:FLASH/spif.c  ****   bool retVal = false;
 305              		.loc 1 250 3 is_stmt 1 view .LVU61
 306              	.LVL27:
 251:FLASH/spif.c  **** #if (SPIF_PLATFORM == SPIF_PLATFORM_HAL)
 252:FLASH/spif.c  ****   if (HAL_SPI_Receive(Handle->HSpi, Rx, Size, Timeout) == HAL_OK)
 307              		.loc 1 252 3 view .LVU62
 308              		.loc 1 252 7 is_stmt 0 view .LVU63
 309 0002 92B2     		uxth	r2, r2
 310              	.LVL28:
 311              		.loc 1 252 7 view .LVU64
 312 0004 0068     		ldr	r0, [r0]
 313              	.LVL29:
 314              		.loc 1 252 7 view .LVU65
 315 0006 FFF7FEFF 		bl	HAL_SPI_Receive
 316              	.LVL30:
 317              		.loc 1 252 6 discriminator 1 view .LVU66
 318 000a 08B1     		cbz	r0, .L22
 250:FLASH/spif.c  ****   bool retVal = false;
 319              		.loc 1 250 8 view .LVU67
 320 000c 0020     		movs	r0, #0
 321              	.L21:
 322              	.LVL31:
 253:FLASH/spif.c  ****   {
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 11


 254:FLASH/spif.c  ****     retVal = true;
 255:FLASH/spif.c  ****   }
 256:FLASH/spif.c  ****   else
 257:FLASH/spif.c  ****   {
 258:FLASH/spif.c  ****     dprintf("SPIF TIMEOUT\r\n");
 323              		.loc 1 258 32 is_stmt 1 view .LVU68
 259:FLASH/spif.c  ****   }
 260:FLASH/spif.c  **** #elif (SPIF_PLATFORM == SPIF_PLATFORM_HAL_DMA)
 261:FLASH/spif.c  ****   uint32_t startTime = HAL_GetTick();
 262:FLASH/spif.c  ****   if (HAL_SPI_Receive_DMA(Handle->HSpi, Rx, Size) != HAL_OK)
 263:FLASH/spif.c  ****   {
 264:FLASH/spif.c  ****     dprintf("SPIF TRANSFER ERROR\r\n");
 265:FLASH/spif.c  ****   }
 266:FLASH/spif.c  ****   else
 267:FLASH/spif.c  ****   {
 268:FLASH/spif.c  ****     while (1)
 269:FLASH/spif.c  ****     {
 270:FLASH/spif.c  ****       SPIF_Delay(1);
 271:FLASH/spif.c  ****       if (HAL_GetTick() - startTime >= Timeout)
 272:FLASH/spif.c  ****       {
 273:FLASH/spif.c  ****         dprintf("SPIF TIMEOUT\r\n");
 274:FLASH/spif.c  ****         HAL_SPI_DMAStop(Handle->HSpi);
 275:FLASH/spif.c  ****         break;
 276:FLASH/spif.c  ****       }
 277:FLASH/spif.c  ****       if (HAL_SPI_GetState(Handle->HSpi) == HAL_SPI_STATE_READY)
 278:FLASH/spif.c  ****       {
 279:FLASH/spif.c  ****         retVal = true;
 280:FLASH/spif.c  ****         break;
 281:FLASH/spif.c  ****       }
 282:FLASH/spif.c  ****     }
 283:FLASH/spif.c  ****   }
 284:FLASH/spif.c  **** #endif
 285:FLASH/spif.c  ****   return retVal;
 324              		.loc 1 285 3 view .LVU69
 286:FLASH/spif.c  **** }
 325              		.loc 1 286 1 is_stmt 0 view .LVU70
 326 000e 08BD     		pop	{r3, pc}
 327              	.LVL32:
 328              	.L22:
 254:FLASH/spif.c  ****   }
 329              		.loc 1 254 12 view .LVU71
 330 0010 0120     		movs	r0, #1
 331 0012 FCE7     		b	.L21
 332              		.cfi_endproc
 333              	.LFE163:
 335              		.section	.text.SPIF_WriteEnable,"ax",%progbits
 336              		.align	1
 337              		.global	SPIF_WriteEnable
 338              		.syntax unified
 339              		.thumb
 340              		.thumb_func
 342              	SPIF_WriteEnable:
 343              	.LVL33:
 344              	.LFB164:
 287:FLASH/spif.c  **** 
 288:FLASH/spif.c  **** /**************************************************************************************************
 289:FLASH/spif.c  **** 
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 12


 290:FLASH/spif.c  **** bool SPIF_WriteEnable(SPIF_HandleTypeDef *Handle)
 291:FLASH/spif.c  **** {
 345              		.loc 1 291 1 is_stmt 1 view -0
 346              		.cfi_startproc
 347              		@ args = 0, pretend = 0, frame = 8
 348              		@ frame_needed = 0, uses_anonymous_args = 0
 349              		.loc 1 291 1 is_stmt 0 view .LVU73
 350 0000 30B5     		push	{r4, r5, lr}
 351              	.LCFI9:
 352              		.cfi_def_cfa_offset 12
 353              		.cfi_offset 4, -12
 354              		.cfi_offset 5, -8
 355              		.cfi_offset 14, -4
 356 0002 83B0     		sub	sp, sp, #12
 357              	.LCFI10:
 358              		.cfi_def_cfa_offset 24
 359 0004 0446     		mov	r4, r0
 292:FLASH/spif.c  ****   bool retVal = true;
 360              		.loc 1 292 3 is_stmt 1 view .LVU74
 361              	.LVL34:
 293:FLASH/spif.c  ****   uint8_t tx[1] = {SPIF_CMD_WRITEENABLE};
 362              		.loc 1 293 3 view .LVU75
 363              		.loc 1 293 11 is_stmt 0 view .LVU76
 364 0006 0623     		movs	r3, #6
 365 0008 8DF80430 		strb	r3, [sp, #4]
 294:FLASH/spif.c  ****   SPIF_CsPin(Handle, 0);
 366              		.loc 1 294 3 is_stmt 1 view .LVU77
 367 000c 0021     		movs	r1, #0
 368 000e FFF7FEFF 		bl	SPIF_CsPin
 369              	.LVL35:
 295:FLASH/spif.c  ****   if (SPIF_Transmit(Handle, tx, 1, 100) == false)
 370              		.loc 1 295 3 view .LVU78
 371              		.loc 1 295 7 is_stmt 0 view .LVU79
 372 0012 6423     		movs	r3, #100
 373 0014 0122     		movs	r2, #1
 374 0016 01A9     		add	r1, sp, #4
 375 0018 2046     		mov	r0, r4
 376 001a FFF7FEFF 		bl	SPIF_Transmit
 377              	.LVL36:
 378 001e 0546     		mov	r5, r0
 379              	.LVL37:
 296:FLASH/spif.c  ****   {
 297:FLASH/spif.c  ****     retVal = false;
 298:FLASH/spif.c  ****     dprintf("SPIF_WriteEnable() Error\r\n");
 380              		.loc 1 298 44 is_stmt 1 view .LVU80
 299:FLASH/spif.c  ****   }
 300:FLASH/spif.c  ****   SPIF_CsPin(Handle, 1);
 381              		.loc 1 300 3 view .LVU81
 382 0020 0121     		movs	r1, #1
 383 0022 2046     		mov	r0, r4
 384 0024 FFF7FEFF 		bl	SPIF_CsPin
 385              	.LVL38:
 301:FLASH/spif.c  ****   return retVal;
 386              		.loc 1 301 3 view .LVU82
 302:FLASH/spif.c  **** }
 387              		.loc 1 302 1 is_stmt 0 view .LVU83
 388 0028 2846     		mov	r0, r5
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 13


 389 002a 03B0     		add	sp, sp, #12
 390              	.LCFI11:
 391              		.cfi_def_cfa_offset 12
 392              		@ sp needed
 393 002c 30BD     		pop	{r4, r5, pc}
 394              		.loc 1 302 1 view .LVU84
 395              		.cfi_endproc
 396              	.LFE164:
 398              		.section	.text.SPIF_WriteDisable,"ax",%progbits
 399              		.align	1
 400              		.global	SPIF_WriteDisable
 401              		.syntax unified
 402              		.thumb
 403              		.thumb_func
 405              	SPIF_WriteDisable:
 406              	.LVL39:
 407              	.LFB165:
 303:FLASH/spif.c  **** 
 304:FLASH/spif.c  **** /**************************************************************************************************
 305:FLASH/spif.c  **** 
 306:FLASH/spif.c  **** bool SPIF_WriteDisable(SPIF_HandleTypeDef *Handle)
 307:FLASH/spif.c  **** {
 408              		.loc 1 307 1 is_stmt 1 view -0
 409              		.cfi_startproc
 410              		@ args = 0, pretend = 0, frame = 8
 411              		@ frame_needed = 0, uses_anonymous_args = 0
 412              		.loc 1 307 1 is_stmt 0 view .LVU86
 413 0000 30B5     		push	{r4, r5, lr}
 414              	.LCFI12:
 415              		.cfi_def_cfa_offset 12
 416              		.cfi_offset 4, -12
 417              		.cfi_offset 5, -8
 418              		.cfi_offset 14, -4
 419 0002 83B0     		sub	sp, sp, #12
 420              	.LCFI13:
 421              		.cfi_def_cfa_offset 24
 422 0004 0446     		mov	r4, r0
 308:FLASH/spif.c  ****   bool retVal = true;
 423              		.loc 1 308 3 is_stmt 1 view .LVU87
 424              	.LVL40:
 309:FLASH/spif.c  ****   uint8_t tx[1] = {SPIF_CMD_WRITEDISABLE};
 425              		.loc 1 309 3 view .LVU88
 426              		.loc 1 309 11 is_stmt 0 view .LVU89
 427 0006 0423     		movs	r3, #4
 428 0008 8DF80430 		strb	r3, [sp, #4]
 310:FLASH/spif.c  ****   SPIF_CsPin(Handle, 0);
 429              		.loc 1 310 3 is_stmt 1 view .LVU90
 430 000c 0021     		movs	r1, #0
 431 000e FFF7FEFF 		bl	SPIF_CsPin
 432              	.LVL41:
 311:FLASH/spif.c  ****   if (SPIF_Transmit(Handle, tx, 1, 100) == false)
 433              		.loc 1 311 3 view .LVU91
 434              		.loc 1 311 7 is_stmt 0 view .LVU92
 435 0012 6423     		movs	r3, #100
 436 0014 0122     		movs	r2, #1
 437 0016 01A9     		add	r1, sp, #4
 438 0018 2046     		mov	r0, r4
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 14


 439 001a FFF7FEFF 		bl	SPIF_Transmit
 440              	.LVL42:
 441 001e 0546     		mov	r5, r0
 442              	.LVL43:
 312:FLASH/spif.c  ****   {
 313:FLASH/spif.c  ****     retVal = false;
 314:FLASH/spif.c  ****     dprintf("SPIF_WriteDisable() Error\r\n");
 443              		.loc 1 314 45 is_stmt 1 view .LVU93
 315:FLASH/spif.c  ****   }
 316:FLASH/spif.c  ****   SPIF_CsPin(Handle, 1);
 444              		.loc 1 316 3 view .LVU94
 445 0020 0121     		movs	r1, #1
 446 0022 2046     		mov	r0, r4
 447 0024 FFF7FEFF 		bl	SPIF_CsPin
 448              	.LVL44:
 317:FLASH/spif.c  ****   return retVal;
 449              		.loc 1 317 3 view .LVU95
 318:FLASH/spif.c  **** }
 450              		.loc 1 318 1 is_stmt 0 view .LVU96
 451 0028 2846     		mov	r0, r5
 452 002a 03B0     		add	sp, sp, #12
 453              	.LCFI14:
 454              		.cfi_def_cfa_offset 12
 455              		@ sp needed
 456 002c 30BD     		pop	{r4, r5, pc}
 457              		.loc 1 318 1 view .LVU97
 458              		.cfi_endproc
 459              	.LFE165:
 461              		.section	.text.SPIF_ReadReg1,"ax",%progbits
 462              		.align	1
 463              		.global	SPIF_ReadReg1
 464              		.syntax unified
 465              		.thumb
 466              		.thumb_func
 468              	SPIF_ReadReg1:
 469              	.LVL45:
 470              	.LFB166:
 319:FLASH/spif.c  **** 
 320:FLASH/spif.c  **** /**************************************************************************************************
 321:FLASH/spif.c  **** 
 322:FLASH/spif.c  **** uint8_t SPIF_ReadReg1(SPIF_HandleTypeDef *Handle)
 323:FLASH/spif.c  **** {
 471              		.loc 1 323 1 is_stmt 1 view -0
 472              		.cfi_startproc
 473              		@ args = 0, pretend = 0, frame = 8
 474              		@ frame_needed = 0, uses_anonymous_args = 0
 475              		.loc 1 323 1 is_stmt 0 view .LVU99
 476 0000 30B5     		push	{r4, r5, lr}
 477              	.LCFI15:
 478              		.cfi_def_cfa_offset 12
 479              		.cfi_offset 4, -12
 480              		.cfi_offset 5, -8
 481              		.cfi_offset 14, -4
 482 0002 85B0     		sub	sp, sp, #20
 483              	.LCFI16:
 484              		.cfi_def_cfa_offset 32
 485 0004 0446     		mov	r4, r0
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 15


 324:FLASH/spif.c  ****   uint8_t retVal = 0;
 486              		.loc 1 324 3 is_stmt 1 view .LVU100
 487              	.LVL46:
 325:FLASH/spif.c  ****   uint8_t tx[2] = {SPIF_CMD_READSTATUS1, SPIF_DUMMY_BYTE};
 488              		.loc 1 325 3 view .LVU101
 489              		.loc 1 325 11 is_stmt 0 view .LVU102
 490 0006 4AF20553 		movw	r3, #42245
 491 000a ADF80C30 		strh	r3, [sp, #12]	@ movhi
 326:FLASH/spif.c  ****   uint8_t rx[2];
 492              		.loc 1 326 3 is_stmt 1 view .LVU103
 327:FLASH/spif.c  ****   SPIF_CsPin(Handle, 0);
 493              		.loc 1 327 3 view .LVU104
 494 000e 0021     		movs	r1, #0
 495 0010 FFF7FEFF 		bl	SPIF_CsPin
 496              	.LVL47:
 328:FLASH/spif.c  ****   if (SPIF_TransmitReceive(Handle, tx, rx, 2, 100) == true)
 497              		.loc 1 328 3 view .LVU105
 498              		.loc 1 328 7 is_stmt 0 view .LVU106
 499 0014 6423     		movs	r3, #100
 500 0016 0093     		str	r3, [sp]
 501 0018 0223     		movs	r3, #2
 502 001a 02AA     		add	r2, sp, #8
 503 001c 03A9     		add	r1, sp, #12
 504 001e 2046     		mov	r0, r4
 505 0020 FFF7FEFF 		bl	SPIF_TransmitReceive
 506              	.LVL48:
 507              		.loc 1 328 6 discriminator 1 view .LVU107
 508 0024 40B1     		cbz	r0, .L30
 329:FLASH/spif.c  ****   {
 330:FLASH/spif.c  ****     retVal = rx[1];
 509              		.loc 1 330 5 is_stmt 1 view .LVU108
 510              		.loc 1 330 12 is_stmt 0 view .LVU109
 511 0026 9DF80950 		ldrb	r5, [sp, #9]	@ zero_extendqisi2
 512              	.LVL49:
 513              	.L29:
 331:FLASH/spif.c  ****   }
 332:FLASH/spif.c  ****   SPIF_CsPin(Handle, 1);
 514              		.loc 1 332 3 is_stmt 1 view .LVU110
 515 002a 0121     		movs	r1, #1
 516 002c 2046     		mov	r0, r4
 517 002e FFF7FEFF 		bl	SPIF_CsPin
 518              	.LVL50:
 333:FLASH/spif.c  ****   return retVal;
 519              		.loc 1 333 3 view .LVU111
 334:FLASH/spif.c  **** }
 520              		.loc 1 334 1 is_stmt 0 view .LVU112
 521 0032 2846     		mov	r0, r5
 522 0034 05B0     		add	sp, sp, #20
 523              	.LCFI17:
 524              		.cfi_remember_state
 525              		.cfi_def_cfa_offset 12
 526              		@ sp needed
 527 0036 30BD     		pop	{r4, r5, pc}
 528              	.LVL51:
 529              	.L30:
 530              	.LCFI18:
 531              		.cfi_restore_state
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 16


 324:FLASH/spif.c  ****   uint8_t tx[2] = {SPIF_CMD_READSTATUS1, SPIF_DUMMY_BYTE};
 532              		.loc 1 324 11 view .LVU113
 533 0038 0025     		movs	r5, #0
 534 003a F6E7     		b	.L29
 535              		.cfi_endproc
 536              	.LFE166:
 538              		.section	.text.SPIF_ReadReg2,"ax",%progbits
 539              		.align	1
 540              		.global	SPIF_ReadReg2
 541              		.syntax unified
 542              		.thumb
 543              		.thumb_func
 545              	SPIF_ReadReg2:
 546              	.LVL52:
 547              	.LFB167:
 335:FLASH/spif.c  **** 
 336:FLASH/spif.c  **** /**************************************************************************************************
 337:FLASH/spif.c  **** 
 338:FLASH/spif.c  **** uint8_t SPIF_ReadReg2(SPIF_HandleTypeDef *Handle)
 339:FLASH/spif.c  **** {
 548              		.loc 1 339 1 is_stmt 1 view -0
 549              		.cfi_startproc
 550              		@ args = 0, pretend = 0, frame = 8
 551              		@ frame_needed = 0, uses_anonymous_args = 0
 552              		.loc 1 339 1 is_stmt 0 view .LVU115
 553 0000 30B5     		push	{r4, r5, lr}
 554              	.LCFI19:
 555              		.cfi_def_cfa_offset 12
 556              		.cfi_offset 4, -12
 557              		.cfi_offset 5, -8
 558              		.cfi_offset 14, -4
 559 0002 85B0     		sub	sp, sp, #20
 560              	.LCFI20:
 561              		.cfi_def_cfa_offset 32
 562 0004 0446     		mov	r4, r0
 340:FLASH/spif.c  ****   uint8_t retVal = 0;
 563              		.loc 1 340 3 is_stmt 1 view .LVU116
 564              	.LVL53:
 341:FLASH/spif.c  ****   uint8_t tx[2] = {SPIF_CMD_READSTATUS2, SPIF_DUMMY_BYTE};
 565              		.loc 1 341 3 view .LVU117
 566              		.loc 1 341 11 is_stmt 0 view .LVU118
 567 0006 4AF23553 		movw	r3, #42293
 568 000a ADF80C30 		strh	r3, [sp, #12]	@ movhi
 342:FLASH/spif.c  ****   uint8_t rx[2];
 569              		.loc 1 342 3 is_stmt 1 view .LVU119
 343:FLASH/spif.c  ****   SPIF_CsPin(Handle, 0);
 570              		.loc 1 343 3 view .LVU120
 571 000e 0021     		movs	r1, #0
 572 0010 FFF7FEFF 		bl	SPIF_CsPin
 573              	.LVL54:
 344:FLASH/spif.c  ****   if (SPIF_TransmitReceive(Handle, tx, rx, 2, 100) == true)
 574              		.loc 1 344 3 view .LVU121
 575              		.loc 1 344 7 is_stmt 0 view .LVU122
 576 0014 6423     		movs	r3, #100
 577 0016 0093     		str	r3, [sp]
 578 0018 0223     		movs	r3, #2
 579 001a 02AA     		add	r2, sp, #8
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 17


 580 001c 03A9     		add	r1, sp, #12
 581 001e 2046     		mov	r0, r4
 582 0020 FFF7FEFF 		bl	SPIF_TransmitReceive
 583              	.LVL55:
 584              		.loc 1 344 6 discriminator 1 view .LVU123
 585 0024 40B1     		cbz	r0, .L34
 345:FLASH/spif.c  ****   {
 346:FLASH/spif.c  ****     retVal = rx[1];
 586              		.loc 1 346 5 is_stmt 1 view .LVU124
 587              		.loc 1 346 12 is_stmt 0 view .LVU125
 588 0026 9DF80950 		ldrb	r5, [sp, #9]	@ zero_extendqisi2
 589              	.LVL56:
 590              	.L33:
 347:FLASH/spif.c  ****   }
 348:FLASH/spif.c  ****   SPIF_CsPin(Handle, 1);
 591              		.loc 1 348 3 is_stmt 1 view .LVU126
 592 002a 0121     		movs	r1, #1
 593 002c 2046     		mov	r0, r4
 594 002e FFF7FEFF 		bl	SPIF_CsPin
 595              	.LVL57:
 349:FLASH/spif.c  ****   return retVal;
 596              		.loc 1 349 3 view .LVU127
 350:FLASH/spif.c  **** }
 597              		.loc 1 350 1 is_stmt 0 view .LVU128
 598 0032 2846     		mov	r0, r5
 599 0034 05B0     		add	sp, sp, #20
 600              	.LCFI21:
 601              		.cfi_remember_state
 602              		.cfi_def_cfa_offset 12
 603              		@ sp needed
 604 0036 30BD     		pop	{r4, r5, pc}
 605              	.LVL58:
 606              	.L34:
 607              	.LCFI22:
 608              		.cfi_restore_state
 340:FLASH/spif.c  ****   uint8_t tx[2] = {SPIF_CMD_READSTATUS2, SPIF_DUMMY_BYTE};
 609              		.loc 1 340 11 view .LVU129
 610 0038 0025     		movs	r5, #0
 611 003a F6E7     		b	.L33
 612              		.cfi_endproc
 613              	.LFE167:
 615              		.section	.text.SPIF_ReadReg3,"ax",%progbits
 616              		.align	1
 617              		.global	SPIF_ReadReg3
 618              		.syntax unified
 619              		.thumb
 620              		.thumb_func
 622              	SPIF_ReadReg3:
 623              	.LVL59:
 624              	.LFB168:
 351:FLASH/spif.c  **** 
 352:FLASH/spif.c  **** /**************************************************************************************************
 353:FLASH/spif.c  **** 
 354:FLASH/spif.c  **** uint8_t SPIF_ReadReg3(SPIF_HandleTypeDef *Handle)
 355:FLASH/spif.c  **** {
 625              		.loc 1 355 1 is_stmt 1 view -0
 626              		.cfi_startproc
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 18


 627              		@ args = 0, pretend = 0, frame = 8
 628              		@ frame_needed = 0, uses_anonymous_args = 0
 629              		.loc 1 355 1 is_stmt 0 view .LVU131
 630 0000 30B5     		push	{r4, r5, lr}
 631              	.LCFI23:
 632              		.cfi_def_cfa_offset 12
 633              		.cfi_offset 4, -12
 634              		.cfi_offset 5, -8
 635              		.cfi_offset 14, -4
 636 0002 85B0     		sub	sp, sp, #20
 637              	.LCFI24:
 638              		.cfi_def_cfa_offset 32
 639 0004 0446     		mov	r4, r0
 356:FLASH/spif.c  ****   uint8_t retVal = 0;
 640              		.loc 1 356 3 is_stmt 1 view .LVU132
 641              	.LVL60:
 357:FLASH/spif.c  ****   uint8_t tx[2] = {SPIF_CMD_READSTATUS3, SPIF_DUMMY_BYTE};
 642              		.loc 1 357 3 view .LVU133
 643              		.loc 1 357 11 is_stmt 0 view .LVU134
 644 0006 4AF21553 		movw	r3, #42261
 645 000a ADF80C30 		strh	r3, [sp, #12]	@ movhi
 358:FLASH/spif.c  ****   uint8_t rx[2];
 646              		.loc 1 358 3 is_stmt 1 view .LVU135
 359:FLASH/spif.c  ****   SPIF_CsPin(Handle, 0);
 647              		.loc 1 359 3 view .LVU136
 648 000e 0021     		movs	r1, #0
 649 0010 FFF7FEFF 		bl	SPIF_CsPin
 650              	.LVL61:
 360:FLASH/spif.c  ****   if (SPIF_TransmitReceive(Handle, tx, rx, 2, 100) == true)
 651              		.loc 1 360 3 view .LVU137
 652              		.loc 1 360 7 is_stmt 0 view .LVU138
 653 0014 6423     		movs	r3, #100
 654 0016 0093     		str	r3, [sp]
 655 0018 0223     		movs	r3, #2
 656 001a 02AA     		add	r2, sp, #8
 657 001c 03A9     		add	r1, sp, #12
 658 001e 2046     		mov	r0, r4
 659 0020 FFF7FEFF 		bl	SPIF_TransmitReceive
 660              	.LVL62:
 661              		.loc 1 360 6 discriminator 1 view .LVU139
 662 0024 40B1     		cbz	r0, .L38
 361:FLASH/spif.c  ****   {
 362:FLASH/spif.c  ****     retVal = rx[1];
 663              		.loc 1 362 5 is_stmt 1 view .LVU140
 664              		.loc 1 362 12 is_stmt 0 view .LVU141
 665 0026 9DF80950 		ldrb	r5, [sp, #9]	@ zero_extendqisi2
 666              	.LVL63:
 667              	.L37:
 363:FLASH/spif.c  ****   }
 364:FLASH/spif.c  ****   SPIF_CsPin(Handle, 1);
 668              		.loc 1 364 3 is_stmt 1 view .LVU142
 669 002a 0121     		movs	r1, #1
 670 002c 2046     		mov	r0, r4
 671 002e FFF7FEFF 		bl	SPIF_CsPin
 672              	.LVL64:
 365:FLASH/spif.c  ****   return retVal;
 673              		.loc 1 365 3 view .LVU143
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 19


 366:FLASH/spif.c  **** }
 674              		.loc 1 366 1 is_stmt 0 view .LVU144
 675 0032 2846     		mov	r0, r5
 676 0034 05B0     		add	sp, sp, #20
 677              	.LCFI25:
 678              		.cfi_remember_state
 679              		.cfi_def_cfa_offset 12
 680              		@ sp needed
 681 0036 30BD     		pop	{r4, r5, pc}
 682              	.LVL65:
 683              	.L38:
 684              	.LCFI26:
 685              		.cfi_restore_state
 356:FLASH/spif.c  ****   uint8_t tx[2] = {SPIF_CMD_READSTATUS3, SPIF_DUMMY_BYTE};
 686              		.loc 1 356 11 view .LVU145
 687 0038 0025     		movs	r5, #0
 688 003a F6E7     		b	.L37
 689              		.cfi_endproc
 690              	.LFE168:
 692              		.section	.text.SPIF_WriteReg1,"ax",%progbits
 693              		.align	1
 694              		.global	SPIF_WriteReg1
 695              		.syntax unified
 696              		.thumb
 697              		.thumb_func
 699              	SPIF_WriteReg1:
 700              	.LVL66:
 701              	.LFB169:
 367:FLASH/spif.c  **** 
 368:FLASH/spif.c  **** /**************************************************************************************************
 369:FLASH/spif.c  **** 
 370:FLASH/spif.c  **** bool SPIF_WriteReg1(SPIF_HandleTypeDef *Handle, uint8_t Data)
 371:FLASH/spif.c  **** {
 702              		.loc 1 371 1 is_stmt 1 view -0
 703              		.cfi_startproc
 704              		@ args = 0, pretend = 0, frame = 8
 705              		@ frame_needed = 0, uses_anonymous_args = 0
 706              		.loc 1 371 1 is_stmt 0 view .LVU147
 707 0000 30B5     		push	{r4, r5, lr}
 708              	.LCFI27:
 709              		.cfi_def_cfa_offset 12
 710              		.cfi_offset 4, -12
 711              		.cfi_offset 5, -8
 712              		.cfi_offset 14, -4
 713 0002 83B0     		sub	sp, sp, #12
 714              	.LCFI28:
 715              		.cfi_def_cfa_offset 24
 716 0004 0446     		mov	r4, r0
 372:FLASH/spif.c  ****   bool retVal = true;
 717              		.loc 1 372 3 is_stmt 1 view .LVU148
 718              	.LVL67:
 373:FLASH/spif.c  ****   uint8_t tx[2] = {SPIF_CMD_WRITESTATUS1, Data};
 719              		.loc 1 373 3 view .LVU149
 720              		.loc 1 373 11 is_stmt 0 view .LVU150
 721 0006 0125     		movs	r5, #1
 722 0008 8DF80450 		strb	r5, [sp, #4]
 723 000c 8DF80510 		strb	r1, [sp, #5]
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 20


 374:FLASH/spif.c  ****   uint8_t cmd = SPIF_CMD_WRITESTATUSEN;
 724              		.loc 1 374 3 is_stmt 1 view .LVU151
 725              		.loc 1 374 11 is_stmt 0 view .LVU152
 726 0010 5023     		movs	r3, #80
 727 0012 8DF80330 		strb	r3, [sp, #3]
 375:FLASH/spif.c  ****   do
 728              		.loc 1 375 3 is_stmt 1 view .LVU153
 376:FLASH/spif.c  ****   {
 377:FLASH/spif.c  ****     SPIF_CsPin(Handle, 0);
 729              		.loc 1 377 5 view .LVU154
 730 0016 0021     		movs	r1, #0
 731              	.LVL68:
 732              		.loc 1 377 5 is_stmt 0 view .LVU155
 733 0018 FFF7FEFF 		bl	SPIF_CsPin
 734              	.LVL69:
 378:FLASH/spif.c  ****     if (SPIF_Transmit(Handle, &cmd, 1, 100) == false)
 735              		.loc 1 378 5 is_stmt 1 view .LVU156
 736              		.loc 1 378 9 is_stmt 0 view .LVU157
 737 001c 6423     		movs	r3, #100
 738 001e 2A46     		mov	r2, r5
 739 0020 0DF10301 		add	r1, sp, #3
 740 0024 2046     		mov	r0, r4
 741 0026 FFF7FEFF 		bl	SPIF_Transmit
 742              	.LVL70:
 743              		.loc 1 378 8 discriminator 1 view .LVU158
 744 002a 38B9     		cbnz	r0, .L41
 745 002c 0546     		mov	r5, r0
 379:FLASH/spif.c  ****     {
 380:FLASH/spif.c  ****       retVal = false;
 746              		.loc 1 380 7 is_stmt 1 view .LVU159
 747              	.LVL71:
 381:FLASH/spif.c  ****       SPIF_CsPin(Handle, 1);
 748              		.loc 1 381 7 view .LVU160
 749 002e 0121     		movs	r1, #1
 750 0030 2046     		mov	r0, r4
 751 0032 FFF7FEFF 		bl	SPIF_CsPin
 752              	.LVL72:
 382:FLASH/spif.c  ****       break;
 753              		.loc 1 382 7 view .LVU161
 754              	.L42:
 376:FLASH/spif.c  ****     SPIF_CsPin(Handle, 0);
 755              		.loc 1 376 3 view .LVU162
 383:FLASH/spif.c  ****     }
 384:FLASH/spif.c  ****     SPIF_CsPin(Handle, 1);
 385:FLASH/spif.c  ****     SPIF_CsPin(Handle, 0);
 386:FLASH/spif.c  ****     if (SPIF_Transmit(Handle, tx, 2, 100) == false)
 387:FLASH/spif.c  ****     {
 388:FLASH/spif.c  ****       retVal = false;
 389:FLASH/spif.c  ****       SPIF_CsPin(Handle, 1);
 390:FLASH/spif.c  ****       break;
 391:FLASH/spif.c  ****     }
 392:FLASH/spif.c  ****     SPIF_CsPin(Handle, 1);
 393:FLASH/spif.c  ****   } while (0);
 394:FLASH/spif.c  **** 
 395:FLASH/spif.c  ****   return retVal;
 756              		.loc 1 395 3 view .LVU163
 396:FLASH/spif.c  **** }
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 21


 757              		.loc 1 396 1 is_stmt 0 view .LVU164
 758 0036 2846     		mov	r0, r5
 759 0038 03B0     		add	sp, sp, #12
 760              	.LCFI29:
 761              		.cfi_remember_state
 762              		.cfi_def_cfa_offset 12
 763              		@ sp needed
 764 003a 30BD     		pop	{r4, r5, pc}
 765              	.LVL73:
 766              	.L41:
 767              	.LCFI30:
 768              		.cfi_restore_state
 384:FLASH/spif.c  ****     SPIF_CsPin(Handle, 0);
 769              		.loc 1 384 5 is_stmt 1 view .LVU165
 770 003c 0121     		movs	r1, #1
 771 003e 2046     		mov	r0, r4
 772 0040 FFF7FEFF 		bl	SPIF_CsPin
 773              	.LVL74:
 385:FLASH/spif.c  ****     if (SPIF_Transmit(Handle, tx, 2, 100) == false)
 774              		.loc 1 385 5 view .LVU166
 775 0044 0021     		movs	r1, #0
 776 0046 2046     		mov	r0, r4
 777 0048 FFF7FEFF 		bl	SPIF_CsPin
 778              	.LVL75:
 386:FLASH/spif.c  ****     {
 779              		.loc 1 386 5 view .LVU167
 386:FLASH/spif.c  ****     {
 780              		.loc 1 386 9 is_stmt 0 view .LVU168
 781 004c 6423     		movs	r3, #100
 782 004e 0222     		movs	r2, #2
 783 0050 01A9     		add	r1, sp, #4
 784 0052 2046     		mov	r0, r4
 785 0054 FFF7FEFF 		bl	SPIF_Transmit
 786              	.LVL76:
 386:FLASH/spif.c  ****     {
 787              		.loc 1 386 8 discriminator 1 view .LVU169
 788 0058 0546     		mov	r5, r0
 789 005a 20B9     		cbnz	r0, .L43
 388:FLASH/spif.c  ****       SPIF_CsPin(Handle, 1);
 790              		.loc 1 388 7 is_stmt 1 view .LVU170
 791              	.LVL77:
 389:FLASH/spif.c  ****       break;
 792              		.loc 1 389 7 view .LVU171
 793 005c 0121     		movs	r1, #1
 794 005e 2046     		mov	r0, r4
 795 0060 FFF7FEFF 		bl	SPIF_CsPin
 796              	.LVL78:
 390:FLASH/spif.c  ****     }
 797              		.loc 1 390 7 view .LVU172
 798 0064 E7E7     		b	.L42
 799              	.LVL79:
 800              	.L43:
 392:FLASH/spif.c  ****   } while (0);
 801              		.loc 1 392 5 view .LVU173
 802 0066 0121     		movs	r1, #1
 803 0068 2046     		mov	r0, r4
 804 006a FFF7FEFF 		bl	SPIF_CsPin
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 22


 805              	.LVL80:
 806 006e E2E7     		b	.L42
 807              		.cfi_endproc
 808              	.LFE169:
 810              		.section	.text.SPIF_WriteReg2,"ax",%progbits
 811              		.align	1
 812              		.global	SPIF_WriteReg2
 813              		.syntax unified
 814              		.thumb
 815              		.thumb_func
 817              	SPIF_WriteReg2:
 818              	.LVL81:
 819              	.LFB170:
 397:FLASH/spif.c  **** 
 398:FLASH/spif.c  **** /**************************************************************************************************
 399:FLASH/spif.c  **** 
 400:FLASH/spif.c  **** bool SPIF_WriteReg2(SPIF_HandleTypeDef *Handle, uint8_t Data)
 401:FLASH/spif.c  **** {
 820              		.loc 1 401 1 view -0
 821              		.cfi_startproc
 822              		@ args = 0, pretend = 0, frame = 8
 823              		@ frame_needed = 0, uses_anonymous_args = 0
 824              		.loc 1 401 1 is_stmt 0 view .LVU175
 825 0000 30B5     		push	{r4, r5, lr}
 826              	.LCFI31:
 827              		.cfi_def_cfa_offset 12
 828              		.cfi_offset 4, -12
 829              		.cfi_offset 5, -8
 830              		.cfi_offset 14, -4
 831 0002 83B0     		sub	sp, sp, #12
 832              	.LCFI32:
 833              		.cfi_def_cfa_offset 24
 834 0004 0446     		mov	r4, r0
 402:FLASH/spif.c  ****   bool retVal = true;
 835              		.loc 1 402 3 is_stmt 1 view .LVU176
 836              	.LVL82:
 403:FLASH/spif.c  ****   uint8_t tx[2] = {SPIF_CMD_WRITESTATUS2, Data};
 837              		.loc 1 403 3 view .LVU177
 838              		.loc 1 403 11 is_stmt 0 view .LVU178
 839 0006 3123     		movs	r3, #49
 840 0008 8DF80430 		strb	r3, [sp, #4]
 841 000c 8DF80510 		strb	r1, [sp, #5]
 404:FLASH/spif.c  ****   uint8_t cmd = SPIF_CMD_WRITESTATUSEN;
 842              		.loc 1 404 3 is_stmt 1 view .LVU179
 843              		.loc 1 404 11 is_stmt 0 view .LVU180
 844 0010 5023     		movs	r3, #80
 845 0012 8DF80330 		strb	r3, [sp, #3]
 405:FLASH/spif.c  ****   do
 846              		.loc 1 405 3 is_stmt 1 view .LVU181
 406:FLASH/spif.c  ****   {
 407:FLASH/spif.c  ****     SPIF_CsPin(Handle, 0);
 847              		.loc 1 407 5 view .LVU182
 848 0016 0021     		movs	r1, #0
 849              	.LVL83:
 850              		.loc 1 407 5 is_stmt 0 view .LVU183
 851 0018 FFF7FEFF 		bl	SPIF_CsPin
 852              	.LVL84:
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 23


 408:FLASH/spif.c  ****     if (SPIF_Transmit(Handle, &cmd, 1, 100) == false)
 853              		.loc 1 408 5 is_stmt 1 view .LVU184
 854              		.loc 1 408 9 is_stmt 0 view .LVU185
 855 001c 6423     		movs	r3, #100
 856 001e 0122     		movs	r2, #1
 857 0020 0DF10301 		add	r1, sp, #3
 858 0024 2046     		mov	r0, r4
 859 0026 FFF7FEFF 		bl	SPIF_Transmit
 860              	.LVL85:
 861              		.loc 1 408 8 discriminator 1 view .LVU186
 862 002a 38B9     		cbnz	r0, .L46
 863 002c 0546     		mov	r5, r0
 409:FLASH/spif.c  ****     {
 410:FLASH/spif.c  ****       retVal = false;
 864              		.loc 1 410 7 is_stmt 1 view .LVU187
 865              	.LVL86:
 411:FLASH/spif.c  ****       SPIF_CsPin(Handle, 1);
 866              		.loc 1 411 7 view .LVU188
 867 002e 0121     		movs	r1, #1
 868 0030 2046     		mov	r0, r4
 869 0032 FFF7FEFF 		bl	SPIF_CsPin
 870              	.LVL87:
 412:FLASH/spif.c  ****       break;
 871              		.loc 1 412 7 view .LVU189
 872              	.L47:
 406:FLASH/spif.c  ****     SPIF_CsPin(Handle, 0);
 873              		.loc 1 406 3 view .LVU190
 413:FLASH/spif.c  ****     }
 414:FLASH/spif.c  ****     SPIF_CsPin(Handle, 1);
 415:FLASH/spif.c  ****     SPIF_CsPin(Handle, 0);
 416:FLASH/spif.c  ****     if (SPIF_Transmit(Handle, tx, 2, 100) == false)
 417:FLASH/spif.c  ****     {
 418:FLASH/spif.c  ****       retVal = false;
 419:FLASH/spif.c  ****       SPIF_CsPin(Handle, 1);
 420:FLASH/spif.c  ****       break;
 421:FLASH/spif.c  ****     }
 422:FLASH/spif.c  ****     SPIF_CsPin(Handle, 1);
 423:FLASH/spif.c  ****   } while (0);
 424:FLASH/spif.c  **** 
 425:FLASH/spif.c  ****   return retVal;
 874              		.loc 1 425 3 view .LVU191
 426:FLASH/spif.c  **** }
 875              		.loc 1 426 1 is_stmt 0 view .LVU192
 876 0036 2846     		mov	r0, r5
 877 0038 03B0     		add	sp, sp, #12
 878              	.LCFI33:
 879              		.cfi_remember_state
 880              		.cfi_def_cfa_offset 12
 881              		@ sp needed
 882 003a 30BD     		pop	{r4, r5, pc}
 883              	.LVL88:
 884              	.L46:
 885              	.LCFI34:
 886              		.cfi_restore_state
 414:FLASH/spif.c  ****     SPIF_CsPin(Handle, 0);
 887              		.loc 1 414 5 is_stmt 1 view .LVU193
 888 003c 0121     		movs	r1, #1
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 24


 889 003e 2046     		mov	r0, r4
 890 0040 FFF7FEFF 		bl	SPIF_CsPin
 891              	.LVL89:
 415:FLASH/spif.c  ****     if (SPIF_Transmit(Handle, tx, 2, 100) == false)
 892              		.loc 1 415 5 view .LVU194
 893 0044 0021     		movs	r1, #0
 894 0046 2046     		mov	r0, r4
 895 0048 FFF7FEFF 		bl	SPIF_CsPin
 896              	.LVL90:
 416:FLASH/spif.c  ****     {
 897              		.loc 1 416 5 view .LVU195
 416:FLASH/spif.c  ****     {
 898              		.loc 1 416 9 is_stmt 0 view .LVU196
 899 004c 6423     		movs	r3, #100
 900 004e 0222     		movs	r2, #2
 901 0050 01A9     		add	r1, sp, #4
 902 0052 2046     		mov	r0, r4
 903 0054 FFF7FEFF 		bl	SPIF_Transmit
 904              	.LVL91:
 416:FLASH/spif.c  ****     {
 905              		.loc 1 416 8 discriminator 1 view .LVU197
 906 0058 0546     		mov	r5, r0
 907 005a 20B9     		cbnz	r0, .L48
 418:FLASH/spif.c  ****       SPIF_CsPin(Handle, 1);
 908              		.loc 1 418 7 is_stmt 1 view .LVU198
 909              	.LVL92:
 419:FLASH/spif.c  ****       break;
 910              		.loc 1 419 7 view .LVU199
 911 005c 0121     		movs	r1, #1
 912 005e 2046     		mov	r0, r4
 913 0060 FFF7FEFF 		bl	SPIF_CsPin
 914              	.LVL93:
 420:FLASH/spif.c  ****     }
 915              		.loc 1 420 7 view .LVU200
 916 0064 E7E7     		b	.L47
 917              	.LVL94:
 918              	.L48:
 422:FLASH/spif.c  ****   } while (0);
 919              		.loc 1 422 5 view .LVU201
 920 0066 0121     		movs	r1, #1
 921 0068 2046     		mov	r0, r4
 922 006a FFF7FEFF 		bl	SPIF_CsPin
 923              	.LVL95:
 924 006e E2E7     		b	.L47
 925              		.cfi_endproc
 926              	.LFE170:
 928              		.section	.text.SPIF_WriteReg3,"ax",%progbits
 929              		.align	1
 930              		.global	SPIF_WriteReg3
 931              		.syntax unified
 932              		.thumb
 933              		.thumb_func
 935              	SPIF_WriteReg3:
 936              	.LVL96:
 937              	.LFB171:
 427:FLASH/spif.c  **** 
 428:FLASH/spif.c  **** /**************************************************************************************************
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 25


 429:FLASH/spif.c  **** 
 430:FLASH/spif.c  **** bool SPIF_WriteReg3(SPIF_HandleTypeDef *Handle, uint8_t Data)
 431:FLASH/spif.c  **** {
 938              		.loc 1 431 1 view -0
 939              		.cfi_startproc
 940              		@ args = 0, pretend = 0, frame = 8
 941              		@ frame_needed = 0, uses_anonymous_args = 0
 942              		.loc 1 431 1 is_stmt 0 view .LVU203
 943 0000 30B5     		push	{r4, r5, lr}
 944              	.LCFI35:
 945              		.cfi_def_cfa_offset 12
 946              		.cfi_offset 4, -12
 947              		.cfi_offset 5, -8
 948              		.cfi_offset 14, -4
 949 0002 83B0     		sub	sp, sp, #12
 950              	.LCFI36:
 951              		.cfi_def_cfa_offset 24
 952 0004 0446     		mov	r4, r0
 432:FLASH/spif.c  ****   bool retVal = true;
 953              		.loc 1 432 3 is_stmt 1 view .LVU204
 954              	.LVL97:
 433:FLASH/spif.c  ****   uint8_t tx[2] = {SPIF_CMD_WRITESTATUS3, Data};
 955              		.loc 1 433 3 view .LVU205
 956              		.loc 1 433 11 is_stmt 0 view .LVU206
 957 0006 1123     		movs	r3, #17
 958 0008 8DF80430 		strb	r3, [sp, #4]
 959 000c 8DF80510 		strb	r1, [sp, #5]
 434:FLASH/spif.c  ****   uint8_t cmd = SPIF_CMD_WRITESTATUSEN;
 960              		.loc 1 434 3 is_stmt 1 view .LVU207
 961              		.loc 1 434 11 is_stmt 0 view .LVU208
 962 0010 5023     		movs	r3, #80
 963 0012 8DF80330 		strb	r3, [sp, #3]
 435:FLASH/spif.c  ****   do
 964              		.loc 1 435 3 is_stmt 1 view .LVU209
 436:FLASH/spif.c  ****   {
 437:FLASH/spif.c  ****     SPIF_CsPin(Handle, 0);
 965              		.loc 1 437 5 view .LVU210
 966 0016 0021     		movs	r1, #0
 967              	.LVL98:
 968              		.loc 1 437 5 is_stmt 0 view .LVU211
 969 0018 FFF7FEFF 		bl	SPIF_CsPin
 970              	.LVL99:
 438:FLASH/spif.c  ****     if (SPIF_Transmit(Handle, &cmd, 1, 100) == false)
 971              		.loc 1 438 5 is_stmt 1 view .LVU212
 972              		.loc 1 438 9 is_stmt 0 view .LVU213
 973 001c 6423     		movs	r3, #100
 974 001e 0122     		movs	r2, #1
 975 0020 0DF10301 		add	r1, sp, #3
 976 0024 2046     		mov	r0, r4
 977 0026 FFF7FEFF 		bl	SPIF_Transmit
 978              	.LVL100:
 979              		.loc 1 438 8 discriminator 1 view .LVU214
 980 002a 38B9     		cbnz	r0, .L51
 981 002c 0546     		mov	r5, r0
 439:FLASH/spif.c  ****     {
 440:FLASH/spif.c  ****       retVal = false;
 982              		.loc 1 440 7 is_stmt 1 view .LVU215
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 26


 983              	.LVL101:
 441:FLASH/spif.c  ****       SPIF_CsPin(Handle, 1);
 984              		.loc 1 441 7 view .LVU216
 985 002e 0121     		movs	r1, #1
 986 0030 2046     		mov	r0, r4
 987 0032 FFF7FEFF 		bl	SPIF_CsPin
 988              	.LVL102:
 442:FLASH/spif.c  ****       break;
 989              		.loc 1 442 7 view .LVU217
 990              	.L52:
 436:FLASH/spif.c  ****     SPIF_CsPin(Handle, 0);
 991              		.loc 1 436 3 view .LVU218
 443:FLASH/spif.c  ****     }
 444:FLASH/spif.c  ****     SPIF_CsPin(Handle, 1);
 445:FLASH/spif.c  ****     SPIF_CsPin(Handle, 0);
 446:FLASH/spif.c  ****     if (SPIF_Transmit(Handle, tx, 2, 100) == false)
 447:FLASH/spif.c  ****     {
 448:FLASH/spif.c  ****       retVal = false;
 449:FLASH/spif.c  ****       SPIF_CsPin(Handle, 1);
 450:FLASH/spif.c  ****       break;
 451:FLASH/spif.c  ****     }
 452:FLASH/spif.c  ****     SPIF_CsPin(Handle, 1);
 453:FLASH/spif.c  ****   } while (0);
 454:FLASH/spif.c  **** 
 455:FLASH/spif.c  ****   return retVal;
 992              		.loc 1 455 3 view .LVU219
 456:FLASH/spif.c  **** }
 993              		.loc 1 456 1 is_stmt 0 view .LVU220
 994 0036 2846     		mov	r0, r5
 995 0038 03B0     		add	sp, sp, #12
 996              	.LCFI37:
 997              		.cfi_remember_state
 998              		.cfi_def_cfa_offset 12
 999              		@ sp needed
 1000 003a 30BD     		pop	{r4, r5, pc}
 1001              	.LVL103:
 1002              	.L51:
 1003              	.LCFI38:
 1004              		.cfi_restore_state
 444:FLASH/spif.c  ****     SPIF_CsPin(Handle, 0);
 1005              		.loc 1 444 5 is_stmt 1 view .LVU221
 1006 003c 0121     		movs	r1, #1
 1007 003e 2046     		mov	r0, r4
 1008 0040 FFF7FEFF 		bl	SPIF_CsPin
 1009              	.LVL104:
 445:FLASH/spif.c  ****     if (SPIF_Transmit(Handle, tx, 2, 100) == false)
 1010              		.loc 1 445 5 view .LVU222
 1011 0044 0021     		movs	r1, #0
 1012 0046 2046     		mov	r0, r4
 1013 0048 FFF7FEFF 		bl	SPIF_CsPin
 1014              	.LVL105:
 446:FLASH/spif.c  ****     {
 1015              		.loc 1 446 5 view .LVU223
 446:FLASH/spif.c  ****     {
 1016              		.loc 1 446 9 is_stmt 0 view .LVU224
 1017 004c 6423     		movs	r3, #100
 1018 004e 0222     		movs	r2, #2
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 27


 1019 0050 01A9     		add	r1, sp, #4
 1020 0052 2046     		mov	r0, r4
 1021 0054 FFF7FEFF 		bl	SPIF_Transmit
 1022              	.LVL106:
 446:FLASH/spif.c  ****     {
 1023              		.loc 1 446 8 discriminator 1 view .LVU225
 1024 0058 0546     		mov	r5, r0
 1025 005a 20B9     		cbnz	r0, .L53
 448:FLASH/spif.c  ****       SPIF_CsPin(Handle, 1);
 1026              		.loc 1 448 7 is_stmt 1 view .LVU226
 1027              	.LVL107:
 449:FLASH/spif.c  ****       break;
 1028              		.loc 1 449 7 view .LVU227
 1029 005c 0121     		movs	r1, #1
 1030 005e 2046     		mov	r0, r4
 1031 0060 FFF7FEFF 		bl	SPIF_CsPin
 1032              	.LVL108:
 450:FLASH/spif.c  ****     }
 1033              		.loc 1 450 7 view .LVU228
 1034 0064 E7E7     		b	.L52
 1035              	.LVL109:
 1036              	.L53:
 452:FLASH/spif.c  ****   } while (0);
 1037              		.loc 1 452 5 view .LVU229
 1038 0066 0121     		movs	r1, #1
 1039 0068 2046     		mov	r0, r4
 1040 006a FFF7FEFF 		bl	SPIF_CsPin
 1041              	.LVL110:
 1042 006e E2E7     		b	.L52
 1043              		.cfi_endproc
 1044              	.LFE171:
 1046              		.section	.text.SPIF_WaitForWriting,"ax",%progbits
 1047              		.align	1
 1048              		.global	SPIF_WaitForWriting
 1049              		.syntax unified
 1050              		.thumb
 1051              		.thumb_func
 1053              	SPIF_WaitForWriting:
 1054              	.LVL111:
 1055              	.LFB172:
 457:FLASH/spif.c  **** 
 458:FLASH/spif.c  **** /**************************************************************************************************
 459:FLASH/spif.c  **** 
 460:FLASH/spif.c  **** bool SPIF_WaitForWriting(SPIF_HandleTypeDef *Handle, uint32_t Timeout)
 461:FLASH/spif.c  **** {
 1056              		.loc 1 461 1 view -0
 1057              		.cfi_startproc
 1058              		@ args = 0, pretend = 0, frame = 0
 1059              		@ frame_needed = 0, uses_anonymous_args = 0
 1060              		.loc 1 461 1 is_stmt 0 view .LVU231
 1061 0000 70B5     		push	{r4, r5, r6, lr}
 1062              	.LCFI39:
 1063              		.cfi_def_cfa_offset 16
 1064              		.cfi_offset 4, -16
 1065              		.cfi_offset 5, -12
 1066              		.cfi_offset 6, -8
 1067              		.cfi_offset 14, -4
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 28


 1068 0002 0646     		mov	r6, r0
 1069 0004 0D46     		mov	r5, r1
 462:FLASH/spif.c  ****   bool retVal = false;
 1070              		.loc 1 462 3 is_stmt 1 view .LVU232
 1071              	.LVL112:
 463:FLASH/spif.c  ****   uint32_t startTime = HAL_GetTick();
 1072              		.loc 1 463 3 view .LVU233
 1073              		.loc 1 463 24 is_stmt 0 view .LVU234
 1074 0006 FFF7FEFF 		bl	HAL_GetTick
 1075              	.LVL113:
 1076              		.loc 1 463 24 view .LVU235
 1077 000a 0446     		mov	r4, r0
 1078              	.LVL114:
 1079              	.L57:
 464:FLASH/spif.c  ****   while (1)
 1080              		.loc 1 464 3 is_stmt 1 view .LVU236
 465:FLASH/spif.c  ****   {
 466:FLASH/spif.c  ****     SPIF_Delay(1);
 1081              		.loc 1 466 5 view .LVU237
 1082 000c 0120     		movs	r0, #1
 1083 000e FFF7FEFF 		bl	SPIF_Delay
 1084              	.LVL115:
 467:FLASH/spif.c  ****     if (HAL_GetTick() - startTime >= Timeout)
 1085              		.loc 1 467 5 view .LVU238
 1086              		.loc 1 467 9 is_stmt 0 view .LVU239
 1087 0012 FFF7FEFF 		bl	HAL_GetTick
 1088              	.LVL116:
 1089              		.loc 1 467 23 discriminator 1 view .LVU240
 1090 0016 001B     		subs	r0, r0, r4
 1091              		.loc 1 467 8 discriminator 1 view .LVU241
 1092 0018 A842     		cmp	r0, r5
 1093 001a 07D2     		bcs	.L58
 468:FLASH/spif.c  ****     {
 469:FLASH/spif.c  ****       dprintf("SPIF_WaitForWriting() TIMEOUT\r\n");
 470:FLASH/spif.c  ****       break;
 471:FLASH/spif.c  ****     }
 472:FLASH/spif.c  ****     if ((SPIF_ReadReg1(Handle) & SPIF_STATUS1_BUSY) == 0)
 1094              		.loc 1 472 5 is_stmt 1 view .LVU242
 1095              		.loc 1 472 10 is_stmt 0 view .LVU243
 1096 001c 3046     		mov	r0, r6
 1097 001e FFF7FEFF 		bl	SPIF_ReadReg1
 1098              	.LVL117:
 1099              		.loc 1 472 8 discriminator 1 view .LVU244
 1100 0022 10F0010F 		tst	r0, #1
 1101 0026 F1D1     		bne	.L57
 473:FLASH/spif.c  ****     {
 474:FLASH/spif.c  ****       retVal = true;
 1102              		.loc 1 474 14 view .LVU245
 1103 0028 0120     		movs	r0, #1
 1104 002a 00E0     		b	.L56
 1105              	.L58:
 462:FLASH/spif.c  ****   uint32_t startTime = HAL_GetTick();
 1106              		.loc 1 462 8 view .LVU246
 1107 002c 0020     		movs	r0, #0
 1108              	.L56:
 1109              	.LVL118:
 475:FLASH/spif.c  ****       break;
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 29


 476:FLASH/spif.c  ****     }
 477:FLASH/spif.c  ****   }
 478:FLASH/spif.c  ****   return retVal;
 1110              		.loc 1 478 3 is_stmt 1 view .LVU247
 479:FLASH/spif.c  **** }
 1111              		.loc 1 479 1 is_stmt 0 view .LVU248
 1112 002e 70BD     		pop	{r4, r5, r6, pc}
 1113              		.loc 1 479 1 view .LVU249
 1114              		.cfi_endproc
 1115              	.LFE172:
 1117              		.section	.text.SPIF_FindChip,"ax",%progbits
 1118              		.align	1
 1119              		.global	SPIF_FindChip
 1120              		.syntax unified
 1121              		.thumb
 1122              		.thumb_func
 1124              	SPIF_FindChip:
 1125              	.LVL119:
 1126              	.LFB173:
 480:FLASH/spif.c  **** 
 481:FLASH/spif.c  **** /**************************************************************************************************
 482:FLASH/spif.c  **** 
 483:FLASH/spif.c  **** bool SPIF_FindChip(SPIF_HandleTypeDef *Handle)
 484:FLASH/spif.c  **** {
 1127              		.loc 1 484 1 is_stmt 1 view -0
 1128              		.cfi_startproc
 1129              		@ args = 0, pretend = 0, frame = 8
 1130              		@ frame_needed = 0, uses_anonymous_args = 0
 1131              		.loc 1 484 1 is_stmt 0 view .LVU251
 1132 0000 30B5     		push	{r4, r5, lr}
 1133              	.LCFI40:
 1134              		.cfi_def_cfa_offset 12
 1135              		.cfi_offset 4, -12
 1136              		.cfi_offset 5, -8
 1137              		.cfi_offset 14, -4
 1138 0002 85B0     		sub	sp, sp, #20
 1139              	.LCFI41:
 1140              		.cfi_def_cfa_offset 32
 1141 0004 0446     		mov	r4, r0
 485:FLASH/spif.c  ****   uint8_t tx[4] = {SPIF_CMD_JEDECID, 0xFF, 0xFF, 0xFF};
 1142              		.loc 1 485 3 is_stmt 1 view .LVU252
 1143              		.loc 1 485 11 is_stmt 0 view .LVU253
 1144 0006 6FF06003 		mvn	r3, #96
 1145 000a 0393     		str	r3, [sp, #12]
 486:FLASH/spif.c  ****   uint8_t rx[4];
 1146              		.loc 1 486 3 is_stmt 1 view .LVU254
 487:FLASH/spif.c  ****   bool retVal = false;
 1147              		.loc 1 487 3 view .LVU255
 1148              	.LVL120:
 488:FLASH/spif.c  ****   do
 1149              		.loc 1 488 3 view .LVU256
 489:FLASH/spif.c  ****   {
 490:FLASH/spif.c  ****     dprintf("SPIF_FindChip()\r\n");
 1150              		.loc 1 490 35 view .LVU257
 491:FLASH/spif.c  ****     SPIF_CsPin(Handle, 0);
 1151              		.loc 1 491 5 view .LVU258
 1152 000c 0021     		movs	r1, #0
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 30


 1153 000e FFF7FEFF 		bl	SPIF_CsPin
 1154              	.LVL121:
 492:FLASH/spif.c  ****     if (SPIF_TransmitReceive(Handle, tx, rx, 4, 100) == false)
 1155              		.loc 1 492 5 view .LVU259
 1156              		.loc 1 492 9 is_stmt 0 view .LVU260
 1157 0012 6423     		movs	r3, #100
 1158 0014 0093     		str	r3, [sp]
 1159 0016 0423     		movs	r3, #4
 1160 0018 02AA     		add	r2, sp, #8
 1161 001a 03A9     		add	r1, sp, #12
 1162 001c 2046     		mov	r0, r4
 1163 001e FFF7FEFF 		bl	SPIF_TransmitReceive
 1164              	.LVL122:
 1165              		.loc 1 492 8 discriminator 1 view .LVU261
 1166 0022 0546     		mov	r5, r0
 1167 0024 20B9     		cbnz	r0, .L61
 493:FLASH/spif.c  ****     {
 494:FLASH/spif.c  ****       SPIF_CsPin(Handle, 1);
 1168              		.loc 1 494 7 is_stmt 1 view .LVU262
 1169 0026 0121     		movs	r1, #1
 1170 0028 2046     		mov	r0, r4
 1171 002a FFF7FEFF 		bl	SPIF_CsPin
 1172              	.LVL123:
 495:FLASH/spif.c  ****       break;
 1173              		.loc 1 495 7 view .LVU263
 1174 002e 55E0     		b	.L62
 1175              	.L61:
 496:FLASH/spif.c  ****     }
 497:FLASH/spif.c  ****     SPIF_CsPin(Handle, 1);
 1176              		.loc 1 497 5 view .LVU264
 1177 0030 0121     		movs	r1, #1
 1178 0032 2046     		mov	r0, r4
 1179 0034 FFF7FEFF 		bl	SPIF_CsPin
 1180              	.LVL124:
 498:FLASH/spif.c  ****     dprintf("CHIP ID: 0x%02X%02X%02X\r\n", rx[1], rx[2], rx[3]);
 1181              		.loc 1 498 64 view .LVU265
 499:FLASH/spif.c  ****     Handle->Manufactor = rx[1];
 1182              		.loc 1 499 5 view .LVU266
 1183              		.loc 1 499 28 is_stmt 0 view .LVU267
 1184 0038 9DF80930 		ldrb	r3, [sp, #9]	@ zero_extendqisi2
 1185              		.loc 1 499 24 view .LVU268
 1186 003c 2372     		strb	r3, [r4, #8]
 500:FLASH/spif.c  ****     Handle->MemType = rx[2];
 1187              		.loc 1 500 5 is_stmt 1 view .LVU269
 1188              		.loc 1 500 25 is_stmt 0 view .LVU270
 1189 003e 9DF80A20 		ldrb	r2, [sp, #10]	@ zero_extendqisi2
 1190              		.loc 1 500 21 view .LVU271
 1191 0042 E272     		strb	r2, [r4, #11]
 501:FLASH/spif.c  ****     Handle->Size = rx[3];
 1192              		.loc 1 501 5 is_stmt 1 view .LVU272
 1193              		.loc 1 501 22 is_stmt 0 view .LVU273
 1194 0044 9DF80B20 		ldrb	r2, [sp, #11]	@ zero_extendqisi2
 1195              		.loc 1 501 18 view .LVU274
 1196 0048 6272     		strb	r2, [r4, #9]
 502:FLASH/spif.c  **** 
 503:FLASH/spif.c  ****     dprintf("SPIF MANUFACTURE: ");
 1197              		.loc 1 503 34 is_stmt 1 view .LVU275
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 31


 504:FLASH/spif.c  ****     switch (Handle->Manufactor)
 1198              		.loc 1 504 5 view .LVU276
 1199 004a A12B     		cmp	r3, #161
 1200 004c 2ED8     		bhi	.L63
 1201 004e 852B     		cmp	r3, #133
 1202 0050 08D2     		bcs	.L64
 1203 0052 372B     		cmp	r3, #55
 1204 0054 27D8     		bhi	.L65
 1205 0056 1C2B     		cmp	r3, #28
 1206 0058 1CD2     		bcs	.L66
 1207 005a 012B     		cmp	r3, #1
 1208 005c 0CD0     		beq	.L67
 1209 005e 042B     		cmp	r3, #4
 1210 0060 08D1     		bne	.L68
 1211 0062 09E0     		b	.L67
 1212              	.L64:
 1213 0064 7B33     		adds	r3, r3, #123
 1214 0066 DBB2     		uxtb	r3, r3
 1215 0068 2E49     		ldr	r1, .L85
 1216 006a 21FA03F3 		lsr	r3, r1, r3
 1217 006e 13F0010F 		tst	r3, #1
 1218 0072 01D1     		bne	.L67
 1219              	.L68:
 505:FLASH/spif.c  ****     {
 506:FLASH/spif.c  ****     case SPIF_MANUFACTOR_WINBOND:
 507:FLASH/spif.c  ****       dprintf("WINBOND");
 508:FLASH/spif.c  ****       break;
 509:FLASH/spif.c  ****     case SPIF_MANUFACTOR_SPANSION:
 510:FLASH/spif.c  ****       dprintf("SPANSION");
 511:FLASH/spif.c  ****       break;
 512:FLASH/spif.c  ****     case SPIF_MANUFACTOR_MICRON:
 513:FLASH/spif.c  ****       dprintf("MICRON");
 514:FLASH/spif.c  ****       break;
 515:FLASH/spif.c  ****     case SPIF_MANUFACTOR_MACRONIX:
 516:FLASH/spif.c  ****       dprintf("MACRONIX");
 517:FLASH/spif.c  ****       break;
 518:FLASH/spif.c  ****     case SPIF_MANUFACTOR_ISSI:
 519:FLASH/spif.c  ****       dprintf("ISSI");
 520:FLASH/spif.c  ****       break;
 521:FLASH/spif.c  ****     case SPIF_MANUFACTOR_GIGADEVICE:
 522:FLASH/spif.c  ****       dprintf("GIGADEVICE");
 523:FLASH/spif.c  ****       break;
 524:FLASH/spif.c  ****     case SPIF_MANUFACTOR_AMIC:
 525:FLASH/spif.c  ****       dprintf("AMIC");
 526:FLASH/spif.c  ****       break;
 527:FLASH/spif.c  ****     case SPIF_MANUFACTOR_SST:
 528:FLASH/spif.c  ****       dprintf("SST");
 529:FLASH/spif.c  ****       break;
 530:FLASH/spif.c  ****     case SPIF_MANUFACTOR_HYUNDAI:
 531:FLASH/spif.c  ****       dprintf("HYUNDAI");
 532:FLASH/spif.c  ****       break;
 533:FLASH/spif.c  ****     case SPIF_MANUFACTOR_FUDAN:
 534:FLASH/spif.c  ****       dprintf("FUDAN");
 535:FLASH/spif.c  ****       break;
 536:FLASH/spif.c  ****     case SPIF_MANUFACTOR_ESMT:
 537:FLASH/spif.c  ****       dprintf("ESMT");
 538:FLASH/spif.c  ****       break;
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 32


 539:FLASH/spif.c  ****     case SPIF_MANUFACTOR_INTEL:
 540:FLASH/spif.c  ****       dprintf("INTEL");
 541:FLASH/spif.c  ****       break;
 542:FLASH/spif.c  ****     case SPIF_MANUFACTOR_SANYO:
 543:FLASH/spif.c  ****       dprintf("SANYO");
 544:FLASH/spif.c  ****       break;
 545:FLASH/spif.c  ****     case SPIF_MANUFACTOR_FUJITSU:
 546:FLASH/spif.c  ****       dprintf("FUJITSU");
 547:FLASH/spif.c  ****       break;
 548:FLASH/spif.c  ****     case SPIF_MANUFACTOR_EON:
 549:FLASH/spif.c  ****       dprintf("EON");
 550:FLASH/spif.c  ****       break;
 551:FLASH/spif.c  ****     case SPIF_MANUFACTOR_PUYA:
 552:FLASH/spif.c  ****       dprintf("PUYA");
 553:FLASH/spif.c  ****       break;
 554:FLASH/spif.c  ****     default:
 555:FLASH/spif.c  ****       Handle->Manufactor = SPIF_MANUFACTOR_ERROR;
 1220              		.loc 1 555 7 view .LVU277
 1221              		.loc 1 555 26 is_stmt 0 view .LVU278
 1222 0074 0023     		movs	r3, #0
 1223 0076 2372     		strb	r3, [r4, #8]
 556:FLASH/spif.c  ****       dprintf("ERROR");
 1224              		.loc 1 556 23 is_stmt 1 view .LVU279
 557:FLASH/spif.c  ****       break;
 1225              		.loc 1 557 7 view .LVU280
 1226              	.L67:
 558:FLASH/spif.c  ****     }
 559:FLASH/spif.c  ****     dprintf(" - MEMTYPE: 0x%02X", Handle->MemType);
 1227              		.loc 1 559 51 view .LVU281
 560:FLASH/spif.c  ****     dprintf(" - SIZE: ");
 1228              		.loc 1 560 25 view .LVU282
 561:FLASH/spif.c  ****     switch (Handle->Size)
 1229              		.loc 1 561 5 view .LVU283
 1230 0078 A2F11103 		sub	r3, r2, #17
 1231 007c 0F2B     		cmp	r3, #15
 1232 007e 4ED8     		bhi	.L71
 1233 0080 DFE803F0 		tbb	[pc, r3]
 1234              	.L73:
 1235 0084 24       		.byte	(.L82-.L73)/2
 1236 0085 2F       		.byte	(.L81-.L73)/2
 1237 0086 32       		.byte	(.L80-.L73)/2
 1238 0087 35       		.byte	(.L79-.L73)/2
 1239 0088 38       		.byte	(.L78-.L73)/2
 1240 0089 3B       		.byte	(.L77-.L73)/2
 1241 008a 3E       		.byte	(.L76-.L73)/2
 1242 008b 41       		.byte	(.L75-.L73)/2
 1243 008c 45       		.byte	(.L74-.L73)/2
 1244 008d 4D       		.byte	(.L71-.L73)/2
 1245 008e 4D       		.byte	(.L71-.L73)/2
 1246 008f 4D       		.byte	(.L71-.L73)/2
 1247 0090 4D       		.byte	(.L71-.L73)/2
 1248 0091 4D       		.byte	(.L71-.L73)/2
 1249 0092 4D       		.byte	(.L71-.L73)/2
 1250 0093 49       		.byte	(.L72-.L73)/2
 1251              		.p2align 1
 1252              	.L66:
 504:FLASH/spif.c  ****     {
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 33


 1253              		.loc 1 504 5 is_stmt 0 view .LVU284
 1254 0094 1C3B     		subs	r3, r3, #28
 1255 0096 DBB2     		uxtb	r3, r3
 1256 0098 2349     		ldr	r1, .L85+4
 1257 009a 21FA03F3 		lsr	r3, r1, r3
 1258 009e 13F0010F 		tst	r3, #1
 1259 00a2 E7D0     		beq	.L68
 1260 00a4 E8E7     		b	.L67
 1261              	.L65:
 1262 00a6 622B     		cmp	r3, #98
 1263 00a8 E4D1     		bne	.L68
 1264 00aa E5E7     		b	.L67
 1265              	.L63:
 1266 00ac C82B     		cmp	r3, #200
 1267 00ae 0AD8     		bhi	.L69
 1268 00b0 AD2B     		cmp	r3, #173
 1269 00b2 DFD3     		bcc	.L68
 1270 00b4 5333     		adds	r3, r3, #83
 1271 00b6 DBB2     		uxtb	r3, r3
 1272 00b8 1C49     		ldr	r1, .L85+8
 1273 00ba 21FA03F3 		lsr	r3, r1, r3
 1274 00be 13F0010F 		tst	r3, #1
 1275 00c2 D9D1     		bne	.L67
 1276 00c4 D6E7     		b	.L68
 1277              	.L69:
 1278 00c6 EF2B     		cmp	r3, #239
 1279 00c8 D4D1     		bne	.L68
 1280 00ca D5E7     		b	.L67
 1281              	.L82:
 562:FLASH/spif.c  ****     {
 563:FLASH/spif.c  ****     case SPIF_SIZE_1MBIT:
 564:FLASH/spif.c  ****       Handle->BlockCnt = 2;
 1282              		.loc 1 564 7 is_stmt 1 view .LVU285
 1283              		.loc 1 564 24 is_stmt 0 view .LVU286
 1284 00cc 0223     		movs	r3, #2
 1285 00ce E361     		str	r3, [r4, #28]
 565:FLASH/spif.c  ****       dprintf("1 MBIT\r\n");
 1286              		.loc 1 565 28 is_stmt 1 view .LVU287
 566:FLASH/spif.c  ****       break;
 1287              		.loc 1 566 7 view .LVU288
 1288              	.L83:
 567:FLASH/spif.c  ****     case SPIF_SIZE_2MBIT:
 568:FLASH/spif.c  ****       Handle->BlockCnt = 4;
 569:FLASH/spif.c  ****       dprintf("2 MBIT\r\n");
 570:FLASH/spif.c  ****       break;
 571:FLASH/spif.c  ****     case SPIF_SIZE_4MBIT:
 572:FLASH/spif.c  ****       Handle->BlockCnt = 8;
 573:FLASH/spif.c  ****       dprintf("4 MBIT\r\n");
 574:FLASH/spif.c  ****       break;
 575:FLASH/spif.c  ****     case SPIF_SIZE_8MBIT:
 576:FLASH/spif.c  ****       Handle->BlockCnt = 16;
 577:FLASH/spif.c  ****       dprintf("8 MBIT\r\n");
 578:FLASH/spif.c  ****       break;
 579:FLASH/spif.c  ****     case SPIF_SIZE_16MBIT:
 580:FLASH/spif.c  ****       Handle->BlockCnt = 32;
 581:FLASH/spif.c  ****       dprintf("16 MBIT\r\n");
 582:FLASH/spif.c  ****       break;
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 34


 583:FLASH/spif.c  ****     case SPIF_SIZE_32MBIT:
 584:FLASH/spif.c  ****       Handle->BlockCnt = 64;
 585:FLASH/spif.c  ****       dprintf("32 MBIT\r\n");
 586:FLASH/spif.c  ****       break;
 587:FLASH/spif.c  ****     case SPIF_SIZE_64MBIT:
 588:FLASH/spif.c  ****       Handle->BlockCnt = 128;
 589:FLASH/spif.c  ****       dprintf("64 MBIT\r\n");
 590:FLASH/spif.c  ****       break;
 591:FLASH/spif.c  ****     case SPIF_SIZE_128MBIT:
 592:FLASH/spif.c  ****       Handle->BlockCnt = 256;
 593:FLASH/spif.c  ****       dprintf("128 MBIT\r\n");
 594:FLASH/spif.c  ****       break;
 595:FLASH/spif.c  ****     case SPIF_SIZE_256MBIT:
 596:FLASH/spif.c  ****       Handle->BlockCnt = 512;
 597:FLASH/spif.c  ****       dprintf("256 MBIT\r\n");
 598:FLASH/spif.c  ****       break;
 599:FLASH/spif.c  ****     case SPIF_SIZE_512MBIT:
 600:FLASH/spif.c  ****       Handle->BlockCnt = 1024;
 601:FLASH/spif.c  ****       dprintf("512 MBIT\r\n");
 602:FLASH/spif.c  ****       break;
 603:FLASH/spif.c  ****     default:
 604:FLASH/spif.c  ****       Handle->Size = SPIF_SIZE_ERROR;
 605:FLASH/spif.c  ****       dprintf("ERROR\r\n");
 606:FLASH/spif.c  ****       break;
 607:FLASH/spif.c  ****     }
 608:FLASH/spif.c  **** 
 609:FLASH/spif.c  ****     Handle->SectorCnt = Handle->BlockCnt * 16;
 1289              		.loc 1 609 5 view .LVU289
 1290              		.loc 1 609 31 is_stmt 0 view .LVU290
 1291 00d0 E369     		ldr	r3, [r4, #28]
 1292              		.loc 1 609 42 view .LVU291
 1293 00d2 1A01     		lsls	r2, r3, #4
 1294              		.loc 1 609 23 view .LVU292
 1295 00d4 A261     		str	r2, [r4, #24]
 610:FLASH/spif.c  ****     Handle->PageCnt = (Handle->SectorCnt * SPIF_SECTOR_SIZE) / SPIF_PAGE_SIZE;
 1296              		.loc 1 610 5 is_stmt 1 view .LVU293
 1297              		.loc 1 610 42 is_stmt 0 view .LVU294
 1298 00d6 1B04     		lsls	r3, r3, #16
 1299              		.loc 1 610 62 view .LVU295
 1300 00d8 1B0A     		lsrs	r3, r3, #8
 1301              		.loc 1 610 21 view .LVU296
 1302 00da 6361     		str	r3, [r4, #20]
 611:FLASH/spif.c  ****     dprintf("SPIF BLOCK CNT: %ld\r\n", Handle->BlockCnt);
 1303              		.loc 1 611 57 is_stmt 1 view .LVU297
 612:FLASH/spif.c  ****     dprintf("SPIF SECTOR CNT: %ld\r\n", Handle->SectorCnt);
 1304              		.loc 1 612 59 view .LVU298
 613:FLASH/spif.c  ****     dprintf("SPIF PAGE CNT: %ld\r\n", Handle->PageCnt);
 1305              		.loc 1 613 55 view .LVU299
 614:FLASH/spif.c  ****     dprintf("SPIF STATUS1: 0x%02X\r\n", SPIF_ReadReg1(Handle));
 1306              		.loc 1 614 63 view .LVU300
 615:FLASH/spif.c  ****     dprintf("SPIF STATUS2: 0x%02X\r\n", SPIF_ReadReg2(Handle));
 1307              		.loc 1 615 63 view .LVU301
 616:FLASH/spif.c  ****     dprintf("SPIF STATUS3: 0x%02X\r\n", SPIF_ReadReg3(Handle));
 1308              		.loc 1 616 63 view .LVU302
 617:FLASH/spif.c  ****     retVal = true;
 1309              		.loc 1 617 5 view .LVU303
 1310              	.LVL125:
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 35


 1311              	.L62:
 489:FLASH/spif.c  ****     dprintf("SPIF_FindChip()\r\n");
 1312              		.loc 1 489 3 view .LVU304
 618:FLASH/spif.c  **** 
 619:FLASH/spif.c  ****   } while (0);
 620:FLASH/spif.c  **** 
 621:FLASH/spif.c  ****   return retVal;
 1313              		.loc 1 621 3 view .LVU305
 622:FLASH/spif.c  **** }
 1314              		.loc 1 622 1 is_stmt 0 view .LVU306
 1315 00dc 2846     		mov	r0, r5
 1316 00de 05B0     		add	sp, sp, #20
 1317              	.LCFI42:
 1318              		.cfi_remember_state
 1319              		.cfi_def_cfa_offset 12
 1320              		@ sp needed
 1321 00e0 30BD     		pop	{r4, r5, pc}
 1322              	.LVL126:
 1323              	.L81:
 1324              	.LCFI43:
 1325              		.cfi_restore_state
 568:FLASH/spif.c  ****       dprintf("2 MBIT\r\n");
 1326              		.loc 1 568 7 is_stmt 1 view .LVU307
 568:FLASH/spif.c  ****       dprintf("2 MBIT\r\n");
 1327              		.loc 1 568 24 is_stmt 0 view .LVU308
 1328 00e2 0423     		movs	r3, #4
 1329 00e4 E361     		str	r3, [r4, #28]
 569:FLASH/spif.c  ****       break;
 1330              		.loc 1 569 28 is_stmt 1 view .LVU309
 570:FLASH/spif.c  ****     case SPIF_SIZE_4MBIT:
 1331              		.loc 1 570 7 view .LVU310
 1332 00e6 F3E7     		b	.L83
 1333              	.L80:
 572:FLASH/spif.c  ****       dprintf("4 MBIT\r\n");
 1334              		.loc 1 572 7 view .LVU311
 572:FLASH/spif.c  ****       dprintf("4 MBIT\r\n");
 1335              		.loc 1 572 24 is_stmt 0 view .LVU312
 1336 00e8 0823     		movs	r3, #8
 1337 00ea E361     		str	r3, [r4, #28]
 573:FLASH/spif.c  ****       break;
 1338              		.loc 1 573 28 is_stmt 1 view .LVU313
 574:FLASH/spif.c  ****     case SPIF_SIZE_8MBIT:
 1339              		.loc 1 574 7 view .LVU314
 1340 00ec F0E7     		b	.L83
 1341              	.L79:
 576:FLASH/spif.c  ****       dprintf("8 MBIT\r\n");
 1342              		.loc 1 576 7 view .LVU315
 576:FLASH/spif.c  ****       dprintf("8 MBIT\r\n");
 1343              		.loc 1 576 24 is_stmt 0 view .LVU316
 1344 00ee 1023     		movs	r3, #16
 1345 00f0 E361     		str	r3, [r4, #28]
 577:FLASH/spif.c  ****       break;
 1346              		.loc 1 577 28 is_stmt 1 view .LVU317
 578:FLASH/spif.c  ****     case SPIF_SIZE_16MBIT:
 1347              		.loc 1 578 7 view .LVU318
 1348 00f2 EDE7     		b	.L83
 1349              	.L78:
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 36


 580:FLASH/spif.c  ****       dprintf("16 MBIT\r\n");
 1350              		.loc 1 580 7 view .LVU319
 580:FLASH/spif.c  ****       dprintf("16 MBIT\r\n");
 1351              		.loc 1 580 24 is_stmt 0 view .LVU320
 1352 00f4 2023     		movs	r3, #32
 1353 00f6 E361     		str	r3, [r4, #28]
 581:FLASH/spif.c  ****       break;
 1354              		.loc 1 581 29 is_stmt 1 view .LVU321
 582:FLASH/spif.c  ****     case SPIF_SIZE_32MBIT:
 1355              		.loc 1 582 7 view .LVU322
 1356 00f8 EAE7     		b	.L83
 1357              	.L77:
 584:FLASH/spif.c  ****       dprintf("32 MBIT\r\n");
 1358              		.loc 1 584 7 view .LVU323
 584:FLASH/spif.c  ****       dprintf("32 MBIT\r\n");
 1359              		.loc 1 584 24 is_stmt 0 view .LVU324
 1360 00fa 4023     		movs	r3, #64
 1361 00fc E361     		str	r3, [r4, #28]
 585:FLASH/spif.c  ****       break;
 1362              		.loc 1 585 29 is_stmt 1 view .LVU325
 586:FLASH/spif.c  ****     case SPIF_SIZE_64MBIT:
 1363              		.loc 1 586 7 view .LVU326
 1364 00fe E7E7     		b	.L83
 1365              	.L76:
 588:FLASH/spif.c  ****       dprintf("64 MBIT\r\n");
 1366              		.loc 1 588 7 view .LVU327
 588:FLASH/spif.c  ****       dprintf("64 MBIT\r\n");
 1367              		.loc 1 588 24 is_stmt 0 view .LVU328
 1368 0100 8023     		movs	r3, #128
 1369 0102 E361     		str	r3, [r4, #28]
 589:FLASH/spif.c  ****       break;
 1370              		.loc 1 589 29 is_stmt 1 view .LVU329
 590:FLASH/spif.c  ****     case SPIF_SIZE_128MBIT:
 1371              		.loc 1 590 7 view .LVU330
 1372 0104 E4E7     		b	.L83
 1373              	.L75:
 592:FLASH/spif.c  ****       dprintf("128 MBIT\r\n");
 1374              		.loc 1 592 7 view .LVU331
 592:FLASH/spif.c  ****       dprintf("128 MBIT\r\n");
 1375              		.loc 1 592 24 is_stmt 0 view .LVU332
 1376 0106 4FF48073 		mov	r3, #256
 1377 010a E361     		str	r3, [r4, #28]
 593:FLASH/spif.c  ****       break;
 1378              		.loc 1 593 30 is_stmt 1 view .LVU333
 594:FLASH/spif.c  ****     case SPIF_SIZE_256MBIT:
 1379              		.loc 1 594 7 view .LVU334
 1380 010c E0E7     		b	.L83
 1381              	.L74:
 596:FLASH/spif.c  ****       dprintf("256 MBIT\r\n");
 1382              		.loc 1 596 7 view .LVU335
 596:FLASH/spif.c  ****       dprintf("256 MBIT\r\n");
 1383              		.loc 1 596 24 is_stmt 0 view .LVU336
 1384 010e 4FF40073 		mov	r3, #512
 1385 0112 E361     		str	r3, [r4, #28]
 597:FLASH/spif.c  ****       break;
 1386              		.loc 1 597 30 is_stmt 1 view .LVU337
 598:FLASH/spif.c  ****     case SPIF_SIZE_512MBIT:
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 37


 1387              		.loc 1 598 7 view .LVU338
 1388 0114 DCE7     		b	.L83
 1389              	.L72:
 600:FLASH/spif.c  ****       dprintf("512 MBIT\r\n");
 1390              		.loc 1 600 7 view .LVU339
 600:FLASH/spif.c  ****       dprintf("512 MBIT\r\n");
 1391              		.loc 1 600 24 is_stmt 0 view .LVU340
 1392 0116 4FF48063 		mov	r3, #1024
 1393 011a E361     		str	r3, [r4, #28]
 601:FLASH/spif.c  ****       break;
 1394              		.loc 1 601 30 is_stmt 1 view .LVU341
 602:FLASH/spif.c  ****     default:
 1395              		.loc 1 602 7 view .LVU342
 1396 011c D8E7     		b	.L83
 1397              	.L71:
 604:FLASH/spif.c  ****       dprintf("ERROR\r\n");
 1398              		.loc 1 604 7 view .LVU343
 604:FLASH/spif.c  ****       dprintf("ERROR\r\n");
 1399              		.loc 1 604 20 is_stmt 0 view .LVU344
 1400 011e 0023     		movs	r3, #0
 1401 0120 6372     		strb	r3, [r4, #9]
 605:FLASH/spif.c  ****       break;
 1402              		.loc 1 605 27 is_stmt 1 view .LVU345
 606:FLASH/spif.c  ****     }
 1403              		.loc 1 606 7 view .LVU346
 1404 0122 D5E7     		b	.L83
 1405              	.L86:
 1406              		.align	2
 1407              	.L85:
 1408 0124 91000011 		.word	285212817
 1409 0128 11000008 		.word	134217745
 1410 012c 01002408 		.word	136577025
 1411              		.cfi_endproc
 1412              	.LFE173:
 1414              		.section	.text.SPIF_WriteFn,"ax",%progbits
 1415              		.align	1
 1416              		.global	SPIF_WriteFn
 1417              		.syntax unified
 1418              		.thumb
 1419              		.thumb_func
 1421              	SPIF_WriteFn:
 1422              	.LVL127:
 1423              	.LFB174:
 623:FLASH/spif.c  **** 
 624:FLASH/spif.c  **** /**************************************************************************************************
 625:FLASH/spif.c  **** 
 626:FLASH/spif.c  **** bool SPIF_WriteFn(SPIF_HandleTypeDef *Handle, uint32_t PageNumber, uint8_t *Data, uint32_t Size, ui
 627:FLASH/spif.c  **** {
 1424              		.loc 1 627 1 view -0
 1425              		.cfi_startproc
 1426              		@ args = 4, pretend = 0, frame = 8
 1427              		@ frame_needed = 0, uses_anonymous_args = 0
 1428              		.loc 1 627 1 is_stmt 0 view .LVU348
 1429 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1430              	.LCFI44:
 1431              		.cfi_def_cfa_offset 24
 1432              		.cfi_offset 4, -24
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 38


 1433              		.cfi_offset 5, -20
 1434              		.cfi_offset 6, -16
 1435              		.cfi_offset 7, -12
 1436              		.cfi_offset 8, -8
 1437              		.cfi_offset 14, -4
 1438 0004 82B0     		sub	sp, sp, #8
 1439              	.LCFI45:
 1440              		.cfi_def_cfa_offset 32
 1441 0006 0446     		mov	r4, r0
 1442 0008 1646     		mov	r6, r2
 1443 000a 089D     		ldr	r5, [sp, #32]
 628:FLASH/spif.c  ****   bool retVal = false;
 1444              		.loc 1 628 3 is_stmt 1 view .LVU349
 1445              	.LVL128:
 629:FLASH/spif.c  ****   uint32_t address = 0, maximum = SPIF_PAGE_SIZE - Offset;
 1446              		.loc 1 629 3 view .LVU350
 630:FLASH/spif.c  ****   uint8_t tx[5];
 1447              		.loc 1 630 3 view .LVU351
 631:FLASH/spif.c  ****   do
 1448              		.loc 1 631 3 view .LVU352
 632:FLASH/spif.c  ****   {
 633:FLASH/spif.c  **** #if SPIF_DEBUG != SPIF_DEBUG_DISABLE
 634:FLASH/spif.c  ****     uint32_t dbgTime = HAL_GetTick();
 635:FLASH/spif.c  **** #endif
 636:FLASH/spif.c  ****     dprintf("SPIF_WritePage() START PAGE %ld\r\n", PageNumber);
 1449              		.loc 1 636 63 view .LVU353
 637:FLASH/spif.c  ****     if (PageNumber >= Handle->PageCnt)
 1450              		.loc 1 637 5 view .LVU354
 1451              		.loc 1 637 29 is_stmt 0 view .LVU355
 1452 000c 4269     		ldr	r2, [r0, #20]
 1453              	.LVL129:
 1454              		.loc 1 637 8 view .LVU356
 1455 000e 8A42     		cmp	r2, r1
 1456 0010 62D9     		bls	.L93
 1457 0012 C5F58078 		rsb	r8, r5, #256
 1458              	.LVL130:
 638:FLASH/spif.c  ****     {
 639:FLASH/spif.c  ****       dprintf("SPIF_WritePage() ERROR PageNumber\r\n");
 640:FLASH/spif.c  ****       break;
 641:FLASH/spif.c  ****     }
 642:FLASH/spif.c  ****     if (Offset >= SPIF_PAGE_SIZE)
 1459              		.loc 1 642 5 is_stmt 1 view .LVU357
 1460              		.loc 1 642 8 is_stmt 0 view .LVU358
 1461 0016 FF2D     		cmp	r5, #255
 1462 0018 66D8     		bhi	.L94
 643:FLASH/spif.c  ****     {
 644:FLASH/spif.c  ****       dprintf("SPIF_WritePage() ERROR Offset\r\n");
 645:FLASH/spif.c  ****       break;
 646:FLASH/spif.c  ****     }
 647:FLASH/spif.c  ****     if (Size > maximum)
 1463              		.loc 1 647 5 is_stmt 1 view .LVU359
 1464              		.loc 1 647 8 is_stmt 0 view .LVU360
 1465 001a 9845     		cmp	r8, r3
 1466 001c 00D3     		bcc	.L89
 1467 001e 9846     		mov	r8, r3
 1468              	.LVL131:
 1469              	.L89:
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 39


 648:FLASH/spif.c  ****     {
 649:FLASH/spif.c  ****       Size = maximum;
 650:FLASH/spif.c  ****     }
 651:FLASH/spif.c  ****     address = SPIF_PageToAddress(PageNumber) + Offset;
 1470              		.loc 1 651 5 is_stmt 1 view .LVU361
 1471              		.loc 1 651 13 is_stmt 0 view .LVU362
 1472 0020 05EB0125 		add	r5, r5, r1, lsl #8
 1473              	.LVL132:
 652:FLASH/spif.c  **** #if SPIF_DEBUG == SPIF_DEBUG_FULL
 653:FLASH/spif.c  ****       dprintf("SPIF WRITING {\r\n0x%02X", Data[0]);
 654:FLASH/spif.c  ****       for (int i = 1; i < Size; i++)
 655:FLASH/spif.c  ****       {
 656:FLASH/spif.c  ****         if (i % 8 == 0)
 657:FLASH/spif.c  ****         {
 658:FLASH/spif.c  ****           dprintf("\r\n");
 659:FLASH/spif.c  ****         }
 660:FLASH/spif.c  ****         dprintf(", 0x%02X", Data[i]);
 661:FLASH/spif.c  ****       }
 662:FLASH/spif.c  ****       dprintf("\r\n}\r\n");
 663:FLASH/spif.c  **** #endif
 664:FLASH/spif.c  ****     if (SPIF_WriteEnable(Handle) == false)
 1474              		.loc 1 664 5 is_stmt 1 view .LVU363
 1475              		.loc 1 664 9 is_stmt 0 view .LVU364
 1476 0024 2046     		mov	r0, r4
 1477              	.LVL133:
 1478              		.loc 1 664 9 view .LVU365
 1479 0026 FFF7FEFF 		bl	SPIF_WriteEnable
 1480              	.LVL134:
 1481              		.loc 1 664 8 discriminator 1 view .LVU366
 1482 002a 0746     		mov	r7, r0
 1483 002c 0028     		cmp	r0, #0
 1484 002e 54D0     		beq	.L88
 665:FLASH/spif.c  ****     {
 666:FLASH/spif.c  ****       break;
 667:FLASH/spif.c  ****     }
 668:FLASH/spif.c  ****     SPIF_CsPin(Handle, 0);
 1485              		.loc 1 668 5 is_stmt 1 view .LVU367
 1486 0030 0021     		movs	r1, #0
 1487 0032 2046     		mov	r0, r4
 1488 0034 FFF7FEFF 		bl	SPIF_CsPin
 1489              	.LVL135:
 669:FLASH/spif.c  ****     if (Handle->BlockCnt >= 512)
 1490              		.loc 1 669 5 view .LVU368
 1491              		.loc 1 669 15 is_stmt 0 view .LVU369
 1492 0038 E369     		ldr	r3, [r4, #28]
 1493              		.loc 1 669 8 view .LVU370
 1494 003a B3F5007F 		cmp	r3, #512
 1495 003e 28D3     		bcc	.L90
 670:FLASH/spif.c  ****     {
 671:FLASH/spif.c  ****       tx[0] = SPIF_CMD_PAGEPROG4ADD;
 1496              		.loc 1 671 7 is_stmt 1 view .LVU371
 1497              		.loc 1 671 13 is_stmt 0 view .LVU372
 1498 0040 1223     		movs	r3, #18
 1499 0042 8DF80030 		strb	r3, [sp]
 672:FLASH/spif.c  ****       tx[1] = (address & 0xFF000000) >> 24;
 1500              		.loc 1 672 7 is_stmt 1 view .LVU373
 1501              		.loc 1 672 38 is_stmt 0 view .LVU374
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 40


 1502 0046 2B0E     		lsrs	r3, r5, #24
 1503              		.loc 1 672 13 view .LVU375
 1504 0048 8DF80130 		strb	r3, [sp, #1]
 673:FLASH/spif.c  ****       tx[2] = (address & 0x00FF0000) >> 16;
 1505              		.loc 1 673 7 is_stmt 1 view .LVU376
 1506              		.loc 1 673 38 is_stmt 0 view .LVU377
 1507 004c 2B0C     		lsrs	r3, r5, #16
 1508              		.loc 1 673 13 view .LVU378
 1509 004e 8DF80230 		strb	r3, [sp, #2]
 674:FLASH/spif.c  ****       tx[3] = (address & 0x0000FF00) >> 8;
 1510              		.loc 1 674 7 is_stmt 1 view .LVU379
 1511              		.loc 1 674 38 is_stmt 0 view .LVU380
 1512 0052 2B0A     		lsrs	r3, r5, #8
 1513              		.loc 1 674 13 view .LVU381
 1514 0054 8DF80330 		strb	r3, [sp, #3]
 675:FLASH/spif.c  ****       tx[4] = (address & 0x000000FF);
 1515              		.loc 1 675 7 is_stmt 1 view .LVU382
 1516              		.loc 1 675 13 is_stmt 0 view .LVU383
 1517 0058 8DF80450 		strb	r5, [sp, #4]
 676:FLASH/spif.c  ****       if (SPIF_Transmit(Handle, tx, 5, 100) == false)
 1518              		.loc 1 676 7 is_stmt 1 view .LVU384
 1519              		.loc 1 676 11 is_stmt 0 view .LVU385
 1520 005c 6423     		movs	r3, #100
 1521 005e 0522     		movs	r2, #5
 1522 0060 6946     		mov	r1, sp
 1523 0062 2046     		mov	r0, r4
 1524 0064 FFF7FEFF 		bl	SPIF_Transmit
 1525              	.LVL136:
 1526              		.loc 1 676 10 discriminator 1 view .LVU386
 1527 0068 0746     		mov	r7, r0
 1528 006a 68B1     		cbz	r0, .L96
 1529              	.L91:
 677:FLASH/spif.c  ****       {
 678:FLASH/spif.c  ****         SPIF_CsPin(Handle, 1);
 679:FLASH/spif.c  ****         break;
 680:FLASH/spif.c  ****       }
 681:FLASH/spif.c  ****     }
 682:FLASH/spif.c  ****     else
 683:FLASH/spif.c  ****     {
 684:FLASH/spif.c  ****       tx[0] = SPIF_CMD_PAGEPROG3ADD;
 685:FLASH/spif.c  ****       tx[1] = (address & 0x00FF0000) >> 16;
 686:FLASH/spif.c  ****       tx[2] = (address & 0x0000FF00) >> 8;
 687:FLASH/spif.c  ****       tx[3] = (address & 0x000000FF);
 688:FLASH/spif.c  ****       if (SPIF_Transmit(Handle, tx, 4, 100) == false)
 689:FLASH/spif.c  ****       {
 690:FLASH/spif.c  ****         SPIF_CsPin(Handle, 1);
 691:FLASH/spif.c  ****         break;
 692:FLASH/spif.c  ****       }
 693:FLASH/spif.c  ****     }
 694:FLASH/spif.c  ****     if (SPIF_Transmit(Handle, Data, Size, 1000) == false)
 1530              		.loc 1 694 5 is_stmt 1 view .LVU387
 1531              		.loc 1 694 9 is_stmt 0 view .LVU388
 1532 006c 4FF47A73 		mov	r3, #1000
 1533 0070 4246     		mov	r2, r8
 1534 0072 3146     		mov	r1, r6
 1535 0074 2046     		mov	r0, r4
 1536 0076 FFF7FEFF 		bl	SPIF_Transmit
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 41


 1537              	.LVL137:
 1538              		.loc 1 694 8 discriminator 1 view .LVU389
 1539 007a 0746     		mov	r7, r0
 1540 007c 10BB     		cbnz	r0, .L92
 695:FLASH/spif.c  ****     {
 696:FLASH/spif.c  ****       SPIF_CsPin(Handle, 1);
 1541              		.loc 1 696 7 is_stmt 1 view .LVU390
 1542 007e 0121     		movs	r1, #1
 1543 0080 2046     		mov	r0, r4
 1544 0082 FFF7FEFF 		bl	SPIF_CsPin
 1545              	.LVL138:
 697:FLASH/spif.c  ****       break;
 1546              		.loc 1 697 7 view .LVU391
 1547 0086 28E0     		b	.L88
 1548              	.L96:
 678:FLASH/spif.c  ****         break;
 1549              		.loc 1 678 9 view .LVU392
 1550 0088 0121     		movs	r1, #1
 1551 008a 2046     		mov	r0, r4
 1552 008c FFF7FEFF 		bl	SPIF_CsPin
 1553              	.LVL139:
 679:FLASH/spif.c  ****       }
 1554              		.loc 1 679 9 view .LVU393
 1555 0090 23E0     		b	.L88
 1556              	.L90:
 684:FLASH/spif.c  ****       tx[1] = (address & 0x00FF0000) >> 16;
 1557              		.loc 1 684 7 view .LVU394
 684:FLASH/spif.c  ****       tx[1] = (address & 0x00FF0000) >> 16;
 1558              		.loc 1 684 13 is_stmt 0 view .LVU395
 1559 0092 0223     		movs	r3, #2
 1560 0094 8DF80030 		strb	r3, [sp]
 685:FLASH/spif.c  ****       tx[2] = (address & 0x0000FF00) >> 8;
 1561              		.loc 1 685 7 is_stmt 1 view .LVU396
 685:FLASH/spif.c  ****       tx[2] = (address & 0x0000FF00) >> 8;
 1562              		.loc 1 685 38 is_stmt 0 view .LVU397
 1563 0098 2B0C     		lsrs	r3, r5, #16
 685:FLASH/spif.c  ****       tx[2] = (address & 0x0000FF00) >> 8;
 1564              		.loc 1 685 13 view .LVU398
 1565 009a 8DF80130 		strb	r3, [sp, #1]
 686:FLASH/spif.c  ****       tx[3] = (address & 0x000000FF);
 1566              		.loc 1 686 7 is_stmt 1 view .LVU399
 686:FLASH/spif.c  ****       tx[3] = (address & 0x000000FF);
 1567              		.loc 1 686 38 is_stmt 0 view .LVU400
 1568 009e 2B0A     		lsrs	r3, r5, #8
 686:FLASH/spif.c  ****       tx[3] = (address & 0x000000FF);
 1569              		.loc 1 686 13 view .LVU401
 1570 00a0 8DF80230 		strb	r3, [sp, #2]
 687:FLASH/spif.c  ****       if (SPIF_Transmit(Handle, tx, 4, 100) == false)
 1571              		.loc 1 687 7 is_stmt 1 view .LVU402
 687:FLASH/spif.c  ****       if (SPIF_Transmit(Handle, tx, 4, 100) == false)
 1572              		.loc 1 687 13 is_stmt 0 view .LVU403
 1573 00a4 8DF80350 		strb	r5, [sp, #3]
 688:FLASH/spif.c  ****       {
 1574              		.loc 1 688 7 is_stmt 1 view .LVU404
 688:FLASH/spif.c  ****       {
 1575              		.loc 1 688 11 is_stmt 0 view .LVU405
 1576 00a8 6423     		movs	r3, #100
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 42


 1577 00aa 0422     		movs	r2, #4
 1578 00ac 6946     		mov	r1, sp
 1579 00ae 2046     		mov	r0, r4
 1580 00b0 FFF7FEFF 		bl	SPIF_Transmit
 1581              	.LVL140:
 688:FLASH/spif.c  ****       {
 1582              		.loc 1 688 10 discriminator 1 view .LVU406
 1583 00b4 0746     		mov	r7, r0
 1584 00b6 0028     		cmp	r0, #0
 1585 00b8 D8D1     		bne	.L91
 690:FLASH/spif.c  ****         break;
 1586              		.loc 1 690 9 is_stmt 1 view .LVU407
 1587 00ba 0121     		movs	r1, #1
 1588 00bc 2046     		mov	r0, r4
 1589 00be FFF7FEFF 		bl	SPIF_CsPin
 1590              	.LVL141:
 691:FLASH/spif.c  ****       }
 1591              		.loc 1 691 9 view .LVU408
 1592 00c2 0AE0     		b	.L88
 1593              	.L92:
 698:FLASH/spif.c  ****     }
 699:FLASH/spif.c  ****     SPIF_CsPin(Handle, 1);
 1594              		.loc 1 699 5 view .LVU409
 1595 00c4 0121     		movs	r1, #1
 1596 00c6 2046     		mov	r0, r4
 1597 00c8 FFF7FEFF 		bl	SPIF_CsPin
 1598              	.LVL142:
 700:FLASH/spif.c  ****     if (SPIF_WaitForWriting(Handle, 100))
 1599              		.loc 1 700 5 view .LVU410
 1600              		.loc 1 700 9 is_stmt 0 view .LVU411
 1601 00cc 6421     		movs	r1, #100
 1602 00ce 2046     		mov	r0, r4
 1603 00d0 FFF7FEFF 		bl	SPIF_WaitForWriting
 1604              	.LVL143:
 1605 00d4 0746     		mov	r7, r0
 1606 00d6 00E0     		b	.L88
 1607              	.LVL144:
 1608              	.L93:
 628:FLASH/spif.c  ****   uint32_t address = 0, maximum = SPIF_PAGE_SIZE - Offset;
 1609              		.loc 1 628 8 view .LVU412
 1610 00d8 0027     		movs	r7, #0
 1611              	.LVL145:
 1612              	.L88:
 632:FLASH/spif.c  **** #if SPIF_DEBUG != SPIF_DEBUG_DISABLE
 1613              		.loc 1 632 3 is_stmt 1 view .LVU413
 701:FLASH/spif.c  ****     {
 702:FLASH/spif.c  ****       dprintf("SPIF_WritePage() %d BYTES WITERN DONE AFTER %ld ms\r\n", (uint16_t)Size, HAL_GetTick
 703:FLASH/spif.c  ****       retVal = true;
 704:FLASH/spif.c  ****     }
 705:FLASH/spif.c  **** 
 706:FLASH/spif.c  ****   } while (0);
 707:FLASH/spif.c  **** 
 708:FLASH/spif.c  ****   SPIF_WriteDisable(Handle);
 1614              		.loc 1 708 3 view .LVU414
 1615 00da 2046     		mov	r0, r4
 1616 00dc FFF7FEFF 		bl	SPIF_WriteDisable
 1617              	.LVL146:
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 43


 709:FLASH/spif.c  ****   return retVal;
 1618              		.loc 1 709 3 view .LVU415
 710:FLASH/spif.c  **** }
 1619              		.loc 1 710 1 is_stmt 0 view .LVU416
 1620 00e0 3846     		mov	r0, r7
 1621 00e2 02B0     		add	sp, sp, #8
 1622              	.LCFI46:
 1623              		.cfi_remember_state
 1624              		.cfi_def_cfa_offset 24
 1625              		@ sp needed
 1626 00e4 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1627              	.LVL147:
 1628              	.L94:
 1629              	.LCFI47:
 1630              		.cfi_restore_state
 628:FLASH/spif.c  ****   uint32_t address = 0, maximum = SPIF_PAGE_SIZE - Offset;
 1631              		.loc 1 628 8 view .LVU417
 1632 00e8 0027     		movs	r7, #0
 1633 00ea F6E7     		b	.L88
 1634              		.cfi_endproc
 1635              	.LFE174:
 1637              		.section	.text.SPIF_ReadFn,"ax",%progbits
 1638              		.align	1
 1639              		.global	SPIF_ReadFn
 1640              		.syntax unified
 1641              		.thumb
 1642              		.thumb_func
 1644              	SPIF_ReadFn:
 1645              	.LVL148:
 1646              	.LFB175:
 711:FLASH/spif.c  **** 
 712:FLASH/spif.c  **** /**************************************************************************************************
 713:FLASH/spif.c  **** 
 714:FLASH/spif.c  **** bool SPIF_ReadFn(SPIF_HandleTypeDef *Handle, uint32_t Address, uint8_t *Data, uint32_t Size)
 715:FLASH/spif.c  **** {
 1647              		.loc 1 715 1 is_stmt 1 view -0
 1648              		.cfi_startproc
 1649              		@ args = 0, pretend = 0, frame = 8
 1650              		@ frame_needed = 0, uses_anonymous_args = 0
 1651              		.loc 1 715 1 is_stmt 0 view .LVU419
 1652 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1653              	.LCFI48:
 1654              		.cfi_def_cfa_offset 20
 1655              		.cfi_offset 4, -20
 1656              		.cfi_offset 5, -16
 1657              		.cfi_offset 6, -12
 1658              		.cfi_offset 7, -8
 1659              		.cfi_offset 14, -4
 1660 0002 83B0     		sub	sp, sp, #12
 1661              	.LCFI49:
 1662              		.cfi_def_cfa_offset 32
 1663 0004 0446     		mov	r4, r0
 1664 0006 0D46     		mov	r5, r1
 1665 0008 1646     		mov	r6, r2
 1666 000a 1F46     		mov	r7, r3
 716:FLASH/spif.c  ****   bool retVal = false;
 1667              		.loc 1 716 3 is_stmt 1 view .LVU420
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 44


 1668              	.LVL149:
 717:FLASH/spif.c  ****   uint8_t tx[5];
 1669              		.loc 1 717 3 view .LVU421
 718:FLASH/spif.c  ****   do
 1670              		.loc 1 718 3 view .LVU422
 719:FLASH/spif.c  ****   {
 720:FLASH/spif.c  **** #if SPIF_DEBUG != SPIF_DEBUG_DISABLE
 721:FLASH/spif.c  ****     uint32_t dbgTime = HAL_GetTick();
 722:FLASH/spif.c  **** #endif
 723:FLASH/spif.c  ****     dprintf("SPIF_ReadAddress() START ADDRESS %ld\r\n", Address);
 1671              		.loc 1 723 65 view .LVU423
 724:FLASH/spif.c  ****     SPIF_CsPin(Handle, 0);
 1672              		.loc 1 724 5 view .LVU424
 1673 000c 0021     		movs	r1, #0
 1674              	.LVL150:
 1675              		.loc 1 724 5 is_stmt 0 view .LVU425
 1676 000e FFF7FEFF 		bl	SPIF_CsPin
 1677              	.LVL151:
 725:FLASH/spif.c  ****     if (Handle->BlockCnt >= 512)
 1678              		.loc 1 725 5 is_stmt 1 view .LVU426
 1679              		.loc 1 725 15 is_stmt 0 view .LVU427
 1680 0012 E069     		ldr	r0, [r4, #28]
 1681              		.loc 1 725 8 view .LVU428
 1682 0014 B0F5007F 		cmp	r0, #512
 1683 0018 2AD3     		bcc	.L98
 726:FLASH/spif.c  ****     {
 727:FLASH/spif.c  ****       tx[0] = SPIF_CMD_READDATA4ADD;
 1684              		.loc 1 727 7 is_stmt 1 view .LVU429
 1685              		.loc 1 727 13 is_stmt 0 view .LVU430
 1686 001a 1323     		movs	r3, #19
 1687 001c 8DF80030 		strb	r3, [sp]
 728:FLASH/spif.c  ****       tx[1] = (Address & 0xFF000000) >> 24;
 1688              		.loc 1 728 7 is_stmt 1 view .LVU431
 1689              		.loc 1 728 38 is_stmt 0 view .LVU432
 1690 0020 2B0E     		lsrs	r3, r5, #24
 1691              		.loc 1 728 13 view .LVU433
 1692 0022 8DF80130 		strb	r3, [sp, #1]
 729:FLASH/spif.c  ****       tx[2] = (Address & 0x00FF0000) >> 16;
 1693              		.loc 1 729 7 is_stmt 1 view .LVU434
 1694              		.loc 1 729 38 is_stmt 0 view .LVU435
 1695 0026 2B0C     		lsrs	r3, r5, #16
 1696              		.loc 1 729 13 view .LVU436
 1697 0028 8DF80230 		strb	r3, [sp, #2]
 730:FLASH/spif.c  ****       tx[3] = (Address & 0x0000FF00) >> 8;
 1698              		.loc 1 730 7 is_stmt 1 view .LVU437
 1699              		.loc 1 730 38 is_stmt 0 view .LVU438
 1700 002c 2B0A     		lsrs	r3, r5, #8
 1701              		.loc 1 730 13 view .LVU439
 1702 002e 8DF80330 		strb	r3, [sp, #3]
 731:FLASH/spif.c  ****       tx[4] = (Address & 0x000000FF);
 1703              		.loc 1 731 7 is_stmt 1 view .LVU440
 1704              		.loc 1 731 13 is_stmt 0 view .LVU441
 1705 0032 8DF80450 		strb	r5, [sp, #4]
 732:FLASH/spif.c  ****       if (SPIF_Transmit(Handle, tx, 5, 100) == false)
 1706              		.loc 1 732 7 is_stmt 1 view .LVU442
 1707              		.loc 1 732 11 is_stmt 0 view .LVU443
 1708 0036 6423     		movs	r3, #100
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 45


 1709 0038 0522     		movs	r2, #5
 1710 003a 6946     		mov	r1, sp
 1711 003c 2046     		mov	r0, r4
 1712 003e FFF7FEFF 		bl	SPIF_Transmit
 1713              	.LVL152:
 1714              		.loc 1 732 10 discriminator 1 view .LVU444
 1715 0042 0546     		mov	r5, r0
 1716              	.LVL153:
 1717              		.loc 1 732 10 discriminator 1 view .LVU445
 1718 0044 78B1     		cbz	r0, .L103
 1719              	.L99:
 733:FLASH/spif.c  ****       {
 734:FLASH/spif.c  ****         SPIF_CsPin(Handle, 1);
 735:FLASH/spif.c  ****         break;
 736:FLASH/spif.c  ****       }
 737:FLASH/spif.c  ****     }
 738:FLASH/spif.c  ****     else
 739:FLASH/spif.c  ****     {
 740:FLASH/spif.c  ****       tx[0] = SPIF_CMD_READDATA3ADD;
 741:FLASH/spif.c  ****       tx[1] = (Address & 0x00FF0000) >> 16;
 742:FLASH/spif.c  ****       tx[2] = (Address & 0x0000FF00) >> 8;
 743:FLASH/spif.c  ****       tx[3] = (Address & 0x000000FF);
 744:FLASH/spif.c  ****       if (SPIF_Transmit(Handle, tx, 4, 100) == false)
 745:FLASH/spif.c  ****       {
 746:FLASH/spif.c  ****         SPIF_CsPin(Handle, 1);
 747:FLASH/spif.c  ****         break;
 748:FLASH/spif.c  ****       }
 749:FLASH/spif.c  ****     }
 750:FLASH/spif.c  ****     if (SPIF_Receive(Handle, Data, Size, 2000) == false)
 1720              		.loc 1 750 5 is_stmt 1 view .LVU446
 1721              		.loc 1 750 9 is_stmt 0 view .LVU447
 1722 0046 4FF4FA63 		mov	r3, #2000
 1723 004a 3A46     		mov	r2, r7
 1724 004c 3146     		mov	r1, r6
 1725 004e 2046     		mov	r0, r4
 1726 0050 FFF7FEFF 		bl	SPIF_Receive
 1727              	.LVL154:
 1728              		.loc 1 750 8 discriminator 1 view .LVU448
 1729 0054 0546     		mov	r5, r0
 1730 0056 20BB     		cbnz	r0, .L101
 751:FLASH/spif.c  ****     {
 752:FLASH/spif.c  ****       SPIF_CsPin(Handle, 1);
 1731              		.loc 1 752 7 is_stmt 1 view .LVU449
 1732 0058 0121     		movs	r1, #1
 1733 005a 2046     		mov	r0, r4
 1734 005c FFF7FEFF 		bl	SPIF_CsPin
 1735              	.LVL155:
 753:FLASH/spif.c  ****       break;
 1736              		.loc 1 753 7 view .LVU450
 1737              	.L100:
 719:FLASH/spif.c  **** #if SPIF_DEBUG != SPIF_DEBUG_DISABLE
 1738              		.loc 1 719 3 view .LVU451
 754:FLASH/spif.c  ****     }
 755:FLASH/spif.c  ****     SPIF_CsPin(Handle, 1);
 756:FLASH/spif.c  ****     dprintf("SPIF_ReadAddress() %d BYTES READ DONE AFTER %ld ms\r\n", (uint16_t)Size, HAL_GetTick()
 757:FLASH/spif.c  **** #if SPIF_DEBUG == SPIF_DEBUG_FULL
 758:FLASH/spif.c  ****     dprintf("{\r\n0x%02X", Data[0]);
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 46


 759:FLASH/spif.c  ****     for (int i = 1; i < Size; i++)
 760:FLASH/spif.c  ****     {
 761:FLASH/spif.c  ****       if (i % 8 == 0)
 762:FLASH/spif.c  ****       {
 763:FLASH/spif.c  ****         dprintf("\r\n");
 764:FLASH/spif.c  ****       }
 765:FLASH/spif.c  ****       dprintf(", 0x%02X", Data[i]);
 766:FLASH/spif.c  ****     }
 767:FLASH/spif.c  ****     dprintf("\r\n}\r\n");
 768:FLASH/spif.c  **** #endif
 769:FLASH/spif.c  ****     retVal = true;
 770:FLASH/spif.c  **** 
 771:FLASH/spif.c  ****   } while (0);
 772:FLASH/spif.c  **** 
 773:FLASH/spif.c  ****   return retVal;
 1739              		.loc 1 773 3 view .LVU452
 774:FLASH/spif.c  **** }
 1740              		.loc 1 774 1 is_stmt 0 view .LVU453
 1741 0060 2846     		mov	r0, r5
 1742 0062 03B0     		add	sp, sp, #12
 1743              	.LCFI50:
 1744              		.cfi_remember_state
 1745              		.cfi_def_cfa_offset 20
 1746              		@ sp needed
 1747 0064 F0BD     		pop	{r4, r5, r6, r7, pc}
 1748              	.LVL156:
 1749              	.L103:
 1750              	.LCFI51:
 1751              		.cfi_restore_state
 734:FLASH/spif.c  ****         break;
 1752              		.loc 1 734 9 is_stmt 1 view .LVU454
 1753 0066 0121     		movs	r1, #1
 1754 0068 2046     		mov	r0, r4
 1755 006a FFF7FEFF 		bl	SPIF_CsPin
 1756              	.LVL157:
 735:FLASH/spif.c  ****       }
 1757              		.loc 1 735 9 view .LVU455
 1758 006e F7E7     		b	.L100
 1759              	.LVL158:
 1760              	.L98:
 740:FLASH/spif.c  ****       tx[1] = (Address & 0x00FF0000) >> 16;
 1761              		.loc 1 740 7 view .LVU456
 740:FLASH/spif.c  ****       tx[1] = (Address & 0x00FF0000) >> 16;
 1762              		.loc 1 740 13 is_stmt 0 view .LVU457
 1763 0070 0323     		movs	r3, #3
 1764 0072 8DF80030 		strb	r3, [sp]
 741:FLASH/spif.c  ****       tx[2] = (Address & 0x0000FF00) >> 8;
 1765              		.loc 1 741 7 is_stmt 1 view .LVU458
 741:FLASH/spif.c  ****       tx[2] = (Address & 0x0000FF00) >> 8;
 1766              		.loc 1 741 38 is_stmt 0 view .LVU459
 1767 0076 2B0C     		lsrs	r3, r5, #16
 741:FLASH/spif.c  ****       tx[2] = (Address & 0x0000FF00) >> 8;
 1768              		.loc 1 741 13 view .LVU460
 1769 0078 8DF80130 		strb	r3, [sp, #1]
 742:FLASH/spif.c  ****       tx[3] = (Address & 0x000000FF);
 1770              		.loc 1 742 7 is_stmt 1 view .LVU461
 742:FLASH/spif.c  ****       tx[3] = (Address & 0x000000FF);
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 47


 1771              		.loc 1 742 38 is_stmt 0 view .LVU462
 1772 007c 2B0A     		lsrs	r3, r5, #8
 742:FLASH/spif.c  ****       tx[3] = (Address & 0x000000FF);
 1773              		.loc 1 742 13 view .LVU463
 1774 007e 8DF80230 		strb	r3, [sp, #2]
 743:FLASH/spif.c  ****       if (SPIF_Transmit(Handle, tx, 4, 100) == false)
 1775              		.loc 1 743 7 is_stmt 1 view .LVU464
 743:FLASH/spif.c  ****       if (SPIF_Transmit(Handle, tx, 4, 100) == false)
 1776              		.loc 1 743 13 is_stmt 0 view .LVU465
 1777 0082 8DF80350 		strb	r5, [sp, #3]
 744:FLASH/spif.c  ****       {
 1778              		.loc 1 744 7 is_stmt 1 view .LVU466
 744:FLASH/spif.c  ****       {
 1779              		.loc 1 744 11 is_stmt 0 view .LVU467
 1780 0086 6423     		movs	r3, #100
 1781 0088 0422     		movs	r2, #4
 1782 008a 6946     		mov	r1, sp
 1783 008c 2046     		mov	r0, r4
 1784 008e FFF7FEFF 		bl	SPIF_Transmit
 1785              	.LVL159:
 744:FLASH/spif.c  ****       {
 1786              		.loc 1 744 10 discriminator 1 view .LVU468
 1787 0092 0546     		mov	r5, r0
 1788              	.LVL160:
 744:FLASH/spif.c  ****       {
 1789              		.loc 1 744 10 discriminator 1 view .LVU469
 1790 0094 0028     		cmp	r0, #0
 1791 0096 D6D1     		bne	.L99
 746:FLASH/spif.c  ****         break;
 1792              		.loc 1 746 9 is_stmt 1 view .LVU470
 1793 0098 0121     		movs	r1, #1
 1794 009a 2046     		mov	r0, r4
 1795 009c FFF7FEFF 		bl	SPIF_CsPin
 1796              	.LVL161:
 747:FLASH/spif.c  ****       }
 1797              		.loc 1 747 9 view .LVU471
 1798 00a0 DEE7     		b	.L100
 1799              	.L101:
 755:FLASH/spif.c  ****     dprintf("SPIF_ReadAddress() %d BYTES READ DONE AFTER %ld ms\r\n", (uint16_t)Size, HAL_GetTick()
 1800              		.loc 1 755 5 view .LVU472
 1801 00a2 0121     		movs	r1, #1
 1802 00a4 2046     		mov	r0, r4
 1803 00a6 FFF7FEFF 		bl	SPIF_CsPin
 1804              	.LVL162:
 756:FLASH/spif.c  **** #if SPIF_DEBUG == SPIF_DEBUG_FULL
 1805              		.loc 1 756 111 view .LVU473
 769:FLASH/spif.c  **** 
 1806              		.loc 1 769 5 view .LVU474
 769:FLASH/spif.c  **** 
 1807              		.loc 1 769 5 is_stmt 0 view .LVU475
 1808 00aa D9E7     		b	.L100
 1809              		.cfi_endproc
 1810              	.LFE175:
 1812              		.section	.text.SPIF_Init,"ax",%progbits
 1813              		.align	1
 1814              		.global	SPIF_Init
 1815              		.syntax unified
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 48


 1816              		.thumb
 1817              		.thumb_func
 1819              	SPIF_Init:
 1820              	.LVL163:
 1821              	.LFB176:
 775:FLASH/spif.c  **** 
 776:FLASH/spif.c  **** /**************************************************************************************************
 777:FLASH/spif.c  **** **************    Public Functions
 778:FLASH/spif.c  **** ***************************************************************************************************
 779:FLASH/spif.c  **** 
 780:FLASH/spif.c  **** /**
 781:FLASH/spif.c  ****   * @brief  Initialize the SPIF.
 782:FLASH/spif.c  ****   * @note   Enable and configure the SPI and Set GPIO as output for CS pin on the CubeMX
 783:FLASH/spif.c  ****   *
 784:FLASH/spif.c  ****   * @param  *Handle: Pointer to SPIF_HandleTypeDef structure
 785:FLASH/spif.c  ****   * @param  *HSpi: Pointer to a SPI_HandleTypeDef structure
 786:FLASH/spif.c  ****   * @param  *Gpio: Pointer to a GPIO_TypeDef structure for CS
 787:FLASH/spif.c  ****   * @param  Pin: Pin of CS
 788:FLASH/spif.c  ****   *
 789:FLASH/spif.c  ****   * @retval bool: true or false
 790:FLASH/spif.c  ****   */
 791:FLASH/spif.c  **** bool SPIF_Init(SPIF_HandleTypeDef *Handle, SPI_HandleTypeDef *HSpi, GPIO_TypeDef *Gpio, uint16_t Pi
 792:FLASH/spif.c  **** {
 1822              		.loc 1 792 1 is_stmt 1 view -0
 1823              		.cfi_startproc
 1824              		@ args = 0, pretend = 0, frame = 0
 1825              		@ frame_needed = 0, uses_anonymous_args = 0
 793:FLASH/spif.c  ****   bool retVal = false;
 1826              		.loc 1 793 3 view .LVU477
 794:FLASH/spif.c  ****   do
 1827              		.loc 1 794 3 view .LVU478
 795:FLASH/spif.c  ****   {
 796:FLASH/spif.c  ****     if ((Handle == NULL) || (HSpi == NULL) || (Gpio == NULL) || (Handle->Inited == 1))
 1828              		.loc 1 796 5 view .LVU479
 1829              		.loc 1 796 8 is_stmt 0 view .LVU480
 1830 0000 48B3     		cbz	r0, .L108
 792:FLASH/spif.c  ****   bool retVal = false;
 1831              		.loc 1 792 1 view .LVU481
 1832 0002 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1833              	.LCFI52:
 1834              		.cfi_def_cfa_offset 24
 1835              		.cfi_offset 3, -24
 1836              		.cfi_offset 4, -20
 1837              		.cfi_offset 5, -16
 1838              		.cfi_offset 6, -12
 1839              		.cfi_offset 7, -8
 1840              		.cfi_offset 14, -4
 1841 0004 0C46     		mov	r4, r1
 1842 0006 1546     		mov	r5, r2
 1843 0008 1E46     		mov	r6, r3
 1844 000a 0746     		mov	r7, r0
 1845              		.loc 1 796 26 discriminator 1 view .LVU482
 1846 000c 29B3     		cbz	r1, .L109
 1847              		.loc 1 796 44 discriminator 2 view .LVU483
 1848 000e 32B3     		cbz	r2, .L110
 1849              		.loc 1 796 72 discriminator 3 view .LVU484
 1850 0010 837A     		ldrb	r3, [r0, #10]	@ zero_extendqisi2
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 49


 1851              	.LVL164:
 1852              		.loc 1 796 62 discriminator 3 view .LVU485
 1853 0012 012B     		cmp	r3, #1
 1854 0014 01D1     		bne	.L116
 793:FLASH/spif.c  ****   do
 1855              		.loc 1 793 8 view .LVU486
 1856 0016 0020     		movs	r0, #0
 1857              	.LVL165:
 793:FLASH/spif.c  ****   do
 1858              		.loc 1 793 8 view .LVU487
 1859 0018 20E0     		b	.L105
 1860              	.LVL166:
 1861              	.L116:
 797:FLASH/spif.c  ****     {
 798:FLASH/spif.c  ****       dprintf("SPIF_Init() Error, Wrong Parameter\r\n");
 799:FLASH/spif.c  ****       break;
 800:FLASH/spif.c  ****     }
 801:FLASH/spif.c  ****     memset(Handle, 0, sizeof(SPIF_HandleTypeDef));
 1862              		.loc 1 801 5 is_stmt 1 view .LVU488
 1863 001a 2022     		movs	r2, #32
 1864              	.LVL167:
 1865              		.loc 1 801 5 is_stmt 0 view .LVU489
 1866 001c 0021     		movs	r1, #0
 1867              	.LVL168:
 1868              		.loc 1 801 5 view .LVU490
 1869 001e FFF7FEFF 		bl	memset
 1870              	.LVL169:
 802:FLASH/spif.c  ****     Handle->HSpi = HSpi;
 1871              		.loc 1 802 5 is_stmt 1 view .LVU491
 1872              		.loc 1 802 18 is_stmt 0 view .LVU492
 1873 0022 3C60     		str	r4, [r7]
 803:FLASH/spif.c  ****     Handle->Gpio = Gpio;
 1874              		.loc 1 803 5 is_stmt 1 view .LVU493
 1875              		.loc 1 803 18 is_stmt 0 view .LVU494
 1876 0024 7D60     		str	r5, [r7, #4]
 804:FLASH/spif.c  ****     Handle->Pin = Pin;
 1877              		.loc 1 804 5 is_stmt 1 view .LVU495
 1878              		.loc 1 804 17 is_stmt 0 view .LVU496
 1879 0026 3E61     		str	r6, [r7, #16]
 805:FLASH/spif.c  ****     SPIF_CsPin(Handle, 1);
 1880              		.loc 1 805 5 is_stmt 1 view .LVU497
 1881 0028 0121     		movs	r1, #1
 1882 002a 3846     		mov	r0, r7
 1883 002c FFF7FEFF 		bl	SPIF_CsPin
 1884              	.LVL170:
 806:FLASH/spif.c  ****     /* wait for stable VCC */
 807:FLASH/spif.c  ****     while (HAL_GetTick() < 20)
 1885              		.loc 1 807 5 view .LVU498
 1886              		.loc 1 807 11 is_stmt 0 view .LVU499
 1887 0030 02E0     		b	.L106
 1888              	.L107:
 808:FLASH/spif.c  ****     {
 809:FLASH/spif.c  ****       SPIF_Delay(1);
 1889              		.loc 1 809 7 is_stmt 1 view .LVU500
 1890 0032 0120     		movs	r0, #1
 1891 0034 FFF7FEFF 		bl	SPIF_Delay
 1892              	.LVL171:
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 50


 1893              	.L106:
 807:FLASH/spif.c  ****     {
 1894              		.loc 1 807 26 view .LVU501
 807:FLASH/spif.c  ****     {
 1895              		.loc 1 807 12 is_stmt 0 view .LVU502
 1896 0038 FFF7FEFF 		bl	HAL_GetTick
 1897              	.LVL172:
 807:FLASH/spif.c  ****     {
 1898              		.loc 1 807 26 discriminator 1 view .LVU503
 1899 003c 1328     		cmp	r0, #19
 1900 003e F8D9     		bls	.L107
 810:FLASH/spif.c  ****     }
 811:FLASH/spif.c  ****     if (SPIF_WriteDisable(Handle) == false)
 1901              		.loc 1 811 5 is_stmt 1 view .LVU504
 1902              		.loc 1 811 9 is_stmt 0 view .LVU505
 1903 0040 3846     		mov	r0, r7
 1904 0042 FFF7FEFF 		bl	SPIF_WriteDisable
 1905              	.LVL173:
 1906              		.loc 1 811 8 discriminator 1 view .LVU506
 1907 0046 48B1     		cbz	r0, .L105
 812:FLASH/spif.c  ****     {
 813:FLASH/spif.c  ****       break;
 814:FLASH/spif.c  ****     }
 815:FLASH/spif.c  ****     retVal = SPIF_FindChip(Handle);
 1908              		.loc 1 815 5 is_stmt 1 view .LVU507
 1909              		.loc 1 815 14 is_stmt 0 view .LVU508
 1910 0048 3846     		mov	r0, r7
 1911 004a FFF7FEFF 		bl	SPIF_FindChip
 1912              	.LVL174:
 816:FLASH/spif.c  ****     if (retVal)
 1913              		.loc 1 816 5 is_stmt 1 view .LVU509
 1914              		.loc 1 816 8 is_stmt 0 view .LVU510
 1915 004e 28B1     		cbz	r0, .L105
 817:FLASH/spif.c  ****     {
 818:FLASH/spif.c  ****       Handle->Inited = 1;
 1916              		.loc 1 818 7 is_stmt 1 view .LVU511
 1917              		.loc 1 818 22 is_stmt 0 view .LVU512
 1918 0050 0123     		movs	r3, #1
 1919 0052 BB72     		strb	r3, [r7, #10]
 1920 0054 02E0     		b	.L105
 1921              	.LVL175:
 1922              	.L108:
 1923              	.LCFI53:
 1924              		.cfi_def_cfa_offset 0
 1925              		.cfi_restore 3
 1926              		.cfi_restore 4
 1927              		.cfi_restore 5
 1928              		.cfi_restore 6
 1929              		.cfi_restore 7
 1930              		.cfi_restore 14
 793:FLASH/spif.c  ****   do
 1931              		.loc 1 793 8 view .LVU513
 1932 0056 0020     		movs	r0, #0
 1933              	.LVL176:
 819:FLASH/spif.c  ****       dprintf("SPIF_Init() Done\r\n");
 1934              		.loc 1 819 38 is_stmt 1 view .LVU514
 795:FLASH/spif.c  ****     if ((Handle == NULL) || (HSpi == NULL) || (Gpio == NULL) || (Handle->Inited == 1))
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 51


 1935              		.loc 1 795 3 view .LVU515
 820:FLASH/spif.c  ****     }
 821:FLASH/spif.c  **** 
 822:FLASH/spif.c  ****   } while (0);
 823:FLASH/spif.c  **** 
 824:FLASH/spif.c  ****   return retVal;
 1936              		.loc 1 824 3 view .LVU516
 825:FLASH/spif.c  **** }
 1937              		.loc 1 825 1 is_stmt 0 view .LVU517
 1938 0058 7047     		bx	lr
 1939              	.LVL177:
 1940              	.L109:
 1941              	.LCFI54:
 1942              		.cfi_def_cfa_offset 24
 1943              		.cfi_offset 3, -24
 1944              		.cfi_offset 4, -20
 1945              		.cfi_offset 5, -16
 1946              		.cfi_offset 6, -12
 1947              		.cfi_offset 7, -8
 1948              		.cfi_offset 14, -4
 793:FLASH/spif.c  ****   do
 1949              		.loc 1 793 8 view .LVU518
 1950 005a 0020     		movs	r0, #0
 1951              	.LVL178:
 1952              	.L105:
 819:FLASH/spif.c  ****     }
 1953              		.loc 1 819 38 is_stmt 1 view .LVU519
 795:FLASH/spif.c  ****     if ((Handle == NULL) || (HSpi == NULL) || (Gpio == NULL) || (Handle->Inited == 1))
 1954              		.loc 1 795 3 view .LVU520
 824:FLASH/spif.c  **** }
 1955              		.loc 1 824 3 view .LVU521
 1956              		.loc 1 825 1 is_stmt 0 view .LVU522
 1957 005c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1958              	.LVL179:
 1959              	.L110:
 793:FLASH/spif.c  ****   do
 1960              		.loc 1 793 8 view .LVU523
 1961 005e 0020     		movs	r0, #0
 1962              	.LVL180:
 793:FLASH/spif.c  ****   do
 1963              		.loc 1 793 8 view .LVU524
 1964 0060 FCE7     		b	.L105
 1965              		.cfi_endproc
 1966              	.LFE176:
 1968              		.section	.text.SPIF_EraseChip,"ax",%progbits
 1969              		.align	1
 1970              		.global	SPIF_EraseChip
 1971              		.syntax unified
 1972              		.thumb
 1973              		.thumb_func
 1975              	SPIF_EraseChip:
 1976              	.LVL181:
 1977              	.LFB177:
 826:FLASH/spif.c  **** 
 827:FLASH/spif.c  **** /**************************************************************************************************
 828:FLASH/spif.c  **** 
 829:FLASH/spif.c  **** /**
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 52


 830:FLASH/spif.c  ****   * @brief  Full Erase chip.
 831:FLASH/spif.c  ****   * @note   Send the Full-Erase-chip command and wait for completion
 832:FLASH/spif.c  ****   *
 833:FLASH/spif.c  ****   * @param  *Handle: Pointer to SPIF_HandleTypeDef structure
 834:FLASH/spif.c  ****   *
 835:FLASH/spif.c  ****   * @retval bool: true or false
 836:FLASH/spif.c  ****   */
 837:FLASH/spif.c  **** bool SPIF_EraseChip(SPIF_HandleTypeDef *Handle)
 838:FLASH/spif.c  **** {
 1978              		.loc 1 838 1 is_stmt 1 view -0
 1979              		.cfi_startproc
 1980              		@ args = 0, pretend = 0, frame = 8
 1981              		@ frame_needed = 0, uses_anonymous_args = 0
 1982              		.loc 1 838 1 is_stmt 0 view .LVU526
 1983 0000 30B5     		push	{r4, r5, lr}
 1984              	.LCFI55:
 1985              		.cfi_def_cfa_offset 12
 1986              		.cfi_offset 4, -12
 1987              		.cfi_offset 5, -8
 1988              		.cfi_offset 14, -4
 1989 0002 83B0     		sub	sp, sp, #12
 1990              	.LCFI56:
 1991              		.cfi_def_cfa_offset 24
 1992 0004 0446     		mov	r4, r0
 839:FLASH/spif.c  ****   SPIF_Lock(Handle);
 1993              		.loc 1 839 3 is_stmt 1 view .LVU527
 1994 0006 FFF7FEFF 		bl	SPIF_Lock
 1995              	.LVL182:
 840:FLASH/spif.c  ****   bool retVal = false;
 1996              		.loc 1 840 3 view .LVU528
 841:FLASH/spif.c  ****   uint8_t tx[1] = {SPIF_CMD_CHIPERASE1};
 1997              		.loc 1 841 3 view .LVU529
 1998              		.loc 1 841 11 is_stmt 0 view .LVU530
 1999 000a 6023     		movs	r3, #96
 2000 000c 8DF80430 		strb	r3, [sp, #4]
 842:FLASH/spif.c  ****   do
 2001              		.loc 1 842 3 is_stmt 1 view .LVU531
 843:FLASH/spif.c  ****   {
 844:FLASH/spif.c  **** #if SPIF_DEBUG != SPIF_DEBUG_DISABLE
 845:FLASH/spif.c  ****     uint32_t dbgTime = HAL_GetTick();
 846:FLASH/spif.c  **** #endif
 847:FLASH/spif.c  ****     dprintf("SPIF_EraseChip() START\r\n");
 2002              		.loc 1 847 42 view .LVU532
 848:FLASH/spif.c  ****     if (SPIF_WriteEnable(Handle) == false)
 2003              		.loc 1 848 5 view .LVU533
 2004              		.loc 1 848 9 is_stmt 0 view .LVU534
 2005 0010 2046     		mov	r0, r4
 2006 0012 FFF7FEFF 		bl	SPIF_WriteEnable
 2007              	.LVL183:
 2008              		.loc 1 848 8 discriminator 1 view .LVU535
 2009 0016 0546     		mov	r5, r0
 2010 0018 40B9     		cbnz	r0, .L121
 2011              	.L118:
 2012              	.LVL184:
 843:FLASH/spif.c  ****   {
 2013              		.loc 1 843 3 is_stmt 1 view .LVU536
 849:FLASH/spif.c  ****     {
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 53


 850:FLASH/spif.c  ****       break;
 851:FLASH/spif.c  ****     }
 852:FLASH/spif.c  ****     SPIF_CsPin(Handle, 0);
 853:FLASH/spif.c  ****     if (SPIF_Transmit(Handle, tx, 1, 100) == false)
 854:FLASH/spif.c  ****     {
 855:FLASH/spif.c  ****       SPIF_CsPin(Handle, 1);
 856:FLASH/spif.c  ****       break;
 857:FLASH/spif.c  ****     }
 858:FLASH/spif.c  ****     SPIF_CsPin(Handle, 1);
 859:FLASH/spif.c  ****     if (SPIF_WaitForWriting(Handle, Handle->BlockCnt * 1000))
 860:FLASH/spif.c  ****     {
 861:FLASH/spif.c  ****       dprintf("SPIF_EraseChip() DONE AFTER %ld ms\r\n", HAL_GetTick() - dbgTime);
 862:FLASH/spif.c  ****       retVal = true;
 863:FLASH/spif.c  ****     }
 864:FLASH/spif.c  **** 
 865:FLASH/spif.c  ****   } while (0);
 866:FLASH/spif.c  **** 
 867:FLASH/spif.c  ****   SPIF_WriteDisable(Handle);
 2014              		.loc 1 867 3 view .LVU537
 2015 001a 2046     		mov	r0, r4
 2016 001c FFF7FEFF 		bl	SPIF_WriteDisable
 2017              	.LVL185:
 868:FLASH/spif.c  ****   SPIF_UnLock(Handle);
 2018              		.loc 1 868 3 view .LVU538
 2019 0020 2046     		mov	r0, r4
 2020 0022 FFF7FEFF 		bl	SPIF_UnLock
 2021              	.LVL186:
 869:FLASH/spif.c  ****   return retVal;
 2022              		.loc 1 869 3 view .LVU539
 870:FLASH/spif.c  **** }
 2023              		.loc 1 870 1 is_stmt 0 view .LVU540
 2024 0026 2846     		mov	r0, r5
 2025 0028 03B0     		add	sp, sp, #12
 2026              	.LCFI57:
 2027              		.cfi_remember_state
 2028              		.cfi_def_cfa_offset 12
 2029              		@ sp needed
 2030 002a 30BD     		pop	{r4, r5, pc}
 2031              	.LVL187:
 2032              	.L121:
 2033              	.LCFI58:
 2034              		.cfi_restore_state
 852:FLASH/spif.c  ****     if (SPIF_Transmit(Handle, tx, 1, 100) == false)
 2035              		.loc 1 852 5 is_stmt 1 view .LVU541
 2036 002c 0021     		movs	r1, #0
 2037 002e 2046     		mov	r0, r4
 2038 0030 FFF7FEFF 		bl	SPIF_CsPin
 2039              	.LVL188:
 853:FLASH/spif.c  ****     {
 2040              		.loc 1 853 5 view .LVU542
 853:FLASH/spif.c  ****     {
 2041              		.loc 1 853 9 is_stmt 0 view .LVU543
 2042 0034 6423     		movs	r3, #100
 2043 0036 0122     		movs	r2, #1
 2044 0038 01A9     		add	r1, sp, #4
 2045 003a 2046     		mov	r0, r4
 2046 003c FFF7FEFF 		bl	SPIF_Transmit
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 54


 2047              	.LVL189:
 853:FLASH/spif.c  ****     {
 2048              		.loc 1 853 8 discriminator 1 view .LVU544
 2049 0040 0546     		mov	r5, r0
 2050 0042 20B9     		cbnz	r0, .L119
 855:FLASH/spif.c  ****       break;
 2051              		.loc 1 855 7 is_stmt 1 view .LVU545
 2052 0044 0121     		movs	r1, #1
 2053 0046 2046     		mov	r0, r4
 2054 0048 FFF7FEFF 		bl	SPIF_CsPin
 2055              	.LVL190:
 856:FLASH/spif.c  ****     }
 2056              		.loc 1 856 7 view .LVU546
 2057 004c E5E7     		b	.L118
 2058              	.L119:
 858:FLASH/spif.c  ****     if (SPIF_WaitForWriting(Handle, Handle->BlockCnt * 1000))
 2059              		.loc 1 858 5 view .LVU547
 2060 004e 0121     		movs	r1, #1
 2061 0050 2046     		mov	r0, r4
 2062 0052 FFF7FEFF 		bl	SPIF_CsPin
 2063              	.LVL191:
 859:FLASH/spif.c  ****     {
 2064              		.loc 1 859 5 view .LVU548
 859:FLASH/spif.c  ****     {
 2065              		.loc 1 859 43 is_stmt 0 view .LVU549
 2066 0056 E369     		ldr	r3, [r4, #28]
 859:FLASH/spif.c  ****     {
 2067              		.loc 1 859 9 view .LVU550
 2068 0058 4FF47A71 		mov	r1, #1000
 2069 005c 03FB01F1 		mul	r1, r3, r1
 2070 0060 2046     		mov	r0, r4
 2071 0062 FFF7FEFF 		bl	SPIF_WaitForWriting
 2072              	.LVL192:
 2073 0066 0546     		mov	r5, r0
 2074 0068 D7E7     		b	.L118
 2075              		.cfi_endproc
 2076              	.LFE177:
 2078              		.section	.text.SPIF_EraseSector,"ax",%progbits
 2079              		.align	1
 2080              		.global	SPIF_EraseSector
 2081              		.syntax unified
 2082              		.thumb
 2083              		.thumb_func
 2085              	SPIF_EraseSector:
 2086              	.LVL193:
 2087              	.LFB178:
 871:FLASH/spif.c  **** 
 872:FLASH/spif.c  **** /**************************************************************************************************
 873:FLASH/spif.c  **** 
 874:FLASH/spif.c  **** /**
 875:FLASH/spif.c  ****   * @brief  Erase Sector.
 876:FLASH/spif.c  ****   * @note   Send the Erase-Sector command and wait for completion
 877:FLASH/spif.c  ****   *
 878:FLASH/spif.c  ****   * @param  *Handle: Pointer to SPIF_HandleTypeDef structure
 879:FLASH/spif.c  ****   * @param  Sector: Selected Sector
 880:FLASH/spif.c  ****   *
 881:FLASH/spif.c  ****   * @retval bool: true or false
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 55


 882:FLASH/spif.c  ****   */
 883:FLASH/spif.c  **** bool SPIF_EraseSector(SPIF_HandleTypeDef *Handle, uint32_t Sector)
 884:FLASH/spif.c  **** {
 2088              		.loc 1 884 1 is_stmt 1 view -0
 2089              		.cfi_startproc
 2090              		@ args = 0, pretend = 0, frame = 8
 2091              		@ frame_needed = 0, uses_anonymous_args = 0
 2092              		.loc 1 884 1 is_stmt 0 view .LVU552
 2093 0000 70B5     		push	{r4, r5, r6, lr}
 2094              	.LCFI59:
 2095              		.cfi_def_cfa_offset 16
 2096              		.cfi_offset 4, -16
 2097              		.cfi_offset 5, -12
 2098              		.cfi_offset 6, -8
 2099              		.cfi_offset 14, -4
 2100 0002 82B0     		sub	sp, sp, #8
 2101              	.LCFI60:
 2102              		.cfi_def_cfa_offset 24
 2103 0004 0446     		mov	r4, r0
 2104 0006 0D46     		mov	r5, r1
 885:FLASH/spif.c  ****   SPIF_Lock(Handle);
 2105              		.loc 1 885 3 is_stmt 1 view .LVU553
 2106 0008 FFF7FEFF 		bl	SPIF_Lock
 2107              	.LVL194:
 886:FLASH/spif.c  ****   bool retVal = false;
 2108              		.loc 1 886 3 view .LVU554
 887:FLASH/spif.c  ****   uint32_t address = Sector * SPIF_SECTOR_SIZE;
 2109              		.loc 1 887 3 view .LVU555
 888:FLASH/spif.c  ****   uint8_t tx[5];
 2110              		.loc 1 888 3 view .LVU556
 889:FLASH/spif.c  ****   do
 2111              		.loc 1 889 3 view .LVU557
 890:FLASH/spif.c  ****   {
 891:FLASH/spif.c  **** #if SPIF_DEBUG != SPIF_DEBUG_DISABLE
 892:FLASH/spif.c  ****     uint32_t dbgTime = HAL_GetTick();
 893:FLASH/spif.c  **** #endif
 894:FLASH/spif.c  ****     dprintf("SPIF_EraseSector() START SECTOR %ld\r\n", Sector);
 2112              		.loc 1 894 63 view .LVU558
 895:FLASH/spif.c  ****     if (Sector >= Handle->SectorCnt)
 2113              		.loc 1 895 5 view .LVU559
 2114              		.loc 1 895 25 is_stmt 0 view .LVU560
 2115 000c A369     		ldr	r3, [r4, #24]
 2116              		.loc 1 895 8 view .LVU561
 2117 000e AB42     		cmp	r3, r5
 2118 0010 09D8     		bhi	.L128
 886:FLASH/spif.c  ****   uint32_t address = Sector * SPIF_SECTOR_SIZE;
 2119              		.loc 1 886 8 view .LVU562
 2120 0012 0025     		movs	r5, #0
 2121              	.LVL195:
 2122              	.L123:
 890:FLASH/spif.c  ****   {
 2123              		.loc 1 890 3 is_stmt 1 view .LVU563
 896:FLASH/spif.c  ****     {
 897:FLASH/spif.c  ****       dprintf("SPIF_EraseSector() ERROR Sector NUMBER\r\n");
 898:FLASH/spif.c  ****       break;
 899:FLASH/spif.c  ****     }
 900:FLASH/spif.c  ****     if (SPIF_WriteEnable(Handle) == false)
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 56


 901:FLASH/spif.c  ****     {
 902:FLASH/spif.c  ****       break;
 903:FLASH/spif.c  ****     }
 904:FLASH/spif.c  ****     SPIF_CsPin(Handle, 0);
 905:FLASH/spif.c  ****     if (Handle->BlockCnt >= 512)
 906:FLASH/spif.c  ****     {
 907:FLASH/spif.c  ****       tx[0] = SPIF_CMD_SECTORERASE4ADD;
 908:FLASH/spif.c  ****       tx[1] = (address & 0xFF000000) >> 24;
 909:FLASH/spif.c  ****       tx[2] = (address & 0x00FF0000) >> 16;
 910:FLASH/spif.c  ****       tx[3] = (address & 0x0000FF00) >> 8;
 911:FLASH/spif.c  ****       tx[4] = (address & 0x000000FF);
 912:FLASH/spif.c  ****       if (SPIF_Transmit(Handle, tx, 5, 100) == false)
 913:FLASH/spif.c  ****       {
 914:FLASH/spif.c  ****         SPIF_CsPin(Handle, 1);
 915:FLASH/spif.c  ****         break;
 916:FLASH/spif.c  ****       }
 917:FLASH/spif.c  ****     }
 918:FLASH/spif.c  ****     else
 919:FLASH/spif.c  ****     {
 920:FLASH/spif.c  ****       tx[0] = SPIF_CMD_SECTORERASE3ADD;
 921:FLASH/spif.c  ****       tx[1] = (address & 0x00FF0000) >> 16;
 922:FLASH/spif.c  ****       tx[2] = (address & 0x0000FF00) >> 8;
 923:FLASH/spif.c  ****       tx[3] = (address & 0x000000FF);
 924:FLASH/spif.c  ****       if (SPIF_Transmit(Handle, tx, 4, 100) == false)
 925:FLASH/spif.c  ****       {
 926:FLASH/spif.c  ****         SPIF_CsPin(Handle, 1);
 927:FLASH/spif.c  ****         break;
 928:FLASH/spif.c  ****       }
 929:FLASH/spif.c  ****     }
 930:FLASH/spif.c  ****     SPIF_CsPin(Handle, 1);
 931:FLASH/spif.c  ****     if (SPIF_WaitForWriting(Handle, 1000))
 932:FLASH/spif.c  ****     {
 933:FLASH/spif.c  ****       dprintf("SPIF_EraseSector() DONE AFTER %ld ms\r\n", HAL_GetTick() - dbgTime);
 934:FLASH/spif.c  ****       retVal = true;
 935:FLASH/spif.c  ****     }
 936:FLASH/spif.c  **** 
 937:FLASH/spif.c  ****   } while (0);
 938:FLASH/spif.c  **** 
 939:FLASH/spif.c  ****   SPIF_WriteDisable(Handle);
 2124              		.loc 1 939 3 view .LVU564
 2125 0014 2046     		mov	r0, r4
 2126 0016 FFF7FEFF 		bl	SPIF_WriteDisable
 2127              	.LVL196:
 940:FLASH/spif.c  ****   SPIF_UnLock(Handle);
 2128              		.loc 1 940 3 view .LVU565
 2129 001a 2046     		mov	r0, r4
 2130 001c FFF7FEFF 		bl	SPIF_UnLock
 2131              	.LVL197:
 941:FLASH/spif.c  ****   return retVal;
 2132              		.loc 1 941 3 view .LVU566
 942:FLASH/spif.c  **** }
 2133              		.loc 1 942 1 is_stmt 0 view .LVU567
 2134 0020 2846     		mov	r0, r5
 2135 0022 02B0     		add	sp, sp, #8
 2136              	.LCFI61:
 2137              		.cfi_remember_state
 2138              		.cfi_def_cfa_offset 16
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 57


 2139              		@ sp needed
 2140 0024 70BD     		pop	{r4, r5, r6, pc}
 2141              	.LVL198:
 2142              	.L128:
 2143              	.LCFI62:
 2144              		.cfi_restore_state
 2145              		.loc 1 942 1 view .LVU568
 2146 0026 2E03     		lsls	r6, r5, #12
 900:FLASH/spif.c  ****     {
 2147              		.loc 1 900 5 is_stmt 1 view .LVU569
 900:FLASH/spif.c  ****     {
 2148              		.loc 1 900 9 is_stmt 0 view .LVU570
 2149 0028 2046     		mov	r0, r4
 2150 002a FFF7FEFF 		bl	SPIF_WriteEnable
 2151              	.LVL199:
 900:FLASH/spif.c  ****     {
 2152              		.loc 1 900 8 discriminator 1 view .LVU571
 2153 002e 0546     		mov	r5, r0
 2154              	.LVL200:
 900:FLASH/spif.c  ****     {
 2155              		.loc 1 900 8 discriminator 1 view .LVU572
 2156 0030 0028     		cmp	r0, #0
 2157 0032 EFD0     		beq	.L123
 904:FLASH/spif.c  ****     if (Handle->BlockCnt >= 512)
 2158              		.loc 1 904 5 is_stmt 1 view .LVU573
 2159 0034 0021     		movs	r1, #0
 2160 0036 2046     		mov	r0, r4
 2161 0038 FFF7FEFF 		bl	SPIF_CsPin
 2162              	.LVL201:
 905:FLASH/spif.c  ****     {
 2163              		.loc 1 905 5 view .LVU574
 905:FLASH/spif.c  ****     {
 2164              		.loc 1 905 15 is_stmt 0 view .LVU575
 2165 003c E369     		ldr	r3, [r4, #28]
 905:FLASH/spif.c  ****     {
 2166              		.loc 1 905 8 view .LVU576
 2167 003e B3F5007F 		cmp	r3, #512
 2168 0042 25D3     		bcc	.L124
 907:FLASH/spif.c  ****       tx[1] = (address & 0xFF000000) >> 24;
 2169              		.loc 1 907 7 is_stmt 1 view .LVU577
 907:FLASH/spif.c  ****       tx[1] = (address & 0xFF000000) >> 24;
 2170              		.loc 1 907 13 is_stmt 0 view .LVU578
 2171 0044 2123     		movs	r3, #33
 2172 0046 8DF80030 		strb	r3, [sp]
 908:FLASH/spif.c  ****       tx[2] = (address & 0x00FF0000) >> 16;
 2173              		.loc 1 908 7 is_stmt 1 view .LVU579
 908:FLASH/spif.c  ****       tx[2] = (address & 0x00FF0000) >> 16;
 2174              		.loc 1 908 38 is_stmt 0 view .LVU580
 2175 004a 330E     		lsrs	r3, r6, #24
 908:FLASH/spif.c  ****       tx[2] = (address & 0x00FF0000) >> 16;
 2176              		.loc 1 908 13 view .LVU581
 2177 004c 8DF80130 		strb	r3, [sp, #1]
 909:FLASH/spif.c  ****       tx[3] = (address & 0x0000FF00) >> 8;
 2178              		.loc 1 909 7 is_stmt 1 view .LVU582
 909:FLASH/spif.c  ****       tx[3] = (address & 0x0000FF00) >> 8;
 2179              		.loc 1 909 38 is_stmt 0 view .LVU583
 2180 0050 330C     		lsrs	r3, r6, #16
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 58


 909:FLASH/spif.c  ****       tx[3] = (address & 0x0000FF00) >> 8;
 2181              		.loc 1 909 13 view .LVU584
 2182 0052 8DF80230 		strb	r3, [sp, #2]
 910:FLASH/spif.c  ****       tx[4] = (address & 0x000000FF);
 2183              		.loc 1 910 7 is_stmt 1 view .LVU585
 910:FLASH/spif.c  ****       tx[4] = (address & 0x000000FF);
 2184              		.loc 1 910 38 is_stmt 0 view .LVU586
 2185 0056 330A     		lsrs	r3, r6, #8
 910:FLASH/spif.c  ****       tx[4] = (address & 0x000000FF);
 2186              		.loc 1 910 13 view .LVU587
 2187 0058 8DF80330 		strb	r3, [sp, #3]
 911:FLASH/spif.c  ****       if (SPIF_Transmit(Handle, tx, 5, 100) == false)
 2188              		.loc 1 911 7 is_stmt 1 view .LVU588
 911:FLASH/spif.c  ****       if (SPIF_Transmit(Handle, tx, 5, 100) == false)
 2189              		.loc 1 911 13 is_stmt 0 view .LVU589
 2190 005c 8DF80460 		strb	r6, [sp, #4]
 912:FLASH/spif.c  ****       {
 2191              		.loc 1 912 7 is_stmt 1 view .LVU590
 912:FLASH/spif.c  ****       {
 2192              		.loc 1 912 11 is_stmt 0 view .LVU591
 2193 0060 6423     		movs	r3, #100
 2194 0062 0522     		movs	r2, #5
 2195 0064 6946     		mov	r1, sp
 2196 0066 2046     		mov	r0, r4
 2197 0068 FFF7FEFF 		bl	SPIF_Transmit
 2198              	.LVL202:
 912:FLASH/spif.c  ****       {
 2199              		.loc 1 912 10 discriminator 1 view .LVU592
 2200 006c 0546     		mov	r5, r0
 2201 006e 50B1     		cbz	r0, .L129
 2202              	.L125:
 930:FLASH/spif.c  ****     if (SPIF_WaitForWriting(Handle, 1000))
 2203              		.loc 1 930 5 is_stmt 1 view .LVU593
 2204 0070 0121     		movs	r1, #1
 2205 0072 2046     		mov	r0, r4
 2206 0074 FFF7FEFF 		bl	SPIF_CsPin
 2207              	.LVL203:
 931:FLASH/spif.c  ****     {
 2208              		.loc 1 931 5 view .LVU594
 931:FLASH/spif.c  ****     {
 2209              		.loc 1 931 9 is_stmt 0 view .LVU595
 2210 0078 4FF47A71 		mov	r1, #1000
 2211 007c 2046     		mov	r0, r4
 2212 007e FFF7FEFF 		bl	SPIF_WaitForWriting
 2213              	.LVL204:
 2214 0082 0546     		mov	r5, r0
 2215 0084 C6E7     		b	.L123
 2216              	.L129:
 914:FLASH/spif.c  ****         break;
 2217              		.loc 1 914 9 is_stmt 1 view .LVU596
 2218 0086 0121     		movs	r1, #1
 2219 0088 2046     		mov	r0, r4
 2220 008a FFF7FEFF 		bl	SPIF_CsPin
 2221              	.LVL205:
 915:FLASH/spif.c  ****       }
 2222              		.loc 1 915 9 view .LVU597
 2223 008e C1E7     		b	.L123
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 59


 2224              	.L124:
 920:FLASH/spif.c  ****       tx[1] = (address & 0x00FF0000) >> 16;
 2225              		.loc 1 920 7 view .LVU598
 920:FLASH/spif.c  ****       tx[1] = (address & 0x00FF0000) >> 16;
 2226              		.loc 1 920 13 is_stmt 0 view .LVU599
 2227 0090 2023     		movs	r3, #32
 2228 0092 8DF80030 		strb	r3, [sp]
 921:FLASH/spif.c  ****       tx[2] = (address & 0x0000FF00) >> 8;
 2229              		.loc 1 921 7 is_stmt 1 view .LVU600
 921:FLASH/spif.c  ****       tx[2] = (address & 0x0000FF00) >> 8;
 2230              		.loc 1 921 38 is_stmt 0 view .LVU601
 2231 0096 330C     		lsrs	r3, r6, #16
 921:FLASH/spif.c  ****       tx[2] = (address & 0x0000FF00) >> 8;
 2232              		.loc 1 921 13 view .LVU602
 2233 0098 8DF80130 		strb	r3, [sp, #1]
 922:FLASH/spif.c  ****       tx[3] = (address & 0x000000FF);
 2234              		.loc 1 922 7 is_stmt 1 view .LVU603
 922:FLASH/spif.c  ****       tx[3] = (address & 0x000000FF);
 2235              		.loc 1 922 38 is_stmt 0 view .LVU604
 2236 009c 330A     		lsrs	r3, r6, #8
 922:FLASH/spif.c  ****       tx[3] = (address & 0x000000FF);
 2237              		.loc 1 922 13 view .LVU605
 2238 009e 8DF80230 		strb	r3, [sp, #2]
 923:FLASH/spif.c  ****       if (SPIF_Transmit(Handle, tx, 4, 100) == false)
 2239              		.loc 1 923 7 is_stmt 1 view .LVU606
 923:FLASH/spif.c  ****       if (SPIF_Transmit(Handle, tx, 4, 100) == false)
 2240              		.loc 1 923 13 is_stmt 0 view .LVU607
 2241 00a2 8DF80360 		strb	r6, [sp, #3]
 924:FLASH/spif.c  ****       {
 2242              		.loc 1 924 7 is_stmt 1 view .LVU608
 924:FLASH/spif.c  ****       {
 2243              		.loc 1 924 11 is_stmt 0 view .LVU609
 2244 00a6 6423     		movs	r3, #100
 2245 00a8 0422     		movs	r2, #4
 2246 00aa 6946     		mov	r1, sp
 2247 00ac 2046     		mov	r0, r4
 2248 00ae FFF7FEFF 		bl	SPIF_Transmit
 2249              	.LVL206:
 924:FLASH/spif.c  ****       {
 2250              		.loc 1 924 10 discriminator 1 view .LVU610
 2251 00b2 0546     		mov	r5, r0
 2252 00b4 0028     		cmp	r0, #0
 2253 00b6 DBD1     		bne	.L125
 926:FLASH/spif.c  ****         break;
 2254              		.loc 1 926 9 is_stmt 1 view .LVU611
 2255 00b8 0121     		movs	r1, #1
 2256 00ba 2046     		mov	r0, r4
 2257 00bc FFF7FEFF 		bl	SPIF_CsPin
 2258              	.LVL207:
 927:FLASH/spif.c  ****       }
 2259              		.loc 1 927 9 view .LVU612
 2260 00c0 A8E7     		b	.L123
 2261              		.cfi_endproc
 2262              	.LFE178:
 2264              		.section	.text.SPIF_EraseBlock,"ax",%progbits
 2265              		.align	1
 2266              		.global	SPIF_EraseBlock
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 60


 2267              		.syntax unified
 2268              		.thumb
 2269              		.thumb_func
 2271              	SPIF_EraseBlock:
 2272              	.LVL208:
 2273              	.LFB179:
 943:FLASH/spif.c  **** 
 944:FLASH/spif.c  **** /**************************************************************************************************
 945:FLASH/spif.c  **** 
 946:FLASH/spif.c  **** /**
 947:FLASH/spif.c  ****   * @brief  Erase Block.
 948:FLASH/spif.c  ****   * @note   Send the Erase-Block command and wait for completion
 949:FLASH/spif.c  ****   *
 950:FLASH/spif.c  ****   * @param  *Handle: Pointer to SPIF_HandleTypeDef structure
 951:FLASH/spif.c  ****   * @param  Sector: Selected Block
 952:FLASH/spif.c  ****   *
 953:FLASH/spif.c  ****   * @retval bool: true or false
 954:FLASH/spif.c  ****   */
 955:FLASH/spif.c  **** bool SPIF_EraseBlock(SPIF_HandleTypeDef *Handle, uint32_t Block)
 956:FLASH/spif.c  **** {
 2274              		.loc 1 956 1 view -0
 2275              		.cfi_startproc
 2276              		@ args = 0, pretend = 0, frame = 8
 2277              		@ frame_needed = 0, uses_anonymous_args = 0
 2278              		.loc 1 956 1 is_stmt 0 view .LVU614
 2279 0000 70B5     		push	{r4, r5, r6, lr}
 2280              	.LCFI63:
 2281              		.cfi_def_cfa_offset 16
 2282              		.cfi_offset 4, -16
 2283              		.cfi_offset 5, -12
 2284              		.cfi_offset 6, -8
 2285              		.cfi_offset 14, -4
 2286 0002 82B0     		sub	sp, sp, #8
 2287              	.LCFI64:
 2288              		.cfi_def_cfa_offset 24
 2289 0004 0446     		mov	r4, r0
 2290 0006 0D46     		mov	r5, r1
 957:FLASH/spif.c  ****   SPIF_Lock(Handle);
 2291              		.loc 1 957 3 is_stmt 1 view .LVU615
 2292 0008 FFF7FEFF 		bl	SPIF_Lock
 2293              	.LVL209:
 958:FLASH/spif.c  ****   bool retVal = false;
 2294              		.loc 1 958 3 view .LVU616
 959:FLASH/spif.c  ****   uint32_t address = Block * SPIF_BLOCK_SIZE;
 2295              		.loc 1 959 3 view .LVU617
 960:FLASH/spif.c  ****   uint8_t tx[5];
 2296              		.loc 1 960 3 view .LVU618
 961:FLASH/spif.c  ****   do
 2297              		.loc 1 961 3 view .LVU619
 962:FLASH/spif.c  ****   {
 963:FLASH/spif.c  **** #if SPIF_DEBUG != SPIF_DEBUG_DISABLE
 964:FLASH/spif.c  ****     uint32_t dbgTime = HAL_GetTick();
 965:FLASH/spif.c  **** #endif
 966:FLASH/spif.c  ****     dprintf("SPIF_EraseBlock() START PAGE %ld\r\n", Block);
 2298              		.loc 1 966 59 view .LVU620
 967:FLASH/spif.c  ****     if (Block >= Handle->BlockCnt)
 2299              		.loc 1 967 5 view .LVU621
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 61


 2300              		.loc 1 967 24 is_stmt 0 view .LVU622
 2301 000c E369     		ldr	r3, [r4, #28]
 2302              		.loc 1 967 8 view .LVU623
 2303 000e AB42     		cmp	r3, r5
 2304 0010 09D8     		bhi	.L136
 958:FLASH/spif.c  ****   uint32_t address = Block * SPIF_BLOCK_SIZE;
 2305              		.loc 1 958 8 view .LVU624
 2306 0012 0025     		movs	r5, #0
 2307              	.LVL210:
 2308              	.L131:
 962:FLASH/spif.c  ****   {
 2309              		.loc 1 962 3 is_stmt 1 view .LVU625
 968:FLASH/spif.c  ****     {
 969:FLASH/spif.c  ****       dprintf("SPIF_EraseBlock() ERROR Block NUMBER\r\n");
 970:FLASH/spif.c  ****       break;
 971:FLASH/spif.c  ****     }
 972:FLASH/spif.c  ****     if (SPIF_WriteEnable(Handle) == false)
 973:FLASH/spif.c  ****     {
 974:FLASH/spif.c  ****       break;
 975:FLASH/spif.c  ****     }
 976:FLASH/spif.c  ****     SPIF_CsPin(Handle, 0);
 977:FLASH/spif.c  ****     if (Handle->BlockCnt >= 512)
 978:FLASH/spif.c  ****     {
 979:FLASH/spif.c  ****       tx[0] = SPIF_CMD_BLOCKERASE4ADD;
 980:FLASH/spif.c  ****       tx[1] = (address & 0xFF000000) >> 24;
 981:FLASH/spif.c  ****       tx[2] = (address & 0x00FF0000) >> 16;
 982:FLASH/spif.c  ****       tx[3] = (address & 0x0000FF00) >> 8;
 983:FLASH/spif.c  ****       tx[4] = (address & 0x000000FF);
 984:FLASH/spif.c  ****       if (SPIF_Transmit(Handle, tx, 5, 100) == false)
 985:FLASH/spif.c  ****       {
 986:FLASH/spif.c  ****         SPIF_CsPin(Handle, 1);
 987:FLASH/spif.c  ****         break;
 988:FLASH/spif.c  ****       }
 989:FLASH/spif.c  ****     }
 990:FLASH/spif.c  ****     else
 991:FLASH/spif.c  ****     {
 992:FLASH/spif.c  ****       tx[0] = SPIF_CMD_BLOCKERASE3ADD;
 993:FLASH/spif.c  ****       tx[1] = (address & 0x00FF0000) >> 16;
 994:FLASH/spif.c  ****       tx[2] = (address & 0x0000FF00) >> 8;
 995:FLASH/spif.c  ****       tx[3] = (address & 0x000000FF);
 996:FLASH/spif.c  ****       if (SPIF_Transmit(Handle, tx, 4, 100) == false)
 997:FLASH/spif.c  ****       {
 998:FLASH/spif.c  ****         SPIF_CsPin(Handle, 1);
 999:FLASH/spif.c  ****         break;
1000:FLASH/spif.c  ****       }
1001:FLASH/spif.c  ****     }
1002:FLASH/spif.c  ****     SPIF_CsPin(Handle, 1);
1003:FLASH/spif.c  ****     if (SPIF_WaitForWriting(Handle, 3000))
1004:FLASH/spif.c  ****     {
1005:FLASH/spif.c  ****       dprintf("SPIF_EraseBlock() DONE AFTER %ld ms\r\n", HAL_GetTick() - dbgTime);
1006:FLASH/spif.c  ****       retVal = true;
1007:FLASH/spif.c  ****     }
1008:FLASH/spif.c  **** 
1009:FLASH/spif.c  ****   } while (0);
1010:FLASH/spif.c  **** 
1011:FLASH/spif.c  ****   SPIF_WriteDisable(Handle);
 2310              		.loc 1 1011 3 view .LVU626
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 62


 2311 0014 2046     		mov	r0, r4
 2312 0016 FFF7FEFF 		bl	SPIF_WriteDisable
 2313              	.LVL211:
1012:FLASH/spif.c  ****   SPIF_UnLock(Handle);
 2314              		.loc 1 1012 3 view .LVU627
 2315 001a 2046     		mov	r0, r4
 2316 001c FFF7FEFF 		bl	SPIF_UnLock
 2317              	.LVL212:
1013:FLASH/spif.c  ****   return retVal;
 2318              		.loc 1 1013 3 view .LVU628
1014:FLASH/spif.c  **** }
 2319              		.loc 1 1014 1 is_stmt 0 view .LVU629
 2320 0020 2846     		mov	r0, r5
 2321 0022 02B0     		add	sp, sp, #8
 2322              	.LCFI65:
 2323              		.cfi_remember_state
 2324              		.cfi_def_cfa_offset 16
 2325              		@ sp needed
 2326 0024 70BD     		pop	{r4, r5, r6, pc}
 2327              	.LVL213:
 2328              	.L136:
 2329              	.LCFI66:
 2330              		.cfi_restore_state
 2331              		.loc 1 1014 1 view .LVU630
 2332 0026 2E04     		lsls	r6, r5, #16
 972:FLASH/spif.c  ****     {
 2333              		.loc 1 972 5 is_stmt 1 view .LVU631
 972:FLASH/spif.c  ****     {
 2334              		.loc 1 972 9 is_stmt 0 view .LVU632
 2335 0028 2046     		mov	r0, r4
 2336 002a FFF7FEFF 		bl	SPIF_WriteEnable
 2337              	.LVL214:
 972:FLASH/spif.c  ****     {
 2338              		.loc 1 972 8 discriminator 1 view .LVU633
 2339 002e 0546     		mov	r5, r0
 2340              	.LVL215:
 972:FLASH/spif.c  ****     {
 2341              		.loc 1 972 8 discriminator 1 view .LVU634
 2342 0030 0028     		cmp	r0, #0
 2343 0032 EFD0     		beq	.L131
 976:FLASH/spif.c  ****     if (Handle->BlockCnt >= 512)
 2344              		.loc 1 976 5 is_stmt 1 view .LVU635
 2345 0034 0021     		movs	r1, #0
 2346 0036 2046     		mov	r0, r4
 2347 0038 FFF7FEFF 		bl	SPIF_CsPin
 2348              	.LVL216:
 977:FLASH/spif.c  ****     {
 2349              		.loc 1 977 5 view .LVU636
 977:FLASH/spif.c  ****     {
 2350              		.loc 1 977 15 is_stmt 0 view .LVU637
 2351 003c E369     		ldr	r3, [r4, #28]
 977:FLASH/spif.c  ****     {
 2352              		.loc 1 977 8 view .LVU638
 2353 003e B3F5007F 		cmp	r3, #512
 2354 0042 25D3     		bcc	.L132
 979:FLASH/spif.c  ****       tx[1] = (address & 0xFF000000) >> 24;
 2355              		.loc 1 979 7 is_stmt 1 view .LVU639
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 63


 979:FLASH/spif.c  ****       tx[1] = (address & 0xFF000000) >> 24;
 2356              		.loc 1 979 13 is_stmt 0 view .LVU640
 2357 0044 DC23     		movs	r3, #220
 2358 0046 8DF80030 		strb	r3, [sp]
 980:FLASH/spif.c  ****       tx[2] = (address & 0x00FF0000) >> 16;
 2359              		.loc 1 980 7 is_stmt 1 view .LVU641
 980:FLASH/spif.c  ****       tx[2] = (address & 0x00FF0000) >> 16;
 2360              		.loc 1 980 38 is_stmt 0 view .LVU642
 2361 004a 330E     		lsrs	r3, r6, #24
 980:FLASH/spif.c  ****       tx[2] = (address & 0x00FF0000) >> 16;
 2362              		.loc 1 980 13 view .LVU643
 2363 004c 8DF80130 		strb	r3, [sp, #1]
 981:FLASH/spif.c  ****       tx[3] = (address & 0x0000FF00) >> 8;
 2364              		.loc 1 981 7 is_stmt 1 view .LVU644
 981:FLASH/spif.c  ****       tx[3] = (address & 0x0000FF00) >> 8;
 2365              		.loc 1 981 38 is_stmt 0 view .LVU645
 2366 0050 330C     		lsrs	r3, r6, #16
 981:FLASH/spif.c  ****       tx[3] = (address & 0x0000FF00) >> 8;
 2367              		.loc 1 981 13 view .LVU646
 2368 0052 8DF80230 		strb	r3, [sp, #2]
 982:FLASH/spif.c  ****       tx[4] = (address & 0x000000FF);
 2369              		.loc 1 982 7 is_stmt 1 view .LVU647
 982:FLASH/spif.c  ****       tx[4] = (address & 0x000000FF);
 2370              		.loc 1 982 38 is_stmt 0 view .LVU648
 2371 0056 330A     		lsrs	r3, r6, #8
 982:FLASH/spif.c  ****       tx[4] = (address & 0x000000FF);
 2372              		.loc 1 982 13 view .LVU649
 2373 0058 8DF80330 		strb	r3, [sp, #3]
 983:FLASH/spif.c  ****       if (SPIF_Transmit(Handle, tx, 5, 100) == false)
 2374              		.loc 1 983 7 is_stmt 1 view .LVU650
 983:FLASH/spif.c  ****       if (SPIF_Transmit(Handle, tx, 5, 100) == false)
 2375              		.loc 1 983 13 is_stmt 0 view .LVU651
 2376 005c 8DF80460 		strb	r6, [sp, #4]
 984:FLASH/spif.c  ****       {
 2377              		.loc 1 984 7 is_stmt 1 view .LVU652
 984:FLASH/spif.c  ****       {
 2378              		.loc 1 984 11 is_stmt 0 view .LVU653
 2379 0060 6423     		movs	r3, #100
 2380 0062 0522     		movs	r2, #5
 2381 0064 6946     		mov	r1, sp
 2382 0066 2046     		mov	r0, r4
 2383 0068 FFF7FEFF 		bl	SPIF_Transmit
 2384              	.LVL217:
 984:FLASH/spif.c  ****       {
 2385              		.loc 1 984 10 discriminator 1 view .LVU654
 2386 006c 0546     		mov	r5, r0
 2387 006e 50B1     		cbz	r0, .L137
 2388              	.L133:
1002:FLASH/spif.c  ****     if (SPIF_WaitForWriting(Handle, 3000))
 2389              		.loc 1 1002 5 is_stmt 1 view .LVU655
 2390 0070 0121     		movs	r1, #1
 2391 0072 2046     		mov	r0, r4
 2392 0074 FFF7FEFF 		bl	SPIF_CsPin
 2393              	.LVL218:
1003:FLASH/spif.c  ****     {
 2394              		.loc 1 1003 5 view .LVU656
1003:FLASH/spif.c  ****     {
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 64


 2395              		.loc 1 1003 9 is_stmt 0 view .LVU657
 2396 0078 40F6B831 		movw	r1, #3000
 2397 007c 2046     		mov	r0, r4
 2398 007e FFF7FEFF 		bl	SPIF_WaitForWriting
 2399              	.LVL219:
 2400 0082 0546     		mov	r5, r0
 2401 0084 C6E7     		b	.L131
 2402              	.L137:
 986:FLASH/spif.c  ****         break;
 2403              		.loc 1 986 9 is_stmt 1 view .LVU658
 2404 0086 0121     		movs	r1, #1
 2405 0088 2046     		mov	r0, r4
 2406 008a FFF7FEFF 		bl	SPIF_CsPin
 2407              	.LVL220:
 987:FLASH/spif.c  ****       }
 2408              		.loc 1 987 9 view .LVU659
 2409 008e C1E7     		b	.L131
 2410              	.L132:
 992:FLASH/spif.c  ****       tx[1] = (address & 0x00FF0000) >> 16;
 2411              		.loc 1 992 7 view .LVU660
 992:FLASH/spif.c  ****       tx[1] = (address & 0x00FF0000) >> 16;
 2412              		.loc 1 992 13 is_stmt 0 view .LVU661
 2413 0090 D823     		movs	r3, #216
 2414 0092 8DF80030 		strb	r3, [sp]
 993:FLASH/spif.c  ****       tx[2] = (address & 0x0000FF00) >> 8;
 2415              		.loc 1 993 7 is_stmt 1 view .LVU662
 993:FLASH/spif.c  ****       tx[2] = (address & 0x0000FF00) >> 8;
 2416              		.loc 1 993 38 is_stmt 0 view .LVU663
 2417 0096 330C     		lsrs	r3, r6, #16
 993:FLASH/spif.c  ****       tx[2] = (address & 0x0000FF00) >> 8;
 2418              		.loc 1 993 13 view .LVU664
 2419 0098 8DF80130 		strb	r3, [sp, #1]
 994:FLASH/spif.c  ****       tx[3] = (address & 0x000000FF);
 2420              		.loc 1 994 7 is_stmt 1 view .LVU665
 994:FLASH/spif.c  ****       tx[3] = (address & 0x000000FF);
 2421              		.loc 1 994 38 is_stmt 0 view .LVU666
 2422 009c 330A     		lsrs	r3, r6, #8
 994:FLASH/spif.c  ****       tx[3] = (address & 0x000000FF);
 2423              		.loc 1 994 13 view .LVU667
 2424 009e 8DF80230 		strb	r3, [sp, #2]
 995:FLASH/spif.c  ****       if (SPIF_Transmit(Handle, tx, 4, 100) == false)
 2425              		.loc 1 995 7 is_stmt 1 view .LVU668
 995:FLASH/spif.c  ****       if (SPIF_Transmit(Handle, tx, 4, 100) == false)
 2426              		.loc 1 995 13 is_stmt 0 view .LVU669
 2427 00a2 8DF80360 		strb	r6, [sp, #3]
 996:FLASH/spif.c  ****       {
 2428              		.loc 1 996 7 is_stmt 1 view .LVU670
 996:FLASH/spif.c  ****       {
 2429              		.loc 1 996 11 is_stmt 0 view .LVU671
 2430 00a6 6423     		movs	r3, #100
 2431 00a8 0422     		movs	r2, #4
 2432 00aa 6946     		mov	r1, sp
 2433 00ac 2046     		mov	r0, r4
 2434 00ae FFF7FEFF 		bl	SPIF_Transmit
 2435              	.LVL221:
 996:FLASH/spif.c  ****       {
 2436              		.loc 1 996 10 discriminator 1 view .LVU672
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 65


 2437 00b2 0546     		mov	r5, r0
 2438 00b4 0028     		cmp	r0, #0
 2439 00b6 DBD1     		bne	.L133
 998:FLASH/spif.c  ****         break;
 2440              		.loc 1 998 9 is_stmt 1 view .LVU673
 2441 00b8 0121     		movs	r1, #1
 2442 00ba 2046     		mov	r0, r4
 2443 00bc FFF7FEFF 		bl	SPIF_CsPin
 2444              	.LVL222:
 999:FLASH/spif.c  ****       }
 2445              		.loc 1 999 9 view .LVU674
 2446 00c0 A8E7     		b	.L131
 2447              		.cfi_endproc
 2448              	.LFE179:
 2450              		.section	.text.SPIF_WriteAddress,"ax",%progbits
 2451              		.align	1
 2452              		.global	SPIF_WriteAddress
 2453              		.syntax unified
 2454              		.thumb
 2455              		.thumb_func
 2457              	SPIF_WriteAddress:
 2458              	.LVL223:
 2459              	.LFB180:
1015:FLASH/spif.c  **** 
1016:FLASH/spif.c  **** /**************************************************************************************************
1017:FLASH/spif.c  **** 
1018:FLASH/spif.c  **** /**
1019:FLASH/spif.c  ****   * @brief  Write data array to an Address
1020:FLASH/spif.c  ****   * @note   Write a data array with specified size.
1021:FLASH/spif.c  ****   * @note   All pages should be erased before write
1022:FLASH/spif.c  ****   *
1023:FLASH/spif.c  ****   * @param  *Handle: Pointer to SPIF_HandleTypeDef structure
1024:FLASH/spif.c  ****   * @param  Address: Start Address
1025:FLASH/spif.c  ****   * @param  *Data: Pointer to Data
1026:FLASH/spif.c  ****   * @param  Size: The length of data should be written. (in byte)
1027:FLASH/spif.c  ****   *
1028:FLASH/spif.c  ****   * @retval bool: true or false
1029:FLASH/spif.c  ****   */
1030:FLASH/spif.c  **** bool SPIF_WriteAddress(SPIF_HandleTypeDef *Handle, uint32_t Address, uint8_t *Data, uint32_t Size)
1031:FLASH/spif.c  **** {
 2460              		.loc 1 1031 1 view -0
 2461              		.cfi_startproc
 2462              		@ args = 0, pretend = 0, frame = 0
 2463              		@ frame_needed = 0, uses_anonymous_args = 0
 2464              		.loc 1 1031 1 is_stmt 0 view .LVU676
 2465 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2466              	.LCFI67:
 2467              		.cfi_def_cfa_offset 32
 2468              		.cfi_offset 4, -32
 2469              		.cfi_offset 5, -28
 2470              		.cfi_offset 6, -24
 2471              		.cfi_offset 7, -20
 2472              		.cfi_offset 8, -16
 2473              		.cfi_offset 9, -12
 2474              		.cfi_offset 10, -8
 2475              		.cfi_offset 14, -4
 2476 0004 82B0     		sub	sp, sp, #8
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 66


 2477              	.LCFI68:
 2478              		.cfi_def_cfa_offset 40
 2479 0006 8046     		mov	r8, r0
 2480 0008 0E46     		mov	r6, r1
 2481 000a 9146     		mov	r9, r2
 2482 000c 1D46     		mov	r5, r3
1032:FLASH/spif.c  ****   SPIF_Lock(Handle);
 2483              		.loc 1 1032 3 is_stmt 1 view .LVU677
 2484 000e FFF7FEFF 		bl	SPIF_Lock
 2485              	.LVL224:
1033:FLASH/spif.c  ****   bool retVal = false;
 2486              		.loc 1 1033 3 view .LVU678
1034:FLASH/spif.c  ****   uint32_t page, add, offset, remaining, length, maximum, index = 0;
 2487              		.loc 1 1034 3 view .LVU679
1035:FLASH/spif.c  ****   add = Address;
 2488              		.loc 1 1035 3 view .LVU680
1036:FLASH/spif.c  ****   remaining = Size;
 2489              		.loc 1 1036 3 view .LVU681
1034:FLASH/spif.c  ****   uint32_t page, add, offset, remaining, length, maximum, index = 0;
 2490              		.loc 1 1034 59 is_stmt 0 view .LVU682
 2491 0012 0027     		movs	r7, #0
 2492 0014 0CE0     		b	.L141
 2493              	.LVL225:
 2494              	.L139:
1037:FLASH/spif.c  ****   do
1038:FLASH/spif.c  ****   {
1039:FLASH/spif.c  ****     page = SPIF_AddressToPage(add);
1040:FLASH/spif.c  ****     offset = add % SPIF_PAGE_SIZE;
1041:FLASH/spif.c  ****     maximum = SPIF_PAGE_SIZE - offset;
1042:FLASH/spif.c  ****     if (remaining <= maximum)
1043:FLASH/spif.c  ****     {
1044:FLASH/spif.c  ****       length = remaining;
1045:FLASH/spif.c  ****     }
1046:FLASH/spif.c  ****     else
1047:FLASH/spif.c  ****     {
1048:FLASH/spif.c  ****       length = maximum;
1049:FLASH/spif.c  ****     }
1050:FLASH/spif.c  ****     if (SPIF_WriteFn(Handle, page, &Data[index], length, offset) == false)
 2495              		.loc 1 1050 5 is_stmt 1 view .LVU683
 2496              		.loc 1 1050 9 is_stmt 0 view .LVU684
 2497 0016 0093     		str	r3, [sp]
 2498 0018 2346     		mov	r3, r4
 2499              	.LVL226:
 2500              		.loc 1 1050 9 view .LVU685
 2501 001a 09EB0702 		add	r2, r9, r7
 2502 001e 4046     		mov	r0, r8
 2503 0020 FFF7FEFF 		bl	SPIF_WriteFn
 2504              	.LVL227:
 2505              		.loc 1 1050 8 discriminator 1 view .LVU686
 2506 0024 8246     		mov	r10, r0
 2507 0026 58B1     		cbz	r0, .L140
1051:FLASH/spif.c  ****     {
1052:FLASH/spif.c  ****       break;
1053:FLASH/spif.c  ****     }
1054:FLASH/spif.c  ****     add += length;
 2508              		.loc 1 1054 5 is_stmt 1 view .LVU687
 2509              		.loc 1 1054 9 is_stmt 0 view .LVU688
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 67


 2510 0028 2644     		add	r6, r6, r4
 2511              	.LVL228:
1055:FLASH/spif.c  ****     index += length;
 2512              		.loc 1 1055 5 is_stmt 1 view .LVU689
 2513              		.loc 1 1055 11 is_stmt 0 view .LVU690
 2514 002a 2744     		add	r7, r7, r4
 2515              	.LVL229:
1056:FLASH/spif.c  ****     remaining -= length;
 2516              		.loc 1 1056 5 is_stmt 1 view .LVU691
1057:FLASH/spif.c  ****     if (remaining == 0)
 2517              		.loc 1 1057 5 view .LVU692
 2518              		.loc 1 1057 8 is_stmt 0 view .LVU693
 2519 002c 2D1B     		subs	r5, r5, r4
 2520              	.LVL230:
 2521              		.loc 1 1057 8 view .LVU694
 2522 002e 07D0     		beq	.L140
 2523              	.LVL231:
 2524              	.L141:
1037:FLASH/spif.c  ****   {
 2525              		.loc 1 1037 3 is_stmt 1 view .LVU695
1039:FLASH/spif.c  ****     offset = add % SPIF_PAGE_SIZE;
 2526              		.loc 1 1039 5 view .LVU696
1039:FLASH/spif.c  ****     offset = add % SPIF_PAGE_SIZE;
 2527              		.loc 1 1039 10 is_stmt 0 view .LVU697
 2528 0030 310A     		lsrs	r1, r6, #8
 2529              	.LVL232:
1040:FLASH/spif.c  ****     maximum = SPIF_PAGE_SIZE - offset;
 2530              		.loc 1 1040 5 is_stmt 1 view .LVU698
1040:FLASH/spif.c  ****     maximum = SPIF_PAGE_SIZE - offset;
 2531              		.loc 1 1040 12 is_stmt 0 view .LVU699
 2532 0032 F3B2     		uxtb	r3, r6
 2533              	.LVL233:
1041:FLASH/spif.c  ****     if (remaining <= maximum)
 2534              		.loc 1 1041 5 is_stmt 1 view .LVU700
1041:FLASH/spif.c  ****     if (remaining <= maximum)
 2535              		.loc 1 1041 13 is_stmt 0 view .LVU701
 2536 0034 C3F58074 		rsb	r4, r3, #256
 2537              	.LVL234:
1042:FLASH/spif.c  ****     {
 2538              		.loc 1 1042 5 is_stmt 1 view .LVU702
1042:FLASH/spif.c  ****     {
 2539              		.loc 1 1042 8 is_stmt 0 view .LVU703
 2540 0038 A542     		cmp	r5, r4
 2541 003a ECD8     		bhi	.L139
1044:FLASH/spif.c  ****     }
 2542              		.loc 1 1044 14 view .LVU704
 2543 003c 2C46     		mov	r4, r5
 2544              	.LVL235:
1044:FLASH/spif.c  ****     }
 2545              		.loc 1 1044 14 view .LVU705
 2546 003e EAE7     		b	.L139
 2547              	.LVL236:
 2548              	.L140:
1058:FLASH/spif.c  ****     {
1059:FLASH/spif.c  ****       retVal = true;
1060:FLASH/spif.c  ****       break;
1061:FLASH/spif.c  ****     }
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 68


1062:FLASH/spif.c  **** 
1063:FLASH/spif.c  ****   } while (remaining > 0);
1064:FLASH/spif.c  **** 
1065:FLASH/spif.c  ****   SPIF_UnLock(Handle);
 2549              		.loc 1 1065 3 is_stmt 1 view .LVU706
 2550 0040 4046     		mov	r0, r8
 2551 0042 FFF7FEFF 		bl	SPIF_UnLock
 2552              	.LVL237:
1066:FLASH/spif.c  ****   return retVal;
 2553              		.loc 1 1066 3 view .LVU707
1067:FLASH/spif.c  **** }
 2554              		.loc 1 1067 1 is_stmt 0 view .LVU708
 2555 0046 5046     		mov	r0, r10
 2556 0048 02B0     		add	sp, sp, #8
 2557              	.LCFI69:
 2558              		.cfi_def_cfa_offset 32
 2559              		@ sp needed
 2560 004a BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2561              		.loc 1 1067 1 view .LVU709
 2562              		.cfi_endproc
 2563              	.LFE180:
 2565              		.section	.text.SPIF_WritePage,"ax",%progbits
 2566              		.align	1
 2567              		.global	SPIF_WritePage
 2568              		.syntax unified
 2569              		.thumb
 2570              		.thumb_func
 2572              	SPIF_WritePage:
 2573              	.LVL238:
 2574              	.LFB181:
1068:FLASH/spif.c  **** 
1069:FLASH/spif.c  **** /**************************************************************************************************
1070:FLASH/spif.c  **** 
1071:FLASH/spif.c  **** /**
1072:FLASH/spif.c  ****   * @brief  Write data array to a Page
1073:FLASH/spif.c  ****   * @note   Write a data array with specified size.
1074:FLASH/spif.c  ****   * @note   The Page should be erased before write
1075:FLASH/spif.c  ****   *
1076:FLASH/spif.c  ****   * @param  *Handle: Pointer to SPIF_HandleTypeDef structure
1077:FLASH/spif.c  ****   * @param  PageNumber: Page Number
1078:FLASH/spif.c  ****   * @param  *Data: Pointer to Data
1079:FLASH/spif.c  ****   * @param  Size: The length of data should be written. (in byte)
1080:FLASH/spif.c  ****   * @param  Offset: The start point for writing data. (in byte)
1081:FLASH/spif.c  ****   *
1082:FLASH/spif.c  ****   * @retval bool: true or false
1083:FLASH/spif.c  ****   */
1084:FLASH/spif.c  **** bool SPIF_WritePage(SPIF_HandleTypeDef *Handle, uint32_t PageNumber, uint8_t *Data, uint32_t Size, 
1085:FLASH/spif.c  **** {
 2575              		.loc 1 1085 1 is_stmt 1 view -0
 2576              		.cfi_startproc
 2577              		@ args = 4, pretend = 0, frame = 0
 2578              		@ frame_needed = 0, uses_anonymous_args = 0
 2579              		.loc 1 1085 1 is_stmt 0 view .LVU711
 2580 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 2581              	.LCFI70:
 2582              		.cfi_def_cfa_offset 20
 2583              		.cfi_offset 4, -20
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 69


 2584              		.cfi_offset 5, -16
 2585              		.cfi_offset 6, -12
 2586              		.cfi_offset 7, -8
 2587              		.cfi_offset 14, -4
 2588 0002 83B0     		sub	sp, sp, #12
 2589              	.LCFI71:
 2590              		.cfi_def_cfa_offset 32
 2591 0004 0446     		mov	r4, r0
 2592 0006 0D46     		mov	r5, r1
 2593 0008 1646     		mov	r6, r2
 2594 000a 1F46     		mov	r7, r3
1086:FLASH/spif.c  ****   SPIF_Lock(Handle);
 2595              		.loc 1 1086 3 is_stmt 1 view .LVU712
 2596 000c FFF7FEFF 		bl	SPIF_Lock
 2597              	.LVL239:
1087:FLASH/spif.c  ****   bool retVal = false;
 2598              		.loc 1 1087 3 view .LVU713
1088:FLASH/spif.c  ****   retVal = SPIF_WriteFn(Handle, PageNumber, Data, Size, Offset);
 2599              		.loc 1 1088 3 view .LVU714
 2600              		.loc 1 1088 12 is_stmt 0 view .LVU715
 2601 0010 089B     		ldr	r3, [sp, #32]
 2602 0012 0093     		str	r3, [sp]
 2603 0014 3B46     		mov	r3, r7
 2604 0016 3246     		mov	r2, r6
 2605 0018 2946     		mov	r1, r5
 2606 001a 2046     		mov	r0, r4
 2607 001c FFF7FEFF 		bl	SPIF_WriteFn
 2608              	.LVL240:
 2609 0020 0546     		mov	r5, r0
 2610              	.LVL241:
1089:FLASH/spif.c  ****   SPIF_UnLock(Handle);
 2611              		.loc 1 1089 3 is_stmt 1 view .LVU716
 2612 0022 2046     		mov	r0, r4
 2613 0024 FFF7FEFF 		bl	SPIF_UnLock
 2614              	.LVL242:
1090:FLASH/spif.c  ****   return retVal;
 2615              		.loc 1 1090 3 view .LVU717
1091:FLASH/spif.c  **** }
 2616              		.loc 1 1091 1 is_stmt 0 view .LVU718
 2617 0028 2846     		mov	r0, r5
 2618 002a 03B0     		add	sp, sp, #12
 2619              	.LCFI72:
 2620              		.cfi_def_cfa_offset 20
 2621              		@ sp needed
 2622 002c F0BD     		pop	{r4, r5, r6, r7, pc}
 2623              		.loc 1 1091 1 view .LVU719
 2624              		.cfi_endproc
 2625              	.LFE181:
 2627              		.section	.text.SPIF_WriteSector,"ax",%progbits
 2628              		.align	1
 2629              		.global	SPIF_WriteSector
 2630              		.syntax unified
 2631              		.thumb
 2632              		.thumb_func
 2634              	SPIF_WriteSector:
 2635              	.LVL243:
 2636              	.LFB182:
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 70


1092:FLASH/spif.c  **** 
1093:FLASH/spif.c  **** /**************************************************************************************************
1094:FLASH/spif.c  **** 
1095:FLASH/spif.c  **** /**
1096:FLASH/spif.c  ****   * @brief  Write data array to a Sector
1097:FLASH/spif.c  ****   * @note   Write a data array with specified size.
1098:FLASH/spif.c  ****   * @note   The Sector should be erased before write
1099:FLASH/spif.c  ****   *
1100:FLASH/spif.c  ****   * @param  *Handle: Pointer to SPIF_HandleTypeDef structure
1101:FLASH/spif.c  ****   * @param  SectorNumber: Sector Number
1102:FLASH/spif.c  ****   * @param  *Data: Pointer to Data
1103:FLASH/spif.c  ****   * @param  Size: The length of data should be written. (in byte)
1104:FLASH/spif.c  ****   * @param  Offset: The start point for writing data. (in byte)
1105:FLASH/spif.c  ****   *
1106:FLASH/spif.c  ****   * @retval bool: true or false
1107:FLASH/spif.c  ****   */
1108:FLASH/spif.c  **** bool SPIF_WriteSector(SPIF_HandleTypeDef *Handle, uint32_t SectorNumber, uint8_t *Data, uint32_t Si
1109:FLASH/spif.c  **** {
 2637              		.loc 1 1109 1 is_stmt 1 view -0
 2638              		.cfi_startproc
 2639              		@ args = 4, pretend = 0, frame = 0
 2640              		@ frame_needed = 0, uses_anonymous_args = 0
 2641              		.loc 1 1109 1 is_stmt 0 view .LVU721
 2642 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2643              	.LCFI73:
 2644              		.cfi_def_cfa_offset 36
 2645              		.cfi_offset 4, -36
 2646              		.cfi_offset 5, -32
 2647              		.cfi_offset 6, -28
 2648              		.cfi_offset 7, -24
 2649              		.cfi_offset 8, -20
 2650              		.cfi_offset 9, -16
 2651              		.cfi_offset 10, -12
 2652              		.cfi_offset 11, -8
 2653              		.cfi_offset 14, -4
 2654 0004 83B0     		sub	sp, sp, #12
 2655              	.LCFI74:
 2656              		.cfi_def_cfa_offset 48
 2657 0006 0746     		mov	r7, r0
 2658 0008 8846     		mov	r8, r1
 2659 000a 9146     		mov	r9, r2
 2660 000c 1D46     		mov	r5, r3
 2661 000e 0C9C     		ldr	r4, [sp, #48]
1110:FLASH/spif.c  ****   SPIF_Lock(Handle);
 2662              		.loc 1 1110 3 is_stmt 1 view .LVU722
 2663 0010 FFF7FEFF 		bl	SPIF_Lock
 2664              	.LVL244:
1111:FLASH/spif.c  ****   bool retVal = true;
 2665              		.loc 1 1111 3 view .LVU723
1112:FLASH/spif.c  ****   do
 2666              		.loc 1 1112 3 view .LVU724
 2667              	.LBB3:
1113:FLASH/spif.c  ****   {
1114:FLASH/spif.c  ****     if (Offset >= SPIF_SECTOR_SIZE)
 2668              		.loc 1 1114 5 view .LVU725
 2669              		.loc 1 1114 8 is_stmt 0 view .LVU726
 2670 0014 B4F5805F 		cmp	r4, #4096
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 71


 2671 0018 29D2     		bcs	.L151
1115:FLASH/spif.c  ****     {
1116:FLASH/spif.c  ****       retVal = false;
1117:FLASH/spif.c  ****       break;
1118:FLASH/spif.c  ****     }
1119:FLASH/spif.c  ****     if (Size > (SPIF_SECTOR_SIZE - Offset))
 2672              		.loc 1 1119 5 is_stmt 1 view .LVU727
 2673              		.loc 1 1119 34 is_stmt 0 view .LVU728
 2674 001a C4F58056 		rsb	r6, r4, #4096
 2675              		.loc 1 1119 8 view .LVU729
 2676 001e AE42     		cmp	r6, r5
 2677 0020 00D3     		bcc	.L148
 2678 0022 2E46     		mov	r6, r5
 2679              	.L148:
 2680              	.LVL245:
1120:FLASH/spif.c  ****     {
1121:FLASH/spif.c  ****       Size = SPIF_SECTOR_SIZE - Offset;
1122:FLASH/spif.c  ****     }
1123:FLASH/spif.c  ****     uint32_t bytesWritten = 0;
 2681              		.loc 1 1123 5 is_stmt 1 view .LVU730
1124:FLASH/spif.c  ****     uint32_t pageNumber = SectorNumber * (SPIF_SECTOR_SIZE / SPIF_PAGE_SIZE);
 2682              		.loc 1 1124 5 view .LVU731
1125:FLASH/spif.c  ****     pageNumber += Offset / SPIF_PAGE_SIZE;
 2683              		.loc 1 1125 5 view .LVU732
 2684              		.loc 1 1125 26 is_stmt 0 view .LVU733
 2685 0024 250A     		lsrs	r5, r4, #8
 2686              		.loc 1 1125 16 view .LVU734
 2687 0026 05EB0815 		add	r5, r5, r8, lsl #4
 2688              	.LVL246:
1126:FLASH/spif.c  ****     uint32_t remainingBytes = Size;
 2689              		.loc 1 1126 5 is_stmt 1 view .LVU735
1127:FLASH/spif.c  ****     uint32_t pageOffset = Offset % SPIF_PAGE_SIZE;
 2690              		.loc 1 1127 5 view .LVU736
 2691              		.loc 1 1127 14 is_stmt 0 view .LVU737
 2692 002a E3B2     		uxtb	r3, r4
 2693              	.LVL247:
1128:FLASH/spif.c  ****     while (remainingBytes > 0 && pageNumber < ((SectorNumber + 1) * (SPIF_SECTOR_SIZE / SPIF_PAGE_S
 2694              		.loc 1 1128 5 is_stmt 1 view .LVU738
1123:FLASH/spif.c  ****     uint32_t pageNumber = SectorNumber * (SPIF_SECTOR_SIZE / SPIF_PAGE_SIZE);
 2695              		.loc 1 1123 14 is_stmt 0 view .LVU739
 2696 002c 4FF0000A 		mov	r10, #0
 2697              		.loc 1 1128 11 view .LVU740
 2698 0030 03E0     		b	.L149
 2699              	.LVL248:
 2700              	.L155:
 2701              	.LBB4:
1129:FLASH/spif.c  ****     {
1130:FLASH/spif.c  ****       uint32_t bytesToWrite = (remainingBytes > (SPIF_PAGE_SIZE - pageOffset)) ? (SPIF_PAGE_SIZE - 
1131:FLASH/spif.c  ****       if (SPIF_WriteFn(Handle, pageNumber, Data + bytesWritten, bytesToWrite, pageOffset) == false)
1132:FLASH/spif.c  ****       {
1133:FLASH/spif.c  ****         retVal = false;
1134:FLASH/spif.c  ****         break;
1135:FLASH/spif.c  ****       }
1136:FLASH/spif.c  ****       bytesWritten += bytesToWrite;
 2702              		.loc 1 1136 7 is_stmt 1 view .LVU741
 2703              		.loc 1 1136 20 is_stmt 0 view .LVU742
 2704 0032 A244     		add	r10, r10, r4
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 72


 2705              	.LVL249:
1137:FLASH/spif.c  ****       remainingBytes -= bytesToWrite;
 2706              		.loc 1 1137 7 is_stmt 1 view .LVU743
 2707              		.loc 1 1137 22 is_stmt 0 view .LVU744
 2708 0034 361B     		subs	r6, r6, r4
 2709              	.LVL250:
1138:FLASH/spif.c  ****       pageNumber++;
 2710              		.loc 1 1138 7 is_stmt 1 view .LVU745
 2711              		.loc 1 1138 17 is_stmt 0 view .LVU746
 2712 0036 0135     		adds	r5, r5, #1
 2713              	.LVL251:
1139:FLASH/spif.c  ****       pageOffset = 0;
 2714              		.loc 1 1139 7 is_stmt 1 view .LVU747
 2715              		.loc 1 1139 18 is_stmt 0 view .LVU748
 2716 0038 0023     		movs	r3, #0
 2717              	.LVL252:
 2718              	.L149:
 2719              		.loc 1 1139 18 view .LVU749
 2720              	.LBE4:
1128:FLASH/spif.c  ****     {
 2721              		.loc 1 1128 31 is_stmt 1 view .LVU750
 2722 003a 0EB3     		cbz	r6, .L152
1128:FLASH/spif.c  ****     {
 2723              		.loc 1 1128 62 is_stmt 0 discriminator 1 view .LVU751
 2724 003c 08F10102 		add	r2, r8, #1
1128:FLASH/spif.c  ****     {
 2725              		.loc 1 1128 31 discriminator 1 view .LVU752
 2726 0040 B5EB021F 		cmp	r5, r2, lsl #4
 2727 0044 10D2     		bcs	.L154
 2728              	.LBB5:
1130:FLASH/spif.c  ****       if (SPIF_WriteFn(Handle, pageNumber, Data + bytesWritten, bytesToWrite, pageOffset) == false)
 2729              		.loc 1 1130 7 is_stmt 1 view .LVU753
1130:FLASH/spif.c  ****       if (SPIF_WriteFn(Handle, pageNumber, Data + bytesWritten, bytesToWrite, pageOffset) == false)
 2730              		.loc 1 1130 65 is_stmt 0 view .LVU754
 2731 0046 C3F58074 		rsb	r4, r3, #256
1130:FLASH/spif.c  ****       if (SPIF_WriteFn(Handle, pageNumber, Data + bytesWritten, bytesToWrite, pageOffset) == false)
 2732              		.loc 1 1130 16 view .LVU755
 2733 004a B442     		cmp	r4, r6
 2734 004c 28BF     		it	cs
 2735 004e 3446     		movcs	r4, r6
 2736              	.LVL253:
1131:FLASH/spif.c  ****       {
 2737              		.loc 1 1131 7 is_stmt 1 view .LVU756
1131:FLASH/spif.c  ****       {
 2738              		.loc 1 1131 11 is_stmt 0 view .LVU757
 2739 0050 0093     		str	r3, [sp]
 2740 0052 2346     		mov	r3, r4
 2741              	.LVL254:
1131:FLASH/spif.c  ****       {
 2742              		.loc 1 1131 11 view .LVU758
 2743 0054 09EB0A02 		add	r2, r9, r10
 2744 0058 2946     		mov	r1, r5
 2745 005a 3846     		mov	r0, r7
 2746 005c FFF7FEFF 		bl	SPIF_WriteFn
 2747              	.LVL255:
1131:FLASH/spif.c  ****       {
 2748              		.loc 1 1131 10 discriminator 1 view .LVU759
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 73


 2749 0060 8346     		mov	fp, r0
 2750 0062 0028     		cmp	r0, #0
 2751 0064 E5D1     		bne	.L155
 2752 0066 04E0     		b	.L147
 2753              	.LVL256:
 2754              	.L154:
1131:FLASH/spif.c  ****       {
 2755              		.loc 1 1131 10 discriminator 1 view .LVU760
 2756              	.LBE5:
 2757              	.LBE3:
1111:FLASH/spif.c  ****   do
 2758              		.loc 1 1111 8 view .LVU761
 2759 0068 4FF0010B 		mov	fp, #1
 2760              	.LBB6:
 2761 006c 01E0     		b	.L147
 2762              	.LVL257:
 2763              	.L151:
1116:FLASH/spif.c  ****       break;
 2764              		.loc 1 1116 14 view .LVU762
 2765 006e 4FF0000B 		mov	fp, #0
 2766              	.LVL258:
 2767              	.L147:
1116:FLASH/spif.c  ****       break;
 2768              		.loc 1 1116 14 view .LVU763
 2769              	.LBE6:
1113:FLASH/spif.c  ****     if (Offset >= SPIF_SECTOR_SIZE)
 2770              		.loc 1 1113 3 is_stmt 1 view .LVU764
1140:FLASH/spif.c  ****     }
1141:FLASH/spif.c  ****   } while (0);
1142:FLASH/spif.c  ****   SPIF_UnLock(Handle);
 2771              		.loc 1 1142 3 view .LVU765
 2772 0072 3846     		mov	r0, r7
 2773 0074 FFF7FEFF 		bl	SPIF_UnLock
 2774              	.LVL259:
1143:FLASH/spif.c  ****   return retVal;
 2775              		.loc 1 1143 3 view .LVU766
1144:FLASH/spif.c  **** }
 2776              		.loc 1 1144 1 is_stmt 0 view .LVU767
 2777 0078 5846     		mov	r0, fp
 2778 007a 03B0     		add	sp, sp, #12
 2779              	.LCFI75:
 2780              		.cfi_remember_state
 2781              		.cfi_def_cfa_offset 36
 2782              		@ sp needed
 2783 007c BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2784              	.LVL260:
 2785              	.L152:
 2786              	.LCFI76:
 2787              		.cfi_restore_state
1111:FLASH/spif.c  ****   do
 2788              		.loc 1 1111 8 view .LVU768
 2789 0080 4FF0010B 		mov	fp, #1
 2790 0084 F5E7     		b	.L147
 2791              		.cfi_endproc
 2792              	.LFE182:
 2794              		.section	.text.SPIF_WriteBlock,"ax",%progbits
 2795              		.align	1
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 74


 2796              		.global	SPIF_WriteBlock
 2797              		.syntax unified
 2798              		.thumb
 2799              		.thumb_func
 2801              	SPIF_WriteBlock:
 2802              	.LVL261:
 2803              	.LFB183:
1145:FLASH/spif.c  **** 
1146:FLASH/spif.c  **** /**************************************************************************************************
1147:FLASH/spif.c  **** 
1148:FLASH/spif.c  **** /**
1149:FLASH/spif.c  ****   * @brief  Write data array to a Block
1150:FLASH/spif.c  ****   * @note   Write a data array with specified size.
1151:FLASH/spif.c  ****   * @note   The Block should be erased before write
1152:FLASH/spif.c  ****   *
1153:FLASH/spif.c  ****   * @param  *Handle: Pointer to SPIF_HandleTypeDef structure
1154:FLASH/spif.c  ****   * @param  SectorNumber: Block Number
1155:FLASH/spif.c  ****   * @param  *Data: Pointer to Data
1156:FLASH/spif.c  ****   * @param  Size: The length of data should be written. (in byte)
1157:FLASH/spif.c  ****   * @param  Offset: The start point for writing data. (in byte)
1158:FLASH/spif.c  ****   *
1159:FLASH/spif.c  ****   * @retval bool: true or false
1160:FLASH/spif.c  ****   */
1161:FLASH/spif.c  **** bool SPIF_WriteBlock(SPIF_HandleTypeDef *Handle, uint32_t BlockNumber, uint8_t *Data, uint32_t Size
1162:FLASH/spif.c  **** {
 2804              		.loc 1 1162 1 is_stmt 1 view -0
 2805              		.cfi_startproc
 2806              		@ args = 4, pretend = 0, frame = 0
 2807              		@ frame_needed = 0, uses_anonymous_args = 0
 2808              		.loc 1 1162 1 is_stmt 0 view .LVU770
 2809 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2810              	.LCFI77:
 2811              		.cfi_def_cfa_offset 36
 2812              		.cfi_offset 4, -36
 2813              		.cfi_offset 5, -32
 2814              		.cfi_offset 6, -28
 2815              		.cfi_offset 7, -24
 2816              		.cfi_offset 8, -20
 2817              		.cfi_offset 9, -16
 2818              		.cfi_offset 10, -12
 2819              		.cfi_offset 11, -8
 2820              		.cfi_offset 14, -4
 2821 0004 83B0     		sub	sp, sp, #12
 2822              	.LCFI78:
 2823              		.cfi_def_cfa_offset 48
 2824 0006 0746     		mov	r7, r0
 2825 0008 8846     		mov	r8, r1
 2826 000a 9146     		mov	r9, r2
 2827 000c 1D46     		mov	r5, r3
 2828 000e 0C9C     		ldr	r4, [sp, #48]
1163:FLASH/spif.c  ****   SPIF_Lock(Handle);
 2829              		.loc 1 1163 3 is_stmt 1 view .LVU771
 2830 0010 FFF7FEFF 		bl	SPIF_Lock
 2831              	.LVL262:
1164:FLASH/spif.c  ****   bool retVal = true;
 2832              		.loc 1 1164 3 view .LVU772
1165:FLASH/spif.c  ****   do
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 75


 2833              		.loc 1 1165 3 view .LVU773
 2834              	.LBB7:
1166:FLASH/spif.c  ****   {
1167:FLASH/spif.c  ****     if (Offset >= SPIF_BLOCK_SIZE)
 2835              		.loc 1 1167 5 view .LVU774
 2836              		.loc 1 1167 8 is_stmt 0 view .LVU775
 2837 0014 B4F5803F 		cmp	r4, #65536
 2838 0018 29D2     		bcs	.L161
1168:FLASH/spif.c  ****     {
1169:FLASH/spif.c  ****       retVal = false;
1170:FLASH/spif.c  ****       break;
1171:FLASH/spif.c  ****     }
1172:FLASH/spif.c  ****     if (Size > (SPIF_BLOCK_SIZE - Offset))
 2839              		.loc 1 1172 5 is_stmt 1 view .LVU776
 2840              		.loc 1 1172 33 is_stmt 0 view .LVU777
 2841 001a C4F58036 		rsb	r6, r4, #65536
 2842              		.loc 1 1172 8 view .LVU778
 2843 001e AE42     		cmp	r6, r5
 2844 0020 00D3     		bcc	.L158
 2845 0022 2E46     		mov	r6, r5
 2846              	.L158:
 2847              	.LVL263:
1173:FLASH/spif.c  ****     {
1174:FLASH/spif.c  ****       Size = SPIF_BLOCK_SIZE - Offset;
1175:FLASH/spif.c  ****     }
1176:FLASH/spif.c  ****     uint32_t bytesWritten = 0;
 2848              		.loc 1 1176 5 is_stmt 1 view .LVU779
1177:FLASH/spif.c  ****     uint32_t pageNumber = BlockNumber * (SPIF_BLOCK_SIZE / SPIF_PAGE_SIZE);
 2849              		.loc 1 1177 5 view .LVU780
1178:FLASH/spif.c  ****     pageNumber += Offset / SPIF_PAGE_SIZE;
 2850              		.loc 1 1178 5 view .LVU781
 2851              		.loc 1 1178 26 is_stmt 0 view .LVU782
 2852 0024 250A     		lsrs	r5, r4, #8
 2853              		.loc 1 1178 16 view .LVU783
 2854 0026 05EB0825 		add	r5, r5, r8, lsl #8
 2855              	.LVL264:
1179:FLASH/spif.c  ****     uint32_t remainingBytes = Size;
 2856              		.loc 1 1179 5 is_stmt 1 view .LVU784
1180:FLASH/spif.c  ****     uint32_t pageOffset = Offset % SPIF_PAGE_SIZE;
 2857              		.loc 1 1180 5 view .LVU785
 2858              		.loc 1 1180 14 is_stmt 0 view .LVU786
 2859 002a E3B2     		uxtb	r3, r4
 2860              	.LVL265:
1181:FLASH/spif.c  ****     while (remainingBytes > 0 && pageNumber < ((BlockNumber + 1) * (SPIF_BLOCK_SIZE / SPIF_PAGE_SIZ
 2861              		.loc 1 1181 5 is_stmt 1 view .LVU787
1176:FLASH/spif.c  ****     uint32_t pageNumber = BlockNumber * (SPIF_BLOCK_SIZE / SPIF_PAGE_SIZE);
 2862              		.loc 1 1176 14 is_stmt 0 view .LVU788
 2863 002c 4FF0000A 		mov	r10, #0
 2864              		.loc 1 1181 11 view .LVU789
 2865 0030 03E0     		b	.L159
 2866              	.LVL266:
 2867              	.L165:
 2868              	.LBB8:
1182:FLASH/spif.c  ****     {
1183:FLASH/spif.c  ****       uint32_t bytesToWrite = (remainingBytes > (SPIF_PAGE_SIZE - pageOffset)) ? (SPIF_PAGE_SIZE - 
1184:FLASH/spif.c  ****       if (SPIF_WriteFn(Handle, pageNumber, Data + bytesWritten, bytesToWrite, pageOffset) == false)
1185:FLASH/spif.c  ****       {
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 76


1186:FLASH/spif.c  ****         retVal = false;
1187:FLASH/spif.c  ****         break;
1188:FLASH/spif.c  ****       }
1189:FLASH/spif.c  ****       bytesWritten += bytesToWrite;
 2869              		.loc 1 1189 7 is_stmt 1 view .LVU790
 2870              		.loc 1 1189 20 is_stmt 0 view .LVU791
 2871 0032 A244     		add	r10, r10, r4
 2872              	.LVL267:
1190:FLASH/spif.c  ****       remainingBytes -= bytesToWrite;
 2873              		.loc 1 1190 7 is_stmt 1 view .LVU792
 2874              		.loc 1 1190 22 is_stmt 0 view .LVU793
 2875 0034 361B     		subs	r6, r6, r4
 2876              	.LVL268:
1191:FLASH/spif.c  ****       pageNumber++;
 2877              		.loc 1 1191 7 is_stmt 1 view .LVU794
 2878              		.loc 1 1191 17 is_stmt 0 view .LVU795
 2879 0036 0135     		adds	r5, r5, #1
 2880              	.LVL269:
1192:FLASH/spif.c  ****       pageOffset = 0;
 2881              		.loc 1 1192 7 is_stmt 1 view .LVU796
 2882              		.loc 1 1192 18 is_stmt 0 view .LVU797
 2883 0038 0023     		movs	r3, #0
 2884              	.LVL270:
 2885              	.L159:
 2886              		.loc 1 1192 18 view .LVU798
 2887              	.LBE8:
1181:FLASH/spif.c  ****     {
 2888              		.loc 1 1181 31 is_stmt 1 view .LVU799
 2889 003a 0EB3     		cbz	r6, .L162
1181:FLASH/spif.c  ****     {
 2890              		.loc 1 1181 61 is_stmt 0 discriminator 1 view .LVU800
 2891 003c 08F10102 		add	r2, r8, #1
1181:FLASH/spif.c  ****     {
 2892              		.loc 1 1181 31 discriminator 1 view .LVU801
 2893 0040 B5EB022F 		cmp	r5, r2, lsl #8
 2894 0044 10D2     		bcs	.L164
 2895              	.LBB9:
1183:FLASH/spif.c  ****       if (SPIF_WriteFn(Handle, pageNumber, Data + bytesWritten, bytesToWrite, pageOffset) == false)
 2896              		.loc 1 1183 7 is_stmt 1 view .LVU802
1183:FLASH/spif.c  ****       if (SPIF_WriteFn(Handle, pageNumber, Data + bytesWritten, bytesToWrite, pageOffset) == false)
 2897              		.loc 1 1183 65 is_stmt 0 view .LVU803
 2898 0046 C3F58074 		rsb	r4, r3, #256
1183:FLASH/spif.c  ****       if (SPIF_WriteFn(Handle, pageNumber, Data + bytesWritten, bytesToWrite, pageOffset) == false)
 2899              		.loc 1 1183 16 view .LVU804
 2900 004a B442     		cmp	r4, r6
 2901 004c 28BF     		it	cs
 2902 004e 3446     		movcs	r4, r6
 2903              	.LVL271:
1184:FLASH/spif.c  ****       {
 2904              		.loc 1 1184 7 is_stmt 1 view .LVU805
1184:FLASH/spif.c  ****       {
 2905              		.loc 1 1184 11 is_stmt 0 view .LVU806
 2906 0050 0093     		str	r3, [sp]
 2907 0052 2346     		mov	r3, r4
 2908              	.LVL272:
1184:FLASH/spif.c  ****       {
 2909              		.loc 1 1184 11 view .LVU807
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 77


 2910 0054 09EB0A02 		add	r2, r9, r10
 2911 0058 2946     		mov	r1, r5
 2912 005a 3846     		mov	r0, r7
 2913 005c FFF7FEFF 		bl	SPIF_WriteFn
 2914              	.LVL273:
1184:FLASH/spif.c  ****       {
 2915              		.loc 1 1184 10 discriminator 1 view .LVU808
 2916 0060 8346     		mov	fp, r0
 2917 0062 0028     		cmp	r0, #0
 2918 0064 E5D1     		bne	.L165
 2919 0066 04E0     		b	.L157
 2920              	.LVL274:
 2921              	.L164:
1184:FLASH/spif.c  ****       {
 2922              		.loc 1 1184 10 discriminator 1 view .LVU809
 2923              	.LBE9:
 2924              	.LBE7:
1164:FLASH/spif.c  ****   do
 2925              		.loc 1 1164 8 view .LVU810
 2926 0068 4FF0010B 		mov	fp, #1
 2927              	.LBB10:
 2928 006c 01E0     		b	.L157
 2929              	.LVL275:
 2930              	.L161:
1169:FLASH/spif.c  ****       break;
 2931              		.loc 1 1169 14 view .LVU811
 2932 006e 4FF0000B 		mov	fp, #0
 2933              	.LVL276:
 2934              	.L157:
1169:FLASH/spif.c  ****       break;
 2935              		.loc 1 1169 14 view .LVU812
 2936              	.LBE10:
1166:FLASH/spif.c  ****     if (Offset >= SPIF_BLOCK_SIZE)
 2937              		.loc 1 1166 3 is_stmt 1 view .LVU813
1193:FLASH/spif.c  ****     }
1194:FLASH/spif.c  **** 
1195:FLASH/spif.c  ****   } while (0);
1196:FLASH/spif.c  **** 
1197:FLASH/spif.c  ****   SPIF_UnLock(Handle);
 2938              		.loc 1 1197 3 view .LVU814
 2939 0072 3846     		mov	r0, r7
 2940 0074 FFF7FEFF 		bl	SPIF_UnLock
 2941              	.LVL277:
1198:FLASH/spif.c  ****   return retVal;
 2942              		.loc 1 1198 3 view .LVU815
1199:FLASH/spif.c  **** }
 2943              		.loc 1 1199 1 is_stmt 0 view .LVU816
 2944 0078 5846     		mov	r0, fp
 2945 007a 03B0     		add	sp, sp, #12
 2946              	.LCFI79:
 2947              		.cfi_remember_state
 2948              		.cfi_def_cfa_offset 36
 2949              		@ sp needed
 2950 007c BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2951              	.LVL278:
 2952              	.L162:
 2953              	.LCFI80:
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 78


 2954              		.cfi_restore_state
1164:FLASH/spif.c  ****   do
 2955              		.loc 1 1164 8 view .LVU817
 2956 0080 4FF0010B 		mov	fp, #1
 2957 0084 F5E7     		b	.L157
 2958              		.cfi_endproc
 2959              	.LFE183:
 2961              		.section	.text.SPIF_ReadAddress,"ax",%progbits
 2962              		.align	1
 2963              		.global	SPIF_ReadAddress
 2964              		.syntax unified
 2965              		.thumb
 2966              		.thumb_func
 2968              	SPIF_ReadAddress:
 2969              	.LVL279:
 2970              	.LFB184:
1200:FLASH/spif.c  **** 
1201:FLASH/spif.c  **** /**************************************************************************************************
1202:FLASH/spif.c  **** 
1203:FLASH/spif.c  **** /**
1204:FLASH/spif.c  ****   * @brief  Read From Address
1205:FLASH/spif.c  ****   * @note   Read data from memory and copy to array
1206:FLASH/spif.c  ****   *
1207:FLASH/spif.c  ****   * @param  *Handle: Pointer to SPIF_HandleTypeDef structure
1208:FLASH/spif.c  ****   * @param  Address: Start Address
1209:FLASH/spif.c  ****   * @param  *Data: Pointer to Data (output)
1210:FLASH/spif.c  ****   * @param  Size: The length of data should be written. (in byte)
1211:FLASH/spif.c  ****   *
1212:FLASH/spif.c  ****   * @retval bool: true or false
1213:FLASH/spif.c  ****   */
1214:FLASH/spif.c  **** bool SPIF_ReadAddress(SPIF_HandleTypeDef *Handle, uint32_t Address, uint8_t *Data, uint32_t Size)
1215:FLASH/spif.c  **** {
 2971              		.loc 1 1215 1 is_stmt 1 view -0
 2972              		.cfi_startproc
 2973              		@ args = 0, pretend = 0, frame = 0
 2974              		@ frame_needed = 0, uses_anonymous_args = 0
 2975              		.loc 1 1215 1 is_stmt 0 view .LVU819
 2976 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2977              	.LCFI81:
 2978              		.cfi_def_cfa_offset 24
 2979              		.cfi_offset 3, -24
 2980              		.cfi_offset 4, -20
 2981              		.cfi_offset 5, -16
 2982              		.cfi_offset 6, -12
 2983              		.cfi_offset 7, -8
 2984              		.cfi_offset 14, -4
 2985 0002 0446     		mov	r4, r0
 2986 0004 0D46     		mov	r5, r1
 2987 0006 1646     		mov	r6, r2
 2988 0008 1F46     		mov	r7, r3
1216:FLASH/spif.c  ****   SPIF_Lock(Handle);
 2989              		.loc 1 1216 3 is_stmt 1 view .LVU820
 2990 000a FFF7FEFF 		bl	SPIF_Lock
 2991              	.LVL280:
1217:FLASH/spif.c  ****   bool retVal = false;
 2992              		.loc 1 1217 3 view .LVU821
1218:FLASH/spif.c  ****   retVal = SPIF_ReadFn(Handle, Address, Data, Size);
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 79


 2993              		.loc 1 1218 3 view .LVU822
 2994              		.loc 1 1218 12 is_stmt 0 view .LVU823
 2995 000e 3B46     		mov	r3, r7
 2996 0010 3246     		mov	r2, r6
 2997 0012 2946     		mov	r1, r5
 2998 0014 2046     		mov	r0, r4
 2999 0016 FFF7FEFF 		bl	SPIF_ReadFn
 3000              	.LVL281:
 3001 001a 0546     		mov	r5, r0
 3002              	.LVL282:
1219:FLASH/spif.c  ****   SPIF_UnLock(Handle);
 3003              		.loc 1 1219 3 is_stmt 1 view .LVU824
 3004 001c 2046     		mov	r0, r4
 3005 001e FFF7FEFF 		bl	SPIF_UnLock
 3006              	.LVL283:
1220:FLASH/spif.c  ****   return retVal;
 3007              		.loc 1 1220 3 view .LVU825
1221:FLASH/spif.c  **** }
 3008              		.loc 1 1221 1 is_stmt 0 view .LVU826
 3009 0022 2846     		mov	r0, r5
 3010 0024 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3011              		.loc 1 1221 1 view .LVU827
 3012              		.cfi_endproc
 3013              	.LFE184:
 3015              		.section	.text.SPIF_ReadPage,"ax",%progbits
 3016              		.align	1
 3017              		.global	SPIF_ReadPage
 3018              		.syntax unified
 3019              		.thumb
 3020              		.thumb_func
 3022              	SPIF_ReadPage:
 3023              	.LVL284:
 3024              	.LFB185:
1222:FLASH/spif.c  **** 
1223:FLASH/spif.c  **** /**************************************************************************************************
1224:FLASH/spif.c  **** 
1225:FLASH/spif.c  **** /**
1226:FLASH/spif.c  ****   * @brief  Read a Page
1227:FLASH/spif.c  ****   * @note   Read a page and copy to array
1228:FLASH/spif.c  ****   *
1229:FLASH/spif.c  ****   * @param  *Handle: Pointer to SPIF_HandleTypeDef structure
1230:FLASH/spif.c  ****   * @param  PageNumber: Page Number
1231:FLASH/spif.c  ****   * @param  *Data: Pointer to Data (output)
1232:FLASH/spif.c  ****   * @param  Size: The length of data should be read. (in byte)
1233:FLASH/spif.c  ****   * @param  Offset: The start point for Reading data. (in byte)
1234:FLASH/spif.c  ****   *
1235:FLASH/spif.c  ****   * @retval bool: true or false
1236:FLASH/spif.c  ****   */
1237:FLASH/spif.c  **** bool SPIF_ReadPage(SPIF_HandleTypeDef *Handle, uint32_t PageNumber, uint8_t *Data, uint32_t Size, u
1238:FLASH/spif.c  **** {
 3025              		.loc 1 1238 1 is_stmt 1 view -0
 3026              		.cfi_startproc
 3027              		@ args = 4, pretend = 0, frame = 0
 3028              		@ frame_needed = 0, uses_anonymous_args = 0
 3029              		.loc 1 1238 1 is_stmt 0 view .LVU829
 3030 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 3031              	.LCFI82:
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 80


 3032              		.cfi_def_cfa_offset 24
 3033              		.cfi_offset 4, -24
 3034              		.cfi_offset 5, -20
 3035              		.cfi_offset 6, -16
 3036              		.cfi_offset 7, -12
 3037              		.cfi_offset 8, -8
 3038              		.cfi_offset 14, -4
 3039 0004 0646     		mov	r6, r0
 3040 0006 0D46     		mov	r5, r1
 3041 0008 9046     		mov	r8, r2
 3042 000a 1F46     		mov	r7, r3
 3043 000c 069C     		ldr	r4, [sp, #24]
1239:FLASH/spif.c  ****   SPIF_Lock(Handle);
 3044              		.loc 1 1239 3 is_stmt 1 view .LVU830
 3045 000e FFF7FEFF 		bl	SPIF_Lock
 3046              	.LVL285:
1240:FLASH/spif.c  ****   bool retVal = false;
 3047              		.loc 1 1240 3 view .LVU831
1241:FLASH/spif.c  ****   uint32_t address = SPIF_PageToAddress(PageNumber) + Offset;
 3048              		.loc 1 1241 3 view .LVU832
 3049              		.loc 1 1241 12 is_stmt 0 view .LVU833
 3050 0012 04EB0521 		add	r1, r4, r5, lsl #8
 3051              	.LVL286:
1242:FLASH/spif.c  ****   uint32_t maximum = SPIF_PAGE_SIZE - Offset;
 3052              		.loc 1 1242 3 is_stmt 1 view .LVU834
 3053              		.loc 1 1242 12 is_stmt 0 view .LVU835
 3054 0016 C4F58073 		rsb	r3, r4, #256
 3055              	.LVL287:
1243:FLASH/spif.c  ****   if (Size > maximum)
 3056              		.loc 1 1243 3 is_stmt 1 view .LVU836
 3057              		.loc 1 1243 6 is_stmt 0 view .LVU837
 3058 001a BB42     		cmp	r3, r7
 3059 001c 00D3     		bcc	.L169
 3060 001e 3B46     		mov	r3, r7
 3061              	.LVL288:
 3062              	.L169:
1244:FLASH/spif.c  ****   {
1245:FLASH/spif.c  ****     Size = maximum;
1246:FLASH/spif.c  ****   }
1247:FLASH/spif.c  ****   retVal = SPIF_ReadFn(Handle, address, Data, Size);
 3063              		.loc 1 1247 3 is_stmt 1 view .LVU838
 3064              		.loc 1 1247 12 is_stmt 0 view .LVU839
 3065 0020 4246     		mov	r2, r8
 3066 0022 3046     		mov	r0, r6
 3067 0024 FFF7FEFF 		bl	SPIF_ReadFn
 3068              	.LVL289:
 3069              		.loc 1 1247 12 view .LVU840
 3070 0028 0446     		mov	r4, r0
 3071              	.LVL290:
1248:FLASH/spif.c  ****   SPIF_UnLock(Handle);
 3072              		.loc 1 1248 3 is_stmt 1 view .LVU841
 3073 002a 3046     		mov	r0, r6
 3074 002c FFF7FEFF 		bl	SPIF_UnLock
 3075              	.LVL291:
1249:FLASH/spif.c  ****   return retVal;
 3076              		.loc 1 1249 3 view .LVU842
1250:FLASH/spif.c  **** }
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 81


 3077              		.loc 1 1250 1 is_stmt 0 view .LVU843
 3078 0030 2046     		mov	r0, r4
 3079 0032 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3080              		.loc 1 1250 1 view .LVU844
 3081              		.cfi_endproc
 3082              	.LFE185:
 3084              		.section	.text.SPIF_ReadSector,"ax",%progbits
 3085              		.align	1
 3086              		.global	SPIF_ReadSector
 3087              		.syntax unified
 3088              		.thumb
 3089              		.thumb_func
 3091              	SPIF_ReadSector:
 3092              	.LVL292:
 3093              	.LFB186:
1251:FLASH/spif.c  **** 
1252:FLASH/spif.c  **** /**************************************************************************************************
1253:FLASH/spif.c  **** 
1254:FLASH/spif.c  **** /**
1255:FLASH/spif.c  ****   * @brief  Read a Sector
1256:FLASH/spif.c  ****   * @note   Read a Sector and copy to array
1257:FLASH/spif.c  ****   *
1258:FLASH/spif.c  ****   * @param  *Handle: Pointer to SPIF_HandleTypeDef structure
1259:FLASH/spif.c  ****   * @param  SectorNumber: Sector Number
1260:FLASH/spif.c  ****   * @param  *Data: Pointer to Data (output)
1261:FLASH/spif.c  ****   * @param  Size: The length of data should be read. (in byte)
1262:FLASH/spif.c  ****   * @param  Offset: The start point for Reading data. (in byte)
1263:FLASH/spif.c  ****   *
1264:FLASH/spif.c  ****   * @retval bool: true or false
1265:FLASH/spif.c  ****   */
1266:FLASH/spif.c  **** bool SPIF_ReadSector(SPIF_HandleTypeDef *Handle, uint32_t SectorNumber, uint8_t *Data, uint32_t Siz
1267:FLASH/spif.c  **** {
 3094              		.loc 1 1267 1 is_stmt 1 view -0
 3095              		.cfi_startproc
 3096              		@ args = 4, pretend = 0, frame = 0
 3097              		@ frame_needed = 0, uses_anonymous_args = 0
 3098              		.loc 1 1267 1 is_stmt 0 view .LVU846
 3099 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 3100              	.LCFI83:
 3101              		.cfi_def_cfa_offset 24
 3102              		.cfi_offset 4, -24
 3103              		.cfi_offset 5, -20
 3104              		.cfi_offset 6, -16
 3105              		.cfi_offset 7, -12
 3106              		.cfi_offset 8, -8
 3107              		.cfi_offset 14, -4
 3108 0004 0646     		mov	r6, r0
 3109 0006 0D46     		mov	r5, r1
 3110 0008 9046     		mov	r8, r2
 3111 000a 1F46     		mov	r7, r3
 3112 000c 069C     		ldr	r4, [sp, #24]
1268:FLASH/spif.c  ****   SPIF_Lock(Handle);
 3113              		.loc 1 1268 3 is_stmt 1 view .LVU847
 3114 000e FFF7FEFF 		bl	SPIF_Lock
 3115              	.LVL293:
1269:FLASH/spif.c  ****   bool retVal = false;
 3116              		.loc 1 1269 3 view .LVU848
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 82


1270:FLASH/spif.c  ****   uint32_t address = SPIF_SectorToAddress(SectorNumber) + Offset;
 3117              		.loc 1 1270 3 view .LVU849
 3118              		.loc 1 1270 12 is_stmt 0 view .LVU850
 3119 0012 04EB0531 		add	r1, r4, r5, lsl #12
 3120              	.LVL294:
1271:FLASH/spif.c  ****   uint32_t maximum = SPIF_SECTOR_SIZE - Offset;
 3121              		.loc 1 1271 3 is_stmt 1 view .LVU851
 3122              		.loc 1 1271 12 is_stmt 0 view .LVU852
 3123 0016 C4F58053 		rsb	r3, r4, #4096
 3124              	.LVL295:
1272:FLASH/spif.c  ****   if (Size > maximum)
 3125              		.loc 1 1272 3 is_stmt 1 view .LVU853
 3126              		.loc 1 1272 6 is_stmt 0 view .LVU854
 3127 001a BB42     		cmp	r3, r7
 3128 001c 00D3     		bcc	.L172
 3129 001e 3B46     		mov	r3, r7
 3130              	.LVL296:
 3131              	.L172:
1273:FLASH/spif.c  ****   {
1274:FLASH/spif.c  ****     Size = maximum;
1275:FLASH/spif.c  ****   }
1276:FLASH/spif.c  ****   retVal = SPIF_ReadFn(Handle, address, Data, Size);
 3132              		.loc 1 1276 3 is_stmt 1 view .LVU855
 3133              		.loc 1 1276 12 is_stmt 0 view .LVU856
 3134 0020 4246     		mov	r2, r8
 3135 0022 3046     		mov	r0, r6
 3136 0024 FFF7FEFF 		bl	SPIF_ReadFn
 3137              	.LVL297:
 3138              		.loc 1 1276 12 view .LVU857
 3139 0028 0446     		mov	r4, r0
 3140              	.LVL298:
1277:FLASH/spif.c  ****   SPIF_UnLock(Handle);
 3141              		.loc 1 1277 3 is_stmt 1 view .LVU858
 3142 002a 3046     		mov	r0, r6
 3143 002c FFF7FEFF 		bl	SPIF_UnLock
 3144              	.LVL299:
1278:FLASH/spif.c  ****   return retVal;
 3145              		.loc 1 1278 3 view .LVU859
1279:FLASH/spif.c  **** }
 3146              		.loc 1 1279 1 is_stmt 0 view .LVU860
 3147 0030 2046     		mov	r0, r4
 3148 0032 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3149              		.loc 1 1279 1 view .LVU861
 3150              		.cfi_endproc
 3151              	.LFE186:
 3153              		.section	.text.SPIF_ReadBlock,"ax",%progbits
 3154              		.align	1
 3155              		.global	SPIF_ReadBlock
 3156              		.syntax unified
 3157              		.thumb
 3158              		.thumb_func
 3160              	SPIF_ReadBlock:
 3161              	.LVL300:
 3162              	.LFB187:
1280:FLASH/spif.c  **** 
1281:FLASH/spif.c  **** /**************************************************************************************************
1282:FLASH/spif.c  **** 
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 83


1283:FLASH/spif.c  **** /**
1284:FLASH/spif.c  ****   * @brief  Read a Block
1285:FLASH/spif.c  ****   * @note   Read a Block and copy to array
1286:FLASH/spif.c  ****   *
1287:FLASH/spif.c  ****   * @param  *Handle: Pointer to SPIF_HandleTypeDef structure
1288:FLASH/spif.c  ****   * @param  BlockNumber: Block Number
1289:FLASH/spif.c  ****   * @param  *Data: Pointer to Data (output)
1290:FLASH/spif.c  ****   * @param  Size: The length of data should be read. (in byte)
1291:FLASH/spif.c  ****   * @param  Offset: The start point for Reading data. (in byte)
1292:FLASH/spif.c  ****   *
1293:FLASH/spif.c  ****   * @retval bool: true or false
1294:FLASH/spif.c  ****   */
1295:FLASH/spif.c  **** bool SPIF_ReadBlock(SPIF_HandleTypeDef *Handle, uint32_t BlockNumber, uint8_t *Data, uint32_t Size,
1296:FLASH/spif.c  **** {
 3163              		.loc 1 1296 1 is_stmt 1 view -0
 3164              		.cfi_startproc
 3165              		@ args = 4, pretend = 0, frame = 0
 3166              		@ frame_needed = 0, uses_anonymous_args = 0
 3167              		.loc 1 1296 1 is_stmt 0 view .LVU863
 3168 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 3169              	.LCFI84:
 3170              		.cfi_def_cfa_offset 24
 3171              		.cfi_offset 4, -24
 3172              		.cfi_offset 5, -20
 3173              		.cfi_offset 6, -16
 3174              		.cfi_offset 7, -12
 3175              		.cfi_offset 8, -8
 3176              		.cfi_offset 14, -4
 3177 0004 0646     		mov	r6, r0
 3178 0006 0D46     		mov	r5, r1
 3179 0008 9046     		mov	r8, r2
 3180 000a 1F46     		mov	r7, r3
 3181 000c 069C     		ldr	r4, [sp, #24]
1297:FLASH/spif.c  ****   SPIF_Lock(Handle);
 3182              		.loc 1 1297 3 is_stmt 1 view .LVU864
 3183 000e FFF7FEFF 		bl	SPIF_Lock
 3184              	.LVL301:
1298:FLASH/spif.c  ****   bool retVal = false;
 3185              		.loc 1 1298 3 view .LVU865
1299:FLASH/spif.c  ****   uint32_t address = SPIF_BlockToAddress(BlockNumber) + Offset;
 3186              		.loc 1 1299 3 view .LVU866
 3187              		.loc 1 1299 12 is_stmt 0 view .LVU867
 3188 0012 04EB0541 		add	r1, r4, r5, lsl #16
 3189              	.LVL302:
1300:FLASH/spif.c  ****   uint32_t maximum = SPIF_BLOCK_SIZE - Offset;
 3190              		.loc 1 1300 3 is_stmt 1 view .LVU868
 3191              		.loc 1 1300 12 is_stmt 0 view .LVU869
 3192 0016 C4F58033 		rsb	r3, r4, #65536
 3193              	.LVL303:
1301:FLASH/spif.c  ****   if (Size > maximum)
 3194              		.loc 1 1301 3 is_stmt 1 view .LVU870
 3195              		.loc 1 1301 6 is_stmt 0 view .LVU871
 3196 001a BB42     		cmp	r3, r7
 3197 001c 00D3     		bcc	.L175
 3198 001e 3B46     		mov	r3, r7
 3199              	.LVL304:
 3200              	.L175:
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 84


1302:FLASH/spif.c  ****   {
1303:FLASH/spif.c  ****     Size = maximum;
1304:FLASH/spif.c  ****   }
1305:FLASH/spif.c  ****   retVal = SPIF_ReadFn(Handle, address, Data, Size);
 3201              		.loc 1 1305 3 is_stmt 1 view .LVU872
 3202              		.loc 1 1305 12 is_stmt 0 view .LVU873
 3203 0020 4246     		mov	r2, r8
 3204 0022 3046     		mov	r0, r6
 3205 0024 FFF7FEFF 		bl	SPIF_ReadFn
 3206              	.LVL305:
 3207              		.loc 1 1305 12 view .LVU874
 3208 0028 0446     		mov	r4, r0
 3209              	.LVL306:
1306:FLASH/spif.c  ****   SPIF_UnLock(Handle);
 3210              		.loc 1 1306 3 is_stmt 1 view .LVU875
 3211 002a 3046     		mov	r0, r6
 3212 002c FFF7FEFF 		bl	SPIF_UnLock
 3213              	.LVL307:
1307:FLASH/spif.c  ****   return retVal;
 3214              		.loc 1 1307 3 view .LVU876
1308:FLASH/spif.c  **** }
 3215              		.loc 1 1308 1 is_stmt 0 view .LVU877
 3216 0030 2046     		mov	r0, r4
 3217 0032 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3218              		.loc 1 1308 1 view .LVU878
 3219              		.cfi_endproc
 3220              	.LFE187:
 3222              		.section	.rodata.SPIF_Test.str1.4,"aMS",%progbits,1
 3223              		.align	2
 3224              	.LC0:
 3225 0000 0D0A3D3D 		.ascii	"\015\012========== SPI Flash Test Start ==========\015"
 3225      3D3D3D3D 
 3225      3D3D3D3D 
 3225      20535049 
 3225      20466C61 
 3226 002d 00       		.ascii	"\000"
 3227 002e 0000     		.align	2
 3228              	.LC1:
 3229 0030 0D0A5B31 		.ascii	"\015\012[1] Flash Information:\015\000"
 3229      5D20466C 
 3229      61736820 
 3229      496E666F 
 3229      726D6174 
 3230 004a 0000     		.align	2
 3231              	.LC2:
 3232 004c 20202020 		.ascii	"    Manufacturer: 0x%02X\015\012\000"
 3232      4D616E75 
 3232      66616374 
 3232      75726572 
 3232      3A203078 
 3233 0067 00       		.align	2
 3234              	.LC3:
 3235 0068 20202020 		.ascii	"    Capacity: 0x%02X\015\012\000"
 3235      43617061 
 3235      63697479 
 3235      3A203078 
 3235      25303258 
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 85


 3236 007f 00       		.align	2
 3237              	.LC4:
 3238 0080 20202020 		.ascii	"    Page Count: %lu\015\012\000"
 3238      50616765 
 3238      20436F75 
 3238      6E743A20 
 3238      256C750D 
 3239 0096 0000     		.align	2
 3240              	.LC5:
 3241 0098 20202020 		.ascii	"    Sector Count: %lu\015\012\000"
 3241      53656374 
 3241      6F722043 
 3241      6F756E74 
 3241      3A20256C 
 3242              		.align	2
 3243              	.LC6:
 3244 00b0 20202020 		.ascii	"    Block Count: %lu\015\012\000"
 3244      426C6F63 
 3244      6B20436F 
 3244      756E743A 
 3244      20256C75 
 3245 00c7 00       		.align	2
 3246              	.LC7:
 3247 00c8 0D0A5B32 		.ascii	"\015\012[2] Preparing test data...\015\000"
 3247      5D205072 
 3247      65706172 
 3247      696E6720 
 3247      74657374 
 3248 00e6 0000     		.align	2
 3249              	.LC8:
 3250 00e8 20202020 		.ascii	"    Test data prepared (0x00-0xFF)\015\000"
 3250      54657374 
 3250      20646174 
 3250      61207072 
 3250      65706172 
 3251              		.align	2
 3252              	.LC9:
 3253 010c 0D0A5B33 		.ascii	"\015\012[3] Erasing sector %lu...\015\012\000"
 3253      5D204572 
 3253      6173696E 
 3253      67207365 
 3253      63746F72 
 3254 012a 0000     		.align	2
 3255              	.LC10:
 3256 012c 20202020 		.ascii	"    Sector erase successful!\015\000"
 3256      53656374 
 3256      6F722065 
 3256      72617365 
 3256      20737563 
 3257 014a 0000     		.align	2
 3258              	.LC11:
 3259 014c 0D0A5B34 		.ascii	"\015\012[4] Writing data to address 0x%04lX...\015\012"
 3259      5D205772 
 3259      6974696E 
 3259      67206461 
 3259      74612074 
 3260 0176 00       		.ascii	"\000"
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 86


 3261 0177 00       		.align	2
 3262              	.LC12:
 3263 0178 20202020 		.ascii	"    Sector erase failed!\015\000"
 3263      53656374 
 3263      6F722065 
 3263      72617365 
 3263      20666169 
 3264 0192 0000     		.align	2
 3265              	.LC13:
 3266 0194 20202020 		.ascii	"    Data write successful! (256 bytes)\015\000"
 3266      44617461 
 3266      20777269 
 3266      74652073 
 3266      75636365 
 3267              		.align	2
 3268              	.LC14:
 3269 01bc 0D0A5B35 		.ascii	"\015\012[5] Reading data from address 0x%04lX...\015"
 3269      5D205265 
 3269      6164696E 
 3269      67206461 
 3269      74612066 
 3270 01e7 0A00     		.ascii	"\012\000"
 3271 01e9 000000   		.align	2
 3272              	.LC15:
 3273 01ec 20202020 		.ascii	"    Data write failed!\015\000"
 3273      44617461 
 3273      20777269 
 3273      74652066 
 3273      61696C65 
 3274              		.align	2
 3275              	.LC16:
 3276 0204 20202020 		.ascii	"    Data read successful! (256 bytes)\015\000"
 3276      44617461 
 3276      20726561 
 3276      64207375 
 3276      63636573 
 3277 022b 00       		.align	2
 3278              	.LC17:
 3279 022c 0D0A5B36 		.ascii	"\015\012[6] Verifying data...\015\000"
 3279      5D205665 
 3279      72696679 
 3279      696E6720 
 3279      64617461 
 3280 0245 000000   		.align	2
 3281              	.LC18:
 3282 0248 20202020 		.ascii	"    Data read failed!\015\000"
 3282      44617461 
 3282      20726561 
 3282      64206661 
 3282      696C6564 
 3283 025f 00       		.align	2
 3284              	.LC19:
 3285 0260 20202020 		.ascii	"    Verification failed! Address[%d]: Written=0x%02"
 3285      56657269 
 3285      66696361 
 3285      74696F6E 
 3285      20666169 
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 87


 3286 0293 582C2052 		.ascii	"X, Read=0x%02X\015\012\000"
 3286      6561643D 
 3286      30782530 
 3286      32580D0A 
 3286      00
 3287              		.align	2
 3288              	.LC20:
 3289 02a4 20202020 		.ascii	"    Data verification successful! All data matched!"
 3289      44617461 
 3289      20766572 
 3289      69666963 
 3289      6174696F 
 3290 02d7 0D00     		.ascii	"\015\000"
 3291 02d9 000000   		.align	2
 3292              	.LC21:
 3293 02dc 0D0A5B37 		.ascii	"\015\012[7] Read data sample (first 16 bytes):\015\012"
 3293      5D205265 
 3293      61642064 
 3293      61746120 
 3293      73616D70 
 3294 0306 20202020 		.ascii	"    \000"
 3294      00
 3295 030b 00       		.align	2
 3296              	.LC22:
 3297 030c 30782530 		.ascii	"0x%02X \000"
 3297      32582000 
 3298              		.align	2
 3299              	.LC23:
 3300 0314 0D00     		.ascii	"\015\000"
 3301 0316 0000     		.align	2
 3302              	.LC24:
 3303 0318 0D0A3D3D 		.ascii	"\015\012========== Test Result ==========\015\000"
 3303      3D3D3D3D 
 3303      3D3D3D3D 
 3303      20546573 
 3303      74205265 
 3304 033d 000000   		.align	2
 3305              	.LC25:
 3306 0340 3E3E3E20 		.ascii	">>> Flash test PASSED! <<<\015\000"
 3306      466C6173 
 3306      68207465 
 3306      73742050 
 3306      41535345 
 3307              		.align	2
 3308              	.LC26:
 3309 035c 3E3E3E20 		.ascii	">>> Flash test FAILED! <<<\015\000"
 3309      466C6173 
 3309      68207465 
 3309      73742046 
 3309      41494C45 
 3310              		.align	2
 3311              	.LC27:
 3312 0378 3D3D3D3D 		.ascii	"================================\015\012\015\000"
 3312      3D3D3D3D 
 3312      3D3D3D3D 
 3312      3D3D3D3D 
 3312      3D3D3D3D 
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 88


 3313              		.section	.text.SPIF_Test,"ax",%progbits
 3314              		.align	1
 3315              		.global	SPIF_Test
 3316              		.syntax unified
 3317              		.thumb
 3318              		.thumb_func
 3320              	SPIF_Test:
 3321              	.LVL308:
 3322              	.LFB188:
1309:FLASH/spif.c  **** 
1310:FLASH/spif.c  **** /**************************************************************************************************
1311:FLASH/spif.c  **** 
1312:FLASH/spif.c  **** /**
1313:FLASH/spif.c  ****   * @brief  Complete Flash test function
1314:FLASH/spif.c  ****   * @note   Test erase, write, read and data verification functions
1315:FLASH/spif.c  ****   *
1316:FLASH/spif.c  ****   * @param  *Handle: Pointer to SPIF_HandleTypeDef structure
1317:FLASH/spif.c  ****   *
1318:FLASH/spif.c  ****   * @retval bool: true or false
1319:FLASH/spif.c  ****   */
1320:FLASH/spif.c  **** bool SPIF_Test(SPIF_HandleTypeDef *Handle)
1321:FLASH/spif.c  **** {
 3323              		.loc 1 1321 1 is_stmt 1 view -0
 3324              		.cfi_startproc
 3325              		@ args = 0, pretend = 0, frame = 512
 3326              		@ frame_needed = 0, uses_anonymous_args = 0
 3327              		.loc 1 1321 1 is_stmt 0 view .LVU880
 3328 0000 30B5     		push	{r4, r5, lr}
 3329              	.LCFI85:
 3330              		.cfi_def_cfa_offset 12
 3331              		.cfi_offset 4, -12
 3332              		.cfi_offset 5, -8
 3333              		.cfi_offset 14, -4
 3334 0002 ADF5017D 		sub	sp, sp, #516
 3335              	.LCFI86:
 3336              		.cfi_def_cfa_offset 528
 3337 0006 0446     		mov	r4, r0
1322:FLASH/spif.c  ****   uint8_t write_buffer[256];
 3338              		.loc 1 1322 3 is_stmt 1 view .LVU881
1323:FLASH/spif.c  ****   uint8_t read_buffer[256];
 3339              		.loc 1 1323 3 view .LVU882
1324:FLASH/spif.c  ****   bool test_result = true;
 3340              		.loc 1 1324 3 view .LVU883
 3341              	.LVL309:
1325:FLASH/spif.c  ****   uint32_t test_sector = 0;  // Test sector 0
 3342              		.loc 1 1325 3 view .LVU884
1326:FLASH/spif.c  ****   uint32_t test_address = 0x0000;  // Test address
 3343              		.loc 1 1326 3 view .LVU885
1327:FLASH/spif.c  ****   
1328:FLASH/spif.c  ****   printf("\r\n========== SPI Flash Test Start ==========\r\n");
 3344              		.loc 1 1328 3 view .LVU886
 3345 0008 5248     		ldr	r0, .L201
 3346              	.LVL310:
 3347              		.loc 1 1328 3 is_stmt 0 view .LVU887
 3348 000a FFF7FEFF 		bl	puts
 3349              	.LVL311:
1329:FLASH/spif.c  ****   
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 89


1330:FLASH/spif.c  ****   // 1. Display Flash information
1331:FLASH/spif.c  ****   printf("\r\n[1] Flash Information:\r\n");
 3350              		.loc 1 1331 3 is_stmt 1 view .LVU888
 3351 000e 5248     		ldr	r0, .L201+4
 3352 0010 FFF7FEFF 		bl	puts
 3353              	.LVL312:
1332:FLASH/spif.c  ****   printf("    Manufacturer: 0x%02X\r\n", Handle->Manufactor);
 3354              		.loc 1 1332 3 view .LVU889
 3355 0014 217A     		ldrb	r1, [r4, #8]	@ zero_extendqisi2
 3356 0016 5148     		ldr	r0, .L201+8
 3357 0018 FFF7FEFF 		bl	printf
 3358              	.LVL313:
1333:FLASH/spif.c  ****   printf("    Capacity: 0x%02X\r\n", Handle->Size);
 3359              		.loc 1 1333 3 view .LVU890
 3360 001c 617A     		ldrb	r1, [r4, #9]	@ zero_extendqisi2
 3361 001e 5048     		ldr	r0, .L201+12
 3362 0020 FFF7FEFF 		bl	printf
 3363              	.LVL314:
1334:FLASH/spif.c  ****   printf("    Page Count: %lu\r\n", Handle->PageCnt);
 3364              		.loc 1 1334 3 view .LVU891
 3365 0024 6169     		ldr	r1, [r4, #20]
 3366 0026 4F48     		ldr	r0, .L201+16
 3367 0028 FFF7FEFF 		bl	printf
 3368              	.LVL315:
1335:FLASH/spif.c  ****   printf("    Sector Count: %lu\r\n", Handle->SectorCnt);
 3369              		.loc 1 1335 3 view .LVU892
 3370 002c A169     		ldr	r1, [r4, #24]
 3371 002e 4E48     		ldr	r0, .L201+20
 3372 0030 FFF7FEFF 		bl	printf
 3373              	.LVL316:
1336:FLASH/spif.c  ****   printf("    Block Count: %lu\r\n", Handle->BlockCnt);
 3374              		.loc 1 1336 3 view .LVU893
 3375 0034 E169     		ldr	r1, [r4, #28]
 3376 0036 4D48     		ldr	r0, .L201+24
 3377 0038 FFF7FEFF 		bl	printf
 3378              	.LVL317:
1337:FLASH/spif.c  ****   
1338:FLASH/spif.c  ****   // 2. Prepare test data
1339:FLASH/spif.c  ****   printf("\r\n[2] Preparing test data...\r\n");
 3379              		.loc 1 1339 3 view .LVU894
 3380 003c 4C48     		ldr	r0, .L201+28
 3381 003e FFF7FEFF 		bl	puts
 3382              	.LVL318:
1340:FLASH/spif.c  ****   for (int i = 0; i < 256; i++)
 3383              		.loc 1 1340 3 view .LVU895
 3384              	.LBB11:
 3385              		.loc 1 1340 8 view .LVU896
 3386              		.loc 1 1340 12 is_stmt 0 view .LVU897
 3387 0042 0023     		movs	r3, #0
 3388              		.loc 1 1340 3 view .LVU898
 3389 0044 02E0     		b	.L178
 3390              	.LVL319:
 3391              	.L179:
1341:FLASH/spif.c  ****   {
1342:FLASH/spif.c  ****     write_buffer[i] = i;
 3392              		.loc 1 1342 5 is_stmt 1 view .LVU899
 3393              		.loc 1 1342 21 is_stmt 0 view .LVU900
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 90


 3394 0046 40AA     		add	r2, sp, #256
 3395 0048 D354     		strb	r3, [r2, r3]
1340:FLASH/spif.c  ****   for (int i = 0; i < 256; i++)
 3396              		.loc 1 1340 29 is_stmt 1 discriminator 3 view .LVU901
 3397 004a 0133     		adds	r3, r3, #1
 3398              	.LVL320:
 3399              	.L178:
1340:FLASH/spif.c  ****   for (int i = 0; i < 256; i++)
 3400              		.loc 1 1340 21 discriminator 1 view .LVU902
 3401 004c FF2B     		cmp	r3, #255
 3402 004e FADD     		ble	.L179
 3403              	.LBE11:
1343:FLASH/spif.c  ****   }
1344:FLASH/spif.c  ****   printf("    Test data prepared (0x00-0xFF)\r\n");
 3404              		.loc 1 1344 3 view .LVU903
 3405 0050 4848     		ldr	r0, .L201+32
 3406 0052 FFF7FEFF 		bl	puts
 3407              	.LVL321:
1345:FLASH/spif.c  ****   
1346:FLASH/spif.c  ****   // 3. Erase sector test
1347:FLASH/spif.c  ****   printf("\r\n[3] Erasing sector %lu...\r\n", test_sector);
 3408              		.loc 1 1347 3 view .LVU904
 3409 0056 0021     		movs	r1, #0
 3410 0058 4748     		ldr	r0, .L201+36
 3411 005a FFF7FEFF 		bl	printf
 3412              	.LVL322:
1348:FLASH/spif.c  ****   if (SPIF_EraseSector(Handle, test_sector))
 3413              		.loc 1 1348 3 view .LVU905
 3414              		.loc 1 1348 7 is_stmt 0 view .LVU906
 3415 005e 0021     		movs	r1, #0
 3416 0060 2046     		mov	r0, r4
 3417 0062 FFF7FEFF 		bl	SPIF_EraseSector
 3418              	.LVL323:
 3419              		.loc 1 1348 6 discriminator 1 view .LVU907
 3420 0066 0546     		mov	r5, r0
 3421 0068 78B3     		cbz	r0, .L180
1349:FLASH/spif.c  ****   {
1350:FLASH/spif.c  ****     printf("    Sector erase successful!\r\n");
 3422              		.loc 1 1350 5 is_stmt 1 view .LVU908
 3423 006a 4448     		ldr	r0, .L201+40
 3424 006c FFF7FEFF 		bl	puts
 3425              	.LVL324:
1351:FLASH/spif.c  ****   }
1352:FLASH/spif.c  ****   else
1353:FLASH/spif.c  ****   {
1354:FLASH/spif.c  ****     printf("    Sector erase failed!\r\n");
1355:FLASH/spif.c  ****     test_result = false;
1356:FLASH/spif.c  ****     goto test_end;
1357:FLASH/spif.c  ****   }
1358:FLASH/spif.c  ****   
1359:FLASH/spif.c  ****   // 4. Write data test
1360:FLASH/spif.c  ****   printf("\r\n[4] Writing data to address 0x%04lX...\r\n", test_address);
 3426              		.loc 1 1360 3 view .LVU909
 3427 0070 0021     		movs	r1, #0
 3428 0072 4348     		ldr	r0, .L201+44
 3429 0074 FFF7FEFF 		bl	printf
 3430              	.LVL325:
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 91


1361:FLASH/spif.c  ****   if (SPIF_WriteAddress(Handle, test_address, write_buffer, 256))
 3431              		.loc 1 1361 3 view .LVU910
 3432              		.loc 1 1361 7 is_stmt 0 view .LVU911
 3433 0078 4FF48073 		mov	r3, #256
 3434 007c 0DEB0302 		add	r2, sp, r3
 3435 0080 0021     		movs	r1, #0
 3436 0082 2046     		mov	r0, r4
 3437 0084 FFF7FEFF 		bl	SPIF_WriteAddress
 3438              	.LVL326:
 3439              		.loc 1 1361 6 discriminator 1 view .LVU912
 3440 0088 0546     		mov	r5, r0
 3441 008a 80B3     		cbz	r0, .L197
1362:FLASH/spif.c  ****   {
1363:FLASH/spif.c  ****     printf("    Data write successful! (256 bytes)\r\n");
 3442              		.loc 1 1363 5 is_stmt 1 view .LVU913
 3443 008c 3D48     		ldr	r0, .L201+48
 3444 008e FFF7FEFF 		bl	puts
 3445              	.LVL327:
1364:FLASH/spif.c  ****   }
1365:FLASH/spif.c  ****   else
1366:FLASH/spif.c  ****   {
1367:FLASH/spif.c  ****     printf("    Data write failed!\r\n");
1368:FLASH/spif.c  ****     test_result = false;
1369:FLASH/spif.c  ****     goto test_end;
1370:FLASH/spif.c  ****   }
1371:FLASH/spif.c  ****   
1372:FLASH/spif.c  ****   // 5. Read data test
1373:FLASH/spif.c  ****   printf("\r\n[5] Reading data from address 0x%04lX...\r\n", test_address);
 3446              		.loc 1 1373 3 view .LVU914
 3447 0092 0021     		movs	r1, #0
 3448 0094 3C48     		ldr	r0, .L201+52
 3449 0096 FFF7FEFF 		bl	printf
 3450              	.LVL328:
1374:FLASH/spif.c  ****   memset(read_buffer, 0, 256);
 3451              		.loc 1 1374 3 view .LVU915
 3452 009a 4FF48075 		mov	r5, #256
 3453 009e 2A46     		mov	r2, r5
 3454 00a0 0021     		movs	r1, #0
 3455 00a2 6846     		mov	r0, sp
 3456 00a4 FFF7FEFF 		bl	memset
 3457              	.LVL329:
1375:FLASH/spif.c  ****   if (SPIF_ReadAddress(Handle, test_address, read_buffer, 256))
 3458              		.loc 1 1375 3 view .LVU916
 3459              		.loc 1 1375 7 is_stmt 0 view .LVU917
 3460 00a8 2B46     		mov	r3, r5
 3461 00aa 6A46     		mov	r2, sp
 3462 00ac 0021     		movs	r1, #0
 3463 00ae 2046     		mov	r0, r4
 3464 00b0 FFF7FEFF 		bl	SPIF_ReadAddress
 3465              	.LVL330:
 3466              		.loc 1 1375 6 discriminator 1 view .LVU918
 3467 00b4 0546     		mov	r5, r0
 3468 00b6 F0B1     		cbz	r0, .L198
1376:FLASH/spif.c  ****   {
1377:FLASH/spif.c  ****     printf("    Data read successful! (256 bytes)\r\n");
 3469              		.loc 1 1377 5 is_stmt 1 view .LVU919
 3470 00b8 3448     		ldr	r0, .L201+56
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 92


 3471 00ba FFF7FEFF 		bl	puts
 3472              	.LVL331:
1378:FLASH/spif.c  ****   }
1379:FLASH/spif.c  ****   else
1380:FLASH/spif.c  ****   {
1381:FLASH/spif.c  ****     printf("    Data read failed!\r\n");
1382:FLASH/spif.c  ****     test_result = false;
1383:FLASH/spif.c  ****     goto test_end;
1384:FLASH/spif.c  ****   }
1385:FLASH/spif.c  ****   
1386:FLASH/spif.c  ****   // 6. Data verification
1387:FLASH/spif.c  ****   printf("\r\n[6] Verifying data...\r\n");
 3473              		.loc 1 1387 3 view .LVU920
 3474 00be 3448     		ldr	r0, .L201+60
 3475 00c0 FFF7FEFF 		bl	puts
 3476              	.LVL332:
1388:FLASH/spif.c  ****   bool verify_ok = true;
 3477              		.loc 1 1388 3 view .LVU921
1389:FLASH/spif.c  ****   for (int i = 0; i < 256; i++)
 3478              		.loc 1 1389 3 view .LVU922
 3479              	.LBB12:
 3480              		.loc 1 1389 8 view .LVU923
 3481              		.loc 1 1389 8 is_stmt 0 view .LVU924
 3482              	.LBE12:
1388:FLASH/spif.c  ****   bool verify_ok = true;
 3483              		.loc 1 1388 8 view .LVU925
 3484 00c4 2946     		mov	r1, r5
 3485              	.LBB13:
 3486              		.loc 1 1389 12 view .LVU926
 3487 00c6 0024     		movs	r4, #0
 3488              	.LVL333:
 3489              		.loc 1 1389 3 view .LVU927
 3490 00c8 1AE0     		b	.L186
 3491              	.LVL334:
 3492              	.L180:
 3493              		.loc 1 1389 3 view .LVU928
 3494              	.LBE13:
1354:FLASH/spif.c  ****     test_result = false;
 3495              		.loc 1 1354 5 is_stmt 1 view .LVU929
 3496 00ca 3248     		ldr	r0, .L201+64
 3497 00cc FFF7FEFF 		bl	puts
 3498              	.LVL335:
1355:FLASH/spif.c  ****     goto test_end;
 3499              		.loc 1 1355 5 view .LVU930
1356:FLASH/spif.c  ****   }
 3500              		.loc 1 1356 5 view .LVU931
 3501              	.L183:
1390:FLASH/spif.c  ****   {
1391:FLASH/spif.c  ****     if (read_buffer[i] != write_buffer[i])
1392:FLASH/spif.c  ****     {
1393:FLASH/spif.c  ****       printf("    Verification failed! Address[%d]: Written=0x%02X, Read=0x%02X\r\n", 
1394:FLASH/spif.c  ****               i, write_buffer[i], read_buffer[i]);
1395:FLASH/spif.c  ****       verify_ok = false;
1396:FLASH/spif.c  ****       test_result = false;
1397:FLASH/spif.c  ****     }
1398:FLASH/spif.c  ****   }
1399:FLASH/spif.c  ****   
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 93


1400:FLASH/spif.c  ****   if (verify_ok)
1401:FLASH/spif.c  ****   {
1402:FLASH/spif.c  ****     printf("    Data verification successful! All data matched!\r\n");
1403:FLASH/spif.c  ****   }
1404:FLASH/spif.c  ****   
1405:FLASH/spif.c  ****   // 7. Display first 16 bytes of data as sample
1406:FLASH/spif.c  ****   printf("\r\n[7] Read data sample (first 16 bytes):\r\n    ");
1407:FLASH/spif.c  ****   for (int i = 0; i < 16; i++)
1408:FLASH/spif.c  ****   {
1409:FLASH/spif.c  ****     printf("0x%02X ", read_buffer[i]);
1410:FLASH/spif.c  ****   }
1411:FLASH/spif.c  ****   printf("\r\n");
1412:FLASH/spif.c  ****   
1413:FLASH/spif.c  **** test_end:
1414:FLASH/spif.c  ****   // Test result summary
1415:FLASH/spif.c  ****   printf("\r\n========== Test Result ==========\r\n");
 3502              		.loc 1 1415 3 view .LVU932
 3503 00d0 3148     		ldr	r0, .L201+68
 3504 00d2 FFF7FEFF 		bl	puts
 3505              	.LVL336:
1416:FLASH/spif.c  ****   if (test_result)
 3506              		.loc 1 1416 3 view .LVU933
 3507              		.loc 1 1416 6 is_stmt 0 view .LVU934
 3508 00d6 002D     		cmp	r5, #0
 3509 00d8 37D0     		beq	.L192
1417:FLASH/spif.c  ****   {
1418:FLASH/spif.c  ****     printf(">>> Flash test PASSED! <<<\r\n");
 3510              		.loc 1 1418 5 is_stmt 1 view .LVU935
 3511 00da 3048     		ldr	r0, .L201+72
 3512 00dc FFF7FEFF 		bl	puts
 3513              	.LVL337:
 3514              	.L193:
1419:FLASH/spif.c  ****   }
1420:FLASH/spif.c  ****   else
1421:FLASH/spif.c  ****   {
1422:FLASH/spif.c  ****     printf(">>> Flash test FAILED! <<<\r\n");
1423:FLASH/spif.c  ****   }
1424:FLASH/spif.c  ****   printf("================================\r\n\r\n");
 3515              		.loc 1 1424 3 view .LVU936
 3516 00e0 2F48     		ldr	r0, .L201+76
 3517 00e2 FFF7FEFF 		bl	puts
 3518              	.LVL338:
1425:FLASH/spif.c  ****   
1426:FLASH/spif.c  ****   return test_result;
 3519              		.loc 1 1426 3 view .LVU937
1427:FLASH/spif.c  **** }...
 3520              		.loc 1 1427 1 is_stmt 0 view .LVU938
 3521 00e6 2846     		mov	r0, r5
 3522 00e8 0DF5017D 		add	sp, sp, #516
 3523              	.LCFI87:
 3524              		.cfi_remember_state
 3525              		.cfi_def_cfa_offset 12
 3526              		@ sp needed
 3527 00ec 30BD     		pop	{r4, r5, pc}
 3528              	.LVL339:
 3529              	.L197:
 3530              	.LCFI88:
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 94


 3531              		.cfi_restore_state
1367:FLASH/spif.c  ****     printf("    Data write failed!\r\n");
 3532              		.loc 1 1367 5 is_stmt 1 view .LVU939
 3533 00ee 2D48     		ldr	r0, .L201+80
 3534 00f0 FFF7FEFF 		bl	puts
 3535              	.LVL340:
1368:FLASH/spif.c  ****     test_result = false;
 3536              		.loc 1 1368 5 view .LVU940
1369:FLASH/spif.c  ****     goto test_end;
 3537              		.loc 1 1369 5 view .LVU941
 3538 00f4 ECE7     		b	.L183
 3539              	.LVL341:
 3540              	.L198:
1381:FLASH/spif.c  ****     printf("    Data read failed!\r\n");
 3541              		.loc 1 1381 5 view .LVU942
 3542 00f6 2C48     		ldr	r0, .L201+84
 3543 00f8 FFF7FEFF 		bl	puts
 3544              	.LVL342:
1382:FLASH/spif.c  ****     test_result = false;
 3545              		.loc 1 1382 5 view .LVU943
1383:FLASH/spif.c  ****     goto test_end;
 3546              		.loc 1 1383 5 view .LVU944
 3547 00fc E8E7     		b	.L183
 3548              	.LVL343:
 3549              	.L187:
 3550              	.LBB14:
1389:FLASH/spif.c  ****   for (int i = 0; i < 256; i++)
 3551              		.loc 1 1389 29 discriminator 2 view .LVU945
 3552 00fe 0134     		adds	r4, r4, #1
 3553              	.LVL344:
 3554              	.L186:
1389:FLASH/spif.c  ****   for (int i = 0; i < 256; i++)
 3555              		.loc 1 1389 21 discriminator 1 view .LVU946
 3556 0100 FF2C     		cmp	r4, #255
 3557 0102 0CDC     		bgt	.L199
1391:FLASH/spif.c  ****     if (read_buffer[i] != write_buffer[i])
 3558              		.loc 1 1391 5 view .LVU947
1391:FLASH/spif.c  ****     if (read_buffer[i] != write_buffer[i])
 3559              		.loc 1 1391 20 is_stmt 0 view .LVU948
 3560 0104 1DF80430 		ldrb	r3, [sp, r4]	@ zero_extendqisi2
1391:FLASH/spif.c  ****     if (read_buffer[i] != write_buffer[i])
 3561              		.loc 1 1391 39 view .LVU949
 3562 0108 40AA     		add	r2, sp, #256
 3563 010a 125D     		ldrb	r2, [r2, r4]	@ zero_extendqisi2
1391:FLASH/spif.c  ****     if (read_buffer[i] != write_buffer[i])
 3564              		.loc 1 1391 8 view .LVU950
 3565 010c 9342     		cmp	r3, r2
 3566 010e F6D0     		beq	.L187
1393:FLASH/spif.c  ****       printf("    Verification failed! Address[%d]: Written=0x%02X, Read=0x%02X\r\n", 
 3567              		.loc 1 1393 7 is_stmt 1 view .LVU951
 3568 0110 2146     		mov	r1, r4
 3569              	.LVL345:
1393:FLASH/spif.c  ****       printf("    Verification failed! Address[%d]: Written=0x%02X, Read=0x%02X\r\n", 
 3570              		.loc 1 1393 7 is_stmt 0 view .LVU952
 3571 0112 2648     		ldr	r0, .L201+88
 3572 0114 FFF7FEFF 		bl	printf
 3573              	.LVL346:
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 95


1395:FLASH/spif.c  ****       verify_ok = false;
 3574              		.loc 1 1395 7 is_stmt 1 view .LVU953
1396:FLASH/spif.c  ****       test_result = false;
 3575              		.loc 1 1396 7 view .LVU954
1395:FLASH/spif.c  ****       verify_ok = false;
 3576              		.loc 1 1395 17 is_stmt 0 view .LVU955
 3577 0118 0021     		movs	r1, #0
1396:FLASH/spif.c  ****       test_result = false;
 3578              		.loc 1 1396 19 view .LVU956
 3579 011a 0D46     		mov	r5, r1
 3580 011c EFE7     		b	.L187
 3581              	.LVL347:
 3582              	.L199:
1396:FLASH/spif.c  ****       test_result = false;
 3583              		.loc 1 1396 19 view .LVU957
 3584              	.LBE14:
1400:FLASH/spif.c  ****   if (verify_ok)
 3585              		.loc 1 1400 3 is_stmt 1 view .LVU958
1400:FLASH/spif.c  ****   if (verify_ok)
 3586              		.loc 1 1400 6 is_stmt 0 view .LVU959
 3587 011e 21B9     		cbnz	r1, .L200
 3588              	.LVL348:
 3589              	.L189:
1406:FLASH/spif.c  ****   printf("\r\n[7] Read data sample (first 16 bytes):\r\n    ");
 3590              		.loc 1 1406 3 is_stmt 1 view .LVU960
 3591 0120 2348     		ldr	r0, .L201+92
 3592 0122 FFF7FEFF 		bl	printf
 3593              	.LVL349:
1407:FLASH/spif.c  ****   for (int i = 0; i < 16; i++)
 3594              		.loc 1 1407 3 view .LVU961
 3595              	.LBB15:
1407:FLASH/spif.c  ****   for (int i = 0; i < 16; i++)
 3596              		.loc 1 1407 8 view .LVU962
1407:FLASH/spif.c  ****   for (int i = 0; i < 16; i++)
 3597              		.loc 1 1407 12 is_stmt 0 view .LVU963
 3598 0126 0024     		movs	r4, #0
 3599              	.LVL350:
1407:FLASH/spif.c  ****   for (int i = 0; i < 16; i++)
 3600              		.loc 1 1407 3 view .LVU964
 3601 0128 09E0     		b	.L190
 3602              	.LVL351:
 3603              	.L200:
1407:FLASH/spif.c  ****   for (int i = 0; i < 16; i++)
 3604              		.loc 1 1407 3 view .LVU965
 3605              	.LBE15:
1402:FLASH/spif.c  ****     printf("    Data verification successful! All data matched!\r\n");
 3606              		.loc 1 1402 5 is_stmt 1 view .LVU966
 3607 012a 2248     		ldr	r0, .L201+96
 3608 012c FFF7FEFF 		bl	puts
 3609              	.LVL352:
1402:FLASH/spif.c  ****     printf("    Data verification successful! All data matched!\r\n");
 3610              		.loc 1 1402 5 is_stmt 0 view .LVU967
 3611 0130 F6E7     		b	.L189
 3612              	.LVL353:
 3613              	.L191:
 3614              	.LBB16:
1409:FLASH/spif.c  ****     printf("0x%02X ", read_buffer[i]);
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 96


 3615              		.loc 1 1409 5 is_stmt 1 view .LVU968
 3616 0132 1DF80410 		ldrb	r1, [sp, r4]	@ zero_extendqisi2
 3617 0136 2048     		ldr	r0, .L201+100
 3618 0138 FFF7FEFF 		bl	printf
 3619              	.LVL354:
1407:FLASH/spif.c  ****   for (int i = 0; i < 16; i++)
 3620              		.loc 1 1407 28 discriminator 3 view .LVU969
 3621 013c 0134     		adds	r4, r4, #1
 3622              	.LVL355:
 3623              	.L190:
1407:FLASH/spif.c  ****   for (int i = 0; i < 16; i++)
 3624              		.loc 1 1407 21 discriminator 1 view .LVU970
 3625 013e 0F2C     		cmp	r4, #15
 3626 0140 F7DD     		ble	.L191
 3627              	.LBE16:
1411:FLASH/spif.c  ****   printf("\r\n");
 3628              		.loc 1 1411 3 view .LVU971
 3629 0142 1E48     		ldr	r0, .L201+104
 3630 0144 FFF7FEFF 		bl	puts
 3631              	.LVL356:
 3632 0148 C2E7     		b	.L183
 3633              	.LVL357:
 3634              	.L192:
1422:FLASH/spif.c  ****     printf(">>> Flash test FAILED! <<<\r\n");
 3635              		.loc 1 1422 5 view .LVU972
 3636 014a 1D48     		ldr	r0, .L201+108
 3637 014c FFF7FEFF 		bl	puts
 3638              	.LVL358:
 3639 0150 C6E7     		b	.L193
 3640              	.L202:
 3641 0152 00BF     		.align	2
 3642              	.L201:
 3643 0154 00000000 		.word	.LC0
 3644 0158 30000000 		.word	.LC1
 3645 015c 4C000000 		.word	.LC2
 3646 0160 68000000 		.word	.LC3
 3647 0164 80000000 		.word	.LC4
 3648 0168 98000000 		.word	.LC5
 3649 016c B0000000 		.word	.LC6
 3650 0170 C8000000 		.word	.LC7
 3651 0174 E8000000 		.word	.LC8
 3652 0178 0C010000 		.word	.LC9
 3653 017c 2C010000 		.word	.LC10
 3654 0180 4C010000 		.word	.LC11
 3655 0184 94010000 		.word	.LC13
 3656 0188 BC010000 		.word	.LC14
 3657 018c 04020000 		.word	.LC16
 3658 0190 2C020000 		.word	.LC17
 3659 0194 78010000 		.word	.LC12
 3660 0198 18030000 		.word	.LC24
 3661 019c 40030000 		.word	.LC25
 3662 01a0 78030000 		.word	.LC27
 3663 01a4 EC010000 		.word	.LC15
 3664 01a8 48020000 		.word	.LC18
 3665 01ac 60020000 		.word	.LC19
 3666 01b0 DC020000 		.word	.LC21
 3667 01b4 A4020000 		.word	.LC20
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 97


 3668 01b8 0C030000 		.word	.LC22
 3669 01bc 14030000 		.word	.LC23
 3670 01c0 5C030000 		.word	.LC26
 3671              		.cfi_endproc
 3672              	.LFE188:
 3674              		.text
 3675              	.Letext0:
 3676              		.file 2 "D:/armtoolchain/arm-gnu-toolchain-13.3.rel1-mingw-w64-i686-arm-none-eabi/lib/gcc/arm-none
 3677              		.file 3 "D:/armtoolchain/arm-gnu-toolchain-13.3.rel1-mingw-w64-i686-arm-none-eabi/arm-none-eabi/in
 3678              		.file 4 "D:/armtoolchain/arm-gnu-toolchain-13.3.rel1-mingw-w64-i686-arm-none-eabi/arm-none-eabi/in
 3679              		.file 5 "Drivers/CMSIS/Device/ST/STM32U5xx/Include/stm32u575xx.h"
 3680              		.file 6 "Drivers/STM32U5xx_HAL_Driver/Inc/stm32u5xx_hal_def.h"
 3681              		.file 7 "Drivers/STM32U5xx_HAL_Driver/Inc/stm32u5xx_hal_gpio.h"
 3682              		.file 8 "Drivers/STM32U5xx_HAL_Driver/Inc/stm32u5xx_hal_dma.h"
 3683              		.file 9 "Drivers/STM32U5xx_HAL_Driver/Inc/stm32u5xx_hal_dma_ex.h"
 3684              		.file 10 "Drivers/STM32U5xx_HAL_Driver/Inc/stm32u5xx_hal_spi.h"
 3685              		.file 11 "FLASH/spif.h"
 3686              		.file 12 "D:/armtoolchain/arm-gnu-toolchain-13.3.rel1-mingw-w64-i686-arm-none-eabi/arm-none-eabi/i
 3687              		.file 13 "Drivers/STM32U5xx_HAL_Driver/Inc/stm32u5xx_hal.h"
 3688              		.file 14 "<built-in>"
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 98


DEFINED SYMBOLS
                            *ABS*:00000000 spif.c
C:\usertemp\ccRKfaNB.s:22     .text.SPIF_Delay:00000000 $t
C:\usertemp\ccRKfaNB.s:28     .text.SPIF_Delay:00000000 SPIF_Delay
C:\usertemp\ccRKfaNB.s:50     .text.SPIF_Lock:00000000 $t
C:\usertemp\ccRKfaNB.s:56     .text.SPIF_Lock:00000000 SPIF_Lock
C:\usertemp\ccRKfaNB.s:97     .text.SPIF_UnLock:00000000 $t
C:\usertemp\ccRKfaNB.s:103    .text.SPIF_UnLock:00000000 SPIF_UnLock
C:\usertemp\ccRKfaNB.s:121    .text.SPIF_CsPin:00000000 $t
C:\usertemp\ccRKfaNB.s:127    .text.SPIF_CsPin:00000000 SPIF_CsPin
C:\usertemp\ccRKfaNB.s:174    .text.SPIF_TransmitReceive:00000000 $t
C:\usertemp\ccRKfaNB.s:180    .text.SPIF_TransmitReceive:00000000 SPIF_TransmitReceive
C:\usertemp\ccRKfaNB.s:236    .text.SPIF_Transmit:00000000 $t
C:\usertemp\ccRKfaNB.s:242    .text.SPIF_Transmit:00000000 SPIF_Transmit
C:\usertemp\ccRKfaNB.s:286    .text.SPIF_Receive:00000000 $t
C:\usertemp\ccRKfaNB.s:292    .text.SPIF_Receive:00000000 SPIF_Receive
C:\usertemp\ccRKfaNB.s:336    .text.SPIF_WriteEnable:00000000 $t
C:\usertemp\ccRKfaNB.s:342    .text.SPIF_WriteEnable:00000000 SPIF_WriteEnable
C:\usertemp\ccRKfaNB.s:399    .text.SPIF_WriteDisable:00000000 $t
C:\usertemp\ccRKfaNB.s:405    .text.SPIF_WriteDisable:00000000 SPIF_WriteDisable
C:\usertemp\ccRKfaNB.s:462    .text.SPIF_ReadReg1:00000000 $t
C:\usertemp\ccRKfaNB.s:468    .text.SPIF_ReadReg1:00000000 SPIF_ReadReg1
C:\usertemp\ccRKfaNB.s:539    .text.SPIF_ReadReg2:00000000 $t
C:\usertemp\ccRKfaNB.s:545    .text.SPIF_ReadReg2:00000000 SPIF_ReadReg2
C:\usertemp\ccRKfaNB.s:616    .text.SPIF_ReadReg3:00000000 $t
C:\usertemp\ccRKfaNB.s:622    .text.SPIF_ReadReg3:00000000 SPIF_ReadReg3
C:\usertemp\ccRKfaNB.s:693    .text.SPIF_WriteReg1:00000000 $t
C:\usertemp\ccRKfaNB.s:699    .text.SPIF_WriteReg1:00000000 SPIF_WriteReg1
C:\usertemp\ccRKfaNB.s:811    .text.SPIF_WriteReg2:00000000 $t
C:\usertemp\ccRKfaNB.s:817    .text.SPIF_WriteReg2:00000000 SPIF_WriteReg2
C:\usertemp\ccRKfaNB.s:929    .text.SPIF_WriteReg3:00000000 $t
C:\usertemp\ccRKfaNB.s:935    .text.SPIF_WriteReg3:00000000 SPIF_WriteReg3
C:\usertemp\ccRKfaNB.s:1047   .text.SPIF_WaitForWriting:00000000 $t
C:\usertemp\ccRKfaNB.s:1053   .text.SPIF_WaitForWriting:00000000 SPIF_WaitForWriting
C:\usertemp\ccRKfaNB.s:1118   .text.SPIF_FindChip:00000000 $t
C:\usertemp\ccRKfaNB.s:1124   .text.SPIF_FindChip:00000000 SPIF_FindChip
C:\usertemp\ccRKfaNB.s:1235   .text.SPIF_FindChip:00000084 $d
C:\usertemp\ccRKfaNB.s:1251   .text.SPIF_FindChip:00000094 $t
C:\usertemp\ccRKfaNB.s:1408   .text.SPIF_FindChip:00000124 $d
C:\usertemp\ccRKfaNB.s:1415   .text.SPIF_WriteFn:00000000 $t
C:\usertemp\ccRKfaNB.s:1421   .text.SPIF_WriteFn:00000000 SPIF_WriteFn
C:\usertemp\ccRKfaNB.s:1638   .text.SPIF_ReadFn:00000000 $t
C:\usertemp\ccRKfaNB.s:1644   .text.SPIF_ReadFn:00000000 SPIF_ReadFn
C:\usertemp\ccRKfaNB.s:1813   .text.SPIF_Init:00000000 $t
C:\usertemp\ccRKfaNB.s:1819   .text.SPIF_Init:00000000 SPIF_Init
C:\usertemp\ccRKfaNB.s:1969   .text.SPIF_EraseChip:00000000 $t
C:\usertemp\ccRKfaNB.s:1975   .text.SPIF_EraseChip:00000000 SPIF_EraseChip
C:\usertemp\ccRKfaNB.s:2079   .text.SPIF_EraseSector:00000000 $t
C:\usertemp\ccRKfaNB.s:2085   .text.SPIF_EraseSector:00000000 SPIF_EraseSector
C:\usertemp\ccRKfaNB.s:2265   .text.SPIF_EraseBlock:00000000 $t
C:\usertemp\ccRKfaNB.s:2271   .text.SPIF_EraseBlock:00000000 SPIF_EraseBlock
C:\usertemp\ccRKfaNB.s:2451   .text.SPIF_WriteAddress:00000000 $t
C:\usertemp\ccRKfaNB.s:2457   .text.SPIF_WriteAddress:00000000 SPIF_WriteAddress
C:\usertemp\ccRKfaNB.s:2566   .text.SPIF_WritePage:00000000 $t
C:\usertemp\ccRKfaNB.s:2572   .text.SPIF_WritePage:00000000 SPIF_WritePage
C:\usertemp\ccRKfaNB.s:2628   .text.SPIF_WriteSector:00000000 $t
C:\usertemp\ccRKfaNB.s:2634   .text.SPIF_WriteSector:00000000 SPIF_WriteSector
ARM GAS  C:\usertemp\ccRKfaNB.s 			page 99


C:\usertemp\ccRKfaNB.s:2795   .text.SPIF_WriteBlock:00000000 $t
C:\usertemp\ccRKfaNB.s:2801   .text.SPIF_WriteBlock:00000000 SPIF_WriteBlock
C:\usertemp\ccRKfaNB.s:2962   .text.SPIF_ReadAddress:00000000 $t
C:\usertemp\ccRKfaNB.s:2968   .text.SPIF_ReadAddress:00000000 SPIF_ReadAddress
C:\usertemp\ccRKfaNB.s:3016   .text.SPIF_ReadPage:00000000 $t
C:\usertemp\ccRKfaNB.s:3022   .text.SPIF_ReadPage:00000000 SPIF_ReadPage
C:\usertemp\ccRKfaNB.s:3085   .text.SPIF_ReadSector:00000000 $t
C:\usertemp\ccRKfaNB.s:3091   .text.SPIF_ReadSector:00000000 SPIF_ReadSector
C:\usertemp\ccRKfaNB.s:3154   .text.SPIF_ReadBlock:00000000 $t
C:\usertemp\ccRKfaNB.s:3160   .text.SPIF_ReadBlock:00000000 SPIF_ReadBlock
C:\usertemp\ccRKfaNB.s:3223   .rodata.SPIF_Test.str1.4:00000000 $d
C:\usertemp\ccRKfaNB.s:3314   .text.SPIF_Test:00000000 $t
C:\usertemp\ccRKfaNB.s:3320   .text.SPIF_Test:00000000 SPIF_Test
C:\usertemp\ccRKfaNB.s:3643   .text.SPIF_Test:00000154 $d

UNDEFINED SYMBOLS
HAL_Delay
HAL_GPIO_WritePin
HAL_SPI_TransmitReceive
HAL_SPI_Transmit
HAL_SPI_Receive
HAL_GetTick
memset
puts
printf
